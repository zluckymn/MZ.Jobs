function UploadFiles(e,t,i,n){upCallbackFunc=i,$(e).attr("fileObjId")&&$("#fileObjId").val($(e).attr("fileObjId")),$(e).attr("fileTypeId")&&$("#fileTypeId").val($(e).attr("fileTypeId")),$(e).attr("keyValue")&&$("#keyValue").val($(e).attr("keyValue")),$(e).attr("tableName")&&$("#tableName").val($(e).attr("tableName")),$(e).attr("keyName")&&$("#keyName").val($(e).attr("keyName")),$(e).attr("uploadType")&&$("#uploadType").val($(e).attr("uploadType")),$(e).attr("fileRel_profId")&&"undefined"!=typeof $("#fileRel_profId").val()&&$("#fileRel_profId").val($(e).attr("fileRel_profId")),$(e).attr("fileRel_stageId")&&"undefined"!=typeof $("#fileRel_stageId").val()&&$("#fileRel_stageId").val($(e).attr("fileRel_stageId")),$(e).attr("fileRel_fileCatId")&&"undefined"!=typeof $("#fileRel_fileCatId").val()&&$("#fileRel_fileCatId").val($(e).attr("fileRel_fileCatId"));var s="";void 0!=n?""!=n&&(s="|typeRejectFilter|"+n):""!=mttTypeRejectFilter&&(s="|typeRejectFilter|"+mttTypeRejectFilter),"true"==t?cwf.up("p=multi"+s,SelectFileCallback,e):"false"==t&&cwf.upone("p=multi"+s,SelectFileCallback,e)}function NewUploadFiles(e,t,i,n,s){upCallbackFunc=n,$(e).attr("fileObjId")&&$("#fileObjId").val($(e).attr("fileObjId")),$(e).attr("fileTypeId")&&$("#fileTypeId").val($(e).attr("fileTypeId")),$(e).attr("keyValue")&&$("#keyValue").val($(e).attr("keyValue")),$(e).attr("tableName")&&$("#tableName").val($(e).attr("tableName")),$(e).attr("keyName")&&$("#keyName").val($(e).attr("keyName")),$(e).attr("uploadType")&&$("#uploadType").val($(e).attr("uploadType"));var o="";void 0!=s?""!=s&&(o="|typeRejectFilter|"+s):""!=mttTypeRejectFilter&&(o="|typeRejectFilter|"+mttTypeRejectFilter),"true"==t?cwf.up("p=multi"+o,SelectFileCallback,e):"false"==t&&cwf.upone("p=one|typeFilter|*"+i+o,SelectFileCallback,e)}function UploadFilesWithFilter(e,t,i,n){upCallbackFunc=n,$(e).attr("fileObjId")&&$("#fileObjId").val($(e).attr("fileObjId")),$(e).attr("fileTypeId")&&$("#fileTypeId").val($(e).attr("fileTypeId")),$(e).attr("keyValue")&&$("#keyValue").val($(e).attr("keyValue")),$(e).attr("tableName")&&$("#tableName").val($(e).attr("tableName")),$(e).attr("keyName")&&$("#keyName").val($(e).attr("keyName")),$(e).attr("uploadType")&&$("#uploadType").val($(e).attr("uploadType"));var s="";""!=i?s="|typeRejectFilter|"+i:""!=mttTypeRejectFilter&&(s="|typeRejectFilter|"+mttTypeRejectFilter),"true"==t?cwf.up("p=multi"+s,SelectFileCallback,e):"false"==t&&cwf.upone("p=one"+s,SelectFileCallback,e)}function SelectFileCallback(uuid){var propertyStr="&",fileObjId=$("#fileObjId").val(),fileTypeId=$("#fileTypeId").val(),keyValue=$("#keyValue").val(),tableName=$("#tableName").val(),keyName=$("#keyName").val(),fileRel_profId=$("#fileRel_profId").val(),fileRel_stageId=$("#fileRel_stageId").val(),fileRel_fileCatId=$("#fileRel_fileCatId").val(),uploadType="";$("#uploadType")&&(uploadType=$("#uploadType").val()),$("input[name^='Property_']").each(function(e,t){var i=$(this).attr("name")+"="+$(this).attr("value")+"&";propertyStr+=i});for(var d=cwf.tasks.getData(uuid),cb=$("#CallBack").val(),cbBtn=$("#CallBack"),i=0,len=d.length,str="",o,NewUserFilePath="",splitStr="|H|";i<len;++i)o=d[i],""==NewUserFilePath?NewUserFilePath=o.nativePath:NewUserFilePath+=splitStr+o.nativePath,NewUserFilePath+="|Y|"+o.rootDir;var dataStr="fileObjId="+fileObjId;dataStr+="&fileTypeId="+fileTypeId,dataStr+="&uploadFileList="+encodeURIComponent(NewUserFilePath),dataStr+="&tableName="+tableName,dataStr+="&keyName="+keyName,dataStr+="&keyValue="+keyValue,dataStr+="&uploadType="+uploadType,dataStr+="&fileRel_profId="+fileRel_profId,dataStr+="&fileRel_stageId="+fileRel_stageId,dataStr+="&fileRel_fileCatId="+fileRel_fileCatId,$("input[fileattributes=true]").each(function(){null!=$(this).val()&&(dataStr+="&"+$(this).attr("name")+"="+$(this).val(),$(this).val(null))});var arr;$.ajax({url:"/home/SaveMultipleUploadFiles",type:"post",data:dataStr+propertyStr,dataType:"html",error:function(){alert("添加失败")},success:function(data){var str=data.split("|"),result=eval("("+str[0]+")"),fileIdList="";if(result.success&&str.length>1&&""!=str[1]){var files=eval("("+str[1]+")");cwf.tasks.send(uuid,files,function(){""!=cb&&"undefined"!=typeof cb?cbBtn.click():null!=upCallbackFunc?(upCallbackFunc(),upCallbackFunc=null):window.location.reload()})}}})}function DeleteFiles(e,t,i){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFiles",type:"post",data:{delFileRelIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.msgError,"删除失败"):t?"undefined"!=typeof i?t(i):t():window.location.reload()}})}function DeleteFiles1(e,t){$.ajax({url:"/Home/DeleFiles",type:"post",data:{delFileRelIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.msgError,"删除失败"):t?t():window.location.reload()}})}function DeleteFiles1(e,t,i){$.ajax({url:"/Home/DeleFiles",type:"post",data:{delFileRelIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.msgError,"删除失败"):t?"undefined"!=typeof i?t(i):t():window.location.reload()}})}function DeleteFilesRelation(e,t){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleCaseFileRelations",type:"post",data:{delFileRelIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(i){0==i.Success?alert(i.msgError,"删除失败"):null!=i.FileInfo&&""!=i.FileInfo?DeleteFiles1(e,t):t?t():window.location.reload()}})}function DeleteFilesRelation(e,t,i){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleCaseFileRelations",type:"post",data:{delFileRelIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(n){0==n.Success?alert(n.msgError,"删除失败"):null!=n.FileInfo&&""!=n.FileInfo?DeleteFiles1(e,t,i):t?"undefined"!=typeof i?t(i):t():window.location.reload()}})}function UploadFilesAndSave(e,t){$("#fileObjId").val($(e).attr("fileObjId")),$("#fileTypeId").val($(e).attr("fileTypeId")),$("#keyValue").val($(e).attr("keyValue")),$("#tableName").val($(e).attr("tableName")),$("#keyName").val($(e).attr("keyName")),"true"==t?cwf.up("p=multi",SelectFileCallbackAndSave,e):"false"==t&&cwf.upone("p=multi",SelectFileCallbackAndSave,e)}function SelectFileCallbackAndSave(e){for(var t,i=($("#fileObjId").val(),$("#fileTypeId").val()),n=($("#keyValue").val(),$("#tableName").val(),$("#keyName").val(),cwf.tasks.getData(e)),s=0,o=n.length,a="",r="|H|";s<o;++s)t=n[s],""==a?a=t.nativePath:a+=r+t.nativePath,a+="|Y|"+t.rootDir;$("#uploadFileList").val(a);for(var l="",s=(a.split("|H|"),0);s<n.length;s++){var d="",c="";d=n[s].name,c=n[s].type||"",d=d.replace(c,""),l+="<tr>",l+='<td><div class="tb_con">'+d,l+="</div></td>",l+='<td><div class="tb_con">'+c,l+="</div></td>",l+='<td><div class="tb_con">'+n[s].fileSizeCalc,l+="</div></td>",l+='<td><div class="tb_con">',l+="</div></td>",l+="</tr>"}var h=$(".table01:visible:first");0!=i&&(h=$("table[filetypeid="+i+"]")),h.find("tbody").html(l)}function DeleteFilesAndSave(e,t){var i=$("#delFileRelIds").val();i=i+e+",",$("#delFileRelIds").val(i),$(t).parent().parent().parent().remove()}function DeleteFolderByStructId(e,t){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/home/DeleFolder",type:"post",data:{delstructIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):"function"==typeof t?t():window.location.reload()}})}function DeleteFileByFileId(e,t){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFilesByFileId",type:"post",data:{delFileIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):t?t():window.location.reload()}})}function DeleteFileByFileId(e,t,i){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFilesByFileId",type:"post",data:{delFileIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):t?"undefined"!=typeof i?t(i):t():window.location.reload()}})}function Listdown(){if(0==$("input[name=downList]:checked").length)return alert("请选择需要批量下载的文件!"),!1;var e=[];$("input[name=downList]:checked").each(function(){var t,i;t=$(this).attr("fname"),i=$(this).attr("guid"),fileId=$(this).attr("fileid"),e.push({guid:i,name:t,fileId:fileId})}),e.length&&cwf.downLoadBatchFile(e,"")}function DeleteFileByFileIds(e){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFilesByFileId",type:"post",data:{delFileIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):window.location.reload()}})}function DeleteFileByFileIdsWidthCallBack(e,t){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFilesByFileId",type:"post",data:{delFileIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):"function"==typeof t?t():window.location.reload()}})}function DeleteFileVersionByFileVerIds(e){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFilesByFileVerId",type:"post",data:{delFileIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):window.location.reload()}})}function DeleteFileVersionByFileVerIds(e,t,i){confirm("确定要删除该对象吗？删除后将无法恢复！")&&$.ajax({url:"/Home/DeleFilesByFileVerId",type:"post",data:{delFileIds:e},dataType:"json",error:function(){alert("未知错误，请联系服务器管理员，或者刷新页面重试","保存失败")},success:function(e){0==e.Success?alert(e.Message,"删除失败"):t?"undefined"!=typeof i?t(i):t():window.location.reload()}})}function UploadNewVersionFiles(e,t){$(e).attr("fileId")&&$("#fileId").val($(e).attr("fileId")),upCallbackFunc=t,cwf.upone("p=multi",SelectFileNewVersionCallback,e)}function UploadNewVersionFilesWithFilter(e,t){$(e).attr("fileId")&&$("#fileId").val($(e).attr("fileId")),cwf.upone("p=multi|typeRejectFilter|"+t,SelectFileNewVersionCallback,e)}function UploadNewVersionFilesWithFilterCallback(e,t,i){$(e).attr("fileId")&&$("#fileId").val($(e).attr("fileId")),upCallbackFunc=i,cwf.upone("p=multi|typeRejectFilter|"+t,SelectFileNewVersionCallback,e)}function NewUploadNewVersionFiles(e,t){$(e).attr("fileId")&&$("#fileId").val($(e).attr("fileId")),cwf.upone("p=multi|typeFilter|*"+t,SelectFileNewVersionCallback,e)}function SelectFileNewVersionCallback(uuid){for(var fileId=$("#fileId").val(),d=cwf.tasks.getData(uuid),i=0,len=d.length,str="",o,NewUserFilePath="",splitStr="|H|";i<len;++i)o=d[i],""==NewUserFilePath?NewUserFilePath=o.nativePath:NewUserFilePath+=splitStr+o.nativePath;var dataStr="fileId="+fileId;dataStr+="&uploadFileList="+encodeURIComponent(NewUserFilePath);var arr;$.ajax({url:"/home/SaveNewVersion",type:"post",data:dataStr,dataType:"html",error:function(){alert("添加失败")},success:function(data){var str=data.split("|"),result=eval("("+str[0]+")"),fileIdList="";if(result.success&&str.length>1&&""!=str[1]){var files=eval("("+str[1]+")");cwf.tasks.send(uuid,files,function(){null!=upCallbackFunc?(upCallbackFunc(),upCallbackFunc=null):window.location.reload()})}}})}function UploadFilesNew(e,t,i,n,s,o){upCallbackFunc=n,fileTableId=i,$(e).attr("fileObjId")&&$("#fileObjId").val($(e).attr("fileObjId")),$(e).attr("fileTypeId")&&$("#fileTypeId").val($(e).attr("fileTypeId")),$(e).attr("keyValue")&&$("#keyValue").val($(e).attr("keyValue")),$(e).attr("tableName")&&$("#tableName").val($(e).attr("tableName")),$(e).attr("keyName")&&$("#keyName").val($(e).attr("keyName")),$(e).attr("uploadType")&&$("#uploadType").val($(e).attr("uploadType")),$(e).attr("fileRel_profId")&&"undefined"!=typeof $("#fileRel_profId").val()&&$("#fileRel_profId").val($(e).attr("fileRel_profId")),$(e).attr("fileRel_stageId")&&"undefined"!=typeof $("#fileRel_stageId").val()&&$("#fileRel_stageId").val($(e).attr("fileRel_stageId")),$(e).attr("fileRel_fileCatId")&&"undefined"!=typeof $("#fileRel_fileCatId").val()&&$("#fileRel_fileCatId").val($(e).attr("fileRel_fileCatId"));var a="";""!=mttTypeRejectFilter&&(a="|typeRejectFilter|"+mttTypeRejectFilter),"true"==t?cwf.up("p=multi"+a,SelectFileCallbackNew):"false"==t&&cwf.upone("p=multi"+a,SelectFileCallbackNew)}function UploadExtFilesNew(e,t,i,n,s,o,a){upCallbackFunc=s,fileTableId=i,$(e).attr("fileObjId")&&$("#fileObjId").val($(e).attr("fileObjId")),$(e).attr("fileTypeId")&&$("#fileTypeId").val($(e).attr("fileTypeId")),$(e).attr("keyValue")&&$("#keyValue").val($(e).attr("keyValue")),$(e).attr("tableName")&&$("#tableName").val($(e).attr("tableName")),$(e).attr("keyName")&&$("#keyName").val($(e).attr("keyName")),$(e).attr("uploadType")&&$("#uploadType").val($(e).attr("uploadType")),$(e).attr("fileRel_profId")&&"undefined"!=typeof $("#fileRel_profId").val()&&$("#fileRel_profId").val($(e).attr("fileRel_profId")),$(e).attr("fileRel_stageId")&&"undefined"!=typeof $("#fileRel_stageId").val()&&$("#fileRel_stageId").val($(e).attr("fileRel_stageId")),$(e).attr("fileRel_fileCatId")&&"undefined"!=typeof $("#fileRel_fileCatId").val()&&$("#fileRel_fileCatId").val($(e).attr("fileRel_fileCatId")),"true"==t?cwf.up("p=multi",SelectFileCallbackNew):"false"==t&&cwf.upone("p=one|typeFilter|*"+n,SelectFileCallbackNew)}function SelectFileCallbackNew(e){$("#uploadUUID").val(e),uploadUUID=e;var t="&",i=$("#fileObjId").val(),n=$("#fileTypeId").val(),s=$("#keyValue").val(),o=$("#tableName").val(),a=$("#keyName").val(),r=($("#fileRel_profId").val(),$("#fileRel_stageId").val(),$("#fileRel_fileCatId").val(),"");$("#uploadType")&&(r=$("#uploadType").val()),$("input[name^='Property_']").each(function(e,i){var n=$(this).attr("name")+"="+$(this).attr("value")+"&";t+=n});var l,d=cwf.tasks.getData(e),c=($("#CallBack").val(),$("#CallBack"),0),h=d.length,u="";$("#uploadFileList")&&(u=$("#uploadFileList").val());for(var f="|H|";c<h;++c)l=d[c],FileMathNum=parseInt(1e7*Math.random()),""==u?u=l.nativePath:u+=f+l.nativePath,u+="|N|"+FileMathNum+"|Y|"+l.rootDir,u+="|Y|fileObjId|-|"+i+"|N|fileTypeId|-|"+n+"|N|uploadType|-|"+r+"|N|keyValue|-|"+s+"|N|keyName|-|"+a+"|N|tableName|-|"+o+"|N|isCover|-|No",FileName=d[c].name,FileEXT=d[c].type||"",FilePath=l.nativePath+"|N|"+FileMathNum+"|Y|"+l.rootDir+"|Y|fileObjId|-|"+i+"|N|fileTypeId|-|"+n+"|N|uploadType|-|"+r+"|N|keyValue|-|"+s+"|N|keyName|-|"+a+"|N|tableName|-|"+o+"|N|isCover|-|No",FileName=FileName.replace(FileEXT,""),FileSize=d[c].fileSizeCalc,addFileTr();$("#uploadFileList")&&$("#uploadFileList").val(u),fileHint(4,h),null!=upCallbackFunc&&(upCallbackFunc(),upCallbackFunc=null)}function addFileTr(){var e="";e+='<tr><td><div class="tb_con"><input type="checkbox" fileName="fileInputNo" fileRelId="'+FilePath+'"/></div></td>',e+='<td><div class="tb_con"> <a href="javascript:void(0);" class="gray" onclick=\'alertRead()\'>',e+='<img src="/Content/images/icon/error.png" style="visibility: inherit" />',e+=FileName,e+='</a></div></td><td align="center"><div class="tb_con">',e+=FileEXT,e+='</div></td> <td align="center"><div class="tb_con">',e+=FileSize,e+='</div></td><td align="center"><div class="tb_con">',fileTableId.indexOf("cover")!=-1&&(e+='<input type="radio" name="imgFirst" value="1" fileTableId="'+fileTableId+'" onclick=\'SetCoverImageNew("'+FileMathNum+"\",this);' />设置封面图 &nbsp;"),e+=' <a href="javascript:void(0);" class="gray" onclick=\'alertRead()\'>阅读</a> ',e+='<a href="javascript:void(0);"class="gray" onclick=\'alertDown();\'> 下载</a>',e+=' <a href="javascript:void(0);" class="red" Num="'+FileMathNum+'" path="'+FilePath+"\" onclick='delFileRow(this)'>删除</a>",e+="</div></td></tr>",$("#"+fileTableId).find("tr:last").after(e)}function alertDown(){alert("请先保存后再下载!")}function alertRead(){alert("请先保存后再阅读!")}function delFileRow(e){$(e).parent().parent().parent().remove();var t=$(e).attr("path"),i=$("#uploadFileList").val();i.indexOf(t+"|H|")!=-1?$("#uploadFileList").val(i.replace(t+"|H|","")):i.indexOf(t)!=-1&&$("#uploadFileList").val(i.replace(t,""))}function SetCoverImageNew(e,t){var i=($(t).attr("fileTableId"),$(t).parent().find("a[Num="+e+"]").attr("path")),n="undefined"==typeof $.fn.prop?$(t).attr("checked"):$(t).prop("checked");1==n?($(t).parent().find("a[Num="+e+"]").attr("path",i.replace("isCover|-|No","isCover|-|Yes")),$(t).parent().parent().parent().find("input[fileName=fileInputNo]").attr("fileRelId",i.replace("isCover|-|No","isCover|-|Yes")),$("#uploadFileList").val().indexOf(i)!=-1&&$("#uploadFileList").val($("#uploadFileList").val().replace(i,$(t).parent().find("a[Num="+e+"]").attr("path"))),$.tmsg("m_jfw","设置成功！",{infotype:1})):0==n&&($(t).parent().find("a[Num="+e+"]").attr("path",i.replace("isCover|-|Yes","isCover|-|No")),$(t).parent().parent().parent().find("input[fileName=fileInputNo]").attr("fileRelId",i.replace("isCover|-|Yes","isCover|-|No")),$("#uploadFileList").val().indexOf(i)!=-1&&$("#uploadFileList").val($("#uploadFileList").val().replace(i,$(t).parent().find("a[Num="+e+"]").attr("path"))),$.tmsg("m_jfw","设置成功！",{infotype:1}))}function fileHint(e,t){if("undefined"!=typeof $("#filehint").attr("filenum")){$("#filehint").html("");var i=$("#filehint").attr("filenum"),n=$("#filehint").attr("uploadnum"),s=parseInt(i),o=parseInt(n);1==e?o-=t:2==e?s+=t:3==e?s-=t:4==e&&(o+=t),0!=o&&0!=s?$("#filehint").html("已选择：<span class='filenum red'>"+o+"</span>个文件上传、<span class='filenum red'>"+s+"</span>个文件删除，请点击保存！"):0!=o&&0==s?$("#filehint").html("已选择:<span class='filenum red'>"+o+"</span>个文件上传，请点击保存！！"):0==o&&0!=s&&$("#filehint").html("已选择:<span class='filenum red'>"+s+"</span>个文件删除，请点击保存！"),$("#filehint").attr("filenum",s),$("#filehint").attr("uploadnum",o)}}function delTr(e,t){if(0==t){$(e).parent().parent().parent().remove();var i=$(e).attr("path"),n=$("#uploadFileList").val();n.indexOf(i+"|H|")!=-1?$("#uploadFileList").val(n.replace(i+"|H|","")):n.indexOf(i)!=-1&&$("#uploadFileList").val(n.replace(i,"")),fileHint(1,1)}else{var s=$(e).parent();s.parent().addClass("preDel"),s.find("a").last().remove(),s.find("input").attr("disabled","disabled").removeAttr("checked"),s.append("<a class='link removeDel' href='javascript:void(0);' onclick='cancelDelTr("+t+",this);'>撤销删除</a>");var o=$("#delFileRelIds").val();""==o?$("#delFileRelIds").val(t):$("#delFileRelIds").val(o+","+t),fileHint(2,1)}}function cancelDelTr(e,t){var i=$("#delFileRelIds").val();i=","+i+",",i.indexOf(","+e+",")!=-1&&(i=i.replace(","+e+",",",")),i=i.substr(1,i.length-1),$("#delFileRelIds").val(i);var n=$(t).parent();$(t).parent().parent().removeClass("preDel"),$(t).parent().html(),$(t).parent().find("a").last().remove(),n.append("<a class='link' href='javascript:void(0);' onclick='delTr(this,"+e+");'>删除</a>"),n.find("input").removeAttr("disabled"),fileHint(3,1)}function UploadFilesWithFilterAndStruct(o,isMultiply,ext,structId,upCallbackFunc){function SelectFileCallback(uuid){var propertyStr="&";$("input[name^='Property_']").each(function(e,t){var i=$(this).attr("name")+"="+$(this).attr("value")+"&";propertyStr+=i});for(var d=cwf.tasks.getData(uuid),cb=$("#CallBack").val(),cbBtn=$("#CallBack"),i=0,len=d.length,str="",o,NewUserFilePath="",splitStr="|H|";i<len;++i)o=d[i],""==NewUserFilePath?NewUserFilePath=o.nativePath:NewUserFilePath+=splitStr+o.nativePath,NewUserFilePath+="|Y|"+o.rootDir;dataArr.push("&uploadType=0"),dataArr.push("&uploadFileList="+encodeURIComponent(NewUserFilePath)),dataArr.push("&structId="+structId);var dataStr=dataArr.join("");$("input[fileattributes=true]").each(function(){null!=$(this).val()&&(dataStr+="&"+$(this).attr("name")+"="+$(this).val(),$(this).val(null))});var arr;$.ajax({url:"/home/SaveMultipleUploadFiles",type:"post",data:dataStr+propertyStr,dataType:"html",error:function(){alert("添加失败")},success:function(data){var str=data.split("|"),result=eval("("+str[0]+")"),fileIdList="";if(result.success&&str.length>1&&""!=str[1]){var files=eval("("+str[1]+")");cwf.tasks.send(uuid,files,function(){""!=cb&&"undefined"!=typeof cb?cbBtn.click():null!=upCallbackFunc?(upCallbackFunc(),upCallbackFunc=null):window.location.reload()})}}})}var dataArr=[];$(o).attr("fileObjId")&&dataArr.push("fileObjId="+$(o).attr("fileObjId")),$(o).attr("fileTypeId")&&dataArr.push("&fileTypeId="+$(o).attr("fileTypeId")),$(o).attr("keyValue")&&dataArr.push("&keyValue="+$(o).attr("keyValue")),$(o).attr("tableName")&&dataArr.push("&tableName="+$(o).attr("tableName")),$(o).attr("keyName")&&dataArr.push("&keyName="+$(o).attr("keyName")),$("#fileRel_profId").length>0&&dataArr.push("&fileRel_profId="+$("#fileRel_profId").val()),$("#fileRel_stageId").length>0&&dataArr.push("&fileRel_stageId="+$("#fileRel_stageId").val()),$("#fileRel_fileCatId").length>0&&dataArr.push("&fileRel_fileCatId="+$("#fileRel_fileCatId").val()),"true"==isMultiply?cwf.up("p=multi"+ext,SelectFileCallback,o):"false"==isMultiply&&cwf.upone("p=one"+ext,SelectFileCallback,o)}function DownLoadPackFile(structId){$.ajax({url:"/Home/GetFilePackage/?structId="+structId,type:"post",cache:!1,dataType:"html",error:function(){hiAlert("未知错误，请联系服务器管理员，或者刷新页面重试","数据读取失败")},success:function(data){if(0==data.Success)hiAlert(data.msgError,"数据读取失败");else{var RetStr=data.split("|")[1];if(""!=RetStr){RetStr=eval("("+RetStr+")");var downlist=[],filesCount=0;$(RetStr).each(function(){downlist.push({guid:this.guid,name:this.filePath+this.name+this.ext}),filesCount++}),downlist.length?(cwf.dl(downlist),$.tmsg("m_jfw","下载文件,共"+filesCount+"个文件。")):$.tmsg("m_jfw","没有文件需要下载。")}else $.tmsg("m_jfw","没有文件需要下载。")}}})}function box(e,t){return $.box.showbox(e,$.extend({},{one:!0},t))}function findObjByBoxid(e){if(e){var t=!1,i=ppHelper.cacheData.arrPPBoxs;e=ppHelper.getBoxid(e);for(var n=0;n<i.length;n++)if(i[n].fbox.attr("id").indexOf(e)!=-1){t=i[n];break}return t}}function closeById(e){if(e){var t,i=ppHelper.cacheData.arrPPBoxs;if(t=ppHelper.getBoxid(e)){for(e=0;e<i.length;e++)if(i[e].fbox.attr("id").indexOf(t)!=-1){i[e].destroy();break}}else HideBox(e)}}function setCenterAfterLoad(e){(e=findObjByBoxid(e))&&e.fbox.center()}function JSONToString(e){function t(e){switch(typeof e){case"undefined":return i(e);case"boolean":return i(e);case"number":return i(e);case"string":return'"'+e+'"';case"function":return e=e.toString(),e.search(/\[native\s+code\]/i)==-1?e:(e=e.match(/function\s+(.+)\(/i))?e[1]:i(void 0);case"object":if(null===e)return i(e);switch(e.constructor){case Object:var n,s="";for(n in e)e.hasOwnProperty(n)&&(s+='"'+n+'":'+t(e[n])+",");return"{"+s.replace(/,$/i,"")+"}";case Array:s="";for(n in e)e.hasOwnProperty(n)&&(s+=t(e[n])+",");return"["+s.replace(/,$/i,"")+"]";case RegExp:return i(e);case Function:return e.toString();case String:return'"'+e.valueOf()+'"';case Number:return i(e.valueOf());case Boolean:return i(e.valueOf())}}}if(e.constructor===Object){var i=String;return t(e)}return e}function stringToJSON(b){return eval("("+b+")")}function JTS(e){var t=[],i=function(e){return"object"==typeof e&&null!=e?JsonToStr(e):/^(string|number)$/.test(typeof e)?"'"+e+"'":e};for(var n in e)t.push("'"+n+"':"+i(e[n]));return"{"+t.join(",")+"}"}function InitCheckNum(){$(".checkNum").keypress(function(e){var t=e.which;return 46==t||t>=48&&t<=57||8==t}).focus(function(){this.style.imeMode="disabled"})}function InitMoney(){$(".money").keypress(function(e){var t=e.which;return 46==t||t>=48&&t<=57||8==t}).focus(function(){this.style.imeMode="disabled"}),$(".money").focus(function(){var e=$(this).val();""!=e&&(e=numeral().unformat(e),$(this).val(e));var t=$(this)[0].createTextRange();t.select(),t.collapse(!1)}),$(".money").blur(function(){var e=$(this).val();e=""!=e?moneyFormat(e):"",$(this).val(e)})}function InitAreaNum(){$(".areaNum").keypress(function(e){var t=e.which;return 46==t||t>=48&&t<=57||8==t}).focus(function(){this.style.imeMode="disabled"}),$(".areaNum").focus(function(){var e=$(this).val();""!=e&&(e=numeral().unformat(e),0==e&&(e=""),$(this).val(e));var t=$(this)[0].createTextRange();t.collapse(!1),t.select()}),$(".areaNum").blur(function(){var e=$(this).val();e=0!=e?areaFormat(e):"",$(this).val(e)})}function areaFormat(e){return numeral(e).format("0,0.00")}function moneyFormat(e){return numeral(e).format("0,0.00")}function show_todoList(){var e=$("#todoList").width();24==e?$("#todoList").width(326):$("#todoList").width(24)}function CustomDeleteItem(e,t,i,n){var s=confirm("确定要删除该对象吗？删除后将无法恢复");if(s){var o="";$(e).attr("querystr")&&(o=$(e).attr("tbname"));var a="";$(e).attr("querystr")&&(a=$(e).attr("querystr")),$.ajax({url:"/Home/DelePostInfo/",type:"post",data:{tbName:o,queryStr:a},dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(e){0==e.Success?alert(e.Message):t?t(i,n):window.location.reload()}})}}function CommonDelByPK(e,t,i,n,s){if(confirm("确定要删除该对象吗？删除后将无法恢复!")){var o={tbName:e,keyVal:t,relTbName:i,relKey:n};$.post("/Home/CommonDelByPK",o,function(e){e.Success?s?s():window.location.reload():$.tmsg("m_jfw",e.msg,{infotype:2})})}}function CommonDel(e,t,i,n,s){confirm("确定要删除该对象吗？删除后将无法恢复!")&&$.post("/Home/CommonDel",{tbName:e,keyName:t,keyValue:i,relInfos:n,func:s},function(e){e.Success?s?s(e):($.tmsg("m_jfw","数据删除成功，页面将刷新！",{infotype:1}),window.setTimeout("window.location.reload()",1e3)):$.tmsg("m_jfw",e.msg,{infotype:2})})}function CustomDeleteItemStr(e,t,i,n){var s=confirm("确定要删除该对象吗？删除后将无法恢复");s&&$.ajax({url:"/Home/DelePostInfo/",type:"post",data:{tbName:e,queryStr:t},dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(e){0==e.Success?alert(e.Message):($.tmsg("m_jfw","删除成功！",{infotype:1}),i?i(n):window.location.reload())}})}function BatchCustomDeleteItem(e,t,i,n,s){var o="";if($("."+t).each(function(){"checked"!=$(this).find("input[type=checkbox]").attr("checked")&&1!=$(this).find("input[type=checkbox]").attr("checked")||(o+=i?$(this).attr("id").replace(i,"")+",":$(this).attr("id")+",")}),""==o)return void alert("请先选择要删除的对象！");var a=confirm("确定要删除该对象吗？删除后将无法恢复");a&&$.ajax({url:"/Home/BatchDeleteByPrimaryKey/",type:"post",data:{tbName:e,ids:o},dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(e){0==e.Success?alert(e.Message):($.tmsg("m_jfw","删除成功！",{infotype:1}),n?n(s):window.location.reload())}})}function MoveItemList(e,t,i,n,s){var o=confirm("确定要批量移动吗？");if(o){var a="";$("."+t).each(function(){1==$(this).find("input[type=checkbox]").attr("checked")&&(a+=i?$(this).attr("id").replace(i,"")+",":$(this).attr("id")+",")}),$.ajax({url:"/Home/BatchDeleteByPrimaryKey/",type:"post",data:{tbName:e,ids:a},dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(e){0==e.Success?alert(e.Message):($.tmsg("m_jfw","移动成功！",{infotype:1}),n?n(s):window.location.reload())}})}}function CustomSaveForm(formId,func){var formdata;formdata="object"==typeof formId?formId.serialize():$("#"+formId).serialize(),$.ajax({url:"/Home/SavePostInfo",type:"post",data:formdata,dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(data){if(0==data.Success)alert(data.Message);else{var str=data.FileInfo.split("|"),result=eval("("+str[0]+")");if(1==result.success){var uuid=uploadUUID,fileIdList="";if(str.length>1&&""!=str[1]){var files=eval("("+str[1]+")");cwf.tasks.send(uuid,files,function(){func?func(data):(alert("保存成功"),window.location.reload())})}}else func?func(data):(alert("保存成功"),window.location.reload())}}})}function BatchSaveData(e,t,i){$.ajax({url:"/Home/BatchSaveDir?tbName="+e,type:"post",data:"dataSource="+t,dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(e){0==e.Success?alert(e.Message):i?i(e):(alert("保存成功"),window.location.reload())}})}function GotoResultViewPage(e,t){switch(t){case"1":linkUrl="/StandardResult/UnitView/";break;case"2":linkUrl="/StandardResult/ResidentialStandardView/";break;case"3":linkUrl="/StandardResult/VillaUnitView/";break;case"4":linkUrl="/StandardResult/VillaAtomView/";break;case"5":linkUrl="/StandardResult/UnitView/";break;case"6":linkUrl="/StandardResult/FineDecorationView/";break;case"7":linkUrl="/StandardResult/FacadeView/";break;case"8":linkUrl="/StandardResult/DemonstrationAreaView/";break;case"9":linkUrl="/StandardResult/LandscapeView/";break;case"10":linkUrl="/StandardResult/PEMView/";break;case"11":linkUrl="/StandardResult/PublicPartsView/";break;case"12":linkUrl="/StandardResult/EquipmentView/";break;case"13":linkUrl="/StandardResult/GreenLandscapeView/"}return linkUrl+="?retId="+e+"&r="+Math.random()}function GotoResultEditPage(e,t,i,n){switch(t){case"1":linkUrl="/StandardResult/UnitEdit/";break;case"2":linkUrl="/StandardResult/ResidentialStandardEdit/";break;case"3":linkUrl="/StandardResult/VillaUnitEdit/";break;case"4":linkUrl="/StandardResult/VillaAtomEdit/";break;case"5":linkUrl="/StandardResult/UnitEdit/";break;case"6":linkUrl="/StandardResult/FineDecorationEdit/";break;case"7":linkUrl="/StandardResult/FacadeEdit/";break;case"8":linkUrl="/StandardResult/DemonstrationAreaEdit/";break;case"9":case"13":case"14":case"15":case"16":case"17":case"18":case"19":case"20":case"21":case"22":linkUrl="/StandardResult/LandscapeEdit/";break;case"10":linkUrl="/StandardResult/PEMEdit/";break;case"11":linkUrl="/StandardResult/PublicPartsEdit/";break;case"12":case"23":case"24":case"25":case"26":case"27":case"28":case"29":case"30":case"31":case"32":case"33":case"34":case"35":case"36":case"37":case"38":case"39":case"40":case"41":case"42":case"43":case"44":case"45":case"46":case"47":case"48":case"49":case"50":case"51":linkUrl="/StandardResult/EquipmentEdit/";break;default:linkUrl="/StandardResult/UnitEdit/"}return linkUrl+="?catId="+i+"&retId="+e+"&typeId="+t+"&libId="+n+"&r="+Math.random()}function ChangeUserScore(type,cbFunc){$.ajax({url:"/Home/ChangeUserScore?type="+type,type:"post",data:{},dataType:"json",error:function(e,t,i){console&&console.log&&(console.log("XMLHttpRequest.status:"+e.status),console.log("XMLHttpRequest.readyState:"+e.readyState),console.log("textStatus:"+t),console.log("errorThrown:"+i)),$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(data){0==data.Success?alert(data.Message):"function"==typeof eval(cbFunc)&&cbFunc()}})}function ViewCount(e,t,i){$.ajax({url:"/Home/ViewCount?tb="+e+"&keyName="+t+"&keyValue="+i,type:"post",dataType:"json",error:function(){$.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(e){0==e.Success&&alert(e.Message)}})}function changePassword(){var e="/Account/ChangePassword";box(e,{boxid:"_changepassword",contentType:"ajax",width:250,submit_cb:function(t){var i=t.fbox.find("form"),n=i.find("#newPassword").val(),s=i.find("#verify").val();if(n!=s)return alert("输入的两次新密码不一样！"),!1;var o=i.serialize();$.ajax({type:"post",url:e,data:o,async:!1,success:function(e){e.success?$.tmsg("m_jfw",e.msg,{infotype:1}):$.tmsg("m_jfw",e.msg,{infotype:2})}})}})}function LockTableHeadXC(){this.hasThead=!0}function LockTableHeadZHHY(){}function showUserList(e,t,i){$.post(e,t,function(e){$("#"+i).html("");var t="";$.each(e,function(e,i){var n=!1;$("#selAdd option").each(function(){if($(this).val()==i.id)return n=!0,!1}),n||(t+="<option value='"+i.id+"'>"+i.name+"</option>")}),""!=t&&$("#selUser").html(t),$("#msg_pwtselUser")[0]&&$("#msg_pwtselUser").hide()},"json")}function GetUserList(e,t,i){var n="/Home/FindUsers?_t="+(new Date).getTime(),s={id:t,type:i};showUserList(n,s,"selUser")}function GetGroupUsers(e){var t="/Home/FindUsers",i={id:e,type:"group"};showUserList(t,i,"selAdd")}function Addusername(e){var t="/Home/FindUsersNameById",i={id:e};$.post(t,i,function(t){return""!=t&&void $.each(t,function(t,i){addtoUserList(e,i.name)})},"json")}function delbmByid(e,t){var i=$("#"+t).find("option:selected");0==i.length?alert("请选择要删除的项！"):i.remove()}function btnSearchUserFunc(){var e=$("#txtSearchUser").attr("value"),t="/Home/SearchUsers",i=findObjByBoxid("pwtselUser"),n={key:e};$.tmsg("msg_pwtselUser","查询中...请稍候",{el:i.fbox,time_out:3e3,infotype:3}),showUserList(t,n,"selUser");
}function txtSearchUserFunc(){"13"==event.keyCode&&($("#btnSearchUser").click(),$(this).focus())}function btnTreeSearchFunc(){var e=$("input[name=radType][checked]").val(),t=$("#txttree").attr("value");return""!=$.trim(t)&&void(window.ifrm.location.href="/HumanResource/SearchTree?type="+e+"&key="+escape(t))}function txtTreeKeyPressFunc(){"13"==event.keyCode&&($("#btnTreeSearch").click(),$(this).focus())}function adds(){if($("#selUser option:selected").length>0){if(isSignal){if($("#selUser option:selected").length>1)return void("function"==typeof showInfoBar?showInfoBar("对不起，只能添加一条记录！"):alert("对不起，只能添加一条记录！"));if($("#selAdd option").length>0)return void("function"==typeof showInfoBar?showInfoBar("对不起，已经添加了一条记录，不能继续添加！"):alert("对不起，已经添加了一条记录，不能继续添加！"))}$("#selUser option:selected").each(function(){$("#selAdd").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>"),$(this).remove(),SetAddedUser($(this).val())})}else"function"==typeof showInfoBar?showInfoBar("请选择要添加的记录！"):alert("请选择要添加的记录！")}function dels(){$("#selAdd option:selected").length>0?$("#selAdd option:selected").each(function(){$("#selUser").append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>"),$(this).remove(),SetDeledUser($(this).val())}):"function"==typeof showInfoBar?showInfoBar("请选择要删除的记录！"):alert("请选择要删除的记录！")}function SetAddedUser(e){var t=$("#AddedUsers").attr("value"),i=$("#DeledUsers").attr("value"),n=","+e+",";i.indexOf(n)>=0?(i=i.replace(n,","),$("#DeledUsers").attr("value",i)):(t+=e+",",$("#AddedUsers").attr("value",t))}function SetDeledUser(e){var t=$("#AddedUsers").attr("value"),i=$("#DeledUsers").attr("value"),n=","+e+",";t.indexOf(n)>=0?(t=t.replace(n,","),$("#AddedUsers").attr("value",t)):(i+=e+",",$("#DeledUsers").attr("value",i))}function addKeyboardControlSupport(e,t,i,n,s,o){var a=arguments[0]||window.event,r=a.keyCode;switch(r){case 38:currentListIndex-=1,setCurrentListIndexItemStateToBeOnMouseOver(),ajustScrollPositionAccordingToCurrentListIndex();break;case 40:currentListIndex+=1,setCurrentListIndexItemStateToBeOnMouseOver(),ajustScrollPositionAccordingToCurrentListIndex();break;case 13:confirmTheItemSelection(thisAObject,e,t,i,!0);break;default:showSearchTaskPeopleList(e,t,i,n,s,!0)}}function setAnItemHoverStyle(e){$(e).addClass("aui-list-item-link-hover")}function removeHoverStyleOfAnItem(e){$(e).removeClass("aui-list-item-link-hover")}function ajustScrollPositionAccordingToCurrentListIndex(){$("div.aui-list").animate({scrollTop:25*currentListIndex-50},"fast")}function setCurrentListIndexItemStateToBeOnMouseOver(){currentListIndex>$("ul.aui-list-section").find("a").length-1&&(currentListIndex-=$("ul.aui-list-section").find("a").length),currentListIndex<0&&(currentListIndex=$("ul.aui-list-section").find("a").length+currentListIndex),removeHoverStyleOfAnItem(thisAObject),thisAObject=$("ul.aui-list-section").find("a").eq(currentListIndex),setAnItemHoverStyle(thisAObject)}function bindOnMouseOverItemStateToBeOnMouseOver(e){$(e).unbind("mouseover").bind("mouseover",function(){currentListIndex=$(this).parent().index(),setCurrentListIndexItemStateToBeOnMouseOver()})}function confirmTheItemSelection(e,t,i,n,s){if(hideAllTaskPeopleList(),s)SelectProfWithPerson($(e).attr("sysProfId"),t,$(e).text(),$(e).attr("id"),i,n);else{if("null"==$(e).attr("sysProfId"))SelectProfWithPerson($(e).attr("sysProfId"),t,$(e).text(),$(e).attr("id"),i,n);else{var o=$(e).attr("sysProfName")+"";""!=o&&$.tmsg("confirmPeopleSelection","已为该人员自动选择"+o+"专业",{time_out:1e3,infotype:1}),$(n).val($(e).attr("sysProfId")),$(t).val($(e).attr("name")),$(i).val($(e).attr("id"))}$("#setMytoList").attr("username")!=$(e).attr("name")?$("#setMytoList").show():($("#setMytoList").hide(),$("#setMytoListProf").hide())}}function getSearchTaskPeopleList(e,t,i,n){currentListIndex=0;var s={getTaskPeople:"/Home/PlanRelatedPersonnel?r="+Math.random(),searchTaskPeople:"/Home/SearchUsers?r="+Math.random()},o=$(e).attr("value"),a=$("ul.aui-list-section");a.html(""),$.ajax({type:"POST",url:s.searchTaskPeople,data:"key="+o,success:function(n){var s="";reSizePeopleList(n.length),$(n).each(function(){var e=this.name.toLowerCase().indexOf(o.toLowerCase());s=s+'<li><a class="aui-list-item-link" href="javascript:;" id="'+this.id+'" sysProfId="'+this.sysProfId+'" name="'+this.name+'" >',s+=this.name.substring(0,e),s=s+'<font color="#FF0000">'+this.name.substring(e,e+o.length)+"</font>",s+=this.name.substring(e+o.length),s+="</a></li>"}),""==s?a.html("未搜索到相关人员"):a.html(s),a.find("a").each(function(){bindOnMouseOverItemStateToBeOnMouseOver(this),$(this).click(function(){confirmTheItemSelection(this,e,t,i,!0)})})}}),$("div#recordLastSearchInput:last").text(o)}function getTaskPeopleList(e,t,i,n,s){currentListIndex=0;var o={getTaskPeople:"/Home/PlanRelatedPersonnel?r="+Math.random(),searchTaskPeople:"/Home/SearchUsers?r="+Math.random()};$.getJSON(o.getTaskPeople,{projId:n,type:s},function(n){if(n=n.Data,n.Success){var s="";$("ul.aui-list-section").html("人员读取中..."),reSizePeopleList(n.Items.length),$(n.Items).each(function(){s=s+'<li><a class="aui-list-item-link" href="javascript:;" name="'+this.name+'" id="'+this.id+'" sysProfId="'+this.sysProfId+'" sysProfName="'+this.sysProfName+'">'+this.name+"</a></li>"}),""==s?$("ul.aui-list-section").html("<div style='line-height:20px;color:#ff0000; padding-left:5px;'>暂无人员，请从系统中选择。</div>"):($("ul.aui-list-section").html(s),$("ul.aui-list-section").find("a").each(function(){bindOnMouseOverItemStateToBeOnMouseOver(this),$(this).click(function(){confirmTheItemSelection(this,e,t,i,!0)})}))}else outputJSONLoadingErrorMessage(n);$("div#recordLastSearchInput:last").text($(e).attr("value"))})}function returnOptionListOfProfFromJSONData(e){for(var t="",i=0;i<e.length;i++)t+="<option",e[i].check&&(t+=' selected="selected"'),t+=' value="'+e[i].id+'">'+e[i].name+"</option>";return t}function SelectProfWithPerson(e,t,i,n,s,o){$(t).val(i),$(s).val(n),$(o).val(""),$(".ajs-layer").hide()}function initTaskPeopleList(e){$(".ajs-layer").remove();var t="undefined"!=typeof _guserName?_guserName:"",i=$('<div class="ajs-layer" style="width: 200px; display:none;z-index:1000;background:#fff;border-bottom:#bbb 1px solid"><div class="aui-list" style="width: auto; display: block; white-space: nowrap; height:25px; overflow:auto; overflow-x:hidden;"><ul class="aui-list-section">人员读取中....</ul></div><div id="selectingListBtnBar" style="background-color:#efefef;border-left:#bbb 1px solid ;border-right:#bbb 1px solid ;text-align:center; padding:2px 0;"><input id="selectUserForProf" type="button" value="从系统中选择人员"/>'+("undefined"!=typeof e&&e?' <a href="javascript:;" id="selectSelf">'+t+"</a>":"")+"</div></div>");$("body").append(i),setTimeout(function(){$("body").on("click",function(e){$(e.target).closest(i).length||(i.remove(),$("body").off("click",arguments.callee))})})}function reSizePeopleList(e){var t=25;e<5&&e>0&&(t=25*e),e>4&&(t=100),$("div.aui-list").animate({height:t+"px"})}function isTaskPeopleListExist(e){return 0!=$(".ajs-layer").length}function initADivToRecordLastSearchInput(){$("body").append('<div id="recordLastSearchInput" style="display:none;"></div>')}function isADivToRecordLastSearchInputExist(){return 0!=$("div#recordLastSearchInput").length}function isSearchKeyInputed(e){return""!=$(e).attr("value")}function isSearchKeyChanged(e){return $(e).attr("value")!=$("div#recordLastSearchInput:last").text()}function zindex(e){var t=0;$("div").each(function(){parseInt($(this).css("z-index"))>t&&parseInt($(this).css("z-index"))<1e4&&(t=parseInt($(this).css("z-index")))}),$(e).css("z-index",t+2)}function showAllTaskPeopleList(e){"1"!=$(e).attr("canempty")&&(currentListedInputBox=e),defaultValueOfCurrentListedInputBox=e.val(),profIdObject&&(defaultValueOfprofIdObj=profIdObject.val()),userIdObject&&(defaultValueOfuserIdObj=userIdObject.val()),$(".ajs-layer").css("display","inline"),$(".ajs-layer").css("position","absolute"),$(".ajs-layer").css("left",$(e).offset().left),$(".ajs-layer").css("top",$(e).offset().top+$(e).height()),zindex($("div.ajs-layer")[0])}function showAllTaskPeopleListXY(e,t){$(".ajs-layer").css("display","inline"),$(".ajs-layer").css("position","absolute"),$(".ajs-layer").css("left",e),$(".ajs-layer").css("top",t),zindex($("div.ajs-layer")[0])}function hideAllTaskPeopleList(){$(".ajs-layer").css("display","none")}function showTaskPeopleList(e,t,i,n,s,o,a){if(isADivToRecordLastSearchInputExist()||initADivToRecordLastSearchInput(),initTaskPeopleList(a),getTaskPeopleList(e,t,i,n,s),showAllTaskPeopleList(e),$("#selectUserForProf").click(function(){hideAllTaskPeopleList(),SelectUsers.init({rType:"cb",prt:"selUser",multiSel:!1,single:!0,onOpen:function(e){if(a){e.db.find("#txttree").val("深圳地产设计管理中心"),e.db.find("#btnTreeSearch").trigger("click");var t=e.db.find("#ifrm");t.length&&(t=t[0],t.attachEvent?t.attachEvent("onload",function(){var e=$(t.contentWindow.document.body);e.find("span:first").trigger("click")}):t.onload=function(){var e=$(t.contentWindow.document.body);e.find("span:first").trigger("click")})}else SelTree()},callback:function(i){for(var n in i)$(e).val(i[n]),$(t).val(n),$("#setMytoList").attr("username")!=i[n]?$("#setMytoList").show():($("#setMytoList").hide(),$("#setMytoListProf").hide())}})}),a){var r=$("#selectSelf");r.attr({id:_guserId,name:_guserName,sysProfId:"null"}),r.click(function(){confirmTheItemSelection(this,e,t,i,!0)})}}function showSearchTaskPeopleList(e,t,i,n,s,o){isSearchKeyChanged(e)&&isSearchKeyInputed(e)&&getSearchTaskPeopleList(e,t,i,o),isSearchKeyChanged(e)&&!isSearchKeyInputed(e)&&getTaskPeopleList(e,t,i,n,s)}function getTaskPeopleListForOneClick(e,t,i,n,s){initTaskPeopleList();var o={getTaskPeople:"/Home/PlanRelatedPersonnel?r="+Math.random(),searchTaskPeople:"/Home/SearchUsers?r="+Math.random()};showAllTaskPeopleListXY(e,t),$("ul.aui-list-section").html("人员读取中..."),$.getJSON(o.getTaskPeople,{projId:i,type:n},function(e){if(e=e.Data,e.Success){var t="";$("ul.aui-list-section").html(""),reSizePeopleList(e.Items.length),$(e.Items).each(function(){t=t+'<li><a class="aui-list-item-link" href="javascript:;" name="'+this.name+'" id="'+this.id+'" sysProfId="'+this.sysProfId+'">'+this.name+"</a></li>"}),$("ul.aui-list-section").html(t),$("ul.aui-list-section").find("a").each(function(){bindOnMouseOverItemStateToBeOnMouseOver(this),$(this).click(function(){hideAllTaskPeopleList(),s($(this).attr("id"),$(this).attr("sysProfId"),$(this).attr("name"))})}),$("#selectUserForProf").click(function(){hideAllTaskPeopleList(),SelectUsers.init({rType:"cb",prt:"selUser",multiSel:!1,single:!0,onOpen:function(e){SelTree()},callback:function(e){for(var t in e)s(t,"",e[t])}})})}else outputJSONLoadingErrorMessage(e)})}function SelectProfWithPersonForOneClick(e,t,i){$.get("/Home/GetProfJson",{userId:t},function(n){box("<div style='padding:10px 5px;line-height:22px;color:#0187dc'>请为该人员选择一个专业：<br/><select id=SelectProfWithPersons style='width:260px'>"+returnOptionListOfProfFromJSONData(n)+"</select></div>",{title:"选择专业",contentType:"html",cls:"shadow-container",submit_cb:function(){i(t,$("#SelectProfWithPersons").val(),e)}})},"json")}function showAMultipleSelectingTaskPeopleList(e,t,i,n){initTaskPeopleList(),getAMultipleSelectingTaskPeopleList(e,t,i,n),showAllTaskPeopleList(e),bindSelectPersonFromSystemBtnFunction(e)}function bindSelectPersonFromSystemBtnFunction(e){$("#selectUserForProf").click(function(){hideAllTaskPeopleList(),SelectUsers.init({rType:"cb",prt:"selUser",multiSel:!1,single:!0,onOpen:function(e){SelTree()},callback:function(t){for(var i in t)selectProfWithPersonForMultiSelectList(e,t[i],i)}})})}function appendAPersonToTaskPeopleList(e,t,i,n,s){var o="";o=o+'<li><a class="aui-list-item-link" href="javascript:;" name="'+i+'" id="'+t+'" sysProfId="'+n+'"><input type=checkbox checked="checked" />'+i+"（"+s+"）</a></li>",$("ul.aui-list-section li:first-child").before(o),reSizePeopleList($("ul.aui-list-section").find("input").length),showAllTaskPeopleList(e)}function selectProfWithPersonForMultiSelectList(e,t,i){$.get("/Home/GetProfJson",{userId:i},function(n){box("<div style='padding:10px 5px;line-height:22px;color:#0187dc'>请为该人员选择一个专业：<br/><select id=SelectProfWithPersons style='width:260px'>"+returnOptionListOfProfFromJSONData(n)+"</select></div>",{title:"选择专业",contentType:"html",cls:"shadow-container",submit_cb:function(){appendAPersonToTaskPeopleList(e,i,t,$("#SelectProfWithPersons").val(),$("#SelectProfWithPersons").find("option[selected]").text())}})},"json")}function confirmMultiplePeopleSelection(e,t){var i="",n={};hideAllTaskPeopleList(),$(e).parent().parent().find("input[checked]").each(function(){var e=$(this).parent();i=i+e.attr("id")+"-"+e.attr("sysProfId")+",",n[e.attr("id")]=e.attr("name")}),i=i.substring(0,i.length-1),postPeopleDataSelected(e,i,n,t)}function postPeopleDataSelected(e,t,i,n){return""!=t&&void n(t,i)}function appendAnOKButtonToTaskPeopleList(e,t){$("#selectingListBtnBar").append('<input id="confirmMultiplePeopleSelectionbtn" type="button" value="确定" />'),$("#confirmMultiplePeopleSelectionbtn").unbind("click").bind("click",function(){confirmMultiplePeopleSelection(this,t)})}function switchAllCheckBoxState(e){"false"==$(e).attr("checked")?($(e).attr("checked","true"),$(e).find("input").attr("checked",!1)):($(e).attr("checked","false"),$(e).find("input").attr("checked",!0))}function bindCheckBoxClickFuncion(e){"false"==$(e).parent().attr("checked")?$(e).attr("checked",!1):$(e).attr("checked",!0)}function getAMultipleSelectingTaskPeopleList(e,t,i,n){var s={getTaskPeople:"/Home/PlanRelatedPersonnel?r="+Math.random(),searchTaskPeople:"/Home/SearchUsers?r="+Math.random()};$.getJSON(s.getTaskPeople,{projId:t,type:i},function(e){if(e=e.Data,e.Success){var i="";$("ul.aui-list-section").html(""),reSizePeopleList(e.Items.length),$(e.Items).each(function(){i=i+'<li><a class="aui-list-item-link" href="javascript:;" name="'+this.name+'" id="'+this.id+'" sysProfId="'+this.sysProfId+'"><input type=checkbox />'+this.name+"（"+this.sysProfName+"）</a></li>"}),$("ul.aui-list-section").append(i),$("ul.aui-list-section").find("a").each(function(){bindOnMouseOverItemStateToBeOnMouseOver(this),$(this).click(function(){switchAllCheckBoxState(this)}),$(this).find("input").each(function(){$(this).click(function(){bindCheckBoxClickFuncion(this)})})}),appendAnOKButtonToTaskPeopleList(t,n)}else outputJSONLoadingErrorMessage(e)})}function outputJSONLoadingErrorMessage(e){$("ul.aui-list-section").html("<li>"+e.Message+"</li>")}function ScrollPic(e,t,i,n){if(document.getElementById(t)){demo=document.getElementById(e),demo1=document.getElementById(t),demo2=document.getElementById(i);var s,o=demo1.getElementsByTagName("table");if(o.length<=0)return;s=o[0],s.rows[0].cells.length>n&&(demo2.innerHTML=demo1.innerHTML,MyMar=setInterval(Marquee,speed3),demo.onmouseover=function(){clearInterval(MyMar)},demo.onmouseout=function(){MyMar=setInterval(Marquee,speed3)})}}function Marquee(){0==MarqueeAction?demo2.offsetWidth-demo.scrollLeft<=0?demo.scrollLeft-=demo1.offsetWidth:demo.scrollLeft+=MarqueeSpeed:0==demo.scrollLeft?demo.scrollLeft+=demo1.offsetWidth:demo.scrollLeft-=MarqueeSpeed}function ScrollPicClass(e,t,i,n,s,o){this.url=i,this.id=t;var a=this;this.speed3=25,this.MyMar=null,this.MarqueeAction=0,this.MarqueeSpeed=1,this.count=e,s||(s=880),this.width=s;var r='<table width="100%" border="0" cellspacing="0" cellpadding="0">';r+="<tr>",r+='<td width="28">',r+='<div class="scr_left">',r+='<a href="javascript:;" style="margin-top:0px;"></a></div>',r+="</td>",r+='<td style="padding: 5px 0 5px 0">',r+='<div id="demo3" style="overflow: hidden; height: 190px; width:'+s+'px; margin-left: 5px;margin-right: 5px;">',r+='<table width="cellspacing=0">',r+="<tr>",r+='<td id="demo4" class="demo">',r+='<table width="100%" style="text-align: center">',r+="<tr>";var l="</tr></table>";l+="</td>",l+='<td id="demo5" class="demoCopy">',l+="</td>",l+="</tr>",l+="</table>",l+="</div>",l+="</td>",l+='<td width="28">',l+='<div class="scr_right">',l+='<a href="javascript:;" style="margin-top:0px;"></a></div>',l+="</td>",l+="</tr>",l+="</table>",this.ScrollPic=function(){var e=$("#"+a.id+" table td:eq(1)").find("div table");if(!(e.length<=0)){var t=$("#"+a.id+" .scr_con");t.length>a.count&&(a.tDivTd2.html(a.tDivTd.html()),a.MyMar=setInterval(a.Marquee,a.speed3),a.tDiv[0].onmouseover=function(){clearInterval(a.MyMar)},a.tDiv[0].onmouseout=function(){a.MyMar=setInterval(a.Marquee,a.speed3)})}},this.Marquee=function(){0==a.MarqueeAction?a.tDivTd2[0].offsetWidth-a.tDiv[0].scrollLeft<=0?a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft-a.tDivTd[0].offsetWidth:a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft+a.MarqueeSpeed:0==a.tDiv[0].scrollLeft?a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft+a.tDivTd[0].offsetWidth:a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft-a.MarqueeSpeed},this.load=function(){a.tDiv=$("#"+a.id+" table td:eq(1)").find("div"),a.tDivTd=$("#"+a.id+" table td:eq(1)").find("div table td.demo"),a.tDivTd2=$("#"+a.id+" table td:eq(1)").find("div table td.demoCopy"),a.Marquee(),a.ScrollPic(),$("#"+a.id+" .scr_left").mousedown(function(){a.MarqueeAction=0,a.MarqueeSpeed=10}).mouseup(function(){a.MarqueeSpeed=1}),$("#"+a.id+" .scr_right").mousedown(function(){a.MarqueeAction=1,a.MarqueeSpeed=10}).mouseup(function(){a.MarqueeSpeed=1})},this.addContent=function(){if(0==n&&$.ajax({url:a.url,type:"GET",dataType:"json",timeout:1e3,cache:!1,error:function(e){},success:function(e){var t="",i="";i+=r,0==e.length?(t+="<td>",t+='<div style="text-align: center; padding-bottom: 30px; padding-left: 0px; padding-right: 0px; padding-top: 30px;">',t+="<img src="+path+'/Content/Images/zh-cn/designrep/pic-erro.jpg complete="complete" width:/>',t+="</div>",t+="</td>",i+=t):($(e).each(function(i){t+="<td style='vertical-align:top'>",t+='<div style="float: left; padding: 5px; margin: 5px" class="3">',t+='<div class="scr_con">',t+="<img  src="+path+'"'+e[i].m+"\" onerror=\"setTypeImg(this, 'um', '"+e[i].ext+"')\" onclick=\"ReadOnlineCustom('"+e[i].docid+"','"+e[i].lastVersion+'\',0)" style="cursor: hand" /></div>',t+='<div style="padding-top: 5px; text-align: center" docid='+e[i].docid+" lastVersion="+e[i].lastVersion+' name="'+e[i].name+'">',t+='<a href="javascript:;" onclick="ReadOnlineCustom(\''+e[i].docid+"','"+e[i].lastVersion+'\',0)" class="blue">'+getSubStrLen(e[i].name,30,"..")+"</a></div>",t+="</div>",t+="</td>"}),i+=t),i+=l,$("#"+a.id).append(i),o&&o(),a.load()}}),1==n){var e="",t="";t+=r,e+="<td >",e+='<div style="text-align: center; padding-bottom: 30px; padding-left: 0px; padding-right: 0px; padding-top: 30px;">',e+="<img src="+path+'/Content/Images/pic/pic-erro.jpg complete="complete" width:/>',e+="</div>",e+="</td>",0==$("#"+a.url).find("td").length&&$("#"+a.url).html(e),t+=$("#"+a.url).html(),t+=l,$("#"+a.id).append(t),a.load(),$("#"+a.url).find("td").length<=a.count&&($("#"+a.id).find("div.scr_left").parent().hide(),$("#"+a.id+" .scr_right").parent().hide())}2==n&&a.load()},this.addContent()}function ScrollPicClassType(e,t,i,n,s,o){this.url=i,this.classType=t;var a=this;this.speed3=25,this.MyMar=null,this.MarqueeAction=0,this.MarqueeSpeed=1,this.count=e,s||(s=880),this.width=s;var r='<table width="100%" border="0" cellspacing="0" cellpadding="0">';r+="<tr>",r+='<div align="center" class="turnleft" style="display:none">',r+="</div>",r+='<td style="padding: 5px 0 5px 0">',r+='<div id="demo3" style="overflow: hidden; height: 180px; width:'+s+'px; margin-left: 5px;margin-right: 5px;">',r+='<table width="cellspacing=0">',r+="<tr>",r+='<td id="demo4">',r+='<table width="100%" style="text-align: center">',r+="<tr>";var l="</table>";l+="</td>",l+='<td id="demo5">',l+="</td>",l+="</tr>",l+="</table>",l+="</div>",l+="</td>",l+='<div align="center" class="turnright" style="display:none">',l+="</div>",l+="</tr>",l+="</table>",this.ScrollPic=function(){$("."+a.classType).each(function(){var e=$(this).find("table td:eq(1)").find("div table");if(!(e.length<=0)){var t=$(this).find(".picdivm");t.length>a.count&&(a.tDivTd2.html(a.tDivTd.html()),a.MyMar=setInterval(a.Marquee,a.speed3),a.tDiv[0].onmouseover=function(){clearInterval(a.MyMar)},a.tDiv[0].onmouseout=function(){a.MyMar=setInterval(a.Marquee,a.speed3)})}})},this.Marquee=function(){0==a.MarqueeAction?a.tDivTd2[0].offsetWidth-a.tDiv[0].scrollLeft<=0?a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft-a.tDivTd[0].offsetWidth:a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft+a.MarqueeSpeed:0==a.tDiv[0].scrollLeft?a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft+a.tDivTd[0].offsetWidth:a.tDiv[0].scrollLeft=a.tDiv[0].scrollLeft-a.MarqueeSpeed},this.load=function(){$("."+a.classType).each(function(){a.tDiv=$(this).find("table td:eq(0)").find("div"),a.tDivTd=$(this).find("table td:eq(0)"),a.tDivTd2=$(this).find("table td:eq(0)"),a.Marquee(),a.ScrollPic(),$(this).find(".turnleft").mousedown(function(){a.MarqueeAction=0,a.MarqueeSpeed=10}).mouseup(function(){a.MarqueeSpeed=1}),$(this).find(".turnright").mousedown(function(){a.MarqueeAction=1,a.MarqueeSpeed=10}).mouseup(function(){a.MarqueeSpeed=1})})},$("."+a.classType).each(function(){$(this).mouseover(function(){$(this).find(".turnleft").show().end().find(".turnright").show()}).mouseout(function(){$(this).find(".turnleft").hide().end().find(".turnright").hide()})}),this.addContent=function(){if(0==n&&$.ajax({url:a.url,type:"GET",dataType:"json",timeout:1e3,cache:!1,error:function(e){},success:function(e){var t="",i="";i+=r,0==e.length?(t+="<td>",t+='<div style="text-align: center; padding-bottom: 30px; padding-left: 0px; padding-right: 0px; padding-top: 30px;">',t+="<img src="+path+'"/Content/Images/zh-cn/designrep/pic-erro.jpg" complete="complete" width:/>',t+="</div>",t+="</td>",i+=t):($(e).each(function(i){t+="<td style='vertical-align:top'>",t+='<div style="float: left; padding: 5px; margin: 5px" class="3">',t+='<div class="picdivm">',t+="<img  src="+path+'"'+e[i].m+"\" onerror=\"setTypeImg(this, 'um', '"+e[i].ext+"')\" onclick=\"ReadOnlineCustom('"+e[i].docid+"','"+e[i].lastVersion+'\',0)" style="cursor: hand" /></div>',t+='<div style="padding-top: 5px; text-align: center" docid='+e[i].docid+" lastVersion="+e[i].lastVersion+' name="'+e[i].name+'">',t+='<a href="javascript:" onclick="ReadOnlineCustom(\''+e[i].docid+"','"+e[i].lastVersion+'\',0)" class="blue">'+getSubStrLen(e[i].name,30,"..")+"</a></div>",t+="</div>",t+="</td>"}),i+=t),i+=l,$("."+a.classType).append(i),o&&o(),a.load()}}),1==n){var e="",t="";t+=r,e+="<td >",e+='<div style="text-align: center; padding-bottom: 30px; padding-left: 0px; padding-right: 0px; padding-top: 30px;">',e+="<img src= "+path+'"/Content/Images/zh-cn/designrep/pic-erro.jpg" complete="complete" width:/>',e+="</div>",e+="</td>",0==$("#"+a.url).html().length&&$("#"+a.url).html(e),t+=$("#"+a.url).html(),t+=l,$("."+a.classType).append(t),a.load()}2==n&&a.load()},this.addContent()}function ScrollPicZHHY(e,t,i,n,s,o,a){function r(){1==d?p.addClass("disabled"):p.removeClass("disabled"),d==h?m.addClass("disabled"):m.removeClass("disabled")}this.url=i,this.id=t;var l=this;this.speed=15,this.MyMar=null,this.MarqueeAction=0,this.MarqueeSpeed=10,this.count=e,s||(s=880),this.width=s;var d=1,c=0,h=1;this.isMoving=!1;var u,f,p,m;o||(o=190);var g='<table width="100%" border="0" cellspacing="0" cellpadding="0">';g+="<tr>",g+='<td width="28">',g+='<div class="scr_left">',g+='<a href="javascript:;" style="margin-top:0px;"></a></div>',g+="</td>",g+='<td style="padding: 5px 0 5px 0">',g+='<div id="viewWnd" style="overflow: hidden; height: '+o+"px; width:"+s+'px; margin-left: 0px;margin-right: 0px;">',g+='<table width="cellspacing=0">',g+="<tr>",g+='<td id="demo4" class="demo">',g+='<table width="100%" style="text-align: center">',g+="<tr>";var v="</tr></table>";v+="</td>",v+='<td id="demo5" class="demoCopy">',v+="</td>",v+="</tr>",v+="</table>",v+="</div>",v+="</td>",v+='<td width="28">',v+='<div class="scr_right">',v+='<a href="javascript:;" style="margin-top:0px;"></a></div>',v+="</td>",v+="</tr>",v+="</table>",this.Marquee=function(e,t){if(0==e){if(1==d)return r(),!1;2==d?(d--,r(),l.move(0,t)):(d--,r(),l.move(u.scrollLeft-u.offsetWidth,t))}else{if(d==h)return r(),!1;d==h-1?(d++,r(),l.move(f.offsetWidth-u.offsetWidth,t)):(d++,r(),l.move(u.scrollLeft+u.offsetWidth,t))}},this.bindEvent=function(){var t=$("#"+l.id+" table td:eq(1)").find("div table");if(!(t.length<=0)){var i=$("#"+l.id+" .scr_con");c=i.length,h=Math.ceil(c/e),r(),p.click(function(){l.isMoving||l.Marquee(0,l.speed)}),m.click(function(){l.isMoving||l.Marquee(1,l.speed)})}},this.move=function(e,t){l.isMoving=!0;var i=u.scrollLeft;return i==e?(l.isMoving=!1,!1):(i<e?i+l.MarqueeSpeed>e?u.scrollLeft=e:u.scrollLeft+=l.MarqueeSpeed:i-l.MarqueeSpeed<e?u.scrollLeft=e:u.scrollLeft-=l.MarqueeSpeed,void setTimeout(function(){l.move(e,t)},t))},this.load=function(){l.tDiv=$("#"+l.id+" table td:eq(1)").find("#viewWnd"),u=l.tDiv[0],l.tDivTd=$("#"+l.id+" table td:eq(1)").find("div table td.demo"),f=l.tDivTd[0],l.tDivTd2=$("#"+l.id+" table td:eq(1)").find("div table td.demoCopy"),p=$("#"+l.id+" .scr_left"),m=$("#"+l.id+" .scr_right"),l.bindEvent()},this.addContent=function(){var e="",t="";t+=g,e+="<td >",e+='<div style="text-align: center; padding-bottom: 30px; padding-left: 0px; padding-right: 0px; padding-top: 30px;">',e+="<img src="+path+'/Content/Images/pic/pic-erro.jpg complete="complete" width:/>',e+="</div>",e+="</td>",0==$("#"+l.url).find("td").length&&$("#"+l.url).html(e),t+=$("#"+l.url).html(),t+=v,$("#"+l.id).append(t),l.load()},this.addContent()}var YH={furl:"/Content/Images/zh-cn/"};!function(e){var t=0,i=!window.XMLHttpRequest&&window.ActiveXObject,n="CSS1Compat"==document.compatMode;if(YH.userAgent={isIE:e.browser.msie,isGecko:e.browser.mozilla,isWebkit:e.browser.webkit,isOpera:e.browser.opera,isVersion:function(t){return String.compareVersions(e.browser.version,t)>=0}},e.extend(YH,{isStrict:n,isIE6:i,applyIf:function(t,i){if(t)for(var n in i)e.isEmptyObject(t[n])&&(t[n]=i[n]);return t},genId:function(e){return(e||"auto-gen")+ ++t},isdefined:function(e){return"undefined"!=typeof e},$id:function(e){return e instanceof jQuery?e.get(0):"string"==typeof e?document.getElementById(e):e},isEmpty:function(t,i){return null===t||void 0===t||e.isArray(t)&&!t.length||!i&&""===t},loadCSS:function(t,i){if(!this.$id(i)&&/\w+\.\w+(\?|$)/.test(t)){var n=document.getElementsByTagName("head")[0];e(document.createElement("link")).attr({type:"text/css",href:t,id:i,rel:"stylesheet",media:"screen"}).appendTo(n)}},loadJS:function(t,i,n){t={type:"GET",url:t,success:i,dataType:"script",cache:!1},e.extend(t,n),e.ajax(t)},loadXML:function(e,t){var i,n=t||0;if(window.ActiveXObject){for(var s=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XMLDOM"],o=0;o<s.length;o++)try{i=new ActiveXObject(s[o]);break}catch(e){}if(i.parseError.reason)return null;i.async=!1,0==n?i.loadXML(e):i.load(e)}else if(document.implementation&&document.implementation.createDocument&&(i=document.implementation.createDocument("","",null),n?(i.async=!1,i.load(e)):i=(new DOMParser).parseFromString(e,"text/xml"),"parsererror"==i.documentElement.nodeName))return null;return i.documentElement},doCopy:function(e){if(window.clipboardData)window.clipboardData.setData("Text",e);else if(navigator.userAgent.indexOf("Opera")!=-1)window.location=e;else{try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){alert("您的当前浏览器设置已关闭此功能！请按以下步骤开启此功能！\n新开一个浏览器，在浏览器地址栏输入'about:config'并回车。\n然后找到'signed.applets.codebase_principal_support'项，双击后设置为'true'。\n声明：本功能不会危极您计算机或数据的安全！")}var t=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(t){var i=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(i){i.addDataFlavor("text/unicode");var n={};n=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),n.data=e,i.setTransferData("text/unicode",n,2*e.length),t.setData(i,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}},addCSSRule:function(e,t,i){var n=document.styleSheets[document.styleSheets.length-1];(i<0||YH.isEmpty(i))&&(i=(n.rules||n.cssRules).length),n.cssRules?n.insertRule(e+"{"+t+"}",i):n.addRule(e,t,i)},console:function(e){window.console&&console.log(e)},QueryString:function(e){return location.href.getQueryString(e)}}),YH.isIE6)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}e.cookie=function(e,t,i){if(arguments.length>1&&(null===t||"object"!=typeof t)){if(i=jQuery.extend({},i),null===t&&(i.expires=-1),"number"==typeof i.expires){var n=i.expires,s=i.expires=new Date;s.setDate(s.getDate()+n)}return document.cookie=[encodeURIComponent(e),"=",i.raw?String(t):encodeURIComponent(String(t)),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}return i=t||{},s=i.raw?function(e){return e}:decodeURIComponent,(n=RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?s(n[1]):null}}(jQuery),YH.applyIf(String,{leftPad:function(e,t,i){for(e=String(e)||"",i||(i=" ");e.length<t;)e=i+e;return e},cut:function(e,t,i){e+="",i=i||"";for(var n=e.length,s=Math.min(Math.floor(t/2),n),o=String.getRealLen(e.slice(0,s));s<n&&o<t;s++)o+=1+!/[\x00-\xFF]/.test(e.charAt(s));return e.slice(0,o>t?s-1:s)+(s<n?i:"")},getRealLen:function(e,t){if("string"!=typeof e)return 0;if(t){var i=e.replace(/[\x00-\xFF]/g,"");return e.length-i.length+encodeURI(i).length/3}return e.replace(/[^\x00-\xFF]/g,"**").length},isUrl:function(e){return/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i.test(e)},compareVersions:function(e,t){for(var i=e.split("."),n=t.split("."),s=Math.max(i.length,n.length),o=0,a=0;0==o&&a<s;a++){var r=i[a]||"",l=n[a]||"",d=RegExp("(\\d*)(\\D*)","g"),c=RegExp("(\\d*)(\\D*)","g");do{var h=d.exec(r)||["","",""],u=c.exec(l)||["","",""];if(0==h[0].length&&0==u[0].length)break;o=0==h[1].length?0:parseInt(h[1],10);var f=0==u[1].length?0:parseInt(u[1],10);o=String.compareElements(o,f)||String.compareElements(0==h[2].length,0==u[2].length)||String.compareElements(h[2],u[2])}while(0==o)}return o},compareElements:function(e,t){return e<t?-1:e>t?1:0}}),YH.applyIf(String.prototype,{getQueryString:function(e){return(e=this.match(RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)")))?unescape(e[2]):null},compileTpl:function(e){return this.replace(/\{\w+\}/g,function(t){return e[t.replace(/\{|\}/g,"")]||""})}}),"undefined"==typeof isContextDiaram&&YH.applyIf(Array.prototype,{unique:function(){var e={},t=[];return $.each(this,function(i,n){e[n]||t.push(n),e[n]=!0}),t},indexOf:function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]==e)return t;return-1},remove:function(e){return e=this.indexOf(e),e!=-1&&this.splice(e,1),this}}),YH.dom={fixedPosition:function(){YH.isIE6&&(document.body.style.height="100%",document.body.style.overflow="auto",YH.addCSSRule("*html","overflow-x:auto;overflow-y:hidden;"))},elemFixedPos:function(e){$(e).css("position",YH.isIE6?"absolute":"fixed")},getDocumentWindow:function(e){return e=e||document,e.parentWindow||e.defaultView},getDocumentWidth:function(e){return $(e||document).width()},getDocumentHeight:function(e){return $(e||document).height()},getViewportWidth:function(e){return $(e||window).width()},getViewportHeight:function(e){return $(e||window).height()},getRegion:function(e,t){var i=document;t&&(i=t.document);var n=YH.$id(e);return i=$(n==i||n==i.body?i.body:n).offset(),{top:i.top,right:i.left+n.offsetWidth,bottom:i.top+n.offsetHeight,left:i.left}},getMouseX:function(e){return e.pageX||e.clientX+YH.root().scrollLeft},getMouseY:function(e){return e.pageY||e.clientY+YH.root().scrollTop},scrollintoContainer:function(e,t,i,n,s){var o=$(e).offset(),a=$(t).offset(),r=YH.$id(e);e=YH.$id(t);var l=o.left-a.left;o=o.top-a.top,a=e.clientWidth-r.offsetWidth,r=e.clientHeight-r.offsetHeight,i?(i=e.scrollLeft+l-a/2,l=e.scrollTop+o-r/2):(i=e.scrollLeft+Math.min(l,Math.max(l-a,0)),
l=e.scrollTop+Math.min(o,Math.max(o-r,0))),n?t.stop().animate({scrollLeft:s&&s.noL?e.scrollLeft:i,scrollTop:l},$.extend({duration:"slow"},s||{})):(e.scrollLeft=i,e.scrollTop=l)},Bound:function(e,t,i,n,s,o,a){for(var r=window;r.parent!=r;)r=r.parent;var l,d,c=YH.dom.getViewportWidth(r)-10,h=YH.dom.getViewportHeight(r)-10;d=l=!1;var u=$(a||document).scrollLeft()+5,f=$(a||document).scrollTop()+5;return a=$(e).outerWidth(),e=$(e).outerHeight(),t=YH.dom.getRegion(t,r),(s||o)&&(l=s.charAt(0),s=s.charAt(s.length-1),d=o.charAt(0),o=o.charAt(o.length-1),l="t"==l&&"b"==d||"b"==l&&"t"==d,d="r"==s&&"l"==o||"l"==s&&"r"==o),i+a>c+u&&(i=d?t.left-a:c+u-a),i<u&&(i=d?t.right:u),n+e>h+f&&(n=l?t.top-e:h+f-e),n<f&&(n=l?t.bottom:f),[i,n]},getScrollbarWidth:function(){var e=$("<div/>").css({visibility:"hidden",overflow:"scroll",position:"absolute",top:"0",width:"100px",height:"100px"}).appendTo(document.body),t=e[0].offsetWidth-e[0].clientWidth;return e.remove(),t}},function(e){e.fn.getAlignToXY=function(t,i,n,s){n=n||[0,0],i=(i&&"?"!=i?/-/.test(i)||""===i?i||"tl-bl":"tl-"+i:"tl-bl?").toLowerCase();var o,a,r=!1;if(i=i.match(/^([a-z]+)-([a-z]+)(\?)?$/)){var l=i[1],d=i[2];return r=!!i[3],o=e(this).getAnchorXY(l,!0,s),a=e(t).getAnchorXY(d,!1,s),i=a[0]-o[0]+n[0],n=a[1]-o[1]+n[1],r&&(t=YH.dom.Bound(this,t,i,n,l,d,s),i=t[0],n=t[1]),{x:i,y:n}}},e.fn.getAnchorXY=function(t,i,n){t=(t||"tl").toLowerCase();for(var s=window;s.parent!=s;)s=s.parent;var o=YH.$id(this)==(n||document).body||YH.$id(this)==(n||document),a=o?YH.dom.getViewportWidth(s):e(this).outerWidth();s=o?YH.dom.getViewportHeight(s):e(this).outerHeight();var r=Math.round,l=this;return o&&(l=(n||document).body),l=e(l).offset(),n=o?e(this).scrollLeft():i?0:l.left,i=o?e(this).scrollTop():i?0:l.top,t={c:[r(.5*a),r(.5*s)],t:[r(.5*a),0],l:[0,r(.5*s)],r:[a,r(.5*s)],b:[r(.5*a),s],tl:[0,0],bl:[0,s],br:[a,s],tr:[a,0]}[t],[t[0]+n,t[1]+i]},e.fn.unselectable=function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart",function(){return!1})},e.fn.setInlineBlock=function(){return this.each(function(){e(this).css("position","relative"),YH.userAgent.isIE&&!YH.userAgent.isVersion("8")?e(this).css({zoom:"1",display:"inline"}):YH.userAgent.isGecko?e(this).css("display",YH.userAgent.isVersion("1.9a")?"inline-block":"-moz-inline-box"):e(this).css("display","inline-block")})},e.fn.setOpacity=function(t){var i=e(this)[0].style;"opacity"in i?i.opacity=t:"MozOpacity"in i?i.MozOpacity=t:"filter"in i&&(i.filter=""===t?"":"alpha(opacity="+100*t+")")},e.fn.createProxy=function(t,i){var n=e("<div/>").attr("id",t.id?t.id:YH.genId("proxy")).addClass(t.cls);return t.html&&n.html(t.html),i?n.appendTo(i):n.insertBefore(e(this)),n},e.fn.EpCp=function(t){function i(e,t){var i="cp"==t?n.img_collapse:n.img_expand;e.attr("src")?e.attr("src",i):e.children("img")[0]?e.children("img").attr("src",i):"cp"==t?e.addClass(n.clsCp).removeClass(n.clsEp):e.addClass(n.clsEp).removeClass(n.clsCp)}var n=e.extend({img_expand:YH.furl+"Marketing/ico15.jpg",img_collapse:YH.furl+"Marketing/ico14.jpg",clsEp:"clsEp",clsCp:"clsCp"},t||{}),s=this;return this.each(function(){var t=e(this),n=t.attr("tog");t.click(function(){switch(cls=!t.attr("src"),n){case"epall":e(s).each(function(){var t=e(this);t.attr("tog")!=n&&(i(t,"cp"),e("#"+t.attr("tog")).show())});break;case"cpall":e(s).each(function(){var t=e(this);t.attr("tog")!=n&&(i(t,"ep"),e("#"+t.attr("tog")).hide())});break;default:var o=e("#"+n);"none"==o.css("display")?(i(t,"cp"),o.show()):(o.hide(),i(t,"ep"))}})})},e.fn.dropdownmenu=function(t){return t=e.extend({target:!1},t),this.each(function(){var i=e(this),n=e(t.target);e(i).click(function(){return window.last_dropdown_target&&e(window.last_dropdown_target).hide(),window.last_dropdown_target=n,e(n).slideDown("fast").show(),"function"==typeof t.cb&&t.cb(),setTimeout(function(){e(n).find("select").click(function(){return!1}),e(n).one("click",function(){return!1}),e("body").one("click",function(){e(n).hide()})},300),!1})})},e.fLayer=function(t,i){this.opt={title:null,doc:window.self.document,relat:!0,animated:!1,onShow:function(){}},this.mm=t,this.dc=this.dt=null,this.opt=e.extend(this.opt,i||{}),this.render()},e.fLayer.prototype={render:function(){var t=this.opt,i=e(this.mm),n=this;return this.layer=e('<div style="background-color:#fff;width:300px;border:1px solid #ccc;position:absolute;margin:0;padding:0" class="flayer"><div class="flayer-bar" style="position:relative">'+(this.opt.title?'<div class="flayer-title" style="text-align:left;background:#eee;padding:2px 5px">'+this.opt.title+"</div>":"")+'<span class="flayer-close" style="position:absolute;width:15px;height:15px;top:2px;right:2px;cursor:pointer;color:#f00"><img src="'+YH.furl+'Projects/ico-close.png" alt="关闭" /></span></div><div class="flayer-content" style="margin:0px;padding:5px;white-space:normal;word-break:break-all;overflow:hidden;text-align:left"></div></div>'),this.layer.appendTo(i,t.doc).hide(),t.cls&&this.layer.addClass(t.cls),i=i.offset(),t.relat&&this.layer.css({left:i.left,top:i.top}),this.dt=this.layer.find(".flayer-title"),this.dc=this.layer.find(".flayer-content"),t.width&&this.layer.css("width",t.width),t.height&&this.layer.css("height",t.height),e(this.mm).data("ly",this),t.animated?n.layer.slideDown("slow"):n.layer.show(),t.onShow.call(this),e(".flayer-close",n.layer).click(function(e){e.stopPropagation(),t.animated?n.layer.slideUp("slow").hide():n.layer.hide()}),this},setTitle:function(e){this.dt.html(e)},setContent:function(e){this.dc.html(e)},show:function(){this.layer.show()},hide:function(){this.layer.hide()},destroy:function(){e(this.mm).removeData("ly"),this.layer.remove()}},e.fn.fLayer=function(t){var i=e(this).data("ly");return i?(i.show(),i):new e.fLayer(this,t)},e.tmsg=function(t,i,n){var s=n||{},o=["gtl_ico_hits","gtl_ico_succ","gtl_ico_fail","gtl_ico_wait"];n=s.time_out?parseInt(s.time_out,10):3e3,t=t?t:"a3_wait";var a,r=YH.$id(t),l=s.zindex||2e4,d=s.pos?s.pos:"c-c";o=o[s.infotype?s.infotype>3&&s.infotype<0?0:s.infotype:0];var c=s.offsets?s.offsets:null;r||(r=e('<div id="'+t+'" class="qz_msgbox_layer_wrap"><span class="qz_msgbox_layer"><span class="msg-ct">保存</span><span class="gtl_ico"></span><span class="gtl_end"></span></span></div>').css({display:"block",position:"absolute",zIndex:l}).appendTo(document.body)),a=e(r),a.find("span.gtl_ico").removeClass("gtl_ico_hits gtl_ico_succ gtl_ico_fail gtl_ico_wait").addClass(o),a.find("span.msg-ct").html(i),i=a.getAlignToXY(s.el||document,d,c),a.css({left:i.x,top:i.y}).show(),s.notime||window.setTimeout(function(){a[0].style.display="none",s.callback&&"function"==typeof s.callback&&s.callback()},n)},e.fn.mask=function(t){e(this).each(function(){e.maskElement(e(this),t)})},e.fn.unmask=function(){e(this).each(function(){e.unmaskElement(e(this))})},e.fn.isMasked=function(){return this.hasClass("masked")},e.maskElement=function(t,i){var n=t.data("_mask_id"),s=9999,o=t.css("position");if(n||(n=YH.genId("mask_"),t.data("_mask_id",n)),"absolute"==o&&(s=t.css("zIndex")),"static"==o&&(t.css("position","relative"),t.data("_mask_chgpos","static")),t.isMasked()&&e.unmaskElement(t),t.addClass("masked"),o=e('<div id="'+n+'" class="loadmask" style="z-index:'+(s+5)+';position:fixed;top:0;padding:2000px;left:0;background-color:#CCC;width:100%;height:100%;zoom:1;">'+(YH.isIE6?'<iframe hideFocus="true" frameborder="0" src="javascript:\'\'" style="position:absolute;z-index:-1;width:100%;height:100%;top:0px;left:0px;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>':"")+"</div>"),o.setOpacity(.5),YH.userAgent.isIE&&(o.height(t.height()+parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"))),o.width(t.width()+parseInt(t.css("padding-left"))+parseInt(t.css("padding-right")))),t.append(o),void 0!==i){var a=t.offset().top;o=t.height();var r=e(document).scrollTop(),l=YH.dom.getViewportHeight();a>=r&&a+o<=r+l?(n=e('<div id="'+(n+"_msg")+'" style="display:none;z-index:'+(s+6)+';position:absolute;top:0;left:0;" class="qz_msgbox_layer_wrap"><span class="qz_msgbox_layer">'+i+'<span class="gtl_ico_wait"></span><span class="gtl_end"></span></span></div>'),t.append(n),s=Math.round(o/2-(n.height()-parseInt(n.css("padding-top"))-parseInt(n.css("padding-bottom")))/2),n.css("top",s+"px"),n.css("left",Math.round(t.width()/2-(n.width()-parseInt(n.css("padding-left"))-parseInt(n.css("padding-right")))/2)+"px"),n.show()):e.tmsg(n+"_msg",i,{notime:!0,zindex:s+6,infotype:3})}},e.unmaskElement=function(t){var i=t.data("_mask_id"),n=t.data("_mask_chgpos");t.find("#"+i).remove(),e("#"+i+"_msg")[0]&&e("#"+i+"_msg").remove(),t.removeClass("masked"),n&&(t.css("position",n),t.removeData("_mask_chgpos"))}}(jQuery);var cwf=cwf||{};cwf.isClientStarted=!1,cwf.domain="",cwf.webc=null,cwf.webcloaded=!1,cwf.webopt=null,cwf.cbQue={},cwf.isReady=!1,cwf.initCb_={fn:null,args:null},cwf.tasks={getData:function(e){if(""==e)return[];var t,i=this[e],n=[];return MT.isUndefined(i)?n:(t=i.data,MT.isPlainObject(t)&&(n=(t.data+"").replace(/\.:/g,"\\"),n=n.replace(/\\\\/g,"\\").replace(/\\/g,"\\\\"),n=MT.JSON.parse(n)||[]),n)},delItem:function(e,t){if(""!=e){var i,n,s=this[e]||{},o=0;for(i=this.getData(e),n=i.length;o<n;++o)if(i[o].mx_internal_uid==t){i.splice(o,1);break}s.data=s.data||{},s.data.data=MT.JSON.stringify(i)}},delAll:function(e){if(""!=e){var t=this[e]||{};t.data=t.data||{},t.data.data="[]"}},send:function(e,t,i,n){t=t||[];var s,o,a=20,r=0,l=t.length,d=0;if(l>0){for(s=[];d<l;++d)if(o=t[d],""!=o.path){var c={};if(c.nativePath=o.path.replace(/\\/g,".:"),c.args=o.strParam+"",s.push(c),(d+1)%a==0&&d>0){r++;var h=e;d<l-1&&(h=e+r);var u=MT.JSON.stringify(s),f=cwf.tasks[h]||{},p=f.data||{};p.data=u,n&&(p.args=n),cwf.flashToair(h,p),s=[]}}if(s.length>0){var m=MT.JSON.stringify(s),g=cwf.tasks[e]||{},v=g.data||{};v.data=m,n&&(v.args=n),cwf.flashToair(e,v)}}i&&MT.isFunction(i)&&(cwf.cbQue[e]=i)}},cwf.needdoac=!0,cwf.setStatus=function(e){this.isClientStarted=e,cwf.view.statText.show(e),e?cwf.needdoac&&cwf.doAc():cwf.needdoac=!0,cwf.Help()},cwf.getReady=function(){return cwf.isReady},cwf.setWebcInit=function(e){this.webGuid=e,this.webc=this.getSWF_("webCore"),this.isClientStarted&&cwf.doAc_()},cwf.doAc=function(){null!=cwf.initCb_.fn&&(cwf.initCb_.fn.apply(cwf,cwf.initCb_.args||[]),cwf.initCb_.fn=null,cwf.initCb_.args=null)},cwf.setWeboptInit=function(){cwf.webopt=this.getSWF_("MTSpear"),cwf.movieChange()},cwf.getSWF_=function(e){var t=navigator.userAgent.toLowerCase().search(/(msie\s|trident.*rv:)([\w.]+)/)!=-1;return t?window[e+"_ob"]:document[e+"_em"]||window[e+"_em"]},cwf.bForceUpdate=!1,cwf.checkAppVerUp=function(e,t){var i=cwf.forceUpadate(t);e&&i==-1&&(cwf.bForceUpdate=!0)},cwf.checkAppInstalled=function(e,t){var i,n=$("#_installtips");i=cwf.forceUpadate(t),t&&""!=t&&i==-1?(cwf.bForceUpdate=!0,cwf.showForce()):(cwf.bForceUpdate=!1,e?($("#mtFlash").show(),$("#_forceUpdate").hide(),n.hide()):n.show())},cwf.forceUpadate=function(e){return MT.string.compareVersions(e,"1.6.9")},cwf.showForce=function(){var e=$("#_installtips"),t=$("#_forceUpdate"),i=$("#mtFlash");cwf.view.dlgHelp.node&&(cwf.view.dlgHelp.show(),e.hide(),t.show(),i.hide())},cwf.checkWbc=function(){return!!MT.isObject(this.webc)},cwf.checkWbopt=function(){return!!MT.isObject(this.webopt)},cwf.airResponse=function(e,t){if(MT.isUndefined(e)||""==e)return!1;if("|--DOWNLOAD--|"==t)return $.tmsg&&$.tmsg("udtip","已成功添加到“MTT飞象传动平台”下载队列！",{infotype:1,offsets:[0,-80]}),!0;var i=cwf.cbQue[e];return!(MT.isUndefined(i)||!MT.isFunction(i))&&($.tmsg&&$.tmsg("udtip","已成功添加到“MTT飞象传动平台”上传队列！",{infotype:1,offsets:[0,-80]}),i(),void delete cwf.cbQue[e])},cwf.airToflash=function(e){if(e){var t,i=e.taskId;if(i&&""!=i&&(t=this.tasks[i],!MT.isUndefined(t))){var n=t.data;if(MT.isUndefined(n))t["data"]=e;else{var s,o=n.data;s=e.data||"[]",s.length>2&&(o=o.replace(/\]$/g,",")+s.replace(/^\[/g,""),n.data=o)}if(!e.isSplit){var a=t["callback"];MT.isFunction(a)&&a.call(this,i)}}}},cwf.flashToair=function(e,t){t=this.checkWebGuid(t),t.taskId||(t.taskId=e),cwf.checkWbc()&&cwf.webc.jsCallflashToAir(t),MT.isString(e)&&""!=e?delete cwf.tasks[e]:MT.isArray(e)&&e.length&&MT.each(e,function(t){delete cwf.tasks[e]})},cwf.checkWebGuid=function(e){e=e||{};var t=this;return MT.isUndefined(e.webGuid)&&(e.webGuid=t.webGuid,e.wDomain=t.getDomain(),e.webPort_=t.getPort(),e.hostServ=cwf.getHostServ(),e.type="MULTIUPLOAD"),e},cwf.getDomain=function(){return window.location.hostname},cwf.getPort=function(){return window.location.port},cwf.getHost=function(){var e=window.location.hostname,t=window.location.port;this.domain=e,""!=t&&(this.domain+=":"+t)},cwf.airFlash_=function(){var e=$("#g_airFlash");e[0]||(e=$('<div id="g_airFlash">air</div>'),$(document.body).append(e),e.css({width:"5px",height:"5px"}),cwf.embedSWF("#g_airFlash","airFlash","/webMT/badge/air/air.swf?r="+(new Date).getTime(),5,5))},cwf.coreFlash=function(){var e=$("#coreFlash");e[0]||(e=$('<div id="coreFlash">dadf</div>'),$(document.body).append(e),e.css({fontSize:0,width:"5px",height:"5px",position:"absolute",top:0,right:0}),cwf.embedSWF("#coreFlash","webCore","/webMT/badge/mtWeb.swf?r="+(new Date).getTime(),5,5))},cwf.initFlash=function(){var e="http://"+this.domain+"/webMT/app/MTShield.air",t="appname=MTShield&appurl="+e+"&airversion=1.5";cwf.embedSWF("#mtFlash","MTSpear","/webMT/badge/mtOpt.swf?r="+(new Date).getTime(),285,160,t)},cwf.embedSWF=function(e,t,i,n,s,o){function a(e,t,i,n,s){var o='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+i+'" height="'+n+'" name="'+e+'_ob" id="'+e+'_ob" data="'+t+'"><param name="quality" value="high" /><param name="AllowScriptAccess" value="always" /><param name="wmode" value="transparent" />'+(s?'<param name="flashVars" value="'+s+'" />':"")+'<param name="SRC" value="'+t+'" /><embed src="'+t+'" width="'+i+'" height="'+n+'" quality="high" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" id="'+e+'_em" name="'+e+'_em"></embed> </object>';return o}var r=$(e);MT.ua.flash.HAS_FLASH?MT.ua.flash.isVersion("9")?r.html(a(t,i,n,s,o)):r.html(a(t,"/webMT/badge/playerProductInstall.swf",n,s,o)):r.html('<a href="http://www.adobe.com/go/getflashplayer"><img src="/webMT/badge/get_flash_player.gif" alt="Get Adobe Flash player" /></a>')},cwf.movieChange=function(){$("#_gotoInstallview").unbind("click").bind("click",function(){cwf.checkWbopt()&&(MT.isFunction(cwf.webopt.jsCallshowInstall)&&cwf.webopt.jsCallshowInstall(),cwf.checkAppInstalled(!1))}),$("#_gotoStartview").unbind("click").bind("click",function(){cwf.checkWbopt()&&(MT.isFunction(cwf.webopt.jsCallshowStart)&&cwf.webopt.jsCallshowStart(),cwf.checkAppInstalled(!0))})},cwf.Help=function(){cwf.untip();var e=this.isClientStarted;e?cwf.view.dlgHelp.hide():cwf.view.dlgHelp.show()},cwf.launchApp_=function(){},cwf.dl=function(e){if(cwf.bForceUpdate)return cwf.showForce(),!1;if(cwf.initCb_={fn:cwf.dl,args:arguments},!this.isClientStarted)return void cwf.Help();if(!cwf.checkWbc())return $.tmsg&&$.tmsg("udtip","初始化中，请稍后！",{infotype:3}),!1;if(cwf.checkWbc()&&e.length&&($.tmsg&&$.tmsg("udtip","下载窗口启动中，请稍候...",{infotype:3,notime:!0}),MT.isFunction(cwf.webc.jsCalldoDownLoad))){e=e||[];var t=Math.uuid(8),i=cwf.getHostServ(),n=MT.JSON.stringify(e);cwf.webc.jsCalldoDownLoad(t,n,i)}},cwf.untip=function(){YH.$id("udtip")&&(YH.$id("udtip").style.display="none")},cwf.getHostServ=function(){return"undefined"!=typeof New_Master_Server_Address?New_Master_Server_Address:""},cwf.up=function(e,t,i,n){if(cwf.bForceUpdate)return cwf.showForce(),!1;if(cwf.initCb_={fn:cwf.up,args:arguments},!this.isClientStarted)return void cwf.Help();if(!cwf.checkWbc())return $.tmsg&&$.tmsg("udtip","初始化中，请稍后！",{infotype:3}),!1;var s,o="",a=!1;i&&(a=!0,s=$(i).attr("_uuid"),o=s&&8==s.length?s:""),""==o&&(o=Math.uuid(8),a&&$(i).attr("_uuid",o)),$.tmsg&&$.tmsg("udtip","上传窗口启动中，请稍候...",{infotype:3,notime:!0});var r=cwf.getHostServ();"undefined"!=typeof n&&n?MT.isFunction(cwf.webc.jsCallOneUpload)&&cwf.webc.jsCallOneUpload(o,e,r):MT.isFunction(cwf.webc.jsCallMultiUpload)&&cwf.webc.jsCallMultiUpload(o,e,r),cwf.tasks[o]=cwf.tasks[o]||{},cwf.tasks[o]["callback"]=t},cwf.upone=function(e,t,i){cwf.up(e,t,i,!0)},cwf.delUp=function(e){if(cwf.initCb_={fn:cwf.delUp,args:arguments},!this.isClientStarted)return void cwf.Help();if(!cwf.checkWbc())return $.tmsg&&$.tmsg("udtip","初始化中，请稍后！",{infotype:3}),!1;var t=Math.uuid(8),i=cwf.getHostServ();MT.isFunction(cwf.webc.jsCalldoDelUping)&&cwf.webc.jsCalldoDelUping(t,e,i)},cwf.view={dlgHelp:{id:".Client",init:function(){if(!$("div.Client")[0]){var e=cwf.tpl.help.join(""),t=this;$(document.body).append(e),this.node=$(this.id),this.node.find("a.close").unbind("click").bind("click",function(){t.hide()}),cwf.initFlash()}},show:function(){var e,t=this.node.getAlignToXY(document,"c-c"),i=0!=this.node.height();e=i?40:228,this.node.css({left:t.x,top:160,visibility:"visible",position:"fixed"}).show()},hide:function(){var e=this.node,t=e.find(".midd");t.isMasked()&&t.unmask(),e.css({visibility:"hidden"})}},statText:{show:function(e){var t=e?"已连接":"已断开";$("#linkstat")[0]&&$("#linkstat").html(t)}}},cwf.tpl={help:['<div class="Client small">','<div class="top">','<div class="l"></div>','<div class="m">','<div class="font">MTT飞象传动平台</div>','<div class="btn"><a href="javascript:;" class="close"></a></div>',"</div>",'<div class="r"></div>',"</div>",'<div class="midd">','<div class="m">','<div id="mtFlash">',"<h1>请安装flash</h1>",'<p><a href="http://www.adobe.com/go/getflashplayer"><img src="/webMT/badge/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>',"</div>",'<div class="webfont">',"<ul>",'<li class="last" id="_installtips">',"还没安装？<br />",'<p>点击下载：<a href="/webMT/app/install/MTShield.exe"><span style="color:#ff6633">MTT飞象传动平台</span></a>（windows版）</p>',"</li>",'<li class="last" id="_forceUpdate" style="display:none;">','<span style="color:#ff0000;font-size:14px;font-weight:bold">检测到版本更新(ver 1.6.9)，请更新</span><br />','<p><a href="/webMT/app/install/MTShield.exe"><span style="color:#ff6633;font-size:20px">请点我更新</span></a>（windows版）</p>','<p>需要帮助？<a target="_blank" href="/webMT/UpdateReadme/金地控件更新计划.htm"><span style="color:#ff6633;font-size:20px">请点我看更新步骤</span></a></p>','<p>更新完成?请<a href="javascript:window.location.reload();"><span style="color:#ff6633">点我刷新</span></a></p>',"<p>需要帮助请联系工作人员：</p>","<p>客服01：05923385501</p>","<p>客服02：05923385502</p>","</li>","</ul>","</div>","</div>","</div>",'<div class="bott">','<div class="l"></div>','<div class="m"></div>','<div class="r"></div>',"</div>","</div>"]},$(function(){cwf.isReady=!0,cwf.getHost(),cwf.airFlash_(),cwf.coreFlash()});var cwf=cwf||{};cwf.flashWidth=0,cwf.flashHeight=0,cwf.isView=!1,cwf.flashId="undefined",cwf.setFlashId=function(e){cwf.flashId=e},cwf.arrFileTableField=[["0","FileLibrary","fileId"],["1","ProjectResultDoc","projRetDocId"],["2","TargetAttachment","docId"],["3","ProductAdjunct","proAjdId"],["4","CusMagAttachment","docId"],["5","SpecDocAttachment","docId"],["6","ProjLibAttachment","docId"],["7","BidProjAttachment","docId"],["8","ProjTargetAdj","targetAttId"],["9","MaterialDoc","matDocId"],["10","ContractAdjunct","adjId"],["11","MailRefAttachment","mailRefAttId"],["12","CustRefFile","custRefFileId"],["13","CommentAttachment","ComAttId"],["14","CompetitorAttachment","comAttId"],["15","TrainingAttachment","caseDocId"],["16","AttributeAttachment","caseDocId"]],cwf.suffixClass={arrSwfFileExt:[".pdf",".doc",".xls",".ppt",".docx",".xlsx",".pptx",".txt"],arrImageFileExt:[".jpg",".gif",".png",".bmp",".jpeg",".tif",".tiff"],arrDwgFileExt:[".dwg",".dxf",".dwf"]},cwf.readOnline=function(e,t){var i,n=e.guid,s=(e.name,e.id),o=e.type,a=(e.ver,e.ext),r=!0;if(""==n)return hiAlert("文件尚未上传完成，请稍后阅读","提示信息"),!1;if(i=this.checkSuffix_(a),i==-1)cwf.needToDownLoad_(e);else{switch(i){case"arrSwfFileExt":cwf.flexpaper.loadSWFFile_(e,t);break;case"arrImageFileExt":cwf.image.show_(e);break;case"arrDwgFileExt":cwf.dwg_(e,t);break;default:r=!1,cwf.needToDownLoad_(e)}r&&cwf.uploadFileStatNum_(s,o,0)}},cwf.needToDownLoad_=function(e,t,i){MT.isObject(e)&&MT.isUndefined(e.ext)&&(e.ext="");var n=["<div>",'<div id="_g_loadtip"></div>','<div id="_g_fother">',"<p>{name}{ext}</p>","</div>",'<div><input type="button" value="下载到本地" class="dinpt" id="_g_dinpt" />'+(i&&"dwgAxdl"==i?' <a href="/DwgControl/MxDrawX.msi" target="_blank">安装dwg插件</a>':"")+"</div>","</div>"],s="",o="";s=""==t||MT.isUndefined(t)?"<p>你所查看的文件暂不支持在线浏览，请下载到本地打开！</p><p>给你造成不便敬请谅解！</p>":t,o=n.join(""),o=MT.string.compileTpl(o,e),void 0!=$.YH&&void 0!=$.YH.box?$.YH.box({target:$("<div>"+o+"</div>"),title:"需下载查看",buttonNames:[null,"关闭"],open:function(){$("#_g_loadtip").html(s),$("#_g_dinpt").click(function(){cwf.dl([{guid:e.guid,name:e.name+e.ext}]),$(this).destroy()})}}):box(o,{boxid:"needtodownload_",title:"需下载查看",no_submit:!0,setZIndex:!1,zIndex:33333,onOpen:function(t){$("#_g_loadtip").html(s),$("#_g_dinpt").click(function(){cwf.dl([{guid:e.guid,name:e.name+e.ext}]),t.destroy()})}})},cwf.checkSuffix_=function(e){if(!MT.isString(e)||""==e)return-1;var t,i,n;for(t in this.suffixClass)if(i=this.suffixClass[t],n=MT.array.indexOf(e.toLowerCase(),i),n!=-1)return t;return-1},cwf.downLoad=function(e,t,i,n){return""==e?(hiAlert("文件尚未上传完成，请稍后下载","提示信息"),!1):void $.get("/Home/IsUserCanDownLoad?time="+Math.random(),function(n){if(parseInt(n)<=0)return hiAlert("您下载的文档数量已达上限","无法下载"),!1;n<=fs.PopDownLimitLength&&hiOverAlert("您还可以下载文档的数量为: "+n),cwf.dl([{guid:e,name:t}]);var s={dltype:"1",fileobj:"",packageId:"",fileId:i,structId:"",filenames:t};cwf.Site.DownLoadPost("1",s)})},cwf.downLoadPack=function(e,t,i){var n=[];if("undefined"==typeof t)alert("请传输正确的工程包ID");else{var s="",o="";$(e).each(function(){n.push({guid:this.guid,name:this.path+this.name+this.ext}),s+="|YH|"+this.name+this.ext,o+="|YH|"+this.fileId}),cwf.dl(n);var a={dltype:"3",fileobj:i,packageId:t,fileId:o,structId:"",filenames:s};cwf.Site.DownLoadPost("3",a)}},cwf.downLoadFolder=function(e,t,i){var n=[];if("undefined"==typeof t)alert("请传输正确的文件夹ID");else{var s="",o="";$(e).each(function(){n.push({guid:this.guid,name:this.path+this.name+this.ext}),s+="|YH|"+this.name+this.ext,o+="|YH|"+this.fileId}),cwf.dl(n);var a={dltype:"2",fileobj:i,packageId:"",fileId:o,structId:t,filenames:s};cwf.Site.DownLoadPost("2",a)}},cwf.downLoadBatchFile=function(e,t){cwf.dl(e);var i="",n="";$(e).each(function(){i+="|YH|"+this.name,n+="|YH|"+this.fileId});var s={dltype:"1",fileobj:t,packageId:"",fileId:n,structId:"",filenames:i};cwf.Site.DownLoadPost("1",s)},cwf.uploadFileStatNum_=function(e,t,i){var n="",s="",o=this.arrFileTableField[t];n=o[1],s=o[2]},cwf.flexpaper={},cwf.flexpaper.loadSWFFile_=function(e,t){var i=e.swfUrl,n="undefined"!=typeof __gExtraHtml?__gExtraHtml:"";if(t=t||n,t=MT.string.compileTpl(t,e),""!=i){var s='<div style="border: 1px solid #b8cdc6">'+t+'<div id="gvflashContent" style="display:none"><p>请安装 Adobe Flash Player version 10.0.0 及以上，确保控件正常显示.<a href="http://www.adobe.com/go/getflashplayer"><img src="/webMT/badge/get_flash_player.gif" alt="获取flash player" /></a></p></div></div>',o=YH.dom.getViewportWidth(top.window);if(1==cwf.isView&&"undefined"!=$("#"+cwf.flashId)){if(cwf.flexpaper.flashChecker().f)if(cwf.flexpaper.flashChecker().v>=10){var a='<div id="gvflashContent" style="display:none"></div>';$("#"+cwf.flashId).append(a),$.ajax({url:"/Scripts/Modules/YHFlexPaper/js/flexpaper_flash.js",dataType:"script",cache:!0,success:function(){cwf.flexpaper.initFlexpaper_(i)}})}else{var r='<div style="border: 1px solid #b8cdc6">'+t+'<div id="gvflashContent" ><p>请安装 Adobe Flash Player version 10.0.0 及以上，确保控件正常显示.<a href="http://www.adobe.com/go/getflashplayer"><img src="/webMT/badge/get_flash_player.gif" alt="获取flash player" /></a></p></div></div>';$("#"+cwf.flashId).append(r)}}else void 0!=$.YH&&void 0!=$.YH.box?$.YH.box({target:$(s),title:e.name,width:o-200,buttonNames:[null,"关闭"],position:{my:"top",at:"top"},open:function(){$.ajax({url:"/Scripts/Modules/YHFlexPaper/js/flexpaper_flash.js",dataType:"script",cache:!0,success:function(){cwf.flexpaper.initFlexpaper_(i),cwf.Site.ViewPost(e.id,e.name+e.ext,i)}})}}):box(s,{boxid:"showFile",pos:"t-t",contentType:"html",title:e.name,cls:"shadow-container",width:o-200,no_submit:!0,cancel_BtnName:"关闭",onOpen:function(t){$.ajax({url:"/Scripts/Modules/YHFlexPaper/js/flexpaper_flash.js",dataType:"script",cache:!0,success:function(){cwf.flexpaper.initFlexpaper_(i),cwf.Site.ViewPost(e.id,e.name+e.ext,i)}})}})}else cwf.needToDownLoad_(e,"文件转换中，暂时无法在线阅读，请下载阅读")},cwf.flexpaper.flashChecker=function(){var e=0,t=0;if(document.all){var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");i&&(e=1,VSwf=i.GetVariable("$version"),t=parseInt(VSwf.split(" ")[1].split(",")[0]))}else if(navigator.plugins&&navigator.plugins.length>0){var i=navigator.plugins["Shockwave Flash"];if(i){e=1;for(var n=i.description.split(" "),s=0;s<n.length;++s)isNaN(parseInt(n[s]))||(t=parseInt(n[s]))}}return{f:e,v:t}},cwf.flexpaper.initFlexpaper_=function(e){var t="9.0.0",i="/Scripts/Modules/YHFlexPaper/js/swfobject/expressInstall.swf",n={SwfFile:e,Scale:.6,ZoomTransition:"easeOut",ZoomTime:.5,ZoomInterval:.1,FitPageOnLoad:!1,FitWidthOnLoad:!0,PrintEnabled:!1,FullScreenAsMaxWindow:!1,ProgressiveLoading:!0,PrintToolsVisible:!1,ViewModeToolsVisible:!0,ZoomToolsVisible:!0,FullScreenVisible:!0,NavToolsVisible:!0,CursorToolsVisible:!0,SearchToolsVisible:!0,localeChain:"zh_CN"},s={},o=YH.dom.getViewportWidth(top.window),a=YH.dom.getViewportHeight(top.window);0==cwf.isView?(cwf.flashWidth=o-200,cwf.flashHeight=a-100):(cwf.flashWidth=$("#"+cwf.flashId).attr("flashWidth"),cwf.flashHeight=$("#"+cwf.flashId).attr("flashHeight")),s.quality="high",s.bgcolor="#ffffff",s.allowscriptaccess="always",s.allowfullscreen="true",s.wmode="Opaque";var r={};r.id="FlexPaperViewer",r.name="FlexPaperViewer",swfobject.embedSWF("/Scripts/Modules/YHFlexPaper/FlexPaperViewer.swf","gvflashContent",cwf.flashWidth,cwf.flashHeight,t,i,n,s,r),swfobject.createCSS("#gvflashContent","display:block;text-align:left;"),cwf.setFlashId("undefined"),cwf.isView=!1},cwf.image={},cwf.image.show_=function(e){if(!e||!e.imgUrl)return alert("该图片不存在！"),!1;if($("#showimg_"+e.id).attr("href"))return $("#showimg_"+e.id).click(),!0;var t,i=MT.guid("imgView"),n=$('<a href="'+e.imgUrl+'" id="'+i+'" onclick="return hs.expand(this);" class="highslide"></a><div class="highslide-caption">'+e.name+e.ext+"</div>");$(top.document.body).append(n),t=$("#"+i,top.document.body),t.trigger("click")},cwf.checkDwgAx_=function(){try{new ActiveXObject("MXDRAWX.MxDrawXCtrl.1");return!0}catch(e){return!1}},cwf.dwg_=function(e){if(!e||!e.swfUrl)return alert("该文件不存在！"),!1;if(cwf.checkDwgAx_()){var t=YH.dom.getViewportWidth(top.window),i=YH.dom.getViewportHeight(top.window),n=e.swfUrl;n=n.replace(/\.swf$/i,e.ext),box("/DWG/ViewDwgFile?filePath="+encodeURI(n)+"&_r="+(new Date).getTime(),{boxid:"dwgview",pos:"t-t",contentType:"iframe",title:e.name,cls:"shadow-container",width:t-200,height:i-40,no_submit:!0,link:!0,cancel_BtnName:"关闭",onLoad:function(s){var o=s.fbox.find(".dlgIframe");o.css({width:t-204+"px",height:i-80+"px"}),o=o[0];var a=o.contentWindow.document.getElementById("dwgClient");a.width=t-234,a.height=i-130,cwf.Site.ViewPost(e.id,e.name+e.ext,n)}})}else cwf.needToDownLoad_(e,"你没安装dwg浏览器插件或者该浏览器不支持dwg在线查看，请下载！","dwgAxdl")},cwf.ImgVMgr={data:[],curPos:0,vw:0,vh:0,init:function(){var e=$("#g_imgViewerCt_b");e[0]||$('<div id="g_imgViewerCt_b" style="position:absolute;left:0;top:0;display:none;z-index:22222;font-size:0;"><div id="g_imgViewerCt_flashct"></div></div>').appendTo(document.body)},show:function(e){return e?(this.data=e.data||[],this.curPos=e.index||0,void(this.data.length&&(this.data.length<this.curPos+1&&(this.curPos=this.data.length-1),this._render()))):void alert("数据格式有误！")},_render:function(){this.init(),document.documentElement.style.overflow="hidden";var e=YH.dom.getViewportWidth(),t=YH.dom.getViewportHeight();this.vw=e,this.vh=t,swfobject.embedSWF("/webMT/badge/imgViewer.swf","g_imgViewerCt_flashct",e,t,"9.0.0","expressInstall.swf",!1,{allowfullscreen:!0,quality:"high"},null),$("#g_imgViewerCt_b").css({width:2,height:2,top:-20}).show(),this.viewLog()},flashLoaded:function(){$("#g_imgViewerCt_b").css({width:this.vw,height:this.vh,top:$(document).scrollTop()})},getViewPort:function(){return{w:YH.dom.getViewportWidth(),h:YH.dom.getViewportHeight()}},getImgsByPos:function(e){return e=e||0,[this.data[e]]},getCurrentPos:function(){return this.curPos},setCurPos:function(e){this.curPos=e,this.viewLog()},getTotalNum:function(){return this.data.length},unload:function(){$("#g_imgViewerCt_b").html('<div id="g_imgViewerCt_flashct"></div>').hide(),document.documentElement.style.overflow="auto"},bind:function(e,t){e.undelegate(t,"click").delegate(t,"click",function(){var i=t.replace(/\.|#/g,""),n=this,s=e.data("gimgList_"+i)||null,o=[],a=-1;if(!s){var r;e.find(t).each(function(e){r={thumbUrl:$(this).attr("data-thumb")||this.src,imgUrl:$(this).attr("data-img")||this.src,title:this.title||this.alt,pos:e,id:$(this).attr("data-fileId")||0},n===this&&(a=e),o.push(r)}),s={data:o,index:a},e.data("gimgList_"+i,s)}s=s||{},a==-1&&e.find(t).each(function(e){if(n===this)return s.index=e,!1}),s.index==-1&&(s.index=0),cwf.ImgVMgr.show(s)})},reset:function(e,t){$(e).removeData("gimgList_"+t.replace(/\.|#/g,""))},viewLog:function(){if($.inArray(this.curPos,this.arrView)<0){this.arrView.push(this.curPos);var e=this.data[this.curPos];cwf.Site.ViewPost(e.id,e.name+e.ext,e.imgUrl)}}},cwf.Site={Url:"/Home/LogFileReadAndDown?r="+Math.random(),ViewPost:function(e,t,i){var n="type=1&fileId="+e+"&fileName="+t+"&viewUrl="+i;$.ajax({type:"post",dataType:"json",data:n,url:this.Url,async:!0,success:function(e){}})},DownLoadPost:function(e,t){var i="type=2";for(var n in t)i+="&"+n+"="+t[n];$.ajax({type:"post",dataType:"json",data:i,url:this.Url,async:!0,success:function(e){}})}},$(function(){function e(e){e=window.event||e;var t=0;if(e.wheelDelta?(t=e.wheelDelta/120,window.opera&&(t=-t)):e.detail&&(t=-e.detail),"undefined"!=typeof swfobject&&null!=swfobject&&swfobject.getObjectById){var i=swfobject.getObjectById("FlexPaperViewer");"undefined"!=typeof i&&null!=i&&"undefined"!=typeof document.activeElement&&"FlexPaperViewer"==document.activeElement.id&&(e.preventDefault&&e.preventDefault(),"function"==typeof i.externalMouseEvent&&i.externalMouseEvent(t))}}var t=document.body||document.documentElement;"undefined"!=typeof t&&(window.addEventListener&&t.addEventListener("DOMMouseScroll",e,!1),t.onmousewheel=e)});var upCallbackFunc=null,fileTableId,uploadUUID,FileName,FileEXT,FileSize,FilePath,FileMathNum,swfobject=function(){function e(){if(!z){try{var e=L.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(e){return}z=!0;for(var t=O.length,i=0;i<t;i++)O[i]()}}function t(e){z?e():O[O.length]=e}function i(e){if(typeof M.addEventListener!=E)M.addEventListener("load",e,!1);else if(typeof L.addEventListener!=E)L.addEventListener("load",e,!1);else if(typeof M.attachEvent!=E)v(M,"onload",e);else if("function"==typeof M.onload){var t=M.onload;M.onload=function(){t(),e()}}else M.onload=e}function n(){R?s():o()}function s(){var e=L.getElementsByTagName("body")[0],t=g(I);t.setAttribute("type",A);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=E){var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),V.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(n<10)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,o()}()}else o()}function o(){var e=j.length;if(e>0)for(var t=0;t<e;t++){var i=j[t].id,n=j[t].callbackFn,s={success:!1,id:i};if(V.pv[0]>0){var o=m(i);if(o)if(!y(j[t].swfVersion)||V.wk&&V.wk<312)if(j[t].expressInstall&&r()){var c={};c.data=j[t].expressInstall,c.width=o.getAttribute("width")||"0",c.height=o.getAttribute("height")||"0",
o.getAttribute("class")&&(c.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(c.align=o.getAttribute("align"));for(var h={},u=o.getElementsByTagName("param"),f=u.length,p=0;p<f;p++)"movie"!=u[p].getAttribute("name").toLowerCase()&&(h[u[p].getAttribute("name")]=u[p].getAttribute("value"));l(c,h,i,n)}else d(o),n&&n(s);else x(i,!0),n&&(s.success=!0,s.ref=a(i),n(s))}else if(x(i,!0),n){var g=a(i);g&&typeof g.SetVariable!=E&&(s.success=!0,s.ref=g),n(s)}}}function a(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=E)t=i;else{var n=i.getElementsByTagName(I)[0];n&&(t=n)}return t}function r(){return!W&&y("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function l(e,t,i,n){W=!0,k=n||null,T={success:!1,id:i};var s=m(i);if(s){"OBJECT"==s.nodeName?(C=c(s),_=null):(C=s,_=i),e.id=P,(typeof e.width==E||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==E||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var o=V.ie&&V.win?"ActiveX":"PlugIn",a="MMredirectURL="+M.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+L.title;if(typeof t.flashvars!=E?t.flashvars+="&"+a:t.flashvars=a,V.ie&&V.win&&4!=s.readyState){var r=g("div");i+="SWFObjectNew",r.setAttribute("id",i),s.parentNode.insertBefore(r,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}h(e,t,i)}}function d(e){if(V.ie&&V.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=g("div");if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(I)[0];if(i){var n=i.childNodes;if(n)for(var s=n.length,o=0;o<s;o++)1==n[o].nodeType&&"PARAM"==n[o].nodeName||8==n[o].nodeType||t.appendChild(n[o].cloneNode(!0))}}return t}function h(e,t,i){var n,s=m(i);if(V.wk&&V.wk<312)return n;if(s)if(typeof e.id==E&&(e.id=i),V.ie&&V.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));var r="";for(var l in t)t[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+t[l]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+r+"</object>",F[F.length]=e.id,n=m(e.id)}else{var d=g(I);d.setAttribute("type",A);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?d.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&d.setAttribute(c,e[c]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&u(d,h,t[h]);s.parentNode.replaceChild(d,s),n=d}return n}function u(e,t,i){var n=g("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function f(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",function(){4==t.readyState?p(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=L.getElementById(e)}catch(e){}return t}function g(e){return L.createElement(e)}function v(e,t,i){e.attachEvent(t,i),U[U.length]=[e,t,i]}function y(e){var t=V.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function b(e,t,i,n){if(!V.ie||!V.mac){var s=L.getElementsByTagName("head")[0];if(s){var o=i&&"string"==typeof i?i:"screen";if(n&&(S=null,N=null),!S||N!=o){var a=g("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),S=s.appendChild(a),V.ie&&V.win&&typeof L.styleSheets!=E&&L.styleSheets.length>0&&(S=L.styleSheets[L.styleSheets.length-1]),N=o}V.ie&&V.win?S&&typeof S.addRule==I&&S.addRule(e,t):S&&typeof L.createTextNode!=E&&S.appendChild(L.createTextNode(e+" {"+t+"}"))}}}function x(e,t){if(q){var i=t?"visible":"hidden";z&&m(e)?m(e).style.visibility=i:b("#"+e,"visibility:"+i)}}function w(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=E?encodeURIComponent(e):e}var C,_,k,T,S,N,E="undefined",I="object",$="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",A="application/x-shockwave-flash",P="SWFObjectExprInst",B="onreadystatechange",M=window,L=document,H=navigator,R=!1,O=[n],j=[],F=[],U=[],z=!1,W=!1,q=!0,V=function(){var e=typeof L.getElementById!=E&&typeof L.getElementsByTagName!=E&&typeof L.createElement!=E,t=H.userAgent.toLowerCase(),i=H.platform.toLowerCase(),n=i?/win/.test(i):/win/.test(t),s=i?/mac/.test(i):/mac/.test(t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,r=[0,0,0],l=null;if(typeof H.plugins!=E&&typeof H.plugins[$]==I)l=H.plugins[$].description,!l||typeof H.mimeTypes!=E&&H.mimeTypes[A]&&!H.mimeTypes[A].enabledPlugin||(R=!0,a=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M.ActiveXObject!=E)try{var d=new ActiveXObject(D);d&&(l=d.GetVariable("$version"),l&&(a=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(e){}return{w3:e,pv:r,wk:o,ie:a,win:n,mac:s}}();(function(){V.w3&&((typeof L.readyState!=E&&"complete"==L.readyState||typeof L.readyState==E&&(L.getElementsByTagName("body")[0]||L.body))&&e(),z||(typeof L.addEventListener!=E&&L.addEventListener("DOMContentLoaded",e,!1),V.ie&&V.win&&(L.attachEvent(B,function(){"complete"==L.readyState&&(L.detachEvent(B,arguments.callee),e())}),M==top&&!function(){if(!z){try{L.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),V.wk&&!function(){if(!z)return/loaded|complete/.test(L.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var e=U.length,t=0;t<e;t++)U[t][0].detachEvent(U[t][1],U[t][2]);for(var i=F.length,n=0;n<i;n++)f(F[n]);for(var s in V)V[s]=null;V=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}();return{registerObject:function(e,t,i,n){if(V.w3&&e&&t){var s={};s.id=e,s.swfVersion=t,s.expressInstall=i,s.callbackFn=n,j[j.length]=s,x(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){if(V.w3)return a(e)},embedSWF:function(e,i,n,s,o,a,d,c,u,f){var p={success:!1,id:i};V.w3&&!(V.wk&&V.wk<312)&&e&&i&&n&&s&&o?(x(i,!1),t(function(){n+="",s+="";var t={};if(u&&typeof u===I)for(var m in u)t[m]=u[m];t.data=e,t.width=n,t.height=s;var g={};if(c&&typeof c===I)for(var v in c)g[v]=c[v];if(d&&typeof d===I)for(var b in d)typeof g.flashvars!=E?g.flashvars+="&"+b+"="+d[b]:g.flashvars=b+"="+d[b];if(y(o)){var w=h(t,g,i);t.id==i&&x(i,!0),p.success=!0,p.ref=w}else{if(a&&r())return t.data=a,void l(t,g,i,f);x(i,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){q=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,i){return V.w3?h(e,t,i):void 0},showExpressInstall:function(e,t,i,n){V.w3&&r()&&l(e,t,i,n)},removeSWF:function(e){V.w3&&f(e)},createCSS:function(e,t,i,n){V.w3&&b(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=L.location.search||L.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return w(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=m(P);e&&C&&(e.parentNode.replaceChild(C,e),_&&(x(_,!0),V.ie&&V.win&&(C.style.display="block")),k&&k(T)),W=!1}}}}();!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){n.trigger("closed").remove()}var n,s=e(this),o=s.attr("data-target");o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),n=e(o),t&&t.preventDefault(),n.length||(n=s.hasClass("alert")?s:s.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,i):i())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),s=n.data("alert");s||n.data("alert",s=new i(this)),"string"==typeof t&&s[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),s=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[s]()),i[s](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),s=n.data("button"),o="object"==typeof i&&i;s||n.data("button",s=new t(this,o)),"toggle"==i?s.toggle():i&&s.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var i=this.getActiveIndex(),n=this;if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid",function(){n.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,i){var n,s=this.$element.find(".item.active"),o=i||s[t](),a=this.interval,r="next"==t?"left":"right",l="next"==t?"first":"last",d=this;if(this.sliding=!0,a&&this.pause(),o=o.length?o:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:o[0],direction:r}),!o.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(d.$indicators.children()[d.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;o.addClass(t),o[0].offsetWidth,s.addClass(r),o.addClass(r),this.$element.one(e.support.transition.end,function(){o.removeClass([t,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),d.sliding=!1,setTimeout(function(){d.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;s.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each(function(){var n=e(this),s=n.data("carousel"),o=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),a="string"==typeof i?i:o.slide;s||n.data("carousel",s=new t(this,o)),"number"==typeof i?s.to(i):a?s[a]():o.interval&&s.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var i,n,s=e(this),o=e(s.attr("data-target")||(i=s.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),a=e.extend({},o.data(),s.data());o.carousel(a),(n=s.attr("data-slide-to"))&&o.data("carousel").pause().to(n).cycle(),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,s;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(s=n.data("collapse"),s&&s.transitioning)return;n.collapse("hide"),s||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var s=this,o=function(){"show"==i.type&&s.reset(),s.transitioning=0,s.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),s=n.data("collapse"),o=e.extend({},e.fn.collapse.defaults,n.data(),"object"==typeof i&&i);s||n.data("collapse",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),s=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),o=e(s).data("collapse")?"toggle":n.data();n[e(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(s).collapse(o)})}(window.jQuery),!function(e){"use strict";function t(){e(".dropdown-backdrop").remove(),e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=n&&e(n),i&&i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",s=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(n){var s,o,a=e(this);if(!a.is(".disabled, :disabled"))return s=i(a),o=s.hasClass("open"),t(),o||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),s.toggleClass("open")),a.focus(),!1},keydown:function(t){var s,o,a,r,l;if(/(38|40|27)/.test(t.keyCode)&&(s=e(this),t.preventDefault(),t.stopPropagation(),!s.is(".disabled, :disabled"))){if(a=i(s),r=a.hasClass("open"),!r||r&&27==t.keyCode)return 27==t.which&&a.find(n).focus(),s.click();o=e("[role=menu] li:not(.divider):visible a",a),o.length&&(l=o.index(o.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<o.length-1&&l++,~l||(l=0),o.eq(l).focus())}}};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,s.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",s.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),s=n.data("modal"),o=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);s||n.data("modal",s=new t(this,o)),"string"==typeof i?s[i]():o.show&&s.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),s=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},s.data(),i.data());t.preventDefault(),s.modal(o).one("hide",function(){i.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var s,o,a,r,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,a=this.options.trigger.split(" "),l=a.length;l--;)r=a[l],"click"==r?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=r&&(s="hover"==r?"mouseenter":"focus",o="hover"==r?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,n=e.fn[this.type].defaults,s={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(s[e]=t)},this),i=e(t.currentTarget)[this.type](s).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var t,i,n,s,o,a,r=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(r),r.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":a={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":a={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":a={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":a={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(a,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,s,o,a=this.tip(),r=a[0].offsetWidth,l=a[0].offsetHeight;a.offset(e).addClass(t).addClass("in"),i=a[0].offsetWidth,n=a[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,o=!0),"bottom"==t||"top"==t?(s=0,e.left<0&&(s=e.left*-2,e.left=0,a.offset(e),i=a[0].offsetWidth,n=a[0].offsetHeight),this.replaceArrow(s-r+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&a.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;i.tip().hasClass("in")?i.hide():i.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),s=n.data("popover"),o="object"==typeof i&&i;s||n.data("popover",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){function t(t,i){var n,s=e.proxy(this.process,this),o=e(e(t).is("body")?window:t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=o.on("scroll.scroll-spy.data-api",s),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" ul li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),s=/^#\w/.test(n)&&e(n);return s&&s.length&&[[s.position().top+(!e.isWindow(i.$scrollElement.get(0))&&i.$scrollElement.scrollTop()),n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),s=this.offsets,o=this.targets,a=this.activeTarget;if(t>=n)return a!=(e=o.last()[0])&&this.activate(e);for(e=s.length;e--;)a!=o[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(o[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),s=n.data("scrollspy"),o="object"==typeof i&&i;s||n.data("scrollspy",s=new t(this,o)),"string"==typeof i&&s[i]&&s[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,s=this.element,o=s.closest("ul:not(.dropdown-menu)"),a=s.attr("data-target");a||(a=s.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(t=o.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),s.trigger(n),n.isDefaultPrevented()||(i=e(a),this.activate(s.parent("li"),o),this.activate(i,i.parent(),function(){s.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),a=n&&e.support.transition&&o.hasClass("fade");a?o.one(e.support.transition.end,s):s(),o.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),s=n.data("tab");s||n.data("tab",s=new t(this)),"string"==typeof i&&s[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var i;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(i=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,i?this.process(i):this)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],s=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):s.push(t):i.push(t);return i.concat(n,s)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");
return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=e(t).map(function(t,n){return t=e(i.options.item).attr("data-value",n),t.find("a").html(i.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var i=this.$menu.find(".active").removeClass("active"),n=i.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each(function(){var n=e(this),s=n.data("typeahead"),o="object"==typeof i&&i;s||n.data("typeahead",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||i.typeahead(i.data())})}(window.jQuery),!function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),s=this.$element.offset(),o=this.options.offset,a=o.bottom,r=o.top,l="affix affix-top affix-bottom";"object"!=typeof o&&(a=r=o),"function"==typeof r&&(r=o.top()),"function"==typeof a&&(a=o.bottom()),t=!(null!=this.unpin&&n+this.unpin<=s.top)&&(null!=a&&s.top+this.$element.height()>=i-a?"bottom":null!=r&&n<=r&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?s.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),s=n.data("affix"),o="object"==typeof i&&i;s||n.data("affix",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(window.jQuery),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function i(e,t,i,n){return!(e.selector!=t.selector||e.context!=t.context||i&&i.$lqguid!=t.fn.$lqguid||n&&n.$lqguid!=t.fn2.$lqguid)}e.extend(e.fn,{livequery:function(t,s){var o,a=this;return e.each(n.queries,function(e,n){return i(a,n,t,s)?(o=n)&&!1:void 0}),o=o||new n(a.selector,a.context,t,s),o.stopped=!1,o.run(),a},expire:function(t,s){var o=this;return e.each(n.queries,function(e,a){i(o,a,t,s)&&!o.stopped&&n.stop(a.id)}),o}});var n=e.livequery=function(t,i,s,o){var a=this;return a.selector=t,a.context=i,a.fn=s,a.fn2=o,a.elements=e([]),a.stopped=!1,a.id=n.queries.push(a)-1,s.$lqguid=s.$lqguid||n.guid++,o&&(o.$lqguid=o.$lqguid||n.guid++),a};n.prototype={stop:function(){var t=this;t.stopped||(t.fn2&&t.elements.each(t.fn2),t.elements=e([]),t.stopped=!0)},run:function(){var t=this;if(!t.stopped){var i=t.elements,n=e(t.selector,t.context),s=n.not(i),o=i.not(n);t.elements=n,s.each(t.fn),t.fn2&&o.each(t.fn2)}}},e.extend(n,{guid:0,queries:[],queue:[],running:!1,timeout:null,registered:[],checkQueue:function(){if(n.running&&n.queue.length)for(var e=n.queue.length;e--;)n.queries[n.queue.shift()].run()},pause:function(){n.running=!1},play:function(){n.running=!0,n.run()},registerPlugin:function(){e.each(arguments,function(t,i){if(e.fn[i]&&!(e.inArray(i,n.registered)>0)){var s=e.fn[i];e.fn[i]=function(){var e=s.apply(this,arguments);return n.run(),e},n.registered.push(i)}})},run:function(i){i!==t?e.inArray(i,n.queue)<0&&n.queue.push(i):e.each(n.queries,function(t){e.inArray(t,n.queue)<0&&n.queue.push(t)}),n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.checkQueue,20)},stop:function(i){i!==t?n.queries[i].stop():e.each(n.queries,n.prototype.stop)}}),n.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),e(function(){n.play()})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window)}):"function"==typeof define&&define.cmd?define(function(t,i,n){var s=t("jquery");n.exports=e(s,window)}):e(jQuery,window)}(function($,window){return function(e,t){function i(t,i){var s,o,a,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,o=s.name,!(!t.href||!o||"map"!==s.nodeName.toLowerCase())&&(a=e("img[usemap=#"+o+"]")[0],!!a&&n(a))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,o=e(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(a,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,i)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0||(t[n]=1,s=t[n]>0,t[n]=0,s)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,s,o,a){return e.ui.isOverAxis(t,n,o)&&e.ui.isOverAxis(i,s,a)}}))}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}s(t)},e.widget=function(t,i,n){var s,o,a,r,l=t.split(".")[0];t=t.split(".")[1],s=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(n,function(t,s){e.isFunction(s)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=o,t}}())}),a.prototype=e.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:t},n,{constructor:a,namespace:l,widgetName:t,widgetBaseClass:s,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(i){for(var s,o,a=n.call(arguments,1),r=0,l=a.length;l>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==t&&(i[s]=e.isPlainObject(o)?e.isPlainObject(i[s])?e.widget.extend({},i[s],o):e.widget.extend({},o):o);return i},e.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;e.fn[i]=function(a){var r="string"==typeof a,l=n.call(arguments,1),d=this;return a=!r&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,r?this.each(function(){var n,s=e.data(this,o);return s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,l),n!==s&&n!==t?(d=n&&n.jquery?d.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+a+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new s(a,this))}),d}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,o,a,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},s=i.split("."),i=s.shift(),s.length){for(o=r[i]=e.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(i=s.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,a){function r(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),d=l[1]+o.eventNamespace,c=l[2];c?s.delegate(c,d,r):i.bind(d,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&e.effects&&(e.effects.effect[r]||e.uiBackCompat!==!1&&e.effects[r])?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(t),!!this.handle&&(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],s=!1;n&&(n=n.parentNode);)n==document&&(s=!0);if(!s&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var o=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){o._trigger("stop",t)!==!1&&o._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;i.offset();var s="hidden"!=e(n).css("overflow");this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(s?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName),o=t.pageX,a=t.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();r=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else r=this.containment;t.pageX-this.offset.click.left<r[0]&&(o=r[0]+this.offset.click.left),t.pageY-this.offset.click.top<r[1]&&(a=r[1]+this.offset.click.top),t.pageX-this.offset.click.left>r[2]&&(o=r[2]+this.offset.click.left),t.pageY-this.offset.click.top>r[3]&&(a=r[3]+this.offset.click.top)}if(i.grid){var d=i.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;a=r&&(d-this.offset.click.top<r[1]||d-this.offset.click.top>r[3])?d-this.offset.click.top<r[1]?d+i.grid[1]:d-i.grid[1]:d;var c=i.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;o=r&&(c-this.offset.click.left<r[0]||c-this.offset.click.left>r[2])?c-this.offset.click.left<r[0]?c+i.grid[0]:c-i.grid[0]:c}}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("draggable"),s=this;e.each(n.sortables,function(){var o=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,
this!=a&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),n=i.options,s=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(n.axis&&"x"==n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"==n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"==n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"==n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),s=n.options,o=s.snapTolerance,a=i.offset.left,r=a+n.helperProportions.width,l=i.offset.top,d=l+n.helperProportions.height,c=n.snapElements.length-1;c>=0;c--){var h=n.snapElements[c].left,u=h+n.snapElements[c].width,f=n.snapElements[c].top,p=f+n.snapElements[c].height;if(a>h-o&&u+o>a&&l>f-o&&p+o>l||a>h-o&&u+o>a&&d>f-o&&p+o>d||r>h-o&&u+o>r&&l>f-o&&p+o>l||r>h-o&&u+o>r&&d>f-o&&p+o>d){if("inner"!=s.snapMode){var m=Math.abs(f-d)<=o,g=Math.abs(p-l)<=o,v=Math.abs(h-r)<=o,y=Math.abs(u-a)<=o;m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left)}var b=m||g||v||y;if("outer"!=s.snapMode){var m=Math.abs(f-l)<=o,g=Math.abs(p-d)<=o,v=Math.abs(h-a)<=o,y=Math.abs(u-r)<=o;m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[c].snapping&&(m||g||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=m||g||v||y||b}else n.snapElements[c].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,i=e.makeArray(e(t.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(i.length){var n=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var s=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(s=!0,!1):void 0}),!s&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var s=(t.positionAbs||t.position.absolute).left,o=s+t.helperProportions.width,a=(t.positionAbs||t.position.absolute).top,r=a+t.helperProportions.height,l=i.offset.left,d=l+i.proportions.width,c=i.offset.top,h=c+i.proportions.height;switch(n){case"fit":return s>=l&&d>=o&&a>=c&&h>=r;case"intersect":return l<s+t.helperProportions.width/2&&o-t.helperProportions.width/2<d&&c<a+t.helperProportions.height/2&&r-t.helperProportions.height/2<h;case"pointer":var u=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,p=e.ui.isOver(f,u,c,l,i.proportions.height,i.proportions.width);return p;case"touch":return(a>=c&&h>=a||r>=c&&h>=r||c>a&&r>h)&&(s>=l&&d>=s||o>=l&&d>=o||l>s&&o>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{'default':[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,o=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var a=0;a<n.length;a++)if(!(n[a].options.disabled||t&&!n[a].accept.call(n[a].element[0],t.currentItem||t.element))){for(var r=0;r<o.length;r++)if(o[r]==n[a].element[0]){n[a].proportions.height=0;continue e}n[a].visible="none"!=n[a].element.css("display"),n[a].visible&&("mousedown"==s&&n[a]._activate.call(n[a],i),n[a].offset=n[a].element.offset(),n[a].proportions={width:n[a].element[0].offsetWidth,height:n[a].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),s=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(s){var o;if(this.options.greedy){var a=this.options.scope,r=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===a});r.length&&(o=e.data(r[0],"droppable"),o.greedyChild="isover"==s?1:0)}o&&"isover"==s&&(o.isover=0,o.isout=1,o._out.call(o,i)),this[s]=1,this["isout"==s?"isover":"isout"]=0,this["isover"==s?"_over":"_out"].call(this,i),o&&"isout"==s&&(o.isout=0,o.isover=1,o._over.call(o,i))}}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var s=0;s<n.length;s++){var o=e.trim(n[s]),a="ui-resizable-"+o,r=e('<div class="ui-resizable-handle '+a+'"></div>');r.css({zIndex:i.zIndex}),"se"==o&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(r)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n=e(this.handles[i],this.element),s=0;s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();var o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(o,s),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())}).mouseleave(function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var n=this.options,s=this.element.position(),o=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(o.is(".ui-draggable")||/absolute/.test(o.css("position")))&&o.css({position:"absolute",top:s.top,left:s.left}),this._renderProxy();var a=t(this.helper.css("left")),r=t(this.helper.css("top"));n.containment&&(a+=e(n.containment).scrollLeft()||0,r+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:r},this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.originalPosition={left:a,top:r},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),o.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var t=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,s=e.pageX-i.left||0,o=e.pageY-i.top||0,a=this._change[n];if(!a)return!1;var r=a.apply(this,[e,s,o]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(r=this._updateRatio(r,e)),r=this._respectSize(r,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(r),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var s=this._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),a=o&&e.ui.hasScroll(s[0],"left")?0:n.sizeDiff.height,r=o?0:n.sizeDiff.width,l={width:n.helper.width()-r,height:n.helper.height()-a},d=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:c,left:d})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,s,o,a,r=this.options;a={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,n=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),n<a.maxWidth&&(a.maxWidth=n),o<a.maxHeight&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.options,this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),n=this.size,s=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==s&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"==s&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e,t){var n=(this.helper,this._vBoundaries),s=(this._aspectRatio||t.shiftKey,this.axis),o=i(e.width)&&n.maxWidth&&n.maxWidth<e.width,a=i(e.height)&&n.maxHeight&&n.maxHeight<e.height,r=i(e.width)&&n.minWidth&&n.minWidth>e.width,l=i(e.height)&&n.minHeight&&n.minHeight>e.height;r&&(e.width=n.minWidth),l&&(e.height=n.minHeight),o&&(e.width=n.maxWidth),a&&(e.height=n.maxHeight);var d=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);r&&h&&(e.left=d-n.minWidth),o&&h&&(e.left=d-n.maxWidth),l&&u&&(e.top=c-n.minHeight),a&&u&&(e.top=c-n.maxHeight);var f=!e.width&&!e.height;return f&&!e.left&&e.top?e.top=null:f&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var s=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],o=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var i=parseInt(e,10)||0,n=parseInt(o[t],10)||0;return i+n})}n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.ui.ie6?1:0,s=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=(this.options,this.originalSize),n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("resizable"),s=n.options,o=n.originalSize,a=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-a.top||0,left:n.position.left-a.left||0},l=function(t,n){e(t).each(function(){var t=e(this),s=e(this).data("resizable-alsoresize"),o={},a=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):e.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),a=o&&e.ui.hasScroll(s[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},d=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,c&&d?{top:c,left:d}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),n=i.options,s=i.element,o=n.containment,a=o instanceof e?o.get(0):/parent/.test(o)?s.parent().get(0):o;if(a)if(i.containerElement=e(a),/document/.test(o)||o==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var r=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){l[e]=t(r.css("padding"+i))}),i.containerOffset=r.offset(),i.containerPosition=r.position(),i.containerSize={height:r.innerHeight()-l[3],width:r.innerWidth()-l[1]};var d=i.containerOffset,c=i.containerSize.height,h=i.containerSize.width,u=e.ui.hasScroll(a,"left")?a.scrollWidth:h,f=e.ui.hasScroll(a)?a.scrollHeight:c;i.parentData={element:a,left:d.left,top:d.top,width:u,height:f}}},resize:function(t){var i=e(this).data("resizable"),n=i.options,s=(i.containerSize,i.containerOffset),o=(i.size,i.position),a=i._aspectRatio||t.shiftKey,r={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(r=s),o.left<(i._helper?s.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-s.left:i.position.left-r.left),a&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=n.helper?s.left:0),o.top<(i._helper?s.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-s.top:i.position.top),a&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?s.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var d=Math.abs((i._helper?i.offset.left-r.left:i.offset.left-r.left)+i.sizeDiff.width),c=Math.abs((i._helper?i.offset.top-r.top:i.offset.top-s.top)+i.sizeDiff.height),h=i.containerElement.get(0)==i.element.parent().get(0),u=/relative|absolute/.test(i.containerElement.css("position"));h&&u&&(d-=i.parentData.left),d+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-d,a&&(i.size.height=i.size.width/i.aspectRatio)),c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,a&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,n=(t.position,t.containerOffset),s=t.containerPosition,o=t.containerElement,a=e(t.helper),r=a.offset(),l=a.outerWidth()-t.sizeDiff.width,d=a.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:r.left-s.left-n.left,width:l,height:d}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:r.left-s.left-n.left,width:l,height:d})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){var i=e(this).data("resizable"),n=i.options,s=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis;n._aspectRatio||t.shiftKey,n.grid="number"==typeof n.grid?[n.grid,n.grid]:n.grid;var l=Math.round((s.width-o.width)/(n.grid[0]||1))*(n.grid[0]||1),d=Math.round((s.height-o.height)/(n.grid[1]||1))*(n.grid[1]||1);/^(se|s|e)$/.test(r)?(i.size.width=o.width+l,i.size.height=o.height+d):/^(ne)$/.test(r)?(i.size.width=o.width+l,i.size.height=o.height+d,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=o.width+l,i.size.height=o.height+d,i.position.left=a.left-l):(i.size.width=o.width+l,i.size.height=o.height+d,i.position.top=a.top-d,i.position.left=a.left-l)}});var t=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().andSelf().each(function(){var n=e.data(this,"selectable-item");if(n){var s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,s=this.opos[0],o=this.opos[1],a=t.pageX,r=t.pageY;if(s>a){var l=a;a=s,s=l}if(o>r){var l=r;r=o,o=l}return this.helper.css({left:s,top:o,width:a-s,height:r-o}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var d=!1;"touch"==n.tolerance?d=!(l.left>a||l.right<s||l.top>r||l.bottom<o):"fit"==n.tolerance&&(d=l.left>s&&l.right<a&&l.top>o&&l.bottom<r),d?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),
l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var s=null;if(e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")==n?(s=e(this),!1):void 0}),e.data(t.target,n.widgetName+"-item")==n&&(s=e(t.target)),!s)return!1;if(this.options.handle&&!i){var o=!1;if(e(this.options.handle,s).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var s=this.items.length-1;s>=0;s--){var o=this.items[s],a=o.item[0],r=this._intersectsWithPointer(o);if(r&&o.instance===this.currentContainer&&a!=this.currentItem[0]&&this.placeholder[1==r?"next":"prev"]()[0]!=a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"!=this.options.type||!e.contains(this.element[0],a))){if(this.direction=1==r?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,s=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,o=e.left,a=o+e.width,r=e.top,l=r+e.height,d=this.offset.click.top,c=this.offset.click.left,h=n+d>r&&l>n+d&&t+c>o&&a>t+c;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&r<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),s=i&&n,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return!!s&&(this.floating?a&&"right"==a||"down"==o?2:1:o&&("down"==o?2:1))},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"==o&&n||"left"==o&&!n:s&&("down"==s&&i||"up"==s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--)for(var a=e(s[o]),r=a.length-1;r>=0;r--){var l=e.data(a[r],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=n.length-1;o>=0;o--)n[o][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var o=s.length-1;o>=0;o--)for(var a=e(s[o]),r=a.length-1;r>=0;r--){var l=e.data(a[r],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var o=n.length-1;o>=0;o--)for(var d=n[o][1],c=n[o][0],r=0,h=c.length;h>r;r++){var u=e(c[r]);u.data(this.widgetName+"-item",d),i.push({item:u,instance:d,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var s=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=s.outerWidth(),n.height=s.outerHeight());var o=s.offset();n.left=o.left,n.top=o.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var o=this.containers[i].element.offset();this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var i=t.options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,s){(!n||i.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var i=null,n=null,s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(i&&e.contains(this.containers[s].element[0],i.element[0]))continue;i=this.containers[s],n=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var o=1e4,a=null,r=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",d=this.positionAbs[r]+this.offset.click[r],c=this.items.length-1;c>=0;c--)if(e.contains(this.containers[n].element[0],this.items[c].item[0])&&this.items[c].item[0]!=this.currentItem[0]){var h=this.items[c].item.offset()[r],u=!1;Math.abs(h-d)>Math.abs(h+this.items[c][l]-d)&&(u=!0,h+=this.items[c][l]),Math.abs(h-d)<o&&(o=Math.abs(h-d),a=this.items[c],this.direction=u?"up":"down")}if(!a&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),s="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var o=t.pageX,a=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid)){var r=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1];a=this.containment&&(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?r-this.offset.click.top<this.containment[1]?r+i.grid[1]:r-i.grid[1]:r;var l=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0];o=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s==this.counter&&this.refreshPositions(!n)})},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)("auto"==this._storedCSS[s]||"static"==this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(i||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var s=this.containers.length-1;s>=0;s--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var s=0;s<n.length;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var i=e.uiBackCompat!==!1,n="ui-effects-";e.effects={effect:{}},function(t,i){function n(e,t,i){var n=u[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function s(e){var i=c(),n=i._rgba=[];return e=e.toLowerCase(),m(d,function(t,s){var o,a=s.re.exec(e),r=a&&s.parse(a),l=s.space||"rgba";return r?(o=i[l](r),i[h[l].cache]=o[h[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),i):a[e]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var a,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,d=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=c.support={},p=t("<p>")[0],m=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=p.style.backgroundColor.indexOf("rgba")>-1,m(h,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,r,l,d){if(o===i)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(r),r=i);var u=this,f=t.type(o),p=this._rgba=[];return r!==i&&(o=[o,r,l,d],f="array"),"string"===f?this.parse(s(o)||a._default):"array"===f?(m(h.rgba.props,function(e,t){p[t.idx]=n(o[t.idx],t)}),this):"object"===f?(o instanceof c?m(h,function(e,t){o[t.cache]&&(u[t.cache]=o[t.cache].slice())}):m(h,function(t,i){var s=i.cache;m(i.props,function(e,t){if(!u[s]&&i.to){if("alpha"===e||null==o[e])return;u[s]=i.to(u._rgba)}u[s][t.idx]=n(o[e],t,!0)}),u[s]&&e.inArray(null,u[s].slice(0,3))<0&&(u[s][3]=1,i.from&&(u._rgba=i.from(u[s])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return m(h,function(e,s){var o,a=t[s.cache];return a&&(o=n[s.cache]||s.to&&s.to(n._rgba)||[],m(s.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===o[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return m(h,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var i=c(e),s=i._space(),o=h[s],a=0===this.alpha()?c("transparent"):this,r=a[o.cache]||o.to(a._rgba),l=r.slice();return i=i[o.cache],m(o.props,function(e,s){var o=s.idx,a=r[o],d=i[o],c=u[s.type]||{};null!==d&&(null===a?l[o]=d:(c.mod&&(d-a>c.mod/2?a+=c.mod:a-d>c.mod/2&&(a-=c.mod)),l[o]=n((d-a)*t+a,s)))}),this[s](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=c(e)._rgba;return c(t.map(i,function(e,t){return(1-n)*s[t]+n*e}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,s=e[1]/255,o=e[2]/255,a=e[3],r=Math.max(n,s,o),l=Math.min(n,s,o),d=r-l,c=r+l,h=.5*c;return t=l===r?0:n===r?60*(s-o)/d+360:s===r?60*(o-n)/d+120:60*(n-s)/d+240,i=0===h||1===h?h:.5>=h?d/c:d/(2-c),[Math.round(t)%360,i,h,null==a?1:a]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],a=.5>=n?n*(1+i):n+i-n*i,r=2*n-a;return[Math.round(255*o(r,a,t+1/3)),Math.round(255*o(r,a,t)),Math.round(255*o(r,a,t-1/3)),s]},m(h,function(e,s){var o=s.props,a=s.cache,r=s.to,d=s.from;c.fn[e]=function(e){if(r&&!this[a]&&(this[a]=r(this._rgba)),e===i)return this[a].slice();var s,l=t.type(e),h="array"===l||"object"===l?e:arguments,u=this[a].slice();return m(o,function(e,t){var i=h["object"===l?e:t.idx];null==i&&(i=u[t.idx]),u[t.idx]=n(i,t)}),d?(s=c(d(u)),s[a]=u,s):c(u)},m(o,function(i,n){c.fn[i]||(c.fn[i]=function(s){var o,a=t.type(s),r="alpha"===i?this._hsla?"hsla":"rgba":e,d=this[r](),c=d[n.idx];return"undefined"===a?c:("function"===a&&(s=s.call(this,c),a=t.type(s)),null==s&&n.empty?this:("string"===a&&(o=l.exec(s),o&&(s=c+parseFloat(o[2])*("+"===o[1]?1:-1))),d[n.idx]=s,this[r](d)))})})}),m(r,function(e,i){t.cssHooks[i]={set:function(e,n){var o,a,r="";if("string"!==t.type(n)||(o=s(n))){if(n=c(o||n),!f.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&a&&a.style;)try{r=t.css(a,"backgroundColor"),a=a.parentNode}catch(e){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(e){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=c(e.elem,i),e.end=c(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,s={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)t=n[i],"string"==typeof n[t]&&(s[e.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(s[t]=n[t]);return s}function n(t,i){var n,s,a={};for(n in i)s=i[n],t[n]!==s&&(o[n]||(e.fx.step[n]||!isNaN(parseFloat(s)))&&(a[n]=s));return a}var s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,o,a,r){var l=e.speed(o,a,r);return this.queue(function(){var o,a=e(this),r=a.attr("class")||"",d=l.children?a.find("*").andSelf():a;d=d.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),o=function(){e.each(s,function(e,i){t[i]&&a[i+"Class"](t[i])})},o(),d=d.map(function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this}),a.attr("class",r),
d=d.map(function(){var t=this,i=e.Deferred(),n=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,d.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,s){return i?e.effects.animateClass.call(this,{add:t},i,n,s):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,s){return i?e.effects.animateClass.call(this,{remove:t},i,n,s):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,s,o,a){return"boolean"==typeof n||n===t?s?e.effects.animateClass.call(this,n?{add:i}:{remove:i},s,o,a):this._toggleClass(i,n):e.effects.animateClass.call(this,{toggle:i},n,s,o)},switchClass:function(t,i,n,s,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,s,o)}})}(),function(){function s(t,i,n,s){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),e.isFunction(n)&&(s=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=s||i.complete,t}function o(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]&&(!i||!e.effects[t])}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var s,o;for(o=0;o<i.length;o++)null!==i[o]&&(s=e.data(n+i[o]),s===t&&(s=""),e.css(i[o],s))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(s),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){var o=t.cssUnit(i);o[0]>0&&(s[i]=o[0]*n+o[1])}),s}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(o)&&o.call(s[0]),e.isFunction(t)&&t()}var s=e(this),o=n.complete,a=n.mode;(s.is(":hidden")?"hide"===a:"show"===a)?i():r.call(s[0],n,i)}var n=s.apply(this,arguments),o=n.mode,a=n.queue,r=e.effects.effect[n.effect],l=!r&&i&&e.effects[n.effect];return e.fx.off||!r&&!l?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):r?a===!1?this.each(t):this.queue(a||"fx",t):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:e.fn.show,show:function(e){if(o(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(o(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(o(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var i=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t),n=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),n.collapsible||n.active!==!1&&null!=n.active||(n.active=0),n.active<0&&(n.active+=this.headers.length),this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(t){var n=e(this),s=n.attr("id"),o=n.next(),a=o.attr("id");s||(s=i+"-header-"+t,n.attr("id",s)),a||(a=i+"-panel-"+t,o.attr("id",a)),n.attr("aria-controls",a),o.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(n.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,i,n=this.options.heightStyle,s=this.element.parent();"fill"===n?(e.support.minHeight||(i=s.css("overflow"),s.css("overflow","hidden")),t=s.height(),this.element.siblings(":visible").each(function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))}),i&&s.css("overflow",i),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={};t&&(e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s[0]===n[0],a=o&&i.collapsible,r=a?e():s.next(),l=n.next(),d={oldHeader:n,oldPanel:l,newHeader:a?e():s,newPanel:r};t.preventDefault(),o&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=!a&&this.headers.index(s),this.active=o?e():s,this._toggle(d),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,s){var o,a,r,l=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},u=c&&h.down||h,f=function(){l._toggleComplete(s)};return"number"==typeof u&&(r=u),"string"==typeof u&&(a=u),a=a||u.easing||h.easing,r=r||u.duration||h.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(i,{duration:r,easing:a,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:r,easing:a,complete:f,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?d+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-t.outerHeight()-d),d=0)}})):t.animate(i,r,a,f):e.animate(n,r,a,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=t._create;t._create=function(){if(this.options.navigation){var t=this,n=this.element.find(this.options.header),s=n.next(),o=n.add(s).find("a").filter(this.options.navigationFilter)[0];o&&n.add(s).each(function(i){return e.contains(this,o)?(t.options.active=Math.floor(i/2),!1):void 0})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=t._create,n=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(e){("autoHeight"===e||"clearStyle"===e||"fillSpace"===e)&&(this.options.heightStyle=this._mergeHeightStyle()),n.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(e=this.headers.index(this.headers.filter(e)),-1===e&&(e=!1)),i.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var i=t._trigger;t._trigger=function(e,t,n){var s=i.apply(this,arguments);return!!s&&("beforeActivate"===e?s=i.call(this,"changestart",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel}):"activate"===e&&(s=i.call(this,"change",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel})),s)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var i=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animate=!!e.animated&&("slide"===e.animated?300:"bounceslide"===e.animated?{duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animated)),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case o.UP:t=!0,this._keyEvent("previous",s);break;case o.DOWN:t=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i,n,s,o="ui-button ui-widget ui-state-default ui-corner-all",a="ui-state-hover ui-state-active ",r="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},d=function(t){var i=t.name,n=t.form,s=e([]);return i&&(s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,r=this.options,c="checkbox"===this.type||"radio"===this.type,h=c?"":"ui-state-active",u="ui-state-focus";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){a.buttonElement.addClass(u)}).bind("blur"+this.eventNamespace,function(){a.buttonElement.removeClass(u)}),c&&(this.element.bind("change"+this.eventNamespace,function(){s||a.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){r.disabled||(s=!1,i=e.pageX,n=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){r.disabled||(i!==e.pageX||n!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!r.disabled&&!s&&(e(this).toggleClass("ui-state-active"),void a.buttonElement.attr("aria-pressed",a.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled||s)return!1;e(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var t=a.element[0];d(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!r.disabled&&(e(this).addClass("ui-state-active"),t=this,void a.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return!r.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return!r.disabled&&void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+a+" "+r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?d(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(r),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"",prevText:"&#x3C;上月",nextText:"下月&#x3E;",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover");
}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(e){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var s=this._get(t,"showOn");if(("focus"==s||"both"==s)&&e.focus(this._showDatepicker),"button"==s||"both"==s){var o=this._get(t,"buttonText"),a=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:a,alt:o,title:o}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==a?o:$("<img/>").attr({src:a,alt:o,title:o}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,n){t.settings[i]=n}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,s){var o=this._dialogInst;if(!o){this.uuid+=1;var a="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+a+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},$.data(this._dialogInput[0],PROP_NAME,o)}if(extendRemove(o.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(o,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,!this._pos){var r=document.documentElement.clientWidth,l=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[r/2-100+d,l/2-150+c]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,o),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var s=t.children("."+this._inlineClass);s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var s=t.children("."+this._inlineClass);s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var s=t||{};if("string"==typeof t&&(s={},s[t]=i),n){this._curInst==n&&this._hideDatepicker();var o=this._getDateDatepicker(e,!0),a=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max");extendRemove(n.settings,s),null!==a&&s.dateFormat!==undefined&&s.minDate===undefined&&(n.settings.minDate=this._formatDate(n,a)),null!==r&&s.dateFormat!==undefined&&s.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,r)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,o),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var s=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);s[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,s[0]);var o=$.datepicker._get(t,"onSelect");if(o){var a=$.datepicker._formatDate(t);o.apply(t.input?t.input[0]:null,[a,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(n!==!1){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var s=!1;$(e).parents().each(function(){return s|="fixed"==$(this).css("position"),!s});var o={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),o=$.datepicker._checkOffset(t,o,s),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),!t.inline){var a=$.datepicker._get(t,"showAnim"),r=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[a]||$.effects[a])?t.dpDiv.show(a,$.datepicker._get(t,"showOptions"),r,l):t.dpDiv[a||"show"](a?r:null,l),a&&r||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),s=n[1],o=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout(function(){a===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),a=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-o:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+a?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>r&&r>n?Math.abs(t.left+n-r):0),t.top-=Math.min(t.top,t.top+s>l&&l>s?Math.abs(s+a):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),s=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,s):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1;var o=this._get(t,"onClose");o&&o.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),s=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(s,t+("M"==i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),s=this._getInst(n[0]);s["selected"+("M"==i?"Month":"Year")]=s["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(n)},_selectDay:function(e,t,i,n){var s=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(s[0])){var o=this._getInst(s[0]);o.selectedDay=o.currentDay=$("a",n).html(),o.selectedMonth=o.currentMonth=t,o.selectedYear=o.currentYear=i,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var s=this._get(n,"onSelect");s?s.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),s=this.formatDate(i,n,this._getFormatConfig(e));$(t).each(function(){$(this).val(s)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,d=-1,c=-1,h=-1,u=!1,f=function(t){var i=y+1<e.length&&e.charAt(y+1)==t;return i&&y++,i},p=function(e){var i=f(e),n="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,s=new RegExp("^\\d{1,"+n+"}"),o=t.substring(v).match(s);if(!o)throw"Missing number at position "+v;return v+=o[0].length,parseInt(o[0],10)},m=function(e,i,n){var s=$.map(f(e)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),o=-1;if($.each(s,function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(o=i[0],v+=n.length,!1):void 0}),-1!=o)return o+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;y<e.length;y++)if(u)"'"!=e.charAt(y)||f("'")?g():u=!1;else switch(e.charAt(y)){case"d":c=p("d");break;case"D":m("D",s,o);break;case"o":h=p("o");break;case"m":d=p("m");break;case"M":d=m("M",a,r);break;case"y":l=p("y");break;case"@":var b=new Date(p("@"));l=b.getFullYear(),d=b.getMonth()+1,c=b.getDate();break;case"!":var b=new Date((p("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),d=b.getMonth()+1,c=b.getDate();break;case"'":f("'")?g():u=!0;break;default:g()}if(v<t.length){var x=t.substr(v);if(!/^\s+/.test(x))throw"Extra/unparsed characters found in date: "+x}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),h>-1)for(d=1,c=h;;){var w=this._getDaysInMonth(l,d-1);if(w>=c)break;d++,c-=w}var b=this._daylightSavingAdjust(new Date(l,d-1,c));if(b.getFullYear()!=l||b.getMonth()+1!=d||b.getDate()!=c)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,r=function(t){var i=u+1<e.length&&e.charAt(u+1)==t;return i&&u++,i},l=function(e,t,i){var n=""+t;if(r(e))for(;n.length<i;)n="0"+n;return n},d=function(e,t,i,n){return r(e)?n[t]:i[t]},c="",h=!1;if(t)for(var u=0;u<e.length;u++)if(h)"'"!=e.charAt(u)||r("'")?c+=e.charAt(u):h=!1;else switch(e.charAt(u)){case"d":c+=l("d",t.getDate(),2);break;case"D":c+=d("D",t.getDay(),n,s);break;case"o":c+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=l("m",t.getMonth()+1,2);break;case"M":c+=d("M",t.getMonth(),o,a);break;case"y":c+=r("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":r("'")?c+="'":h=!0;break;default:c+=e.charAt(u)}return c},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=s+1<e.length&&e.charAt(s+1)==t;return i&&s++,i},s=0;s<e.length;s++)if(i)"'"!=e.charAt(s)||n("'")?t+=e.charAt(s):i=!1;else switch(e.charAt(s)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(s)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,s=this._get(e,"dateFormat"),o=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var a=this._getFormatConfig(e);try{i=this.parseDate(s,o,a)||n}catch(e){this.log(e),o=t?"":o}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=o?i.getDate():0,e.currentMonth=o?i.getMonth():0,e.currentYear=o?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(e){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,n=i.getFullYear(),s=i.getMonth(),o=i.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=a.exec(t);r;){switch(r[2]||"d"){case"d":case"D":o+=parseInt(r[1],10);break;case"w":case"W":o+=7*parseInt(r[1],10);break;case"m":case"M":s+=parseInt(r[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(n,s));break;case"y":case"Y":n+=parseInt(r[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(n,s))}r=a.exec(t)}return new Date(n,s,o)},o=null==t||""===t?i:"string"==typeof t?s(t):"number"==typeof t?isNaN(t)?i:n(t):new Date(t.getTime());return o=o&&"Invalid Date"==o.toString()?i:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),s==e.selectedMonth&&o==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),s=this._get(e,"hideIfNoPrevNext"),o=this._get(e,"navigationAsDateFormat"),a=this._getNumberOfMonths(e),r=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),d=1!=a[0]||1!=a[1],c=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(e,"min"),u=this._getMinMaxDate(e,"max"),f=e.drawMonth-r,p=e.drawYear;if(0>f&&(f+=12,p--),u){var m=this._daylightSavingAdjust(new Date(u.getFullYear(),u.getMonth()-a[0]*a[1]+1,u.getDate()));for(m=h&&h>m?h:m;this._daylightSavingAdjust(new Date(p,f,1))>m;)f--,0>f&&(f=11,p--)}e.drawMonth=f,e.drawYear=p;var g=this._get(e,"prevText");g=o?this.formatDate(g,this._daylightSavingAdjust(new Date(p,f-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,p,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=o?this.formatDate(y,this._daylightSavingAdjust(new Date(p,f+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,p,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+y+"</span></a>",x=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?c:t;x=o?this.formatDate(x,w,this._getFormatConfig(e)):x;var C=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",_=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?C:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+x+"</button>":"")+(i?"":C)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;var T=this._get(e,"showWeek"),S=this._get(e,"dayNames");this._get(e,"dayNamesShort");var N=this._get(e,"dayNamesMin"),E=this._get(e,"monthNames"),I=this._get(e,"monthNamesShort"),D=this._get(e,"beforeShowDay"),A=this._get(e,"showOtherMonths"),P=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var B=this._getDefaultDate(e),M="",L=0;L<a[0];L++){var H="";this.maxRows=4;for(var R=0;R<a[1];R++){var O=this._daylightSavingAdjust(new Date(p,f,e.selectedDay)),j=" ui-corner-all",F="";if(d){if(F+='<div class="ui-datepicker-group',a[1]>1)switch(R){case 0:F+=" ui-datepicker-group-first",j=" ui-corner-"+(i?"right":"left");break;case a[1]-1:F+=" ui-datepicker-group-last",j=" ui-corner-"+(i?"left":"right");break;default:F+=" ui-datepicker-group-middle",j=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+j+'">'+(/all|left/.test(j)&&0==L?i?b:v:"")+(/all|right/.test(j)&&0==L?i?v:b:"")+this._generateMonthYearHeader(e,f,p,h,u,L>0||R>0,E,I)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var U=T?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var W=(z+k)%7;U+="<th"+((z+k+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+S[W]+'">'+N[W]+"</span></th>"}F+=U+"</tr></thead><tbody>";var q=this._getDaysInMonth(p,f);p==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,q));var V=(this._getFirstDayOfMonth(p,f)-k+7)%7,Y=Math.ceil((V+q)/7),X=d&&this.maxRows>Y?this.maxRows:Y;this.maxRows=X;for(var K=this._daylightSavingAdjust(new Date(p,f,1-V)),G=0;X>G;G++){F+="<tr>";for(var Q=T?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(K)+"</td>":"",z=0;7>z;z++){var Z=D?D.apply(e.input?e.input[0]:null,[K]):[!0,""],J=K.getMonth()!=f,ee=J&&!P||!Z[0]||h&&h>K||u&&K>u;Q+='<td class="'+((z+k+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(K.getTime()==O.getTime()&&f==e.selectedMonth&&e._keyEvent||B.getTime()==K.getTime()&&B.getTime()==O.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!A?"":" "+Z[1]+(K.getTime()==c.getTime()?" "+this._currentClass:"")+(K.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(J&&!A||!Z[2]?"":' title="'+Z[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+K.getMonth()+'" data-year="'+K.getFullYear()+'"')+">"+(J&&!A?"&#xa0;":ee?'<span class="ui-state-default">'+K.getDate()+"</span>":'<a class="ui-state-default'+(K.getTime()==t.getTime()?" ui-state-highlight":"")+(K.getTime()==c.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+K.getDate()+"</a>")+"</td>",K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K)}F+=Q+"</tr>"}f++,f>11&&(f=0,p++),F+="</tbody></table>"+(d?"</div>"+(a[0]>0&&R==a[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),H+=F}M+=H}return M+=_+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,M},_generateMonthYearHeader:function(e,t,i,n,s,o,a,r){var l=this._get(e,"changeMonth"),d=this._get(e,"changeYear"),c=this._get(e,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',u="";if(o||!l)u+='<span class="ui-datepicker-month">'+a[t]+"</span>";else{var f=n&&n.getFullYear()==i,p=s&&s.getFullYear()==i;u+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=n.getMonth())&&(!p||m<=s.getMonth())&&(u+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+r[m]+"</option>");u+="</select>"}if(c||(h+=u+(!o&&l&&d?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!d)h+='<span class="ui-datepicker-year">'+i+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),x=Math.max(b,y(g[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,x=s?Math.min(x,s.getFullYear()):x,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';x>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",h+=e.yearshtml,e.yearshtml=null}return h+=this._get(e,"yearSuffix"),c&&(h+=(!o&&l&&d?"":"&#xa0;")+u),h+="</div>"},_adjustInstDate:function(e,t,i){
var n=e.drawYear+("Y"==i?t:0),s=e.drawMonth+("M"==i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"==i?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return s=n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,n,s,o,a,r=this,l=this.options,d=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(r.close(t),t.preventDefault())}).mousedown(function(e){r.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),n=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mouseup",function(){}).prependTo(t),s=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),r.options.destroy?r.destroy(e):r.close(e)}).appendTo(n),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(s),o=e("<span>").uniqueId().addClass("ui-dialog-title").html(d).prependTo(n),a=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(a),t.attr({role:"dialog","aria-labelledby":o.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(s),this._focusable(s),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(i){if(l.modal&&i.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",t),s=n.filter(":first"),o=n.filter(":last");return i.target!==o[0]||i.shiftKey?i.target===s[0]&&i.shiftKey?(o.focus(1),!1):void 0:(s.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){if(!1!==this._trigger("beforeDestroy")){var e,t=this.oldPosition;if(this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element),0===t.parent.length){var i=this;setTimeout(function(){i.element.remove()},100)}}},widget:function(){return this.uiDialog},close:function(t){var i,n,s=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==s.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))}),e.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,s=this.options;return s.modal&&!t||!s.stack&&!s.modal?this._trigger("focus",i):(s.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=s.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var t,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=n)),i.autoFocus&&t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(n=!0)}),n?(e.each(t,function(t,n){var s,o;n=e.isFunction(n)?{click:n,text:t}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(i.element[0],arguments)},s=e("<button></button>",n).appendTo(i.uiButtonSet),e.fn.button&&s.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,s){e(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,t(s))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(s,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",s,t(o)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function n(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var s,o=this,a=this.options,r=this.uiDialog.css("position"),l="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:l,start:function(t,i){e(this).addClass("ui-dialog-resizing"),s=e(this).find(".yh-box-j-alsoResize"),s.each(function(){e(this).prop("ow",e(this).width()).prop("oh",e(this).height())}),o._trigger("resizeStart",t,n(i))},resize:function(t,i){s.each(function(){var t=e(this);t.width(t.prop("ow")+i.size.width-i.originalSize.width).height(t.prop("oh")+i.size.height-i.originalSize.height)}),o._trigger("resize",t,n(i))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),a.height=e(this).height(),a.width=e(this).width(),o._trigger("resizeStop",t,n(i)),e.ui.dialog.overlay.resize()}}).css("position",r).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],s=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(n=t.split?t.split(" "):[t[0],t[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(s[e]=n[e],n[e]=t)}),t={my:n[0]+(s[0]<0?s[0]:"+"+s[0])+" "+n[1]+(s[1]<0?s[1]:"+"+s[1]),at:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,o={},a=!1;e.each(t,function(e,t){i._setOption(e,t),e in n&&(a=!0),e in s&&(o[e]=t)}),a&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,n){var s,o,a=this.uiDialog;switch(t){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":a.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":s=a.is(":data(draggable)"),s&&!n&&a.draggable("destroy"),!s&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":o=a.is(":data(resizable)"),o&&!n&&a.resizable("destroy"),o&&"string"==typeof n&&a.resizable("option","handles",n),o||n===!1||this._makeResizable(n);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(t,n)},_size:function(){var t,i,n,s=this.options,o=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),i=Math.max(0,s.minHeight-t),"auto"===s.height?e.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),o||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(s.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return!(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)&&void 0})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(n){var s=e.ui.dialog.overlay.instances;0!==s.length&&s[s.length-1]===i&&t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances),n=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){n=Math.max(n,this.css("z-index"))}),this.maxZ=n},height:function(){var t,i;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),i>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),i>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,s){var o,a,r,l=e(this),d=["position","top","bottom","left","right","height","width"],c=e.effects.setMode(l,n.mode||"hide"),h=n.direction||"up",u=t.test(h),f=u?"height":"width",p=u?"top":"left",m=i.test(h),g={},v="show"===c;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),d):e.effects.save(l,d),l.show(),o=e.effects.createWrapper(l).css({overflow:"hidden"}),a=o[f](),r=parseFloat(o.css(p))||0,g[f]=v?a:0,m||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),g[p]=v?r:a+r),v&&(o.css(f,0),m||o.css(p,r+a)),o.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),e.effects.restore(l,d),e.effects.removeWrapper(l),s()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,s,o,a=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),d="hide"===l,c="show"===l,h=t.direction||"up",u=t.distance,f=t.times||5,p=2*f+(c||d?1:0),m=t.duration/p,g=t.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=a.queue(),x=b.length;for((c||d)&&r.push("opacity"),e.effects.save(a,r),a.show(),e.effects.createWrapper(a),u||(u=a["top"===v?"outerHeight":"outerWidth"]()/3),c&&(o={opacity:1},o[v]=0,a.css("opacity",0).css(v,y?2*-u:2*u).animate(o,m,g)),d&&(u/=Math.pow(2,f-1)),o={},o[v]=0,n=0;f>n;n++)s={},s[v]=(y?"-=":"+=")+u,a.animate(s,m,g).animate(o,m,g),u=d?2*u:u/2;d&&(s={opacity:0},s[v]=(y?"-=":"+=")+u,a.animate(s,m,g)),a.queue(function(){d&&a.hide(),e.effects.restore(a,r),e.effects.removeWrapper(a),i()}),x>1&&b.splice.apply(b,[1,0].concat(b.splice(x,p+1))),a.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,s,o,a=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),d="show"===l,c=t.direction||"vertical",h="vertical"===c,u=h?"height":"width",f=h?"top":"left",p={};e.effects.save(a,r),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),s="IMG"===a[0].tagName?n:a,o=s[u](),d&&(s.css(u,0),s.css(f,o/2)),p[u]=d?o:0,p[f]=d?0:o/2,s.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){d||a.hide(),e.effects.restore(a,r),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(s,t.mode||"hide"),r="show"===a,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",h={opacity:r?1:0};e.effects.save(s,o),s.show(),e.effects.createWrapper(s),n=t.distance||s["top"===d?"outerHeight":"outerWidth"](!0)/2,r&&s.css("opacity",0).css(d,"pos"===c?-n:n),h[d]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+n,s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===h*u&&s()}function s(){f.css({visibility:"visible"}),e(b).remove(),m||f.hide(),i()}var o,a,r,l,d,c,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=h,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/u),y=Math.ceil(f.outerHeight()/h),b=[];for(o=0;h>o;o++)for(l=g.top+o*y,c=o-(h-1)/2,a=0;u>a;a++)r=g.left+a*v,d=a-(u-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*v,top:-o*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?d*v:0),top:l+(m?c*y:0),opacity:m?0:1}).animate({left:r+(m?0:d*v),top:l+(m?0:c*y),opacity:m?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,s,o=e(this),a=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"hide"),l="show"===r,d="hide"===r,c=t.size||15,h=/([0-9]+)%/.exec(c),u=!!t.horizFirst,f=l!==u,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(o,a),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),s=f?[n.width(),n.height()]:[n.height(),n.width()],h&&(c=parseInt(h[1],10)/100*s[d?0:1]),l&&n.css(u?{height:0,width:c}:{height:c,width:0}),g[p[0]]=l?s[0]:c,v[p[1]]=l?s[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){d&&o.hide(),e.effects.restore(o,a),e.effects.removeWrapper(o),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),s=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(n,t.mode||"show"),a={backgroundColor:n.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(n,s),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,s),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,s=e(this),o=e.effects.setMode(s,t.mode||"show"),a="show"===o,r="hide"===o,l=a||"hide"===o,d=2*(t.times||5)+(l?1:0),c=t.duration/d,h=0,u=s.queue(),f=u.length;for((a||!s.is(":visible"))&&(s.css("opacity",0).show(),h=1),n=1;d>n;n++)s.animate({opacity:h},c,t.easing),h=1-h;s.animate({opacity:h},c,t.easing),s.queue(function(){r&&s.hide(),i()}),f>1&&u.splice.apply(u,[1,0].concat(u.splice(f,d+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),s=e.effects.setMode(n,t.mode||"hide"),o="hide"===s,a=parseInt(t.percent,10)||150,r=a/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:s,complete:i,percent:o?a:100,from:o?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),s=e.extend(!0,{},t),o=e.effects.setMode(n,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===o?0:100),r=t.direction||"both",l=t.origin,d={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},c={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};s.effect="size",s.queue=!1,s.complete=i,"effect"!==o&&(s.origin=l||["middle","center"],s.restore=!0),s.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:d),s.to={height:d.height*c.y,width:d.width*c.x,outerHeight:d.outerHeight*c.y,outerWidth:d.outerWidth*c.x},s.fade&&("show"===o&&(s.from.opacity=0,s.to.opacity=1),"hide"===o&&(s.from.opacity=1,s.to.opacity=0)),n.effect(s)},e.effects.effect.size=function(t,i){var n,s,o,a=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],d=["width","height","overflow"],c=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(a,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=a.css("position"),y=p?r:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&a.show(),n={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===f?(a.from=t.to||b,a.to=t.from||n):(a.from=t.from||("show"===f?b:n),a.to=t.to||("hide"===f?b:n)),o={from:{y:a.from.height/n.height,x:a.from.width/n.width},to:{y:a.to.height/n.height,x:a.to.width/n.width}},("box"===m||"both"===m)&&(o.from.y!==o.to.y&&(y=y.concat(h),a.from=e.effects.setTransition(a,h,o.from.y,a.from),a.to=e.effects.setTransition(a,h,o.to.y,a.to)),o.from.x!==o.to.x&&(y=y.concat(u),a.from=e.effects.setTransition(a,u,o.from.x,a.from),a.to=e.effects.setTransition(a,u,o.to.x,a.to))),("content"===m||"both"===m)&&o.from.y!==o.to.y&&(y=y.concat(c).concat(d),a.from=e.effects.setTransition(a,c,o.from.y,a.from),a.to=e.effects.setTransition(a,c,o.to.y,a.to)),e.effects.save(a,y),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(s=e.effects.getBaseline(g,n),a.from.top=(n.outerHeight-a.outerHeight())*s.y,a.from.left=(n.outerWidth-a.outerWidth())*s.x,a.to.top=(n.outerHeight-a.to.outerHeight)*s.y,a.to.left=(n.outerWidth-a.to.outerWidth)*s.x),a.css(a.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(c),u=u.concat(["marginLeft","marginRight"]),d=r.concat(h).concat(u),a.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,d),i.from={height:n.height*o.from.y,width:n.width*o.from.x,outerHeight:n.outerHeight*o.from.y,outerWidth:n.outerWidth*o.from.x},i.to={height:n.height*o.to.y,width:n.width*o.to.x,outerHeight:n.height*o.to.y,outerWidth:n.width*o.to.x},o.from.y!==o.to.y&&(i.from=e.effects.setTransition(i,h,o.from.y,i.from),i.to=e.effects.setTransition(i,h,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=e.effects.setTransition(i,u,o.from.x,i.from),i.to=e.effects.setTransition(i,u,o.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,d)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===f&&a.hide(),e.effects.restore(a,y),p||("static"===v?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,i){var n=parseInt(i,10),s=e?a.to.left:a.to.top;return"auto"===i?s+"px":n+s+"px"})})),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(s,t.mode||"effect"),r=t.direction||"left",l=t.distance||20,d=t.times||3,c=2*d+1,h=Math.round(t.duration/c),u="up"===r||"down"===r?"top":"left",f="up"===r||"left"===r,p={},m={},g={},v=s.queue(),y=v.length;for(e.effects.save(s,o),s.show(),e.effects.createWrapper(s),p[u]=(f?"-=":"+=")+l,m[u]=(f?"+=":"-=")+2*l,g[u]=(f?"-=":"+=")+2*l,s.animate(p,h,t.easing),n=1;d>n;n++)s.animate(m,h,t.easing).animate(g,h,t.easing);s.animate(m,h,t.easing).animate(p,h/2,t.easing).queue(function(){"hide"===a&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,c+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,s=e(this),o=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(s,t.mode||"show"),r="show"===a,l=t.direction||"left",d="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,h={};e.effects.save(s,o),s.show(),n=t.distance||s["top"===d?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(s).css({overflow:"hidden"}),r&&s.css(d,c?isNaN(n)?"-"+n:-n:n),h[d]=(r?c?"+=":"-=":c?"-=":"+=")+n,s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),s=e(t.to),o="fixed"===s.css("position"),a=e("body"),r=o?a.scrollTop():0,l=o?a.scrollLeft():0,d=s.offset(),c={top:d.top-r,left:d.left-l,height:s.innerHeight(),width:s.innerWidth()},h=n.offset(),u=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:h.top-r,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(c,t.duration,t.easing,function(){u.remove(),i()})}}(jQuery),function(e){var t=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(i){var n=e(i.target).closest(".ui-menu-item");!t&&n.not(".ui-state-disabled").length&&(t=!0,this.select(i),n.has(".ui-menu").length?this.expand(i):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(i){e(i.target).closest(".ui-menu").length||this.collapseAll(i),t=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,a,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",o=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),o===s?a=!0:o=s+o,r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),r=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,o,a,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,
n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=t.height(),0>s?this.activeMenu.scrollTop(o+s):s+r>a&&this.activeMenu.scrollTop(o+s-a+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-s<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){function i(e,t,i){return[parseInt(e[0],10)*(u.test(e[0])?t/100:1),parseInt(e[1],10)*(u.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var s,o=Math.max,a=Math.abs,r=Math.round,l=/left|center|right/,d=/top|center|bottom/,c=/[\+\-]\d+%?/,h=/^\w+/,u=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,o=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];return e("body").append(o),i=a.offsetWidth,o.css("overflow","scroll"),n=a.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var s,u,p,m,g,v=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),x=v[0],w=(t.collision||"flip").split(" "),C={};return 9===x.nodeType?(u=v.width(),p=v.height(),m={top:0,left:0}):e.isWindow(x)?(u=v.width(),p=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):x.preventDefault?(t.at="left top",u=p=0,m={top:x.pageY,left:x.pageX}):(u=v.outerWidth(),p=v.outerHeight(),m=v.offset()),g=e.extend({},m),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=c.exec(n[0]),i=c.exec(n[1]),C[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===t.at[0]?g.left+=u:"center"===t.at[0]&&(g.left+=u/2),"bottom"===t.at[1]?g.top+=p:"center"===t.at[1]&&(g.top+=p/2),s=i(C.at,u,p),g.left+=s[0],g.top+=s[1],this.each(function(){var l,d,c=e(this),h=c.outerWidth(),f=c.outerHeight(),x=n(this,"marginLeft"),_=n(this,"marginTop"),k=h+x+n(this,"marginRight")+b.width,T=f+_+n(this,"marginBottom")+b.height,S=e.extend({},g),N=i(C.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?S.left-=h:"center"===t.my[0]&&(S.left-=h/2),"bottom"===t.my[1]?S.top-=f:"center"===t.my[1]&&(S.top-=f/2),S.left+=N[0],S.top+=N[1],e.support.offsetFractions||(S.left=r(S.left),S.top=r(S.top)),l={marginLeft:x,marginTop:_},e.each(["left","top"],function(i,n){e.ui.position[w[i]]&&e.ui.position[w[i]][n](S,{targetWidth:u,targetHeight:p,elemWidth:h,elemHeight:f,collisionPosition:l,collisionWidth:k,collisionHeight:T,offset:[s[0]+N[0],s[1]+N[1]],my:t.my,at:t.at,within:y,elem:c})}),e.fn.bgiframe&&c.bgiframe(),t.using&&(d=function(e){var i=m.left-S.left,n=i+u-h,s=m.top-S.top,r=s+p-f,l={target:{element:v,left:m.left,top:m.top,width:u,height:p},element:{element:c,left:S.left,top:S.top,width:h,height:f},horizontal:0>n?"left":i>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>u&&a(i+n)<u&&(l.horizontal="center"),f>p&&a(s+r)<p&&(l.vertical="middle"),l.important=o(a(i),a(n))>o(a(s),a(r))?"horizontal":"vertical",t.using.call(this,e,l)}),c.offset(e.extend(S,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,r=e.left-t.collisionPosition.marginLeft,l=s-r,d=r+t.collisionWidth-a-s;t.collisionWidth>a?l>0&&0>=d?(i=e.left+l+t.collisionWidth-a-s,e.left+=l-i):e.left=d>0&&0>=l?s:l>d?s+a-t.collisionWidth:s:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-r,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=s-r,d=r+t.collisionHeight-a-s;t.collisionHeight>a?l>0&&0>=d?(i=e.top+l+t.collisionHeight-a-s,e.top+=l-i):e.top=d>0&&0>=l?s:l>d?s+a-t.collisionHeight:s:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,h=d+t.collisionWidth-r-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>c?(i=e.left+u+f+p+t.collisionWidth-r-o,(0>i||i<a(c))&&(e.left+=u+f+p)):h>0&&(n=e.left-t.collisionPosition.marginLeft+u+f+p-l,(n>0||a(n)<h)&&(e.left+=u+f+p))},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,h=d+t.collisionHeight-r-l,u="top"===t.my[1],f=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>c?(n=e.top+f+p+m+t.collisionHeight-r-o,e.top+f+p+m>c&&(0>n||n<a(c))&&(e.top+=f+p+m)):h>0&&(i=e.top-t.collisionPosition.marginTop+f+p+m-l,e.top+f+p+m>h&&(i>0||a(i)<h)&&(e.top+=f+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(r),i=a||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=e(r).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var i=e.fn.position;e.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var s=n.offset.split(" "),o=n.at.split(" ");return 1===s.length&&(s[1]=s[0]),/^\d/.test(s[0])&&(s[0]="+"+s[0]),/^\d/.test(s[1])&&(s[1]="+"+s[1]),1===o.length&&(/left|center|right/.test(o[0])?o[1]="center":(o[1]=o[0],o[0]="center")),i.call(this,e.extend(n,{at:o[0]+s[0]+" "+o[1]+s[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,n,s=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(s.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),s.range&&(s.range===!0&&(s.values||(s.values=[this._valueMin(),this._valueMin()]),s.values.length&&2!==s.values.length&&(s.values=[s.values[0],s.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===s.range||"max"===s.range?" ui-slider-range-"+s.range:""))),n=s.values&&s.values.length||1,i=o.length;n>i;i++)r.push(a);this.handles=o.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){s.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){s.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(i){var n,s,o,a,r=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,r),n===!1))return}switch(a=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case e.ui.keyCode.HOME:o=this._valueMin();break;case e.ui.keyCode.END:o=this._valueMax();break;case e.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-a)}this._slide(i,r,o)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,a,r,l,d,c=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));s>i&&(s=i,o=e(this),a=t)}),h.range===!0&&this.values(1)===h.min&&(a+=1,o=e(this.handles[a])),r=this._start(t,a),r!==!1&&(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),d=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=d?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),o!==!1&&this.values(t,i,!0))):i!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:i}),o!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch(e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,a=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?100*((n-s)/(o-s)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var s=i.attr(n);void 0!==s&&s.length&&(t[n]=s)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&e.href.replace(o,"")===location.href.replace(o,"").replace(/\s/g,"%20")}var s=0,o=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options,n=i.active,s=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===n&&(s&&this.tabs.each(function(t,i){return e(i).attr("aria-controls")===s?(n=t,!1):void 0}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=!!this.tabs.length&&0)),n!==!1&&(n=this.tabs.index(this.tabs.eq(n)),-1===n&&(n=!i.collapsible&&0)),i.active=n,!i.collapsible&&i.active===!1&&this.anchors.length&&(i.active=0),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>s&&(t=0),0>t&&(t=s),t}for(var s=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),
this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var o,a,r,l=e(s).uniqueId().attr("id"),d=e(s).closest("li"),c=d.attr("aria-controls");n(s)?(o=s.hash,a=t.element.find(t._sanitizeSelector(o))):(r=t._tabId(d),o="#"+r,a=t.element.find(o),a.length||(a=t._createPanel(r),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),c&&d.data("ui-tabs-aria-controls",c),d.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n,s=this.element.parent();"fill"===t?(e.support.minHeight||(n=s.css("overflow"),s.css("overflow","hidden")),i=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),n&&s.css("overflow",n),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),o=s.closest("li"),a=o[0]===n[0],r=a&&i.collapsible,l=r?e():this._getPanelForTab(o),d=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:d,newTab:r?e():o,newPanel:l};t.preventDefault(),o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=!r&&this.tabs.index(o),this.active=a?e():o,this.xhr&&this.xhr.abort(),d.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(o),t),this._toggle(t,c))},_toggle:function(t,i){function n(){o.running=!1,o._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&o.options.show?o._show(a,o.options.show,n):(a.show(),n())}var o=this,a=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),s()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&r.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var s=this,o=this.tabs.eq(t),a=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),l={tab:o,panel:r};n(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,o){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(i,n){return e.data(n.tab[0],"cache.tabs")?void i.preventDefault():void n.jqXHR.success(function(){t.options.cache&&e.data(n.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(t,i,n){var s=this.options.ajaxOptions;return e.extend({},s,{error:function(e,t){try{s.error(e,t,n.tab.closest("li").index(),n.tab[0])}catch(e){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var i=t.tab.find("span"),n=i.html();i.html(this.options.spinner),t.jqXHR.complete(function(){i.html(n)})}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var i,n=this.options;(t&&n.disabled===!0||e.isArray(n.disabled)&&-1!==e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var i,n=this.options;(t&&n.disabled===!1||e.isArray(n.disabled)&&-1===e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,s){s===t&&(s=this.anchors.length);var o,a,r=this.options,l=e(r.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),d=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",d),o=s>=this.tabs.length,a=this.element.find("#"+d),a.length||(a=this._createPanel(d),o?s>0?a.insertAfter(this.panels.eq(-1)):a.appendTo(this.element):a.insertBefore(this.panels[s])),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),o?l.appendTo(this.tablist):l.insertBefore(this.tabs[s]),r.disabled=e.map(r.disabled,function(e){return e>=s?++e:e}),this.refresh(),1===this.tabs.length&&r.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[s],this.panels[s])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.tabs.eq(t).remove(),s=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],s[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1!==e.selected&&e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var i=this.options;this._super("active",-1!==t&&t),i.selected=i.active,i.selected===!1&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,i){var n,s,o=this._superApply(arguments);return!!o&&("beforeActivate"===e?(n=i.newTab.length?i.newTab:i.oldTab,s=i.newPanel.length?i.newPanel:i.oldPanel,o=this._super("select",t,{tab:n.find(".ui-tabs-anchor")[0],panel:s[0],index:n.closest("li").index()})):"activate"===e&&i.newTab.length&&(o=this._super("show",t,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),o)}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(e=this._getIndex(e),-1===e){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(e=parseInt(this._cookie(),10),-1===e&&(e=!1),t.active=e),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(n.push(i===!1?-1:i),n.push(this.options.cookie)),e.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,i,n){var s=e.extend({},n);return"load"===t&&(s.panel=s.panel[0],s.tab=s.tab.find(".ui-tabs-anchor")[0]),this._super(t,i,s)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,i,n=this.options.fx;return n&&(e.isArray(n)?(t=n[0],i=n[1]):t=i=n),n?{show:i,hide:t}:null},_toggle:function(e,t){function i(){s.running=!1,s._trigger("activate",e,t)}function n(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&r.show?o.animate(r.show,r.show.duration,function(){i()}):(o.show(),i())}var s=this,o=t.newPanel,a=t.oldPanel,r=this._getFx();return r?(s.running=!0,void(a.length&&r.hide?a.animate(r.hide,r.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),n()))):this._super(e,t)}}))}(jQuery),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),s=e.inArray(i,n);-1!==s&&n.splice(s,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,s=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&s._delay(function(){t&&(t.type=o),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,s){function o(e){d.of=e,a.is(":hidden")||a.position(d)}var a,r,l,d=e.extend({},this.options.position);if(s){if(a=this._find(n),a.length)return void a.find(".ui-tooltip-content").html(s);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),a=this._tooltip(n),t(n,a.attr("id")),a.find(".ui-tooltip-content").html(s),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(e.extend({of:n},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){a.is(":visible")&&(o(d.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,n,r)}},close:function(t){var n=this,s=e(t?t.currentTarget:this.element),o=this._find(s);this.closing||(s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),i(s),o.stop(!0),this._hide(o,this.options.hide,function(){n._removeTooltip(e(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,s=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(s),s.appendTo(this.document[0].body),e.fn.bgiframe&&s.bgiframe(),this.tooltips[i]=t,s},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var s=e.Event("blur");s.target=s.currentTarget=n[0],t.close(s,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),$}),function(e){var t,i,n="0.3.4",s="hasOwnProperty",o=/[\.\/]/,a="*",r=function(){},l=function(e,t){return e-t},d={n:{}},c=function(e,n){var s,o=i,a=Array.prototype.slice.call(arguments,2),r=c.listeners(e),d=0,h=[],u={},f=[],p=t;t=e,i=0;for(var m=0,g=r.length;m<g;m++)"zIndex"in r[m]&&(h.push(r[m].zIndex),r[m].zIndex<0&&(u[r[m].zIndex]=r[m]));for(h.sort(l);h[d]<0;)if(s=u[h[d++]],f.push(s.apply(n,a)),i)return i=o,f;for(m=0;m<g;m++)if(s=r[m],"zIndex"in s)if(s.zIndex==h[d]){if(f.push(s.apply(n,a)),i)break;do if(d++,s=u[h[d]],s&&f.push(s.apply(n,a)),i)break;while(s)}else u[s.zIndex]=s;else if(f.push(s.apply(n,a)),i)break;return i=o,t=p,f.length?f:null};c.listeners=function(e){var t,i,n,s,r,l,c,h,u=e.split(o),f=d,p=[f],m=[];for(s=0,r=u.length;s<r;s++){for(h=[],l=0,c=p.length;l<c;l++)for(f=p[l].n,i=[f[u[s]],f[a]],n=2;n--;)t=i[n],t&&(h.push(t),m=m.concat(t.f||[]));p=h}return m},c.on=function(e,t){for(var i=e.split(o),n=d,s=0,a=i.length;s<a;s++)n=n.n,!n[i[s]]&&(n[i[s]]={n:{}}),n=n[i[s]];for(n.f=n.f||[],s=0,a=n.f.length;s<a;s++)if(n.f[s]==t)return r;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},c.stop=function(){i=1},c.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},c.off=c.unbind=function(e,t){var i,n,r,l,c,h,u,f=e.split(o),p=[d];for(l=0,c=f.length;l<c;l++)for(h=0;h<p.length;h+=r.length-2){if(r=[h,1],i=p[h].n,f[l]!=a)i[f[l]]&&r.push(i[f[l]]);else for(n in i)i[s](n)&&r.push(i[n]);p.splice.apply(p,r)}for(l=0,c=p.length;l<c;l++)for(i=p[l];i.n;){if(t){if(i.f){for(h=0,u=i.f.length;h<u;h++)if(i.f[h]==t){i.f.splice(h,1);break}!i.f.length&&delete i.f}for(n in i.n)if(i.n[s](n)&&i.n[n].f){var m=i.n[n].f;for(h=0,u=m.length;h<u;h++)if(m[h]==t){m.splice(h,1);break}!m.length&&delete i.n[n].f}}else{delete i.f;for(n in i.n)i.n[s](n)&&i.n[n].f&&delete i.n[n].f}i=i.n}},c.once=function(e,t){var i=function(){var n=t.apply(this,arguments);return c.unbind(e,i),n};return c.on(e,i)},c.version=n,c.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof define?define("eve",[],function(){return c}):e.eve=c}(this),function(){function e(e){for(var t=0;t<ot.length;t++)ot[t].el.paper==e&&ot.splice(t--,1)}function t(e,t,i,s,a,r){i=Q(i);var l,d,c,h,u,f,p=e.ms,m={},g={},y={};if(s)for(w=0,C=ot.length;w<C;w++){var b=ot[w];if(b.el.id==t.id&&b.anim==e){b.percent!=i?(ot.splice(w,1),c=1):d=b,t.attr(b.totalOrigin);break}}else s=+g;for(var w=0,C=e.percents.length;w<C;w++){if(e.percents[w]==i||e.percents[w]>s*e.top){i=e.percents[w],u=e.percents[w-1]||0,p=p/e.top*(i-u),h=e.percents[w+1],l=e.anim[i];break}s&&t.attr(e.anim[e.percents[w]])}if(l){if(d)d.initstatus=s,d.start=new Date-d.ms*s;else{for(var k in l)if(l[_](k)&&(te[_](k)||t.paper.customAttributes[_](k)))switch(m[k]=t.attr(k),null==m[k]&&(m[k]=ee[k]),g[k]=l[k],te[k]){case z:y[k]=(g[k]-m[k])/p;break;case"colour":m[k]=v.getRGB(m[k]);var T=v.getRGB(g[k]);y[k]={r:(T.r-m[k].r)/p,g:(T.g-m[k].g)/p,b:(T.b-m[k].b)/p};break;case"path":var S=Be(m[k],g[k]),N=S[1];for(m[k]=S[0],y[k]=[],w=0,C=m[k].length;w<C;w++){y[k][w]=[0];for(var I=1,$=m[k][w].length;I<$;I++)y[k][w][I]=(N[w][I]-m[k][w][I])/p}break;case"transform":var D=t._,B=Oe(D[k],g[k]);if(B)for(m[k]=B.from,g[k]=B.to,y[k]=[],y[k].real=!0,w=0,C=m[k].length;w<C;w++)for(y[k][w]=[m[k][w][0]],I=1,$=m[k][w].length;I<$;I++)y[k][w][I]=(g[k][w][I]-m[k][w][I])/p;else{var M=t.matrix||new o,L={_:{transform:D.transform},getBBox:function(){return t.getBBox(1)}};m[k]=[M.a,M.b,M.c,M.d,M.e,M.f],He(L,g[k]),g[k]=L._.transform,y[k]=[(L.matrix.a-M.a)/p,(L.matrix.b-M.b)/p,(L.matrix.c-M.c)/p,(L.matrix.d-M.d)/p,(L.matrix.e-M.e)/p,(L.matrix.f-M.f)/p]}break;case"csv":var H=A(l[k])[P](x),R=A(m[k])[P](x);if("clip-rect"==k)for(m[k]=R,y[k]=[],w=R.length;w--;)y[k][w]=(H[w]-m[k][w])/p;g[k]=H;break;default:for(H=[][E](l[k]),R=[][E](m[k]),y[k]=[],w=t.paper.customAttributes[k].length;w--;)y[k][w]=((H[w]||0)-(R[w]||0))/p}var O=l.easing,j=v.easing_formulas[O];if(!j)if(j=A(O).match(K),j&&5==j.length){var F=j;j=function(e){return n(e,+F[1],+F[2],+F[3],+F[4],p)}}else j=he;if(f=l.start||e.start||+new Date,b={anim:e,percent:i,timestamp:f,start:f+(e.del||0),status:0,initstatus:s||0,stop:!1,ms:p,easing:j,from:m,diff:y,to:g,el:t,callback:l.callback,prev:u,next:h,repeat:r||e.times,origin:t.attr(),totalOrigin:a},ot.push(b),s&&!d&&!c&&(b.stop=!0,b.start=new Date-p*s,1==ot.length))return rt();c&&(b.start=new Date-b.ms*s),1==ot.length&&at(rt)}eve("raphael.anim.start."+t.id,t,e)}}function i(e,t){var i=[],n={};if(this.ms=t,this.times=1,e){for(var s in e)e[_](s)&&(n[Q(s)]=e[s],i.push(Q(s)));i.sort(de)}this.anim=n,this.top=i[i.length-1],this.percents=i}function n(e,t,i,n,s,o){function a(e,t){var i,n,s,o,a,r;for(s=e,r=0;r<8;r++){if(o=l(s)-e,j(o)<t)return s;if(a=(3*h*s+2*c)*s+d,j(a)<1e-6)break;s-=o/a}if(i=0,n=1,s=e,s<i)return i;if(s>n)return n;for(;i<n;){if(o=l(s),j(o-e)<t)return s;e>o?i=s:n=s,s=(n-i)/2+i}return s}function r(e,t){var i=a(e,t);return((p*i+f)*i+u)*i}function l(e){return((h*e+c)*e+d)*e}var d=3*t,c=3*(n-t)-d,h=1-d-c,u=3*i,f=3*(s-i)-u,p=1-u-f;return r(e,1/(200*o))}function s(){return this.x+D+this.y+D+this.width+" × "+this.height}function o(e,t,i,n,s,o){null!=e?(this.a=+e,this.b=+t,this.c=+i,this.d=+n,this.e=+s,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function a(e,t,i){e=v._path2curve(e),t=v._path2curve(t);for(var n,s,o,a,l,d,c,h,u,f,p=i?0:[],m=0,g=e.length;m<g;m++){var y=e[m];if("M"==y[0])n=l=y[1],s=d=y[2];else{"C"==y[0]?(u=[n,s].concat(y.slice(1)),n=u[6],s=u[7]):(u=[n,s,n,s,l,d,l,d],n=l,s=d);for(var b=0,x=t.length;b<x;b++){var w=t[b];if("M"==w[0])o=c=w[1],a=h=w[2];else{"C"==w[0]?(f=[o,a].concat(w.slice(1)),o=f[6],a=f[7]):(f=[o,a,o,a,c,h,c,h],o=c,a=h);var C=r(u,f,i);if(i)p+=C;else{for(var _=0,k=C.length;_<k;_++)C[_].segment1=m,C[_].segment2=b,C[_].bez1=u,C[_].bez2=f;p=p.concat(C)}}}}}return p}function r(e,t,i){var n=v.bezierBBox(e),s=v.bezierBBox(t);if(!v.isBBoxIntersect(n,s))return i?0:[];for(var o=c.apply(0,e),a=c.apply(0,t),r=~~(o/5),d=~~(a/5),h=[],u=[],f={},p=i?0:[],m=0;m<r+1;m++){var g=v.findDotsAtSegment.apply(v,e.concat(m/r));h.push({x:g.x,y:g.y,t:m/r})}for(m=0;m<d+1;m++)g=v.findDotsAtSegment.apply(v,t.concat(m/d)),u.push({x:g.x,y:g.y,t:m/d});for(m=0;m<r;m++)for(var y=0;y<d;y++){var b=h[m],x=h[m+1],w=u[y],C=u[y+1],_=j(x.x-b.x)<.001?"y":"x",k=j(C.x-w.x)<.001?"y":"x",T=l(b.x,b.y,x.x,x.y,w.x,w.y,C.x,C.y);if(T){if(f[T.x.toFixed(4)]==T.y.toFixed(4))continue;f[T.x.toFixed(4)]=T.y.toFixed(4);var S=b.t+j((T[_]-b[_])/(x[_]-b[_]))*(x.t-b.t),N=w.t+j((T[k]-w[k])/(C[k]-w[k]))*(C.t-w.t);S>=0&&S<=1&&N>=0&&N<=1&&(i?p++:p.push({x:T.x,y:T.y,t1:S,t2:N}))}}return p}function l(e,t,i,n,s,o,a,r){if(!(R(e,i)<O(s,a)||O(e,i)>R(s,a)||R(t,n)<O(o,r)||O(t,n)>R(o,r))){var l=(e*n-t*i)*(s-a)-(e-i)*(s*r-o*a),d=(e*n-t*i)*(o-r)-(t-n)*(s*r-o*a),c=(e-i)*(o-r)-(t-n)*(s-a);if(!c)return;var h=l/c,u=d/c,f=+h.toFixed(2),p=+u.toFixed(2);if(f<+O(e,i).toFixed(2)||f>+R(e,i).toFixed(2)||f<+O(s,a).toFixed(2)||f>+R(s,a).toFixed(2)||p<+O(t,n).toFixed(2)||p>+R(t,n).toFixed(2)||p<+O(o,r).toFixed(2)||p>+R(o,r).toFixed(2))return;return{x:h,y:u}}}function d(e,t,i,n,s,o,a,r,l){if(!(l<0||c(e,t,i,n,s,o,a,r)<l)){var d,h=1,u=h/2,f=h-u,p=.01;for(d=c(e,t,i,n,s,o,a,r,f);j(d-l)>p;)u/=2,f+=(d<l?1:-1)*u,d=c(e,t,i,n,s,o,a,r,f);return f}}function c(e,t,i,n,s,o,a,r,l){null==l&&(l=1),l=l>1?1:l<0?0:l;for(var d=l/2,c=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,m=0;m<c;m++){var g=d*u[m]+d,v=h(g,e,i,s,a),y=h(g,t,n,o,r),b=v*v+y*y;p+=f[m]*H.sqrt(b)}return d*p}function h(e,t,i,n,s){var o=-3*t+9*i-9*n+3*s,a=e*o+6*t-12*i+6*n;return e*a-3*t+3*i}function u(e,t){for(var i=[],n=0,s=e.length;s-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?s-4==n?o[3]={x:+e[0],y:+e[1]}:s-2==n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[s-2],y:+e[s-1]}:s-4==n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),i.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return i}function f(){return this.hex}function p(e,t,i){function n(){var s=Array.prototype.slice.call(arguments,0),o=s.join("␀"),a=n.cache=n.cache||{},r=n.count=n.count||[];return a[_](o)?(m(r,o),i?i(a[o]):a[o]):(r.length>=1e3&&delete a[r.shift()],r.push(o),a[o]=e[N](t,s),i?i(a[o]):a[o])}return n}function m(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function g(e){if(Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[_](i)&&(t[i]=g(e[i]));return t}function v(e){if(v.is(e,"function"))return y?e():eve.on("raphael.DOMload",e);if(v.is(e,q))return v._engine.create[N](v,e.splice(0,3+v.is(e[0],z))).add(e);var t=Array.prototype.slice.call(arguments,0);if(v.is(t[t.length-1],"function")){var i=t.pop();return y?i.call(v._engine.create[N](v,t)):eve.on("raphael.DOMload",function(){i.call(v._engine.create[N](v,t))})}return v._engine.create[N](v,arguments)}v.version="2.1.0",v.eve=eve;var y,b,x=/[, ]+/,w={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,_="hasOwnProperty",k={doc:document,win:window},T={was:Object.prototype[_].call(k.win,"Raphael"),is:k.win.Raphael},S=function(){this.ca=this.customAttributes={}},N="apply",E="concat",I="createTouch"in k.doc,$="",D=" ",A=String,P="split",B="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[P](D),M={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},L=A.prototype.toLowerCase,H=Math,R=H.max,O=H.min,j=H.abs,F=H.pow,U=H.PI,z="number",W="string",q="array",V=Object.prototype.toString,Y=(v._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),X={NaN:1,Infinity:1,"-Infinity":1},K=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,G=H.round,Q=parseFloat,Z=parseInt,J=A.prototype.toUpperCase,ee=v._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},te=v._availableAnimAttrs={blur:z,"clip-rect":"csv",cx:z,cy:z,fill:"colour","fill-opacity":z,"font-size":z,height:z,opacity:z,path:"path",r:z,rx:z,ry:z,stroke:"colour","stroke-opacity":z,"stroke-width":z,transform:"transform",width:z,x:z,y:z},ie=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ne={hs:1,rg:1},se=/,?([achlmqrstvxz]),?/gi,oe=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ae=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,re=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,le=(v._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),de=function(e,t){return Q(e)-Q(t)},ce=function(){},he=function(e){return e},ue=v._rectPath=function(e,t,i,n,s){return s?[["M",e+s,t],["l",i-2*s,0],["a",s,s,0,0,1,s,s],["l",0,n-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-i,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-n],["a",s,s,0,0,1,s,-s],["z"]]:[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]]},fe=function(e,t,i,n){return null==n&&(n=i),[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},pe=v._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return fe(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return fe(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ue(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ue(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ue(t.x,t.y,t.width,t.height)}},me=v.mapPath=function(e,t){if(!t)return e;var i,n,s,o,a,r,l;for(e=Be(e),s=0,a=e.length;s<a;s++)for(l=e[s],o=1,r=l.length;o<r;o+=2)i=t.x(l[o],l[o+1]),n=t.y(l[o],l[o+1]),
l[o]=i,l[o+1]=n;return e};if(v._g=k,v.type=k.win.SVGAngle||k.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==v.type){var ge,ve=k.doc.createElement("div");if(ve.innerHTML='<v:shape adj="1"/>',ge=ve.firstChild,ge.style.behavior="url(#default#VML)",!ge||"object"!=typeof ge.adj)return v.type=$;ve=null}v.svg=!(v.vml="VML"==v.type),v._Paper=S,v.fn=b=S.prototype=v.prototype,v._id=0,v._oid=0,v.is=function(e,t){return t=L.call(t),"finite"==t?!X[_](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||V.call(e).slice(8,-1).toLowerCase()==t},v.angle=function(e,t,i,n,s,o){if(null==s){var a=e-i,r=t-n;return a||r?(180+180*H.atan2(-r,-a)/U+360)%360:0}return v.angle(e,t,s,o)-v.angle(i,n,s,o)},v.rad=function(e){return e%360*U/180},v.deg=function(e){return 180*e/U%360},v.snapTo=function(e,t,i){if(i=v.is(i,"finite")?i:10,v.is(e,q)){for(var n=e.length;n--;)if(j(e[n]-t)<=i)return e[n]}else{e=+e;var s=t%e;if(s<i)return t-s;if(s>e-i)return t-s+e}return t};v.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*H.random()|0,i="x"==e?t:3&t|8;return i.toString(16)});v.setWindow=function(e){eve("raphael.setWindow",v,k.win,e),k.win=e,k.doc=k.win.document,v._engine.initWin&&v._engine.initWin(k.win)};var ye=function(e){if(v.vml){var t,i=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),t=n.body}catch(e){t=createPopup().document.body}var s=t.createTextRange();ye=p(function(e){try{t.style.color=A(e).replace(i,$);var n=s.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(e){return"none"}})}else{var o=k.doc.createElement("i");o.title="Raphaël Colour Picker",o.style.display="none",k.doc.body.appendChild(o),ye=p(function(e){return o.style.color=e,k.doc.defaultView.getComputedStyle(o,$).getPropertyValue("color")})}return ye(e)},be=function(){return"hsb("+[this.h,this.s,this.b]+")"},xe=function(){return"hsl("+[this.h,this.s,this.l]+")"},we=function(){return this.hex},Ce=function(e,t,i){if(null==t&&v.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,t=e.g,e=e.r),null==t&&v.is(e,W)){var n=v.getRGB(e);e=n.r,t=n.g,i=n.b}return(e>1||t>1||i>1)&&(e/=255,t/=255,i/=255),[e,t,i]},_e=function(e,t,i,n){e*=255,t*=255,i*=255;var s={r:e,g:t,b:i,hex:v.rgb(e,t,i),toString:we};return v.is(n,"finite")&&(s.opacity=n),s};v.color=function(e){var t;return v.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=v.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):v.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=v.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(v.is(e,"string")&&(e=v.getRGB(e)),v.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=v.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=v.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=we,e},v.hsb2rgb=function(e,t,i,n){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,e=e.h,n=e.o),e*=360;var s,o,a,r,l;return e=e%360/60,l=i*t,r=l*(1-j(e%2-1)),s=o=a=i-l,e=~~e,s+=[l,r,0,0,r,l][e],o+=[r,l,l,r,0,0][e],a+=[0,0,r,l,l,r][e],_e(s,o,a,n)},v.hsl2rgb=function(e,t,i,n){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e*=360;var s,o,a,r,l;return e=e%360/60,l=2*t*(i<.5?i:1-i),r=l*(1-j(e%2-1)),s=o=a=i-l/2,e=~~e,s+=[l,r,0,0,r,l][e],o+=[r,l,l,r,0,0][e],a+=[0,0,r,l,l,r][e],_e(s,o,a,n)},v.rgb2hsb=function(e,t,i){i=Ce(e,t,i),e=i[0],t=i[1],i=i[2];var n,s,o,a;return o=R(e,t,i),a=o-O(e,t,i),n=0==a?null:o==e?(t-i)/a:o==t?(i-e)/a+2:(e-t)/a+4,n=(n+360)%6*60/360,s=0==a?0:a/o,{h:n,s:s,b:o,toString:be}},v.rgb2hsl=function(e,t,i){i=Ce(e,t,i),e=i[0],t=i[1],i=i[2];var n,s,o,a,r,l;return a=R(e,t,i),r=O(e,t,i),l=a-r,n=0==l?null:a==e?(t-i)/l:a==t?(i-e)/l+2:(e-t)/l+4,n=(n+360)%6*60/360,o=(a+r)/2,s=0==l?0:o<.5?l/(2*o):l/(2-2*o),{h:n,s:s,l:o,toString:xe}},v._path2string=function(){return this.join(",").replace(se,"$1")};v._preload=function(e,t){var i=k.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){t.call(this),this.onload=null,k.doc.body.removeChild(this)},i.onerror=function(){k.doc.body.removeChild(this)},k.doc.body.appendChild(i),i.src=e};v.getRGB=p(function(e){if(!e||(e=A(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:f};!ne[_](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=ye(e));var t,i,n,s,o,a,r=e.match(Y);return r?(r[2]&&(n=Z(r[2].substring(5),16),i=Z(r[2].substring(3,5),16),t=Z(r[2].substring(1,3),16)),r[3]&&(n=Z((o=r[3].charAt(3))+o,16),i=Z((o=r[3].charAt(2))+o,16),t=Z((o=r[3].charAt(1))+o,16)),r[4]&&(a=r[4][P](ie),t=Q(a[0]),"%"==a[0].slice(-1)&&(t*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),"rgba"==r[1].toLowerCase().slice(0,4)&&(s=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(s/=100)),r[5]?(a=r[5][P](ie),t=Q(a[0]),"%"==a[0].slice(-1)&&(t*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(t/=360),"hsba"==r[1].toLowerCase().slice(0,4)&&(s=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(s/=100),v.hsb2rgb(t,i,n,s)):r[6]?(a=r[6][P](ie),t=Q(a[0]),"%"==a[0].slice(-1)&&(t*=2.55),i=Q(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),n=Q(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),("deg"==a[0].slice(-3)||"°"==a[0].slice(-1))&&(t/=360),"hsla"==r[1].toLowerCase().slice(0,4)&&(s=Q(a[3])),a[3]&&"%"==a[3].slice(-1)&&(s/=100),v.hsl2rgb(t,i,n,s)):(r={r:t,g:i,b:n,toString:f},r.hex="#"+(16777216|n|i<<8|t<<16).toString(16).slice(1),v.is(s,"finite")&&(r.opacity=s),r)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:f}},v),v.hsb=p(function(e,t,i){return v.hsb2rgb(e,t,i).hex}),v.hsl=p(function(e,t,i){return v.hsl2rgb(e,t,i).hex}),v.rgb=p(function(e,t,i){return"#"+(16777216|i|t<<8|e<<16).toString(16).slice(1)}),v.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex},v.getColor.reset=function(){delete this.start},v.parsePathString=function(e){if(!e)return null;var t=ke(e);if(t.arr)return Se(t.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];return v.is(e,q)&&v.is(e[0],q)&&(n=Se(e)),n.length||A(e).replace(oe,function(e,t,s){var o=[],a=t.toLowerCase();if(s.replace(re,function(e,t){t&&o.push(+t)}),"m"==a&&o.length>2&&(n.push([t][E](o.splice(0,2))),a="l",t="m"==t?"l":"L"),"r"==a)n.push([t][E](o));else for(;o.length>=i[a]&&(n.push([t][E](o.splice(0,i[a]))),i[a]););}),n.toString=v._path2string,t.arr=Se(n),n},v.parseTransformString=p(function(e){if(!e)return null;var t=[];return v.is(e,q)&&v.is(e[0],q)&&(t=Se(e)),t.length||A(e).replace(ae,function(e,i,n){var s=[];L.call(i);n.replace(re,function(e,t){t&&s.push(+t)}),t.push([i][E](s))}),t.toString=v._path2string,t});var ke=function(e){var t=ke.ps=ke.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)t[_](i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[e]};v.findDotsAtSegment=function(e,t,i,n,s,o,a,r,l){var d=1-l,c=F(d,3),h=F(d,2),u=l*l,f=u*l,p=c*e+3*h*l*i+3*d*l*l*s+f*a,m=c*t+3*h*l*n+3*d*l*l*o+f*r,g=e+2*l*(i-e)+u*(s-2*i+e),v=t+2*l*(n-t)+u*(o-2*n+t),y=i+2*l*(s-i)+u*(a-2*s+i),b=n+2*l*(o-n)+u*(r-2*o+n),x=d*e+l*i,w=d*t+l*n,C=d*s+l*a,_=d*o+l*r,k=90-180*H.atan2(g-y,v-b)/U;return(g>y||v<b)&&(k+=180),{x:p,y:m,m:{x:g,y:v},n:{x:y,y:b},start:{x:x,y:w},end:{x:C,y:_},alpha:k}},v.bezierBBox=function(e,t,i,n,s,o,a,r){v.is(e,"array")||(e=[e,t,i,n,s,o,a,r]);var l=Pe.apply(null,e);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},v.isPointInsideBBox=function(e,t,i){return t>=e.x&&t<=e.x2&&i>=e.y&&i<=e.y2},v.isBBoxIntersect=function(e,t){var i=v.isPointInsideBBox;return i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},v.pathIntersection=function(e,t){return a(e,t)},v.pathIntersectionNumber=function(e,t){return a(e,t,1)},v.isPointInsidePath=function(e,t,i){var n=v.pathBBox(e);return v.isPointInsideBBox(n,t,i)&&a(e,[["M",t,i],["H",n.x2+10]],1)%2==1},v._removedFactory=function(e){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Te=v.pathBBox=function(e){var t=ke(e);if(t.bbox)return t.bbox;if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=Be(e);for(var i,n=0,s=0,o=[],a=[],r=0,l=e.length;r<l;r++)if(i=e[r],"M"==i[0])n=i[1],s=i[2],o.push(n),a.push(s);else{var d=Pe(n,s,i[1],i[2],i[3],i[4],i[5],i[6]);o=o[E](d.min.x,d.max.x),a=a[E](d.min.y,d.max.y),n=i[5],s=i[6]}var c=O[N](0,o),h=O[N](0,a),u=R[N](0,o),f=R[N](0,a),p={x:c,y:h,x2:u,y2:f,width:u-c,height:f-h};return t.bbox=g(p),p},Se=function(e){var t=g(e);return t.toString=v._path2string,t},Ne=v._pathToRelative=function(e){var t=ke(e);if(t.rel)return Se(t.rel);v.is(e,q)&&v.is(e&&e[0],q)||(e=v.parsePathString(e));var i=[],n=0,s=0,o=0,a=0,r=0;"M"==e[0][0]&&(n=e[0][1],s=e[0][2],o=n,a=s,r++,i.push(["M",n,s]));for(var l=r,d=e.length;l<d;l++){var c=i[l]=[],h=e[l];if(h[0]!=L.call(h[0]))switch(c[0]=L.call(h[0]),c[0]){case"a":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+(h[6]-n).toFixed(3),c[7]=+(h[7]-s).toFixed(3);break;case"v":c[1]=+(h[1]-s).toFixed(3);break;case"m":o=h[1],a=h[2];default:for(var u=1,f=h.length;u<f;u++)c[u]=+(h[u]-(u%2?n:s)).toFixed(3)}else{c=i[l]=[],"m"==h[0]&&(o=h[1]+n,a=h[2]+s);for(var p=0,m=h.length;p<m;p++)i[l][p]=h[p]}var g=i[l].length;switch(i[l][0]){case"z":n=o,s=a;break;case"h":n+=+i[l][g-1];break;case"v":s+=+i[l][g-1];break;default:n+=+i[l][g-2],s+=+i[l][g-1]}}return i.toString=v._path2string,t.rel=Se(i),i},Ee=v._pathToAbsolute=function(e){var t=ke(e);if(t.abs)return Se(t.abs);if(v.is(e,q)&&v.is(e&&e[0],q)||(e=v.parsePathString(e)),!e||!e.length)return[["M",0,0]];var i=[],n=0,s=0,o=0,a=0,r=0;"M"==e[0][0]&&(n=+e[0][1],s=+e[0][2],o=n,a=s,r++,i[0]=["M",n,s]);for(var l,d,c=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=r,f=e.length;h<f;h++){if(i.push(l=[]),d=e[h],d[0]!=J.call(d[0]))switch(l[0]=J.call(d[0]),l[0]){case"A":l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=+(d[6]+n),l[7]=+(d[7]+s);break;case"V":l[1]=+d[1]+s;break;case"H":l[1]=+d[1]+n;break;case"R":for(var p=[n,s][E](d.slice(1)),m=2,g=p.length;m<g;m++)p[m]=+p[m]+n,p[++m]=+p[m]+s;i.pop(),i=i[E](u(p,c));break;case"M":o=+d[1]+n,a=+d[2]+s;default:for(m=1,g=d.length;m<g;m++)l[m]=+d[m]+(m%2?n:s)}else if("R"==d[0])p=[n,s][E](d.slice(1)),i.pop(),i=i[E](u(p,c)),l=["R"][E](d.slice(-2));else for(var y=0,b=d.length;y<b;y++)l[y]=d[y];switch(l[0]){case"Z":n=o,s=a;break;case"H":n=l[1];break;case"V":s=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];default:n=l[l.length-2],s=l[l.length-1]}}return i.toString=v._path2string,t.abs=Se(i),i},Ie=function(e,t,i,n){return[e,t,i,n,i,n]},$e=function(e,t,i,n,s,o){var a=1/3,r=2/3;return[a*e+r*i,a*t+r*n,a*s+r*i,a*o+r*n,s,o]},De=function(e,t,i,n,s,o,a,r,l,d){var c,h=120*U/180,u=U/180*(+s||0),f=[],m=p(function(e,t,i){var n=e*H.cos(i)-t*H.sin(i),s=e*H.sin(i)+t*H.cos(i);return{x:n,y:s}});if(d)k=d[0],T=d[1],C=d[2],_=d[3];else{c=m(e,t,-u),e=c.x,t=c.y,c=m(r,l,-u),r=c.x,l=c.y;var g=(H.cos(U/180*s),H.sin(U/180*s),(e-r)/2),v=(t-l)/2,y=g*g/(i*i)+v*v/(n*n);y>1&&(y=H.sqrt(y),i=y*i,n=y*n);var b=i*i,x=n*n,w=(o==a?-1:1)*H.sqrt(j((b*x-b*v*v-x*g*g)/(b*v*v+x*g*g))),C=w*i*v/n+(e+r)/2,_=w*-n*g/i+(t+l)/2,k=H.asin(((t-_)/n).toFixed(9)),T=H.asin(((l-_)/n).toFixed(9));k=e<C?U-k:k,T=r<C?U-T:T,k<0&&(k=2*U+k),T<0&&(T=2*U+T),a&&k>T&&(k-=2*U),!a&&T>k&&(T-=2*U)}var S=T-k;if(j(S)>h){var N=T,I=r,$=l;T=k+h*(a&&T>k?1:-1),r=C+i*H.cos(T),l=_+n*H.sin(T),f=De(r,l,i,n,s,0,a,I,$,[T,N,C,_])}S=T-k;var D=H.cos(k),A=H.sin(k),B=H.cos(T),M=H.sin(T),L=H.tan(S/4),R=4/3*i*L,O=4/3*n*L,F=[e,t],z=[e+R*A,t-O*D],W=[r+R*M,l-O*B],q=[r,l];if(z[0]=2*F[0]-z[0],z[1]=2*F[1]-z[1],d)return[z,W,q][E](f);f=[z,W,q][E](f).join()[P](",");for(var V=[],Y=0,X=f.length;Y<X;Y++)V[Y]=Y%2?m(f[Y-1],f[Y],u).y:m(f[Y],f[Y+1],u).x;return V},Ae=function(e,t,i,n,s,o,a,r,l){var d=1-l;return{x:F(d,3)*e+3*F(d,2)*l*i+3*d*l*l*s+F(l,3)*a,y:F(d,3)*t+3*F(d,2)*l*n+3*d*l*l*o+F(l,3)*r}},Pe=p(function(e,t,i,n,s,o,a,r){var l,d=s-2*i+e-(a-2*s+i),c=2*(i-e)-2*(s-i),h=e-i,u=(-c+H.sqrt(c*c-4*d*h))/2/d,f=(-c-H.sqrt(c*c-4*d*h))/2/d,p=[t,r],m=[e,a];return j(u)>"1e12"&&(u=.5),j(f)>"1e12"&&(f=.5),u>0&&u<1&&(l=Ae(e,t,i,n,s,o,a,r,u),m.push(l.x),p.push(l.y)),f>0&&f<1&&(l=Ae(e,t,i,n,s,o,a,r,f),m.push(l.x),p.push(l.y)),d=o-2*n+t-(r-2*o+n),c=2*(n-t)-2*(o-n),h=t-n,u=(-c+H.sqrt(c*c-4*d*h))/2/d,f=(-c-H.sqrt(c*c-4*d*h))/2/d,j(u)>"1e12"&&(u=.5),j(f)>"1e12"&&(f=.5),u>0&&u<1&&(l=Ae(e,t,i,n,s,o,a,r,u),m.push(l.x),p.push(l.y)),f>0&&f<1&&(l=Ae(e,t,i,n,s,o,a,r,f),m.push(l.x),p.push(l.y)),{min:{x:O[N](0,m),y:O[N](0,p)},max:{x:R[N](0,m),y:R[N](0,p)}}}),Be=v._path2curve=p(function(e,t){var i=!t&&ke(e);if(!t&&i.curve)return Se(i.curve);for(var n=Ee(e),s=t&&Ee(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=(function(e,t){var i,n;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][E](De[N](0,[t.x,t.y][E](e.slice(1))));break;case"S":i=t.x+(t.x-(t.bx||t.x)),n=t.y+(t.y-(t.by||t.y)),e=["C",i,n][E](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][E]($e(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][E]($e(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][E](Ie(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][E](Ie(t.x,t.y,e[1],t.y));break;case"V":e=["C"][E](Ie(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][E](Ie(t.x,t.y,t.X,t.Y))}return e}),l=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)e.splice(t++,0,["C"][E](i.splice(0,6)));e.splice(t,1),h=R(n.length,s&&s.length||0)}},d=function(e,t,i,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),i.bx=0,i.by=0,i.x=e[a][1],i.y=e[a][2],h=R(n.length,s&&s.length||0))},c=0,h=R(n.length,s&&s.length||0);c<h;c++){n[c]=r(n[c],o),l(n,c),s&&(s[c]=r(s[c],a)),s&&l(s,c),d(n,s,o,a,c),d(s,n,a,o,c);var u=n[c],f=s&&s[c],p=u.length,m=s&&f.length;o.x=u[p-2],o.y=u[p-1],o.bx=Q(u[p-4])||o.x,o.by=Q(u[p-3])||o.y,a.bx=s&&(Q(f[m-4])||a.x),a.by=s&&(Q(f[m-3])||a.y),a.x=s&&f[m-2],a.y=s&&f[m-1]}return s||(i.curve=Se(n)),s?[n,s]:n},null,Se),Me=(v._parseDots=p(function(e){for(var t=[],i=0,n=e.length;i<n;i++){var s={},o=e[i].match(/^([^:]*):?([\d\.]*)/);if(s.color=v.getRGB(o[1]),s.color.error)return null;s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),t.push(s)}for(i=1,n=t.length-1;i<n;i++)if(!t[i].offset){for(var a=Q(t[i-1].offset||0),r=0,l=i+1;l<n;l++)if(t[l].offset){r=t[l].offset;break}r||(r=100,l=n),r=Q(r);for(var d=(r-a)/(l-i+1);i<l;i++)a+=d,t[i].offset=a+"%"}return t}),v._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),Le=(v._tofront=function(e,t){t.top!==e&&(Me(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},v._toback=function(e,t){t.bottom!==e&&(Me(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},v._insertafter=function(e,t,i){Me(e,i),t==i.top&&(i.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},v._insertbefore=function(e,t,i){Me(e,i),t==i.bottom&&(i.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},v.toMatrix=function(e,t){var i=Te(e),n={_:{transform:$},getBBox:function(){return i}};return He(n,t),n.matrix}),He=(v.transformPath=function(e,t){return me(e,Le(e,t))},v._extractTransform=function(e,t){if(null==t)return e._.transform;t=A(t).replace(/\.{3}|\u2026/g,e._.transform||$);var i=v.parseTransformString(t),n=0,s=0,a=0,r=1,l=1,d=e._,c=new o;if(d.transform=i||[],i)for(var h=0,u=i.length;h<u;h++){var f,p,m,g,y,b=i[h],x=b.length,w=A(b[0]).toLowerCase(),C=b[0]!=w,_=C?c.invert():0;"t"==w&&3==x?C?(f=_.x(0,0),p=_.y(0,0),m=_.x(b[1],b[2]),g=_.y(b[1],b[2]),c.translate(m-f,g-p)):c.translate(b[1],b[2]):"r"==w?2==x?(y=y||e.getBBox(1),c.rotate(b[1],y.x+y.width/2,y.y+y.height/2),n+=b[1]):4==x&&(C?(m=_.x(b[2],b[3]),g=_.y(b[2],b[3]),c.rotate(b[1],m,g)):c.rotate(b[1],b[2],b[3]),n+=b[1]):"s"==w?2==x||3==x?(y=y||e.getBBox(1),c.scale(b[1],b[x-1],y.x+y.width/2,y.y+y.height/2),r*=b[1],l*=b[x-1]):5==x&&(C?(m=_.x(b[3],b[4]),g=_.y(b[3],b[4]),c.scale(b[1],b[2],m,g)):c.scale(b[1],b[2],b[3],b[4]),r*=b[1],l*=b[2]):"m"==w&&7==x&&c.add(b[1],b[2],b[3],b[4],b[5],b[6]),d.dirtyT=1,e.matrix=c}e.matrix=c,d.sx=r,d.sy=l,d.deg=n,d.dx=s=c.e,d.dy=a=c.f,1==r&&1==l&&!n&&d.bbox?(d.bbox.x+=+s,d.bbox.y+=+a):d.dirtyT=1}),Re=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Oe=v._equaliseTransform=function(e,t){t=A(t).replace(/\.{3}|\u2026/g,e),e=v.parseTransformString(e)||[],t=v.parseTransformString(t)||[];for(var i,n,s,o,a=R(e.length,t.length),r=[],l=[],d=0;d<a;d++){if(s=e[d]||Re(t[d]),o=t[d]||Re(s),s[0]!=o[0]||"r"==s[0].toLowerCase()&&(s[2]!=o[2]||s[3]!=o[3])||"s"==s[0].toLowerCase()&&(s[3]!=o[3]||s[4]!=o[4]))return;for(r[d]=[],l[d]=[],i=0,n=R(s.length,o.length);i<n;i++)i in s&&(r[d][i]=s[i]),i in o&&(l[d][i]=o[i])}return{from:r,to:l}};v._getContainer=function(e,t,i,n){var s;if(s=null!=n||v.is(e,"object")?e:k.doc.getElementById(e),null!=s)return s.tagName?null==t?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:t,height:i}:{container:1,x:e,y:t,width:i,height:n}},v.pathToRelative=Ne,v._engine={},v.path2curve=Be,v.matrix=function(e,t,i,n,s,a){return new o(e,t,i,n,s,a)},function(e){function t(e){var t=H.sqrt(i(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}function i(e){return e[0]*e[0]+e[1]*e[1]}e.add=function(e,t,i,n,s,a){var r,l,d,c,h=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,i,s],[t,n,a],[0,0,1]];for(e&&e instanceof o&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),r=0;r<3;r++)for(l=0;l<3;l++){for(c=0,d=0;d<3;d++)c+=u[r][d]*f[d][l];h[r][l]=c}this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new o(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,n){null==t&&(t=e),(i||n)&&this.add(1,0,0,1,i,n),this.add(e,0,0,t,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},e.rotate=function(e,t,i){e=v.rad(e),t=t||0,i=i||0;var n=+H.cos(e).toFixed(9),s=+H.sin(e).toFixed(9);this.add(n,s,-s,n,t,i),this.add(1,0,0,1,-t,-i)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[A.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return v.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=H.sqrt(i(n[0])),t(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=H.sqrt(i(n[1])),t(n[1]),e.shear/=e.scaley;var s=-n[0][1],o=n[1][1];return o<0?(e.rotate=v.deg(H.acos(o)),s<0&&(e.rotate=360-e.rotate)):e.rotate=v.deg(H.asin(s)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[P]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:$)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:$)+(t.rotate?"r"+[t.rotate,0,0]:$)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var je=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(je&&je[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&je&&je[1]<8?b.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:b.safari=ce;for(var Fe=function(){this.returnValue=!1},Ue=function(){return this.originalEvent.preventDefault()},ze=function(){this.cancelBubble=!0},We=function(){return this.originalEvent.stopPropagation()},qe=function(){return k.doc.addEventListener?function(e,t,i,n){var s=I&&M[t]?M[t]:t,o=function(s){var o=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,a=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,r=s.clientX+a,l=s.clientY+o;if(I&&M[_](t))for(var d=0,c=s.targetTouches&&s.targetTouches.length;d<c;d++)if(s.targetTouches[d].target==e){var h=s;s=s.targetTouches[d],s.originalEvent=h,s.preventDefault=Ue,s.stopPropagation=We;break}return i.call(n,s,r,l)};return e.addEventListener(s,o,!1),function(){return e.removeEventListener(s,o,!1),!0}}:k.doc.attachEvent?function(e,t,i,n){var s=function(e){e=e||k.win.event;var t=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,s=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,o=e.clientX+s,a=e.clientY+t;return e.preventDefault=e.preventDefault||Fe,e.stopPropagation=e.stopPropagation||ze,i.call(n,e,o,a)};e.attachEvent("on"+t,s);var o=function(){return e.detachEvent("on"+t,s),!0};return o}:void 0}(),Ve=[],Ye=function(e){for(var t,i=e.clientX,n=e.clientY,s=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,o=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,a=Ve.length;a--;){if(t=Ve[a],I){for(var r,l=e.touches.length;l--;)if(r=e.touches[l],r.identifier==t.el._drag.id){i=r.clientX,n=r.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var d,c=t.el.node,h=c.nextSibling,u=c.parentNode,f=c.style.display;k.win.opera&&u.removeChild(c),c.style.display="none",d=t.el.paper.getElementByPoint(i,n),c.style.display=f,k.win.opera&&(h?u.insertBefore(c,h):u.appendChild(c)),d&&eve("raphael.drag.over."+t.el.id,t.el,d),i+=o,n+=s,eve("raphael.drag.move."+t.el.id,t.move_scope||t.el,i-t.el._drag.x,n-t.el._drag.y,i,n,e)}},Xe=function(e){v.unmousemove(Ye).unmouseup(Xe);for(var t,i=Ve.length;i--;)t=Ve[i],t.el._drag={},eve("raphael.drag.end."+t.el.id,t.end_scope||t.start_scope||t.move_scope||t.el,e);Ve=[]},Ke=v.el={},Ge=B.length;Ge--;)(function(e){v[e]=Ke[e]=function(t,i){return v.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:qe(this.shape||this.node||k.doc,e,t,i||this)})),this},v["un"+e]=Ke["un"+e]=function(t){for(var i=this.events||[],n=i.length;n--;)if(i[n].name==e&&i[n].f==t)return i[n].unbind(),i.splice(n,1),!i.length&&delete this.events,this;return this}})(B[Ge]);Ke.data=function(e,t){var i=le[this.id]=le[this.id]||{};if(1==arguments.length){if(v.is(e,"object")){for(var n in e)e[_](n)&&this.data(n,e[n]);return this}return eve("raphael.data.get."+this.id,this,i[e],e),i[e]}return i[e]=t,eve("raphael.data.set."+this.id,this,t,e),this},Ke.removeData=function(e){return null==e?le[this.id]={}:le[this.id]&&delete le[this.id][e],this},Ke.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)},Ke.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var Qe=[];Ke.drag=function(e,t,i,n,s,o){function a(a){(a.originalEvent||a).preventDefault();var r=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,l=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;this._drag.x=a.clientX+l,this._drag.y=a.clientY+r,this._drag.id=a.identifier,!Ve.length&&v.mousemove(Ye).mouseup(Xe),Ve.push({el:this,move_scope:n,start_scope:s,end_scope:o}),t&&eve.on("raphael.drag.start."+this.id,t),e&&eve.on("raphael.drag.move."+this.id,e),i&&eve.on("raphael.drag.end."+this.id,i),eve("raphael.drag.start."+this.id,s||n||this,a.clientX+l,a.clientY+r,a)}return this._drag={},Qe.push({el:this,start:a}),this.mousedown(a),this},Ke.onDragOver=function(e){e?eve.on("raphael.drag.over."+this.id,e):eve.unbind("raphael.drag.over."+this.id)},Ke.undrag=function(){for(var e=Qe.length;e--;)Qe[e].el==this&&(this.unmousedown(Qe[e].start),Qe.splice(e,1),eve.unbind("raphael.drag.*."+this.id));!Qe.length&&v.unmousemove(Ye).unmouseup(Xe)},b.circle=function(e,t,i){var n=v._engine.circle(this,e||0,t||0,i||0);return this.__set__&&this.__set__.push(n),n},b.rect=function(e,t,i,n,s){var o=v._engine.rect(this,e||0,t||0,i||0,n||0,s||0);return this.__set__&&this.__set__.push(o),o},b.ellipse=function(e,t,i,n){var s=v._engine.ellipse(this,e||0,t||0,i||0,n||0);return this.__set__&&this.__set__.push(s),s},b.path=function(e){e&&!v.is(e,W)&&!v.is(e[0],q)&&(e+=$);var t=v._engine.path(v.format[N](v,arguments),this);return this.__set__&&this.__set__.push(t),t},b.image=function(e,t,i,n,s){var o=v._engine.image(this,e||"about:blank",t||0,i||0,n||0,s||0);return this.__set__&&this.__set__.push(o),o},b.text=function(e,t,i){var n=v._engine.text(this,e||0,t||0,A(i));return this.__set__&&this.__set__.push(n),n},b.set=function(e){!v.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new dt(e);return this.__set__&&this.__set__.push(t),t},b.setStart=function(e){this.__set__=e||this.set()},b.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},b.setSize=function(e,t){return v._engine.setSize.call(this,e,t)},b.setViewBox=function(e,t,i,n,s){return v._engine.setViewBox.call(this,e,t,i,n,s)},b.top=b.bottom=null,b.raphael=v;var Ze=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,n=i.body,s=i.documentElement,o=s.clientTop||n.clientTop||0,a=s.clientLeft||n.clientLeft||0,r=t.top+(k.win.pageYOffset||s.scrollTop||n.scrollTop)-o,l=t.left+(k.win.pageXOffset||s.scrollLeft||n.scrollLeft)-a;return{y:r,x:l}};b.getElementByPoint=function(e,t){var i=this,n=i.canvas,s=k.doc.elementFromPoint(e,t);if(k.win.opera&&"svg"==s.tagName){var o=Ze(n),a=n.createSVGRect();a.x=e-o.x,a.y=t-o.y,a.width=a.height=1;var r=n.getIntersectionList(a,null);r.length&&(s=r[r.length-1])}if(!s)return null;for(;s.parentNode&&s!=n.parentNode&&!s.raphael;)s=s.parentNode;return s==i.canvas.parentNode&&(s=n),s=s&&s.raphael?i.getById(s.raphaelid):null},b.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},b.forEach=function(e,t){for(var i=this.bottom;i;){if(e.call(t,i)===!1)return this;i=i.next}return this},b.getElementsByPoint=function(e,t){var i=this.set();return this.forEach(function(n){n.isPointInside(e,t)&&i.push(n)}),i},Ke.isPointInside=function(e,t){var i=this.realPath=this.realPath||pe[this.type](this);return v.isPointInsidePath(i,e,t)},Ke.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=pe[this.type](this),t.bboxwt=Te(this.realPath),t.bboxwt.toString=s,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=pe[this.type](this)),t.bbox=Te(me(this.realPath,this.matrix)),t.bbox.toString=s,t.dirty=t.dirtyT=0),t.bbox)},Ke.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},Ke.glow=function(e){if("text"==this.type)return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},i=t.width/2,n=this.paper,s=n.set(),o=this.realPath||pe[this.type](this);o=this.matrix?me(o,this.matrix):o;for(var a=1;a<i+1;a++)s.push(n.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*a).toFixed(3),opacity:+(t.opacity/i).toFixed(3)}));return s.insertBefore(this).translate(t.offsetx,t.offsety)};var Je=function(e,t,i,n,s,o,a,r,l){return null==l?c(e,t,i,n,s,o,a,r):v.findDotsAtSegment(e,t,i,n,s,o,a,r,d(e,t,i,n,s,o,a,r,l))},et=function(e,t){return function(i,n,s){i=Be(i);for(var o,a,r,l,d,c="",h={},u=0,f=0,p=i.length;f<p;f++){if(r=i[f],"M"==r[0])o=+r[1],a=+r[2];else{if(l=Je(o,a,r[1],r[2],r[3],r[4],r[5],r[6]),u+l>n){if(t&&!h.start){if(d=Je(o,a,r[1],r[2],r[3],r[4],r[5],r[6],n-u),c+=["C"+d.start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],s)return c;h.start=c,c=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,r[5],r[6]].join(),u+=l,o=+r[5],a=+r[6];continue}if(!e&&!t)return d=Je(o,a,r[1],r[2],r[3],r[4],r[5],r[6],n-u),{x:d.x,y:d.y,alpha:d.alpha}}u+=l,o=+r[5],a=+r[6]}c+=r.shift()+r}return h.end=c,d=e?u:t?h:v.findDotsAtSegment(o,a,r[0],r[1],r[2],r[3],r[4],r[5],1),d.alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},tt=et(1),it=et(),nt=et(0,1);v.getTotalLength=tt,v.getPointAtLength=it,v.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return nt(e,t).end;var n=nt(e,i,1);return t?nt(n,t).end:n},Ke.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():tt(this.attrs.path)},Ke.getPointAtLength=function(e){if("path"==this.type)return it(this.attrs.path,e)},Ke.getSubpath=function(e,t){if("path"==this.type)return v.getSubpath(this.attrs.path,e,t)};var st=v.easing_formulas={linear:function(e){return e},"<":function(e){return F(e,1.7)},">":function(e){return F(e,.48)},"<>":function(e){var t=.48-e/1.04,i=H.sqrt(.1734+t*t),n=i-t,s=F(j(n),1/3)*(n<0?-1:1),o=-i-t,a=F(j(o),1/3)*(o<0?-1:1),r=s+a+.5;return 3*(1-r)*r*r+r*r*r},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:F(2,-10*e)*H.sin(2*(e-.075)*U/.3)+1},bounce:function(e){var t,i=7.5625,n=2.75;return e<1/n?t=i*e*e:e<2/n?(e-=1.5/n,t=i*e*e+.75):e<2.5/n?(e-=2.25/n,t=i*e*e+.9375):(e-=2.625/n,t=i*e*e+.984375),t}};st.easeIn=st["ease-in"]=st["<"],st.easeOut=st["ease-out"]=st[">"],st.easeInOut=st["ease-in-out"]=st["<>"],st["back-in"]=st.backIn,st["back-out"]=st.backOut;var ot=[],at=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},rt=function(){for(var e=+new Date,i=0;i<ot.length;i++){var n=ot[i];if(!n.el.removed&&!n.paused){var s,o,a=e-n.start,r=n.ms,l=n.easing,d=n.from,c=n.diff,h=n.to,u=(n.t,n.el),f={},p={};if(n.initstatus?(a=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*r,n.status=n.initstatus,delete n.initstatus,n.stop&&ot.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(a/r))/n.anim.top,!(a<0))if(a<r){var m=l(a/r);for(var g in d)if(d[_](g)){switch(te[g]){case z:s=+d[g]+m*r*c[g];break;case"colour":s="rgb("+[lt(G(d[g].r+m*r*c[g].r)),lt(G(d[g].g+m*r*c[g].g)),lt(G(d[g].b+m*r*c[g].b))].join(",")+")";break;case"path":s=[];for(var y=0,b=d[g].length;y<b;y++){s[y]=[d[g][y][0]];for(var x=1,w=d[g][y].length;x<w;x++)s[y][x]=+d[g][y][x]+m*r*c[g][y][x];s[y]=s[y].join(D)}s=s.join(D);break;case"transform":if(c[g].real)for(s=[],y=0,b=d[g].length;y<b;y++)for(s[y]=[d[g][y][0]],x=1,w=d[g][y].length;x<w;x++)s[y][x]=d[g][y][x]+m*r*c[g][y][x];else{var C=function(e){return+d[g][e]+m*r*c[g][e]};s=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if("clip-rect"==g)for(s=[],y=4;y--;)s[y]=+d[g][y]+m*r*c[g][y];break;default:var k=[][E](d[g]);for(s=[],y=u.paper.customAttributes[g].length;y--;)s[y]=+k[y]+m*r*c[g][y]}f[g]=s}u.attr(f),function(e,t,i){setTimeout(function(){eve("raphael.anim.frame."+e,t,i);
})}(u.id,u,n.anim)}else{if(function(e,t,i){setTimeout(function(){eve("raphael.anim.frame."+t.id,t,i),eve("raphael.anim.finish."+t.id,t,i),v.is(e,"function")&&e.call(t)})}(n.callback,u,n.anim),u.attr(h),ot.splice(i--,1),n.repeat>1&&!n.next){for(o in h)h[_](o)&&(p[o]=n.totalOrigin[o]);n.el.attr(p),t(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&t(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}}v.svg&&u&&u.paper&&u.paper.safari(),ot.length&&at(rt)},lt=function(e){return e>255?255:e<0?0:e};Ke.animateWith=function(e,n,s,o,a,r){var l=this;if(l.removed)return r&&r.call(l),l;var d=s instanceof i?s:v.animation(s,o,a,r);t(d,l,d.percents[0],null,l.attr());for(var c=0,h=ot.length;c<h;c++)if(ot[c].anim==n&&ot[c].el==e){ot[h-1].start=ot[c].start;break}return l},Ke.onAnimation=function(e){return e?eve.on("raphael.anim.frame."+this.id,e):eve.unbind("raphael.anim.frame."+this.id),this},i.prototype.delay=function(e){var t=new i(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},i.prototype.repeat=function(e){var t=new i(this.anim,this.ms);return t.del=this.del,t.times=H.floor(R(e,0))||1,t},v.animation=function(e,t,n,s){if(e instanceof i)return e;!v.is(n,"function")&&n||(s=s||n||null,n=null),e=Object(e),t=+t||0;var o,a,r={};for(a in e)e[_](a)&&Q(a)!=a&&Q(a)+"%"!=a&&(o=!0,r[a]=e[a]);return o?(n&&(r.easing=n),s&&(r.callback=s),new i({100:r},t)):new i(e,t)},Ke.animate=function(e,n,s,o){var a=this;if(a.removed)return o&&o.call(a),a;var r=e instanceof i?e:v.animation(e,n,s,o);return t(r,a,r.percents[0],null,a.attr()),a},Ke.setTime=function(e,t){return e&&null!=t&&this.status(e,O(t,e.ms)/e.ms),this},Ke.status=function(e,i){var n,s,o=[],a=0;if(null!=i)return t(e,this,-1,O(i,1)),this;for(n=ot.length;a<n;a++)if(s=ot[a],s.el.id==this.id&&(!e||s.anim==e)){if(e)return s.status;o.push({anim:s.anim,status:s.status})}return e?0:o},Ke.pause=function(e){for(var t=0;t<ot.length;t++)ot[t].el.id==this.id&&(!e||ot[t].anim==e)&&eve("raphael.anim.pause."+this.id,this,ot[t].anim)!==!1&&(ot[t].paused=!0);return this},Ke.resume=function(e){for(var t=0;t<ot.length;t++)if(ot[t].el.id==this.id&&(!e||ot[t].anim==e)){var i=ot[t];eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},Ke.stop=function(e){for(var t=0;t<ot.length;t++)ot[t].el.id==this.id&&(!e||ot[t].anim==e)&&eve("raphael.anim.stop."+this.id,this,ot[t].anim)!==!1&&ot.splice(t--,1);return this},eve.on("raphael.remove",e),eve.on("raphael.clear",e),Ke.toString=function(){return"Raphaël’s object"};var dt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,i=e.length;t<i;t++)e[t]&&(e[t].constructor==Ke.constructor||e[t].constructor==dt)&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},ct=dt.prototype;ct.push=function(){for(var e,t,i=0,n=arguments.length;i<n;i++)e=arguments[i],e&&(e.constructor==Ke.constructor||e.constructor==dt)&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},ct.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ct.forEach=function(e,t){for(var i=0,n=this.items.length;i<n;i++)if(e.call(t,this.items[i],i)===!1)return this;return this};for(var ht in Ke)Ke[_](ht)&&(ct[ht]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e][N](i,t)})}}(ht));ct.attr=function(e,t){if(e&&v.is(e,q)&&v.is(e[0],"object"))for(var i=0,n=e.length;i<n;i++)this.items[i].attr(e[i]);else for(var s=0,o=this.items.length;s<o;s++)this.items[s].attr(e,t);return this},ct.clear=function(){for(;this.length;)this.pop()},ct.splice=function(e,t,i){e=e<0?R(this.length+e,0):e,t=R(0,O(this.length-e,t));var n,s=[],o=[],a=[];for(n=2;n<arguments.length;n++)a.push(arguments[n]);for(n=0;n<t;n++)o.push(this[e+n]);for(;n<this.length-e;n++)s.push(this[e+n]);var r=a.length;for(n=0;n<r+s.length;n++)this.items[e+n]=this[e+n]=n<r?a[n]:s[n-r];for(n=this.items.length=this.length-=t-r;this[n];)delete this[n++];return new dt(o)},ct.exclude=function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]==e)return this.splice(t,1),!0},ct.animate=function(e,t,i,n){(v.is(i,"function")||!i)&&(n=i||null);var s,o,a=this.items.length,r=a,l=this;if(!a)return this;n&&(o=function(){!--a&&n.call(l)}),i=v.is(i,W)?i:o;var d=v.animation(e,t,i,o);for(s=this.items[--r].animate(d);r--;)this.items[r]&&!this.items[r].removed&&this.items[r].animateWith(s,d,d);return this},ct.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},ct.getBBox=function(){for(var e=[],t=[],i=[],n=[],s=this.items.length;s--;)if(!this.items[s].removed){var o=this.items[s].getBBox();e.push(o.x),t.push(o.y),i.push(o.x+o.width),n.push(o.y+o.height)}return e=O[N](0,e),t=O[N](0,t),i=R[N](0,i),n=R[N](0,n),{x:e,y:t,x2:i,y2:n,width:i-e,height:n-t}},ct.clone=function(e){e=new dt;for(var t=0,i=this.items.length;t<i;t++)e.push(this.items[t].clone());return e},ct.toString=function(){return"Raphaël‘s set"},v.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var n in e.face)e.face[_](n)&&(t.face[n]=e.face[n]);if(this.fonts[i]?this.fonts[i].push(t):this.fonts[i]=[t],!e.svg){t.face["units-per-em"]=Z(e.face["units-per-em"],10);for(var s in e.glyphs)if(e.glyphs[_](s)){var o=e.glyphs[s];if(t.glyphs[s]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var a in o.k)o[_](a)&&(t.glyphs[s].k[a]=o.k[a])}}return e},b.getFont=function(e,t,i,n){if(n=n||"normal",i=i||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,v.fonts){var s=v.fonts[e];if(!s){var o=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,$)+"(\\s|$)","i");for(var a in v.fonts)if(v.fonts[_](a)&&o.test(a)){s=v.fonts[a];break}}var r;if(s)for(var l=0,d=s.length;l<d&&(r=s[l],r.face["font-weight"]!=t||r.face["font-style"]!=i&&r.face["font-style"]||r.face["font-stretch"]!=n);l++);return r}},b.print=function(e,t,i,n,s,o,a){o=o||"middle",a=R(O(a||0,1),-1);var r,l=A(i)[P]($),d=0,c=0,h=$;if(v.is(n,i)&&(n=this.getFont(n)),n){r=(s||16)/n.face["units-per-em"];for(var u=n.face.bbox[P](x),f=+u[0],p=u[3]-u[1],m=0,g=+u[1]+("baseline"==o?p+ +n.face.descent:p/2),y=0,b=l.length;y<b;y++){if("\n"==l[y])d=0,C=0,c=0,m+=p;else{var w=c&&n.glyphs[l[y-1]]||{},C=n.glyphs[l[y]];d+=c?(w.w||n.w)+(w.k&&w.k[l[y]]||0)+n.w*a:0,c=1}C&&C.d&&(h+=v.transformPath(C.d,["t",d*r,m*r,"s",r,r,f,g,"t",(e-f)/r,(t-g)/r]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},b.add=function(e){if(v.is(e,"array"))for(var t,i=this.set(),n=0,s=e.length;n<s;n++)t=e[n]||{},w[_](t.type)&&i.push(this[t.type]().attr(t));return i},v.format=function(e,t){var i=v.is(t,q)?[0][E](t):arguments;return e&&v.is(e,W)&&i.length-1&&(e=e.replace(C,function(e,t){return null==i[++t]?$:i[t]})),e||$},v.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(e,i,n){var s=n;return i.replace(t,function(e,t,i,n,o){t=t||n,s&&(t in s&&(s=s[t]),"function"==typeof s&&o&&(s=s()))}),s=(null==s||s==n?e:s)+""};return function(t,n){return String(t).replace(e,function(e,t){return i(e,t,n)})}}(),v.ninja=function(){return T.was?k.win.Raphael=T.is:delete Raphael,v},v.st=ct,function(e,t,i){function n(){/in/.test(e.readyState)?setTimeout(n,9):v.eve("raphael.DOMload")}null==e.readyState&&e.addEventListener&&(e.addEventListener(t,i=function(){e.removeEventListener(t,i,!1),e.readyState="complete"},!1),e.readyState="loading"),n()}(document,"DOMContentLoaded"),T.was?k.win.Raphael=v:Raphael=v,eve.on("raphael.DOMload",function(){y=!0})}(),window.Raphael.svg&&function(e){var t="hasOwnProperty",i=String,n=parseFloat,s=parseInt,o=Math,a=o.max,r=o.abs,l=o.pow,d=/[, ]+/,c=e.eve,h="",u=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(n,s){if(s){"string"==typeof n&&(n=g(n));for(var o in s)s[t](o)&&("xlink:"==o.substring(0,6)?n.setAttributeNS(f,o.substring(6),i(s[o])):n.setAttribute(o,i(s[o])))}else n=e._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(t,s){var d="linear",c=t.id+s,u=.5,f=.5,p=t.node,m=t.paper,v=p.style,y=e._g.doc.getElementById(c);if(!y){if(s=i(s).replace(e._radial_gradient,function(e,t,i){if(d="radial",t&&i){u=n(t),f=n(i);var s=2*(f>.5)-1;l(u-.5,2)+l(f-.5,2)>.25&&(f=o.sqrt(.25-l(u-.5,2))*s+.5)&&.5!=f&&(f=f.toFixed(5)-1e-5*s)}return h}),s=s.split(/\s*\-\s*/),"linear"==d){var b=s.shift();if(b=-n(b),isNaN(b))return null;var x=[0,0,o.cos(e.rad(b)),o.sin(e.rad(b))],w=1/(a(r(x[2]),r(x[3]))||1);x[2]*=w,x[3]*=w,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var C=e._parseDots(s);if(!C)return null;if(c=c.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&c!=t.gradient.id&&(m.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){y=g(d+"Gradient",{id:c}),t.gradient=y,g(y,"radial"==d?{fx:u,fy:f}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:t.matrix.invert()}),m.defs.appendChild(y);for(var _=0,k=C.length;_<k;_++)y.appendChild(g("stop",{offset:C[_].offset?C[_].offset:_?"100%":"0%","stop-color":C[_].color||"#fff"}))}}return g(p,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},y=function(e){var t=e.getBBox(1);g(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(n,s,o){if("path"==n.type){for(var a,r,l,d,c,u=i(s).toLowerCase().split("-"),f=n.paper,v=o?"end":"start",y=n.node,b=n.attrs,x=b["stroke-width"],w=u.length,C="classic",_=3,k=3,T=5;w--;)switch(u[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":C=u[w];break;case"wide":k=5;break;case"narrow":k=2;break;case"long":_=5;break;case"short":_=2}if("open"==C?(_+=2,k+=2,T+=2,l=1,d=o?4:1,c={fill:"none",stroke:b.stroke}):(d=l=_/2,c={fill:b.stroke,stroke:"none"}),n._.arrows?o?(n._.arrows.endPath&&m[n._.arrows.endPath]--,n._.arrows.endMarker&&m[n._.arrows.endMarker]--):(n._.arrows.startPath&&m[n._.arrows.startPath]--,n._.arrows.startMarker&&m[n._.arrows.startMarker]--):n._.arrows={},"none"!=C){var S="raphael-marker-"+C,N="raphael-marker-"+v+C+_+k;e._g.doc.getElementById(S)?m[S]++:(f.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:p[C],id:S})),m[S]=1);var E,I=e._g.doc.getElementById(N);I?(m[N]++,E=I.getElementsByTagName("use")[0]):(I=g(g("marker"),{id:N,markerHeight:k,markerWidth:_,orient:"auto",refX:d,refY:k/2}),E=g(g("use"),{"xlink:href":"#"+S,transform:(o?"rotate(180 "+_/2+" "+k/2+") ":h)+"scale("+_/T+","+k/T+")","stroke-width":(1/((_/T+k/T)/2)).toFixed(4)}),I.appendChild(E),f.defs.appendChild(I),m[N]=1),g(E,c);var $=l*("diamond"!=C&&"oval"!=C);o?(a=n._.arrows.startdx*x||0,r=e.getTotalLength(b.path)-$*x):(a=$*x,r=e.getTotalLength(b.path)-(n._.arrows.enddx*x||0)),c={},c["marker-"+v]="url(#"+N+")",(r||a)&&(c.d=Raphael.getSubpath(b.path,a,r)),g(y,c),n._.arrows[v+"Path"]=S,n._.arrows[v+"Marker"]=N,n._.arrows[v+"dx"]=$,n._.arrows[v+"Type"]=C,n._.arrows[v+"String"]=s}else o?(a=n._.arrows.startdx*x||0,r=e.getTotalLength(b.path)-a):(a=0,r=e.getTotalLength(b.path)-(n._.arrows.enddx*x||0)),n._.arrows[v+"Path"]&&g(y,{d:Raphael.getSubpath(b.path,a,r)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(c in m)if(m[t](c)&&!m[c]){var D=e._g.doc.getElementById(c);D&&D.parentNode.removeChild(D)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(e,t,n){if(t=x[i(t).toLowerCase()]){for(var s=e.attrs["stroke-width"]||"1",o={round:s,square:s,butt:0}[e.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,a=[],r=t.length;r--;)a[r]=t[r]*s+(r%2?1:-1)*o;g(e.node,{"stroke-dasharray":a.join(",")})}},C=function(n,o){var l=n.node,c=n.attrs,u=l.style.visibility;l.style.visibility="hidden";for(var p in o)if(o[t](p)){if(!e._availableAttrs[t](p))continue;var m=o[p];switch(c[p]=m,p){case"blur":n.blur(m);break;case"href":case"title":case"target":var x=l.parentNode;if("a"!=x.tagName.toLowerCase()){var C=g("a");x.insertBefore(C,l),C.appendChild(l),x=C}"target"==p?x.setAttributeNS(f,"show","blank"==m?"new":m):x.setAttributeNS(f,p,m);break;case"cursor":l.style.cursor=m;break;case"transform":n.transform(m);break;case"arrow-start":b(n,m);break;case"arrow-end":b(n,m,1);break;case"clip-rect":var _=i(m).split(d);if(4==_.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var T=g("clipPath"),S=g("rect");T.id=e.createUUID(),g(S,{x:_[0],y:_[1],width:_[2],height:_[3]}),T.appendChild(S),n.paper.defs.appendChild(T),g(l,{"clip-path":"url(#"+T.id+")"}),n.clip=S}if(!m){var N=l.getAttribute("clip-path");if(N){var E=e._g.doc.getElementById(N.replace(/(^url\(#|\)$)/g,h));E&&E.parentNode.removeChild(E),g(l,{"clip-path":h}),delete n.clip}}break;case"path":"path"==n.type&&(g(l,{d:m?c.path=e._pathToAbsolute(m):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(p,m),n._.dirty=1,!c.fx)break;p="x",m=c.x;case"x":c.fx&&(m=-c.x-(c.width||0));case"rx":if("rx"==p&&"rect"==n.type)break;case"cx":l.setAttribute(p,m),n.pattern&&y(n),n._.dirty=1;break;case"height":if(l.setAttribute(p,m),n._.dirty=1,!c.fy)break;p="y",m=c.y;case"y":c.fy&&(m=-c.y-(c.height||0));case"ry":if("ry"==p&&"rect"==n.type)break;case"cy":l.setAttribute(p,m),n.pattern&&y(n),n._.dirty=1;break;case"r":"rect"==n.type?g(l,{rx:m,ry:m}):l.setAttribute(p,m),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(f,"href",m);break;case"stroke-width":1==n._.sx&&1==n._.sy||(m/=a(r(n._.sx),r(n._.sy))||1),n.paper._vbSize&&(m*=n.paper._vbSize),l.setAttribute(p,m),c["stroke-dasharray"]&&w(n,c["stroke-dasharray"],o),n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"stroke-dasharray":w(n,m,o);break;case"fill":var I=i(m).match(e._ISURL);if(I){T=g("pattern");var $=g("image");T.id=e.createUUID(),g(T,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g($,{x:0,y:0,"xlink:href":I[1]}),T.appendChild($),function(t){e._preload(I[1],function(){var e=this.offsetWidth,i=this.offsetHeight;g(t,{width:e,height:i}),g($,{width:e,height:i}),n.paper.safari()})}(T),n.paper.defs.appendChild(T),g(l,{fill:"url(#"+T.id+")"}),n.pattern=T,n.pattern&&y(n);break}var D=e.getRGB(m);if(D.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=i(m).charAt())&&v(n,m)){if("opacity"in c||"fill-opacity"in c){var A=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(A){var P=A.getElementsByTagName("stop");g(P[P.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=m,c.fill="none";break}}else delete o.gradient,delete c.gradient,!e.is(c.opacity,"undefined")&&e.is(o.opacity,"undefined")&&g(l,{opacity:c.opacity}),!e.is(c["fill-opacity"],"undefined")&&e.is(o["fill-opacity"],"undefined")&&g(l,{"fill-opacity":c["fill-opacity"]});D[t]("opacity")&&g(l,{"fill-opacity":D.opacity>1?D.opacity/100:D.opacity});case"stroke":D=e.getRGB(m),l.setAttribute(p,D.hex),"stroke"==p&&D[t]("opacity")&&g(l,{"stroke-opacity":D.opacity>1?D.opacity/100:D.opacity}),"stroke"==p&&n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=i(m).charAt())&&v(n,m);break;case"opacity":c.gradient&&!c[t]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(c.gradient){A=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)),A&&(P=A.getElementsByTagName("stop"),g(P[P.length-1],{"stop-opacity":m}));break}default:"font-size"==p&&(m=s(m,10)+"px");var B=p.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[B]=m,n._.dirty=1,l.setAttribute(p,m)}}k(n,o),l.style.visibility=u},_=1.2,k=function(n,o){if("text"==n.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var a=n.attrs,r=n.node,l=r.firstChild?s(e._g.doc.defaultView.getComputedStyle(r.firstChild,h).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(a.text=o.text;r.firstChild;)r.removeChild(r.firstChild);for(var d,c=i(o.text).split("\n"),u=[],f=0,p=c.length;f<p;f++)d=g("tspan"),f&&g(d,{dy:l*_,x:a.x}),d.appendChild(e._g.doc.createTextNode(c[f])),r.appendChild(d),u[f]=d}else for(u=r.getElementsByTagName("tspan"),f=0,p=u.length;f<p;f++)f?g(u[f],{dy:l*_,x:a.x}):g(u[0],{dy:0});g(r,{x:a.x,y:a.y}),n._.dirty=1;var m=n._getBBox(),v=a.y-(m.y+m.height/2);v&&e.is(v,"finite")&&g(u[0],{dy:v})}},T=function(t,i){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},S=e.el;T.prototype=S,S.constructor=T,e._engine.path=function(e,t){var i=g("path");t.canvas&&t.canvas.appendChild(i);var n=new T(i,t);return n.type="path",C(n,{fill:"none",stroke:"#000",path:e}),n},S.rotate=function(e,t,s){if(this.removed)return this;if(e=i(e).split(d),e.length-1&&(t=n(e[1]),s=n(e[2])),e=n(e[0]),null==s&&(t=s),null==t||null==s){var o=this.getBBox(1);t=o.x+o.width/2,s=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,t,s]])),this},S.scale=function(e,t,s,o){if(this.removed)return this;if(e=i(e).split(d),e.length-1&&(t=n(e[1]),s=n(e[2]),o=n(e[3])),e=n(e[0]),null==t&&(t=e),null==o&&(s=o),null==s||null==o)var a=this.getBBox(1);return s=null==s?a.x+a.width/2:s,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,t,s,o]])),this},S.translate=function(e,t){return this.removed?this:(e=i(e).split(d),e.length-1&&(t=n(e[1])),e=n(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},S.transform=function(i){var n=this._;if(null==i)return n.transform;if(e._extractTransform(this,i),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&g(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var s=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":s})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]="function"==typeof this[i]?e._removedFactory(i):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(e){}finally{t=t||{}}return e&&this.hide(),t},S.attr=function(i,n){if(this.removed)return this;if(null==i){var s={};for(var o in this.attrs)this.attrs[t](o)&&(s[o]=this.attrs[o]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&e.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var a=i.split(d),r={},l=0,h=a.length;l<h;l++)i=a[l],i in this.attrs?r[i]=this.attrs[i]:e.is(this.paper.customAttributes[i],"function")?r[i]=this.paper.customAttributes[i].def:r[i]=e._availableAttrs[i];return h-1?r:r[a[0]]}if(null==n&&e.is(i,"array")){for(r={},l=0,h=i.length;l<h;l++)r[i[l]]=this.attr(i[l]);return r}if(null!=n){var u={};u[i]=n}else null!=i&&e.is(i,"object")&&(u=i);for(var f in u)c("raphael.attr."+f+"."+this.id,this,u[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&u[t](f)&&e.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(u[f]));this.attrs[f]=u[f];for(var m in p)p[t](m)&&(u[m]=p[m])}return C(this,u),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},S.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);this.paper;return this},S.insertAfter=function(t){if(this.removed)return this;var i=t.node||t[t.length-1].node;return i.nextSibling?i.parentNode.insertBefore(this.node,i.nextSibling):i.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},S.insertBefore=function(t){if(this.removed)return this;var i=t.node||t[0].node;return i.parentNode.insertBefore(this.node,i),e._insertbefore(this,t,this.paper),this},S.blur=function(t){var i=this;if(0!==+t){var n=g("filter"),s=g("feGaussianBlur");i.attrs.blur=t,n.id=e.createUUID(),g(s,{stdDeviation:+t||1.5}),n.appendChild(s),i.paper.defs.appendChild(n),i._blur=n,g(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter")},e._engine.circle=function(e,t,i,n){var s=g("circle");e.canvas&&e.canvas.appendChild(s);var o=new T(s,e);return o.attrs={cx:t,cy:i,r:n,fill:"none",stroke:"#000"},o.type="circle",g(s,o.attrs),o},e._engine.rect=function(e,t,i,n,s,o){var a=g("rect");e.canvas&&e.canvas.appendChild(a);var r=new T(a,e);return r.attrs={x:t,y:i,width:n,height:s,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},r.type="rect",g(a,r.attrs),r},e._engine.ellipse=function(e,t,i,n,s){var o=g("ellipse");e.canvas&&e.canvas.appendChild(o);var a=new T(o,e);return a.attrs={cx:t,cy:i,rx:n,ry:s,fill:"none",stroke:"#000"},a.type="ellipse",g(o,a.attrs),a},e._engine.image=function(e,t,i,n,s,o){var a=g("image");g(a,{x:i,y:n,width:s,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(f,"href",t),e.canvas&&e.canvas.appendChild(a);var r=new T(a,e);return r.attrs={x:i,y:n,width:s,height:o,src:t},r.type="image",r},e._engine.text=function(t,i,n,s){var o=g("text");t.canvas&&t.canvas.appendChild(o);var a=new T(o,t);return a.attrs={x:i,y:n,"text-anchor":"middle",text:s,font:e._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",C(a,a.attrs),a},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),i=t&&t.container,n=t.x,s=t.y,o=t.width,a=t.height;if(!i)throw new Error("SVG container not found.");var r,l=g("svg"),d="overflow:hidden;";return n=n||0,s=s||0,o=o||512,a=a||342,g(l,{height:a,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==i?(l.style.cssText=d+"position:absolute;left:"+n+"px;top:"+s+"px",e._g.doc.body.appendChild(l),r=1):(l.style.cssText=d+"position:relative",i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l)),i=new e._Paper,i.width=o,i.height=a,i.canvas=l,i.clear(),i._left=i._top=0,r&&(i.renderfix=function(){}),i.renderfix(),i},e._engine.setViewBox=function(e,t,i,n,s){c("raphael.setViewBox",this,this._viewBox,[e,t,i,n,s]);var o,r,l=a(i/this.width,n/this.height),d=this.top,h=s?"meet":"xMinYMin";for(null==e?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+u+this.height):(this._vbSize=l,o=e+u+t+u+i+u+n),g(this.canvas,{viewBox:o,preserveAspectRatio:h});l&&d;)r="stroke-width"in d.attrs?d.attrs["stroke-width"]:1,d.attr({"stroke-width":r}),d._.dirty=1,d._.dirtyT=1,d=d.prev;return this._viewBox=[e,t,i,n,!!s],this},e.prototype.renderfix=function(){var e,t=this.canvas,i=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(i){e=t.createSVGMatrix()}var n=-e.e%1,s=-e.f%1;(n||s)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),s&&(this._top=(this._top+s)%1,i.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=g("defs"))},e.prototype.remove=function(){c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var N=e.st;for(var E in S)S[t](E)&&!N[t](E)&&(N[E]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(E))}(window.Raphael),window.Raphael.vml&&function(e){var t="hasOwnProperty",i=String,n=parseFloat,s=Math,o=s.round,a=s.max,r=s.min,l=s.abs,d="fill",c=/[, ]+/,h=e.eve,u=" progid:DXImageTransform.Microsoft",f=" ",p="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,w={path:1,rect:1,image:1},C={circle:1,ellipse:1},_=function(t){var n=/[ahqstv]/gi,s=e._pathToAbsolute;if(i(t).match(n)&&(s=e._path2curve),n=/[clmz]/g,s==e._pathToAbsolute&&!i(t).match(n)){var a=i(t).replace(g,function(e,t,i){var n=[],s="m"==t.toLowerCase(),a=m[t];return i.replace(y,function(e){s&&2==n.length&&(a+=n+m["m"==t?"l":"L"],n=[]),n.push(o(e*x))}),a+n});return a}var r,l,d=s(t);a=[];for(var c=0,h=d.length;c<h;c++){r=d[c],l=d[c][0].toLowerCase(),"z"==l&&(l="x");for(var u=1,v=r.length;u<v;u++)l+=o(r[u]*x)+(u!=v-1?",":p);a.push(l)}return a.join(f)},k=function(t,i,n){var s=e.matrix();return s.rotate(-t,.5,.5),{dx:s.x(i,n),dy:s.y(i,n)}},T=function(e,t,i,n,s,o){var a=e._,r=e.matrix,c=a.fillpos,h=e.node,u=h.style,p=1,m="",g=x/t,v=x/i;if(u.visibility="hidden",t&&i){if(h.coordsize=l(g)+f+l(v),u.rotation=o*(t*i<0?-1:1),o){var y=k(o,n,s);n=y.dx,s=y.dy}if(t<0&&(m+="x"),i<0&&(m+=" y")&&(p=-1),u.flip=m,h.coordorigin=n*-g+f+s*-v,c||a.fillsize){var b=h.getElementsByTagName(d);b=b&&b[0],h.removeChild(b),c&&(y=k(o,r.x(c[0],c[1]),r.y(c[0],c[1])),b.position=y.dx*p+f+y.dy*p),a.fillsize&&(b.size=a.fillsize[0]*l(t)+f+a.fillsize[1]*l(i)),h.appendChild(b)}u.visibility="visible"}};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S=function(e,t,n){for(var s=i(t).toLowerCase().split("-"),o=n?"end":"start",a=s.length,r="classic",l="medium",d="medium";a--;)switch(s[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=s[a];break;case"wide":case"narrow":d=s[a];break;case"long":case"short":l=s[a]}var c=e.node.getElementsByTagName("stroke")[0];c[o+"arrow"]=r,c[o+"arrowlength"]=l,c[o+"arrowwidth"]=d},N=function(s,l){s.attrs=s.attrs||{};var h=s.node,u=s.attrs,m=h.style,g=w[s.type]&&(l.x!=u.x||l.y!=u.y||l.width!=u.width||l.height!=u.height||l.cx!=u.cx||l.cy!=u.cy||l.rx!=u.rx||l.ry!=u.ry||l.r!=u.r),v=C[s.type]&&(u.cx!=l.cx||u.cy!=l.cy||u.r!=l.r||u.rx!=l.rx||u.ry!=l.ry),y=s;for(var b in l)l[t](b)&&(u[b]=l[b]);if(g&&(u.path=e._getPath[s.type](s),s._.dirty=1),l.href&&(h.href=l.href),l.title&&(h.title=l.title),l.target&&(h.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&s.blur(l.blur),(l.path&&"path"==s.type||g)&&(h.path=_(~i(u.path).toLowerCase().indexOf("r")?e._pathToAbsolute(u.path):u.path),"image"==s.type&&(s._.fillpos=[u.x,u.y],s._.fillsize=[u.width,u.height],T(s,1,1,0,0,0))),"transform"in l&&s.transform(l.transform),v){var k=+u.cx,N=+u.cy,I=+u.rx||+u.r||0,$=+u.ry||+u.r||0;h.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((k-I)*x),o((N-$)*x),o((k+I)*x),o((N+$)*x),o(k*x))}if("clip-rect"in l){var A=i(l["clip-rect"]).split(c);if(4==A.length){A[2]=+A[2]+ +A[0],A[3]=+A[3]+ +A[1];var P=h.clipRect||e._g.doc.createElement("div"),B=P.style;B.clip=e.format("rect({1}px {2}px {3}px {0}px)",A),h.clipRect||(B.position="absolute",B.top=0,B.left=0,B.width=s.paper.width+"px",B.height=s.paper.height+"px",h.parentNode.insertBefore(P,h),P.appendChild(h),h.clipRect=P)}l["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(s.textpath){var M=s.textpath.style;l.font&&(M.font=l.font),l["font-family"]&&(M.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(M.fontSize=l["font-size"]),l["font-weight"]&&(M.fontWeight=l["font-weight"]),l["font-style"]&&(M.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var L=h.getElementsByTagName(d),H=!1;if(L=L&&L[0],!L&&(H=L=D(d)),"image"==s.type&&l.src&&(L.src=l.src),l.fill&&(L.on=!0),null!=L.on&&"none"!=l.fill&&null!==l.fill||(L.on=!1),L.on&&l.fill){var R=i(l.fill).match(e._ISURL);if(R){L.parentNode==h&&h.removeChild(L),L.rotate=!0,L.src=R[1],L.type="tile";var O=s.getBBox(1);L.position=O.x+f+O.y,s._.fillpos=[O.x,O.y],e._preload(R[1],function(){s._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=e.getRGB(l.fill).hex,L.src=p,L.type="solid",e.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=i(l.fill).charAt())&&E(y,l.fill,L)&&(u.fill="none",u.gradient=l.fill,L.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var j=((+u["fill-opacity"]+1||2)-1)*((+u.opacity+1||2)-1)*((+e.getRGB(l.fill).o+1||2)-1);j=r(a(j,0),1),L.opacity=j,L.src&&(L.color="none")}h.appendChild(L);var F=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],U=!1;!F&&(U=F=D("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(F.on=!0),("none"==l.stroke||null===l.stroke||null==F.on||0==l.stroke||0==l["stroke-width"])&&(F.on=!1);var z=e.getRGB(l.stroke);F.on&&l.stroke&&(F.color=z.hex),j=((+u["stroke-opacity"]+1||2)-1)*((+u.opacity+1||2)-1)*((+z.o+1||2)-1);var W=.75*(n(l["stroke-width"])||1);if(j=r(a(j,0),1),null==l["stroke-width"]&&(W=u["stroke-width"]),l["stroke-width"]&&(F.weight=W),W&&W<1&&(j*=W)&&(F.weight=1),F.opacity=j,l["stroke-linejoin"]&&(F.joinstyle=l["stroke-linejoin"]||"miter"),F.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(F.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};F.dashstyle=q[t](l["stroke-dasharray"])?q[l["stroke-dasharray"]]:p}U&&h.appendChild(F)}if("text"==y.type){y.paper.canvas.style.display=p;var V=y.paper.span,Y=100,X=u.font&&u.font.match(/\d+(?:\.\d*)?(?=px)/);m=V.style,u.font&&(m.font=u.font),u["font-family"]&&(m.fontFamily=u["font-family"]),u["font-weight"]&&(m.fontWeight=u["font-weight"]),u["font-style"]&&(m.fontStyle=u["font-style"]),X=n(u["font-size"]||X&&X[0])||10,m.fontSize=X*Y+"px",y.textpath.string&&(V.innerHTML=i(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var K=V.getBoundingClientRect();
y.W=u.w=(K.right-K.left)/Y,y.H=u.h=(K.bottom-K.top)/Y,y.X=u.x,y.Y=u.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=e.format("m{0},{1}l{2},{1}",o(u.x*x),o(u.y*x),o(u.x*x)+1));for(var G=["x","y","text","font","font-family","font-weight","font-style","font-size"],Q=0,Z=G.length;Q<Z;Q++)if(G[Q]in l){y._.dirty=1;break}switch(u["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},E=function(t,o,a){t.attrs=t.attrs||{};var r=(t.attrs,Math.pow),l="linear",d=".5 .5";if(t.attrs.gradient=o,o=i(o).replace(e._radial_gradient,function(e,t,i){return l="radial",t&&i&&(t=n(t),i=n(i),r(t-.5,2)+r(i-.5,2)>.25&&(i=s.sqrt(.25-r(t-.5,2))*(2*(i>.5)-1)+.5),d=t+f+i),p}),o=o.split(/\s*\-\s*/),"linear"==l){var c=o.shift();if(c=-n(c),isNaN(c))return null}var h=e._parseDots(o);if(!h)return null;if(t=t.shape||t.node,h.length){t.removeChild(a),a.on=!0,a.method="none",a.color=h[0].color,a.color2=h[h.length-1].color;for(var u=[],m=0,g=h.length;m<g;m++)h[m].offset&&u.push(h[m].offset+f+h[m].color);a.colors=u.length?u.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=d,a.angle=0):(a.type="gradient",a.angle=(270-c)%360),t.appendChild(a)}return 1},I=function(t,i){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},$=e.el;I.prototype=$,$.constructor=I,$.transform=function(t){if(null==t)return this._.transform;var n,s=this.paper._viewBoxShift,o=s?"s"+[s.scale,s.scale]+"-1-1t"+[s.dx,s.dy]:p;s&&(n=t=i(t).replace(/\.{3}|\u2026/g,this._.transform||p)),e._extractTransform(this,o+t);var a,r=this.matrix.clone(),l=this.skew,d=this.node,c=~i(this.attrs.fill).indexOf("-"),h=!i(this.attrs.fill).indexOf("url(");if(r.translate(-.5,-.5),h||c||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=r.split(),c&&a.noRotation||!a.isSimple){d.style.filter=r.toFilter();var u=this.getBBox(),m=this.getBBox(1),g=u.x-m.x,v=u.y-m.y;d.coordorigin=g*-x+f+v*-x,T(this,1,1,g,v,0)}else d.style.filter=p,T(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else d.style.filter=p,l.matrix=i(r),l.offset=r.offset();return n&&(this._.transform=n),this},$.rotate=function(e,t,s){if(this.removed)return this;if(null!=e){if(e=i(e).split(c),e.length-1&&(t=n(e[1]),s=n(e[2])),e=n(e[0]),null==s&&(t=s),null==t||null==s){var o=this.getBBox(1);t=o.x+o.width/2,s=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,s]])),this}},$.translate=function(e,t){return this.removed?this:(e=i(e).split(c),e.length-1&&(t=n(e[1])),e=n(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},$.scale=function(e,t,s,o){if(this.removed)return this;if(e=i(e).split(c),e.length-1&&(t=n(e[1]),s=n(e[2]),o=n(e[3]),isNaN(s)&&(s=null),isNaN(o)&&(o=null)),e=n(e[0]),null==t&&(t=e),null==o&&(s=o),null==s||null==o)var a=this.getBBox(1);return s=null==s?a.x+a.width/2:s,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",e,t,s,o]])),this._.dirtyT=1,this},$.hide=function(){return!this.removed&&(this.node.style.display="none"),this},$.show=function(){return!this.removed&&(this.node.style.display=p),this},$._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},$.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},$.attr=function(i,n){if(this.removed)return this;if(null==i){var s={};for(var o in this.attrs)this.attrs[t](o)&&(s[o]=this.attrs[o]);return s.gradient&&"none"==s.fill&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform,s}if(null==n&&e.is(i,"string")){if(i==d&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=i.split(c),r={},l=0,u=a.length;l<u;l++)i=a[l],i in this.attrs?r[i]=this.attrs[i]:e.is(this.paper.customAttributes[i],"function")?r[i]=this.paper.customAttributes[i].def:r[i]=e._availableAttrs[i];return u-1?r:r[a[0]]}if(this.attrs&&null==n&&e.is(i,"array")){for(r={},l=0,u=i.length;l<u;l++)r[i[l]]=this.attr(i[l]);return r}var f;null!=n&&(f={},f[i]=n),null==n&&e.is(i,"object")&&(f=i);for(var p in f)h("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&f[t](p)&&e.is(this.paper.customAttributes[p],"function")){var m=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var g in m)m[t](g)&&(f[g]=m[g])}f.text&&"text"==this.type&&(this.textpath.string=f.text),N(this,f)}return this},$.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},$.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this)},$.insertAfter=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this)},$.insertBefore=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper),this)},$.blur=function(t){var i=this.node.runtimeStyle,n=i.filter;n=n.replace(v,p),0!==+t?(this.attrs.blur=t,i.filter=n+f+u+".Blur(pixelradius="+(+t||1.5)+")",i.margin=e.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur)},e._engine.path=function(e,t){var i=D("shape");i.style.cssText=b,i.coordsize=x+f+x,i.coordorigin=t.coordorigin;var n=new I(i,t),s={fill:"none",stroke:"#000"};e&&(s.path=e),n.type="path",n.path=[],n.Path=p,N(n,s),t.canvas.appendChild(i);var o=D("skew");return o.on=!0,i.appendChild(o),n.skew=o,n.transform(p),n},e._engine.rect=function(t,i,n,s,o,a){var r=e._rectPath(i,n,s,o,a),l=t.path(r),d=l.attrs;return l.X=d.x=i,l.Y=d.y=n,l.W=d.width=s,l.H=d.height=o,d.r=a,d.path=r,l.type="rect",l},e._engine.ellipse=function(e,t,i,n,s){var o=e.path();o.attrs;return o.X=t-n,o.Y=i-s,o.W=2*n,o.H=2*s,o.type="ellipse",N(o,{cx:t,cy:i,rx:n,ry:s}),o},e._engine.circle=function(e,t,i,n){var s=e.path();s.attrs;return s.X=t-n,s.Y=i-n,s.W=s.H=2*n,s.type="circle",N(s,{cx:t,cy:i,r:n}),s},e._engine.image=function(t,i,n,s,o,a){var r=e._rectPath(n,s,o,a),l=t.path(r).attr({stroke:"none"}),c=l.attrs,h=l.node,u=h.getElementsByTagName(d)[0];return c.src=i,l.X=c.x=n,l.Y=c.y=s,l.W=c.width=o,l.H=c.height=a,c.path=r,l.type="image",u.parentNode==h&&h.removeChild(u),u.rotate=!0,u.src=i,u.type="tile",l._.fillpos=[n,s],l._.fillsize=[o,a],h.appendChild(u),T(l,1,1,0,0,0),l},e._engine.text=function(t,n,s,a){var r=D("shape"),l=D("path"),d=D("textpath");n=n||0,s=s||0,a=a||"",l.v=e.format("m{0},{1}l{2},{1}",o(n*x),o(s*x),o(n*x)+1),l.textpathok=!0,d.string=i(a),d.on=!0,r.style.cssText=b,r.coordsize=x+f+x,r.coordorigin="0 0";var c=new I(r,t),h={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:a};c.shape=r,c.path=l,c.textpath=d,c.type="text",c.attrs.text=i(a),c.attrs.x=n,c.attrs.y=s,c.attrs.w=1,c.attrs.h=1,N(c,h),r.appendChild(d),r.appendChild(l),t.canvas.appendChild(r);var u=D("skew");return u.on=!0,r.appendChild(u),c.skew=u,c.transform(p),c},e._engine.setSize=function(t,i){var n=this.canvas.style;return this.width=t,this.height=i,t==+t&&(t+="px"),i==+i&&(i+="px"),n.width=t,n.height=i,n.clip="rect(0 "+t+" "+i+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,i,n,s,o){e.eve("raphael.setViewBox",this,this._viewBox,[t,i,n,s,o]);var r,l,d=this.width,c=this.height,h=1/a(n/d,s/c);return o&&(r=c/s,l=d/n,n*r<d&&(t-=(d-n*r)/2/r),s*l<c&&(i-=(c-s*l)/2/l)),this._viewBox=[t,i,n,s,!!o],this._viewBoxShift={dx:-t,dy:-i,scale:h},this.forEach(function(e){e.transform("...")}),this};var D;e._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),D=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(e){D=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),i=t.container,n=t.height,s=t.width,o=t.x,a=t.y;if(!i)throw new Error("VML container not found.");var r=new e._Paper,l=r.canvas=e._g.doc.createElement("div"),d=l.style;return o=o||0,a=a||0,s=s||512,n=n||342,r.width=s,r.height=n,s==+s&&(s+="px"),n==+n&&(n+="px"),r.coordsize=1e3*x+f+1e3*x,r.coordorigin="0 0",r.span=e._g.doc.createElement("span"),r.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(r.span),d.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,n),1==i?(e._g.doc.body.appendChild(l),d.left=o+"px",d.top=a+"px",d.position="absolute"):i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),r.renderfix=function(){},r},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var A=e.st;for(var P in $)$[t](P)&&!A[t](P)&&(A[P]=function(e){return function(){var t=arguments;return this.forEach(function(i){i[e].apply(i,t)})}}(P))}(window.Raphael),$(document).delegate(".yh-j-goTop","click",function(){$("html,body").animate({scrollTop:0})}),$(document).delegate(".yh-j-close","click",function(){$(this).parent().remove()}),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var s,o,a,r,l;for(this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,a=this.options.trigger.split(" "),l=a.length;l--;)r=a[l],"click"==r?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=r&&(s="hover"==r?"mouseenter":"focus",o="hover"==r?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i,n=e.fn[this.type].defaults,s={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(s[e]=t)}),i=e(t.currentTarget)[this.type](s).data(this.type),i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout),i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide);var n=this;i.$tip.mouseenter(function(){clearTimeout(n.timeout)}).mouseleave(function(){i.hide()})},show:function(){var t,i,n,s,o,a,r=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(r),r.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),i=this.getPosition(),n=t[0].offsetWidth,s=t[0].offsetHeight,o){case"bottom":a={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":a={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":a={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":a={top:i.top+i.height/2-s/2,left:i.left+i.width}}this.applyPlacement(a,o),this.$element.trigger("shown")}},applyPlacement:function(e,t){var i,n,s,o,a=this.tip(),r=a[0].offsetWidth,l=a[0].offsetHeight;a.offset(e).addClass(t).addClass("in"),i=a[0].offsetWidth,n=a[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,o=!0),"bottom"==t||"top"==t?(s=0,e.left<0&&(s=e.left*-2,e.left=0,a.offset(e),i=a[0].offsetWidth,n=a[0].offsetHeight),this.replaceArrow(s-r+i,i,"left")):this.replaceArrow(n-l,n,"top"),o&&a.offset(e)},replaceArrow:function(e,t,i){this.arrow().css(i,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".yh-tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip(),n=e.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".yh-tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;if(i.tip().hasClass("in"))i.hide();else{i.show();var n=function(t){e(t.target).closest(i.$tip).length<1&&(i.hide(),e(document).off("click",n))};setTimeout(function(){e(document).on("click",n)})}},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("tooltip"),o="object"==typeof i&&i;s||n.data("tooltip",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="yh-tooltip"><div class="yh-tooltip-arrow"></div><div class="yh-tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();t?e.find(".yh-popover-title")[this.options.html?"html":"text"](t):e.find(".yh-popover-title").remove(),e.find(".yh-popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=("function"==typeof i.content?i.content.call(t[0]):i.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),s=n.data("popover"),o="object"==typeof i&&i;s||n.data("popover",s=new t(this,o)),"string"==typeof i&&s[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="yh-popover"><div class="arrow"></div><div class="yh-popover-content"></div></div>',onPop:e.noop}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),!function(e){"use strict";function t(){e(i).parent().removeClass("open")}var i=".yh-j-dropdown-toggle",n=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(i){var n,s,o=e(this),a=o.attr("data-target");return a||(a=o.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),n=e(a),n.length||(n=o.parent()),s=n.hasClass("open"),t(),!s&&n.toggleClass("open"),!1}},e.fn.dropdown=function(t){return this.each(function(){var i=e(this),s=i.data("dropdown");s||i.data("dropdown",s=new n(this)),"string"==typeof t&&s[t].call(i)})},e.fn.dropdown.Constructor=n,e(function(){e("html").on("click.dropdown.data-api",t),e("body").on("click.dropdown.data-api",i,n.prototype.toggle)})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n=this.element,s=n.closest("ul:not(.dropdown-menu)"),o=n.attr("data-target");o||(o=n.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),n.parent("li").hasClass("active")||(t=s.find(".active a").last()[0],n.trigger({type:"show",relatedTarget:t}),i=e(o),this.activate(n.parent("li"),s),this.activate(i,i.parent(),function(){n.trigger({type:"shown",relatedTarget:t})}))},activate:function(t,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),a=n&&e.support.transition&&o.hasClass("fade");a?o.one(e.support.transition.end,s):s(),o.removeClass("in")}},e.fn.tab=function(i){return this.each(function(){var n=e(this),s=n.data("tab");s||n.data("tab",s=new t(this)),"string"==typeof i&&s[i]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),function($){$.YH={script:{jqueryui:{js:"/webstorm/Projects/js/jquery-ui-1.9.2.custom.min.js",css:"/webstorm/Projects/js/jQuery/JQueryUi/css/jquery-ui-1.9.2.custom.css",key:["jQuery.ui","object"]},jcrop:{js:"/webstorm/Projects/js/jQuery/Jcrop/js/jquery.Jcrop.min.js",css:"/webstorm/Projects/js/jQuery/Jcrop/css/jquery.Jcrop.min.css",key:["jQuery.fn.Jcrop","function"]},YHsuperTable:{js:"/webstorm/Projects/js/table/jquery.YH-superTables.js",key:["jQuery.fn.YHsuperTable","function"]},YHsly:{js:"/webstorm/Projects/js/jQuery/sly/jquery.YH-sly.js",key:["jQuery.fn.YHsly","function"]},cookie:{js:"/webstorm/Projects/js/jQuery/jquery.cookie.js",key:["jQuery.cookie","function"]},colorpicker:{}},testFunction:function(lib,context,fn){typeof eval("("+$.YH.script[lib].key[0]+")")===$.YH.script[lib].key[1]?fn.call(context):"undefined"===$.type($.YH.script[lib].fn)?($.getScript($.YH.script[lib].js,function(){if($.YH.script[lib].css){var e=document.createElement("link");e.href=$.YH.script[lib].css,e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head").item(0).appendChild(e)}for(var t=0,i=$.YH.script[lib].fn.length;t<i;t++)$.YH.script[lib].fn[t][1].call($.YH.script[lib].fn[t][0])}),$.YH.script[lib].fn=[],$.YH.script[lib].fn.push([context,fn])):"array"===$.type($.YH.script[lib].fn)&&$.YH.script[lib].fn.push([context,fn])}},$.extend($.YH,{})}(window.jQuery),function(e,t,i){e.extend(e.YH,{box:function(i){var n,s=e.extend({},e.YH.box.defaults,i);return i.buttons||(s.buttons=e.extend(!0,{},e.YH.box.defaults.buttons)),"string"==typeof s.buttonNames[0]?s.buttons["确定"]["text"]=s.buttonNames[0]:"null"===e.type(s.buttonNames[0])&&delete s.buttons["确定"],"string"==typeof s.buttonNames[1]?s.buttons["取消"]["text"]=s.buttonNames[1]:"null"===e.type(s.buttonNames[1])&&delete s.buttons["取消"],n=s.target.constructor===e?s.target.dialog(s):s.target.indexOf("/")===-1&&e(s.target).length>0?e(s.target).dialog(s):e('<div class="yh-loading">').dialog(s).load(s.target,s.data,function(){n.removeClass("yh-loading");var i=n.parent(),o=i.height(),a=e(document).scrollTop()+e(t).height()/2;i.css({top:a-o/2}),s.afterLoaded.apply(n[0],arguments)}),n[0].opts=s,s.fixedBody&&n.mouseenter(function(){e("body").addClass("oh")}).mouseleave(function(){e("body").removeClass("oh")}),n}}),e.extend(e.YH.box,{defaults:{target:"",title:"弹框提示",width:600,autoOpen:!0,modal:!0,resizable:!0,appendTo:"",closeOnEscape:!0,closeText:"",dialogClass:"",draggable:!0,height:"auto",show:!1,hide:!1,maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,autoFocus:!0,fixedBody:!1,position:{my:"center",at:"center",of:t},buttonNames:[],buttons:{"确定":{click:function(){"function"===e.type(this.opts.ok)&&!1===this.opts.ok.call(this)||(this.opts.destroy?e(this).dialog("destroy"):e(this).dialog("close"))},text:"确定",'class':"ui-button-primary"},"取消":{click:function(){"function"===e.type(this.opts.cancel)&&!1===this.opts.cancel.call(this)||(this.opts.destroy?e(this).dialog("destroy"):e(this).dialog("close"))},text:"取消"}},destroy:!0,ok:e.noop,beforeDestroy:e.noop,close:e.noop,create:e.noop,drag:e.noop,dragStart:e.noop,dragStop:e.noop,focus:e.noop,open:e.noop,resize:e.noop,resizeStart:e.noop,resizeStop:e.noop,afterLoaded:e.noop,data:null},options:{target:"(必填)指定box的弹框内容，可以传人css选择器、url路径、jquery对象。 ",title:'(jqUI默认"弹框提示")指定box的标题文字。 ',width:"(jqUI默认600)设置box的宽度（单位：像素）",autoOpen:"(jqUI默认true)当设置为 true 时， box 会在初始化时自动打开. 如果为 false box 将会继续隐藏直到调用open()方法 。",modal:"(jqUI默认true)如果设置为false，该box将没有遮罩层; ",resizable:"(jqUI默认true)如果设置为false， 那么box不允许调整大小。",appendTo:"(jqUI选填)box（和遮罩层，如果modal存在）应该被追加到哪个元素。",closeOnEscape:"(jqUI默认true)指定具有焦点的box，在用户按下退出（ESC）键时，是否应该关闭 。",closeText:"（jqUI不建议配置）指定关闭按钮的文本。 注意，目前主题是基于bootstrap，不建议配置该属性。",dialogClass:"(jqUI选填)在使用额外附加的主题时，指定box的类名称，这些样式添加到box上。",draggable:"(jqUI默认true)如果设置为false, box将不可以使用标题栏实现拖动。",height:"(jqUI默认“auto”)设置对话框的高度（单位：像素）",show:"(jqUI默认false)box打开（显示）时的动画效果。",hide:"(jqUI默认false)box关闭（隐藏）时的动画效果。",maxHeight:"(jqUI默认false)box可以调整的最大高度，以像素为单位。",maxWidth:"(jqUI默认false)box可以调整的最大宽度，以像素为单位。",minHeight:"(jqUI默认150)box可以调整的最小高度，以像素为单位。",minWidth:"(jqUI默认150)box可以调整的最小宽度，以像素为单位。",autoFocus:"(默认true)box中的表单元素是否自动触发focus。",fixedBody:"(默认false)配置在鼠标移到box时body是否有滚动条。",position:"(jqUI选填)指定box显示的位置。该box将会处理冲突  ，使得尽可能多的box尽可能地可见。",buttonNames:"（默认[]）配置默认按钮文字",buttons:"(jqUI默认确定和取消按钮)配置弹框底部按钮，this指向box元素; 如果你需要访问按钮， 可以利用事件对象的目标元素。",destroy:"（@#10001默认true）配置窗口关闭时是否将窗口代码从页面中销毁，默认为销毁，false为关闭时隐藏在页面底部。",ok:"（选填）当点击窗口默认“确定”按钮时触发。fn() ",beforeDestroy:"（@#10002选填）当box即将销毁时触发。fn(event,{ui：{}}) ",beforeClose:"（jqUI选填）当box即将关闭时触发。 如果取消，box将不会关闭。fn(event,{ui：{})",close:"（jqUI选填）当box关闭时触发。fn(event,{ui：{})",create:"（jqUI选填）在创建box时触发。fn(event,{ui：{})",drag:"（jqUI选填）在box正在被拖动时触发。fn(event,{ui：{position:obj,offset:obj}})",dragStart:"（jqUI选填）当用户开始拖动box时触发。fn(event,{ui：{position:obj,offset:obj}})",dragStop:"（jqUI选填）当box 停止拖动时触发。fn(event,{ui：{position:obj,offset:obj}})",focus:"（jqUI选填）当对话框获取焦点时触发此事件。fn(event,{ui：{})",open:"（jqUI选填）当对话框打开后，触发此事件。fn(event,{ui：{})",resize:"（jqUI选填）当对话框大小改变时，触发此事件。fn(event,{ui：{originalPosition:obj,position:obj,originalSize:obj,size:obj})",resizeStart:"（jqUI选填）当开始改变对话框大小时，触发此事件。fn(event,{ui：{originalPosition:obj,position:obj,originalSize:obj,size:obj})",resizeStop:"（jqUI选填）当对话框改变大小后，触发此事件。fn(event,{ui：{originalPosition:obj,position:obj,originalSize:obj,size:obj})",afterLoaded:"（选填）仅当target参数为路径时，窗口完成对应路径载入后触发此事件。fn()",data:"（选填）仅当target参数为路径时，data为配置参数，传递到后台"},info:"弹框",url:"/Content/html/Widgets/box/box.html"})}(jQuery,window),function(e,t,i){e.extend(e.fn,{scrollnav:function(i){var n,s,o,a=e.extend({},e.fn.scrollnav.defaults,i);return a.scrollTarget===t?(n=e(t),s=e("html,body"),o=0):(n=e(a.scrollTarget),s=n,o=n.offset().top),this.each(function(){var i,r=e(this);i=a.setPrefix&&"string"==typeof a.setPrefix?"#"+a.setPrefix:"#"+(e(this).attr("id")||"yh-j-scrollnav");var l=function(){r.find('[href^="'+i+'"]').each(function(){var i=e(e(this).attr("href"));if(i.length>0&&i.is(":visible")){var s=!1;if(s=a.scrollTarget===t?i.offset().top+10>n.scrollTop()+o&&i.offset().top-(n.scrollTop()+o)<n.height()-50:i.offset().top-o<n.height()&&i.offset().top+10>o)return r.find("."+a.cls).removeClass(a.cls),a.addClassToParents?e(this).closest(a.addClassToParents).addClass(a.cls):e(this).addClass(a.cls),!1}})};n.on("scroll",l),r.on("click",'[href^="'+i+'"]',function(i){var d,c=e(this),h=e(c.attr("href"));return h.length>0&&h.is(":visible")?(d=a.scrollTarget===t?h.offset().top:h.offset().top-o+n.scrollTop(),n.off("scroll",l),s.animate({scrollTop:d+a.offsetY},function(){r.find("."+a.cls).removeClass(a.cls),c.addClass(a.cls),n.on("scroll",l)})):(r.find("."+a.cls).removeClass(a.cls),c.addClass(a.cls)),!1})}),this}}),e.extend(e.fn.scrollnav,{defaults:{scrollTarget:t,cls:"select",addClassToParents:!1,setPrefix:!1,offsetY:0},info:"浮动导航",options:{scrollTarget:"（默认window）滚动的目标元素，参数为jquery选择器",cls:"（默认“select”）设置浮动导航中选中的选项卡的class",addClassToParents:"（默认false）中选的选项卡的class加到当前标签还是祖先的标签中。参数为jquery选择器或者false，祖先的标签按传入的jquery选择器获",setPrefix:"（默认false）a中href属性的前缀设置。默认前缀与当前滚动导航的id前缀一致",offsetY:"(默认0)设置y轴偏移"},url:""}),e.YH.scrollnav=e.fn.scrollnav}(jQuery,window),function(e,t,i){e.YH=e.extend(e.YH,{moveNode:function(t){var n,s,o=e.extend({},e.YH.moveNode.defaults,t),a={},r=function(t){if(n==i)return alert("请选择节点"),!1;var a=e("#div"+n);do{if(a.attr("id").replace("div","")==o.moveId)return alert("不能以自身节点或者自身子节点作为参数"),!1;a=a.parent()}while(a.attr("objid"));return o.moveOutOfRoot||"1"!=s||"prev"!==t.moveType&&"next"!==t.moveType?(t.data[o.targetIdKey]=n,void e.ajax({url:t.url,type:t.type,data:t.data,dataType:"json",error:function(){return o.onError.apply(d[0],arguments),!1},success:function(e){if(!1===o.onSuccess.call(d[0],e,t.type))return!1}})):(alert("不能移动到根节点上方或下方"),!1)},l={"节点上方":function(){return!1!==o.onMove2prev.call(d[0])&&(a.moveType="prev",o.prevData?(a.data=o.prevData||{},a.type="post",a.url=o.prevUrl):(a.data=o.prevData||{},a.type="get",a.url=o.nextUrl),void r(a))},"节点下方":function(){return!1!==o.onMove2next.call(d[0])&&(a.moveType="next",o.nextData?(a.data=o.nextData||{},a.type="post",a.url=o.nextUrl):(a.data=o.nextData||{},a.type="get",a.url=o.nextUrl),void r(a))}};o.disableChildNode||(l["子节点"]=function(){return!1!==o.onMove2children.call(d[0])&&(a.moveType="child",o.childrenData?(a.data=o.childrenData||{},a.type="post",a.url=o.childrenUrl):(a.type="get",a.data=o.childrenData||{},a.url=o.childrenUrl),void r(a))});var d=e.YH.box({target:e('<div><div class="p-j-treeContent  yh-box-j-alsoResize" style="height: '+(o.height-140)+'px"></div></div>'),title:o.title,width:o.width,height:o.height,zIndex:o.zIndex,modal:!0,buttons:l,create:function(){e(this).find(".p-j-treeContent").SelectTree({startXml:o.treeXML,defaultShowItemLv:3,_onClick:function(t,i,a,r){return n=t,s=a.attr("lv"),o.ousideRoot||"1"!==s||e(this).YH_moveNode("disableChildNode"),o.onTreeClick.apply(d[0],arguments)},_afterPrint:function(e){e.find(".tree").addClass("yh-box-j-alsoResize")}})}})}}),e.fn.extend({YH_moveNode:function(){return this.each(function(){}),this}}),e.extend(e.YH.moveNode,{defaults:{moveId:i,treeXML:"",prevUrl:"",childrenUrl:"",nextUrl:"",title:"移动节点",width:300,height:450,disableChildNode:!1,targetIdKey:"moveToId",moveOutOfRoot:!1,prevData:"",childrenData:"",nextData:"",ousideRoot:!1,onMove2prev:e.noop,onMove2children:e.noop,onMove2next:e.noop,onSuccess:e.noop,onError:e.noop,onTreeClick:e.noop,zIndex:1e3},options:{moveId:"（必填）移动节点的id",treeXML:"（必填）载入目录树的xml地址",prevUrl:"（必填）节点上方提交对应的url地址",childrenUrl:"（必填）节点下方提交对应的url地址",nextUrl:"（必填）子节点提交对应的url地址",title:"（默认值为“移动节点”）弹框标题",width:"（默认值为“300”）弹框宽度",height:"（默认值为“450”）弹框高度",disableChildNode:"（默认值为“false”）屏蔽移动到子节点",targetIdKey:"（默认值为“moveToId”）选中目录树节点id对应的字段名",moveOutOfRoot:"（默认值为“false”）是否可将节点移动到根节点的上方或者下方",prevData:"（选填）节点上方提交对应post的json数据，此参数填写后提交参数方法为post",childrenData:"（选填）子节点提交对应post的json数据，此参数填写后提交参数方法为post",nextData:"（选填）节点下方提交对应post的json数据，此参数填写后提交参数方法为post",ousideRoot:"（默认值为“false”）设置节点是否可移动到目录树根目录以外",onMove2prev:"（选填）移动到节点上方的回调函数fn()",onMove2children:"（选填）移动到子节点的回调函数fn()",onMove2next:"（选填）移动到节点下方的回调函数fn()",onSuccess:"（选填）ajax提交成功的回调函数fn(data，type)，data为ajax后台传回的参数，type为事件类型为prev或child",onError:"（选填）ajax提交失败的回调函数fn()",onTreeClick:"（选填）目录树点击的回调函数fn(id, name, obj, node)",zIndex:"（默认1000）设置弹框的z-index层级"},info:"基于目录树结构的节点移动",url:"演示地址"})}(jQuery,window),function(e,t,i){e.YH=e.extend(e.YH,{box_prompt:function(t){var i=e.extend({},e.YH.box.defaults,e.YH.box_prompt.defaults,t),n=i.key?i.key+"：":"",s=i.textarea?"string"==typeof i.textarea?'<textarea class="yh-j-boxPrompt-textarea" style="vertical-align: top; '+i.textarea+' ">'+i.value+"</textarea>":'<textarea style="vertical-align: top;" class="w240 h100">'+i.value+"</textarea>":'<input class="ml10 yh-j-boxPrompt-input" type="text" value="'+i.value+'">';i.target=e('<div class="mt10 mb10">'+n+" "+s+"</div>"),i.buttons={"确定":{click:function(){var t=e(this).find("textarea,input").val();"function"===e.type(this.opts.ok)&&!1===this.opts.ok.call(this,t)||(this.opts.destroy?e(this).dialog("destroy"):e(this).dialog("close"))},text:"确定",'class':"ui-button-primary"},"取消":function(){"function"===e.type(this.opts.cancel)&&!1===this.opts.cancel.call(this)||(this.opts.destroy?e(this).dialog("destroy"):e(this).dialog("close"))}};e.YH.box(i)}}),e.YH.box_prompt.defaults=e.extend({},e.YH.box.defaults,{title:"编辑",width:350,key:"",value:"",textarea:!1}),e.YH.box_prompt.options=e.extend({},e.YH.box.options,{target:"(不填)",title:'(jqUI默认"弹框提示")指定box的标题文字。 ',width:"(jqUI默认350)设置box的宽度（单位：像素）",key:"(选填)文本框字段设置",value:"(选填)文本框默认值",textarea:"(默认false)是否将文本输入框以taxtarea展示，可传入布尔值或字符串，字符串应用为css样式"}),e.YH.box_prompt.info="简单文本输入",e.YH.box_prompt.url=""}(jQuery,window),function(e,t,i){e.extend(e.YH,{YH_fixThead:function(i,n){n=e.extend({},e.YH.YH_fixThead.defaults,n);var s,o=e(i);if(!o.data("YH_fixThead"))return o.data("YH_fixThead",!0),o.children("thead").length?void e(t).on("scroll resize",function(i){if(!o.get(0).parentNode)return s&&s.remove(),e(t).off("scroll resize",arguments.callee),o=null,void(s=null);if(o.is(":hidden"))return void(s&&s.hide());if(s&&s.show(),o.offset().top<e(t).scrollTop()&&o.offset().top+o.height()>e(t).scrollTop()&&(!s||"resize"===i.type)){var a=o.children("thead"),r=a.offset().top,l=a.offset().left,d=e('<table class="'+n.tableClass+'" style="position:fixed; top:'+n.top+"px; left:"+l+'px"></table>'),c=0;a.find("td:visible,th:visible").each(function(){var t=e(this).css("vertical-align"),i=e(this).css("text-align"),s=e(this),o="<"+this.nodeName+' class="'+(s.attr("class")||"")+" "+n.cellClass+'" style="border:1px solid #bbb;position:absolute;vertical-align:middle;background:'+n.background+";z-index:"+c++ +";top:"+(s.offset().top-r)+"px;left:"+(s.offset().left-l-1)+"px;width:"+(s.outerWidth()-1)+"px;height:"+(s.outerHeight()-1)+'px;"><div style="display: table-cell;height: '+(s.outerHeight()-parseInt(s.css("padding-top"))-parseInt(s.css("padding-bottom")))+"px;vertical-align:"+t+";padding-top:"+s.css("padding-top")+";padding-left:"+s.css("padding-left")+";padding-bottom:"+s.css("padding-bottom")+";padding-right:"+s.css("padding-right")+";text-align:"+i+";width:"+(s.outerWidth()-parseInt(s.css("padding-left"))-parseInt(s.css("padding-right"))-2)+'px;"></div></'+this.nodeName+">";
d.append(e(o).children().append(s.clone(!0).attr("colspan",1)).end())}),s&&s.remove(),s=d.insertAfter(o)}else(o.offset().top>e(t).scrollTop()||o.offset().top+o.height()<e(t).scrollTop())&&s&&(s&&s.remove(),s=null)}):void e.error("固定表格表头必须包含thead标签")}}),e.extend(e.YH.YH_fixThead,{info:"固定表头，其中表格必须包含thead标签，实例方法$.fn.YH_fixThead(opts)调用的是工具方法$.YH.fixThead(elem,opts)，通过class为‘yh-j-fixThead’调用",url:"",options:{top:"(默认‘0’)距离顶部的高度",tableClass:"(默认‘’)指定固定头部class",cellClass:"(默认‘’)指定固定头部内单元格class",background:"(默认‘#f3f3f3’)指定固定头部内单元格背景"},defaults:{top:0,tableClass:"",cellClass:"",background:"#f3f3f3"}}),e.fn.extend({YH_fixThead:function(t){return this.each(function(){e.YH.YH_fixThead(this,t)}),this}})}(jQuery,window),function(e,t,i){e.extend(e.YH,{YH_coord:function(t,i){var n=e(t),s=null,o=null,a=e.extend({},e.YH.YH_coord.defaults,i);return n.mouseenter(function(t){var i=e(this),n=i.offset().top,r=i.offset().left,l=t.pageX-r,d=t.pageY-n;s=e('<div style="'+a.xAxesStyle+' left:0; position: absolute"></div>').css({width:i.width(),top:d}),o=e('<div style="'+a.yAxesStyle+' top:0; position: absolute"></div>').css({height:i.height(),left:l}),"static"===i.css("position")&&e(i).css("position","relative"),i.append(s,o).mousemove(function(e){s.css("top",e.pageY-n-a.xOffset),o.css("left",e.pageX-r-a.yOffset)})}).mouseleave(function(){s&&s.add(o).remove()}),n}}),e.extend(e.fn,{YH_coord:function(t){return this.each(function(){e.YH.YH_coord(this,t)}),this}}),e.extend(e.YH.YH_coord,{info:"给对应节点添加参考坐标",url:"",defaults:{xAxesStyle:"height:1px;background: #666;opacity: 0.75; filter: alpha(opacity=65); z-index:100;",yAxesStyle:"width:1px;background: #666;opacity: 0.75; filter: alpha(opacity=65); z-index:100;",xOffset:1,yOffset:1},options:{xAxesStyle:"",yAxesStyle:"",xOffset:"",yOffset:""}})}(jQuery,window),function(e,t,i){e.extend(e.YH,{exportPDF:function(t){var t=e.extend({},e.YH.exportPDF.defaults,t),i=e('<form id="exportPDF" action="'+t.action+'" method="post"><input type="text" name="cssLoad" value="'+t.cssUrl+'"/><input type="text" name="pdfName" value="'+t.pdfName+'"/><input type="text" name="pdfParams" value="'+t.pdfParams+'"/><textarea name="html"></textarea></form>');e("body").append(i),i.children("textarea").val(escape(t.html)).end().submit().remove()}}),e.extend(e.YH.exportPDF,{info:"传入HTML和CSS将代码导出为pdf",url:"",defaults:{action:"/Home/CommonHtmlToPDF",cssUrl:"",pdfName:"未命名",html:"",pdfParams:""},options:{action:"（默认“/Home/CommonHtmlToPDF”）后端post的url接口",cssUrl:"（默认“”）html代码对应的css文件链接",pdfName:"（默认“未命名”）配置导出的pdf文件名",html:"（必填）传入需带出的html代码",pdfParams:"（默认“”）pdf配置参数"}})}(jQuery,window),function(e,t,i){var n=function(e,t){t.find("ul:first li").eq(e).fadeIn().siblings().fadeOut(),t.find("ul:eq(1) li").eq(e).css({background:"#a42c2d",color:"#fff","border-color":"#a42c2d"}).siblings().css({background:"#ccc",color:"#333",border:"1px solid #dedede"})};e.extend(e.YH,{picSlide:function(t,i){i=e.extend({},e.YH.picSlide.defaults,i);var s=e(t),o=s.find("li").length,a=e('<ul style="position: absolute; right: 10px; bottom: 10px"></ul>'),r=o-1,l="";s.css({height:i.height,width:i.width,position:"relative"}).children("ul").width(i.width).children().css({position:"absolute",top:0,left:0});for(var d=0;d<o;d++)l+='<li style="float:right; height: 18px; width: 18px; background: #a42c2d none repeat scroll 0 0; text-align: center; cursor:pointer; margin-left: 5px">'+(o-d)+"</li>";s.append(a.append(l)),n(r,s),a.on("click","li",function(){n(e(this).index(),s)}).on("mouseenter","li",function(){e(this).fadeTo(500,.8)}).on("mouseleave","li",function(){e(this).fadeTo(500,1)}),setInterval(function(){r=++r==o?0:r,n(r,s)},i.interval)}}),e.extend(e.fn,{YH_picSlide:function(t){return this.each(function(){e.YH.picSlide(this,t)}),this}}),e.extend(e.YH.picSlide,{info:"图片轮播代码",url:"",defaults:{height:"",width:"",interval:3e3},options:{height:"（必填）配置图片轮播的高度",width:"（必填）配置图片轮播的宽度",interval:"（必填）配置图片轮播的时间间隔"}})}(jQuery,window),$(function(){$.ajaxSetup({cache:!0}),$(".yh-j-fixThead").livequery(function(){var options={},$this=$(this);$this.attr("data-fixThead")&&$.extend(options,eval("("+$this.attr("data-fixThead")+")")),$this.YH_fixThead(options)}),$(".yh-j-coord").livequery(function(){var options={},$this=$(this);$this.attr("data-fixThead")&&$.extend(options,eval("("+$this.attr("data-fixThead")+")")),$this.YH_coord(options)}),$(".yh-j-datepicker").livequery(function(){$.YH.testFunction("jqueryui",this,function(){var options={changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",numberOfMonths:1};$(this).attr("data-datepicker")&&$.extend(options,eval("("+$(this).attr("data-datepicker")+")")),options.onClose=function(e){options.from&&$(options.from).datepicker("option","maxDate",e),options.to&&$(options.to).datepicker("option","minDate",e)},$(this).datepicker(options)})}),$("[data-tip]").livequery(function(){$.YH.testFunction("jqueryui",this,function(){var str=$(this).attr("data-tip"),options={};if(void 0!==str)try{options=eval("("+str+")")}catch(e){options={title:str}}var opts=$.extend({},{title:$(this).attr("title"),placement:"top",trigger:$(this).is("input")?"focus":"hover"},options);$(this).tooltip(opts)})}),$(document).delegate(".yh-j-dialog","click",function(){return $.YH.testFunction("jqueryui",this,function(){function openDialog(e){$(e).dialog({autoOpen:!0,modal:!0,width:options.width||600,title:options.title||"弹框提示",buttons:{Ok:function(){$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})}var options=eval("("+$(this).attr("data-dialog")+")");options.url?$("<div>").load(options.url,function(){openDialog(this)}):openDialog(options.target)}),!1}),$(".yh-j-validate").livequery(function(){$(this).validate()}),$(".yh-j-buttonset").livequery(function(){$.YH.testFunction("jqueryui",this,function(){$(this).buttonset()})}),$(".yh-j-slider").livequery(function(){$.YH.testFunction("jqueryui",this,function(){var arg=$(this).attr("data-slider")?eval("("+$(this).attr("data-slider")+")"):{};$(this).attr("hidden","hidden").wrap("<div></div>");var options={orientation:"horizontal",range:"min",min:0,max:100,value:60};$.extend(options,arg),options.slide=function(e,t){var i=t.values?t.values[0]+" - "+t.values[1]:t.value;$(this).find("input").val(i),"function"==typeof arg.slide&&arg.slide(e,t)},$(this).parent("div").height(arg.height).slider(options)})}),$(".yh-j-menu").livequery(function(){$.YH.testFunction("jqueryui",this,function(){$(this).menu()})}),$(".yh-j-spinner").livequery(function(){$.YH.testFunction("jqueryui",this,function(){$(this).spinner()})}),$("[yh-popover]").livequery(function(){var $this=$(this),options=$this.attr("yh-popover").indexOf(":")>0?eval("("+$this.attr("yh-popover")+")"):{content:$this.attr("yh-popover")};options=$.extend({},{animation:!0,html:!1,placement:"top",selector:!1,trigger:"click",title:"",content:"",delay:0,container:"body"},options),$this.popover(options),"click"===options.trigger&&$this.click(function(e){e.preventDefault()})}),$("[yh-tooltip]").livequery(function(){var $this=$(this),options=$this.attr("yh-tooltip").indexOf(":")>0?eval("("+$this.attr("yh-tooltip")+")"):{title:$this.attr("yh-tooltip")};options=$.extend({},{animation:!0,html:!1,placement:"top",selector:!1,trigger:"hover",title:"",delay:0,container:"body"},options),$this.tooltip(options)}),$(".yh-j-tooltip").livequery(function(){var e=$(this);e.tooltip({title:e.attr("title"),placement:"top"})}),$(".yh-j-autocomplete").livequery(function(){$.YH.testFunction("jqueryui",this,function(){var _arg=$(this).attr("data-autocomplete"),_availableData=_arg.search(",")>0?_arg.split(","):eval("("+_arg+")");$(this).autocomplete({source:_availableData})})}),$(".yh-j-superTable").livequery(function(){$.YH.testFunction("YHsuperTable",this,function(){$(this).YHsuperTable({headerRows:1,fixedCols:2,colLength:8,colAutoWidth:200,colWidth:[100,150,-1,300],onStart:function(){this.start=new Date},onFinish:function(){}})})}),$(".yh-j-sly").livequery(function(){$.YH.testFunction("YHsly",this,function(){$(this).YHsly({maxHeight:"200",scrollBar:"left",scrollBy:150,startAt:0})})}),$(".yh-j-tab").livequery(function(){var e,t=$(this),i=this;t.find(".yh-j-tab-head").each(function(){if($(this).closest(".yh-j-tab")[0]==i&&$(this).closest(".yh-j-tab")[0]===i&&$(this).hasClass("active")&&$(this).attr("data-tab"))return e=$(this).attr("data-tab"),t.find(".yh-j-tab-body").each(function(t){if($(this).closest(".yh-j-tab")[0]==i)return $(this).load(e),!1}),!1}),t.delegate(".yh-j-tab-head","click",function(){var e,i=this,n=0,s=0,o=(t.find(".yh-j-tab-head").filter(function(){return $(this).closest(".yh-j-tab")[0]==t[0]&&(this===i?(n=s,$(this).addClass("active"),e=$(this).attr("data-tab")):$(this).removeClass("active"),s++,!0)}),t.find(".yh-j-tab-body").filter(function(e){return $(this).closest(".yh-j-tab")[0]==t[0]}));return e?o.eq(0).load(e):o.eq(n).addClass("active").siblings().removeClass("active"),!1})}),$(".yh-j-ellipsis").livequery(function(){var $this=$(this),str=$.trim($this.html()),options={length:20},_arg=$(this).attr("data-ellipsis")?eval("("+$(this).attr("data-ellipsis")+")"):{};$.extend(options,_arg),str.length>options.length&&$(this).attr("ellipsis-text",str).html($("<span>"+str+"</span>").text().slice(0,options.length)+'<i class="ellipsis">...</i>').mouseenter(function(){$('<div style="position:absolute;z-index:1000;top:'+$this.position().top+"px;left:"+$this.position().left+"px;background:#fff;border:1px solid #eee;padding:5px; width:"+($this.outerWidth()-10)+'px;">'+$(this).attr("ellipsis-text")+"</div>").appendTo("body").mouseleave(function(){$(this).remove()})})}),$(".yh-j-jcrop").livequery(function(){$.YH.testFunction("jcrop",this,function(){$(this).removeClass("yh-j-jcrop").Jcrop()})}),$(document).delegate(".yh-j-toggle","click",function(e){var options={This:"this",cls:"select",target:"",before:"",after:"",rtn:"true"};if(options["cls"]=$(this).attr("toggleClass")||"select",options.target=$(this).attr("toggleTarget")||"",options.before=eval($(this).attr("toggleBefore")),options.after=eval($(this).attr("toggleAfter")),options["rtn"]=$(this).attr("toggleReturn"),$.extend(options,eval("({"+$(this).attr("data-toggle")+"})")),options.rtn="string"==typeof options.rtn?!/^0$|^false$|^null$|^\ $|^$/.test(options.rtn):options.rtn,"function"==typeof options.before&&options.before(options.This,e),"parent"===options.target?$(this).parent().toggleClass(options.cls):options.target?$(options.target).toggleClass(options.cls):$(this).toggleClass(options.cls),"function"==typeof options.after&&options.after(options.This,e),!options.rtn)return!1})}),function(e,t,i){e.fn.replaceTable=function(){return this.each(function(){var t=e(this);if("Microsoft Internet Explorer"==navigator.appName&&9==navigator.appVersion.match(/9./i)){var i=t.html().replace(/td>\s+<td/g,"td><td").replace(/tr>\s+<td/g,"tr><td").replace(/td>\s+<tr/g,"td><tr").replace(/tr>\s+<tr/g,"tr><tr");t.html(i)}})}}(jQuery,window),function(e){e.fn.madeRowspan=function(t){var i=e.extend({},{cols:[0]},t);e.fn.madeRowspan.options=i;var n=e(this),s=i.cols;if(n.data("col-content",""),n.data("col-rowspan",1),n.data("col-td",e()),n.data("trNum",e("tbody tr",n).length),null!=s)for(var o=s.length-1;void 0!=s[o];o--)n.find("tbody tr").each(function(t){var i=e(this),s=e("td:eq("+o+")",i),a=s.html();if(""==n.data("col-content"))n.data("col-content",a),n.data("col-td",s);else if(e.trim(n.data("col-content"))==e.trim(a)){var r=n.data("col-rowspan")+1;n.data("col-rowspan",r),s.hide(),++t==n.data("trNum")&&n.data("col-td").attr("rowspan",n.data("col-rowspan"))}else 1!=n.data("col-rowspan")&&n.data("col-td").attr("rowspan",n.data("col-rowspan")),n.data("col-td",s),n.data("col-content",s.html()),n.data("col-rowspan",1)})}}(jQuery),function(e,t,i){e.YH=e.YH||{},e.YH.suffixClass={arrExcelFileExt:[],arrPdfFileExt:[".pdf",".doc",".ppt",".docx",".pptx",".txt",".rtf",".xls",".xlsx"],arrImageFileExt:[".jpg",".gif",".png",".bmp",".jpeg",".tif",".tiff"],arrDwgFileExt:[".dwg",".dxf",".dwf"]},e.extend(e.YH,{readOnline:function(t,i){var n=t.guid,s=t.name,o=(t.id,t.type,t.ver,t.ext),a=t.fileUrl;if(t=e.extend({},e.YH.readOnline.defaults,t),""==n)return e.tmsg("m_jfw","文件尚未上传完成，请稍后阅读或刷新页面！",{infotype:2,time_out:1e3}),!1;if(ck=this.checkSuffix_(o),ck==-1)e.tmsg("m_jfw","该文件不支持在线阅读，请下载查看！",{infotype:2,time_out:1e3});else{if(""==a)return void e.tmsg("m_jfw","文件尚未转换完成，请稍后阅读！",{infotype:2,time_out:1e3});switch("function"==typeof FileViewCount&&FileViewCount(t.id,t.ver),ck){case"arrPdfFileExt":"box"==t.type&&""!=t.target?$YH.pdfShow(t):ReadPdfFile(a,s);break;case"arrExcelFileExt":ReadExcelFile(a,s);break;case"arrImageFileExt":e.YH.imageShow(t,i);break;case"arrDwgFileExt":ReadDwgFile(a,s);break;default:this.needToDownLoad_(),alert("default:"+t.type)}}},checkBrowserVer:function(){var e;return t.addEventListener?e=!0:t.attachEvent&&(e=!1),e},checkSuffix_:function(e){if(""==e)return-1;var t,i,n;for(t in this.suffixClass)if(i=this.suffixClass[t],n=i.indexOf(e.toLowerCase()),n!=-1)return t;return-1},needToDownLoad_:function(){e.tmsg("m_jfw","该文件不支持在线阅读，请下载查看！",{infotype:2,time_out:1e3})},imageShow:function(t,i){if(!t||!t.fileUrl)return e.tmsg("m_jfw","图片不存在！",{infotype:2,time_out:1e3}),!1;var n=e('<a href="'+t.fileUrl+'" onclick="return hs.expand(this);" class="highslide"></a><div class="highslide-caption">'+t.name+t.ext+"</div>");e(top.document.body).append(n),n.trigger("click")},pdfShow:function(t){if(!t||!t.fileUrl)return e.tmsg("m_jfw","文件不存在！",{infotype:2,time_out:1e3}),!1;if(!t.target&&!t.type)return console.info("请配置加载对象！"),!1;var i=i||"文件阅读",n=.8*document.body.clientWidth,s=.9*document.body.clientHeight,o=e('<iframe frameborder="0" id="displayPdfIframe" width="100%" height="100%" src="http://192.168.1.178:9034/pdf.js-master/web/viewer.html?file='+encodeURIComponent(t.fileUrl)+'"></iframe>');"box"!=t.type||t.target||e.YH.box({target:e("<div id='yh-j-pdfReader' style='width:100%;height:100%;'></div>"),title:i,width:n,height:s,buttonNames:[null,null],open:function(){e("#yh-j-pdfReader").html(o)}})}}),e.extend(e.YH.readOnline,{info:"文件在线阅读",url:"",defaults:{guid:"",name:"",ext:"",id:"",type:"",ver:"",swfUrl:"",fileUrl:"",target:""},options:{guid:"",name:"（必填）文件名",ext:"（必填）文件扩展名",id:"",type:"",ver:"",swfUrl:"",fileUrl:"（必填）文件路径",target:"(当加载对象为pdf时为必填)加载pdf阅读模块目标"}})}(jQuery,window),function(e){e.fn.madeRowspan=function(t){var i=e.extend({},{cols:[0]},t);e.fn.madeRowspan.options=i;var n=e(this),s=i.cols,o=n.children("tbody").children("tr");if(n.data("col-content",""),n.data("col-rowspan",1),n.data("col-td",e()),n.data("trNum",o.length),null!=s)for(var a=s.length-1;void 0!=s[a];a--)o.each(function(t){var i=e(this),s=e("td:eq("+a+")",i),o=s.html();if(""==n.data("col-content"))n.data("col-content",o),n.data("col-td",s);else if(e.trim(n.data("col-content"))==e.trim(o)){var r=n.data("col-rowspan")+1;n.data("col-rowspan",r),s.hide(),++t==n.data("trNum")&&n.data("col-td").attr("rowspan",n.data("col-rowspan")).show()}else 1!=n.data("col-rowspan")&&n.data("col-td").attr("rowspan",n.data("col-rowspan")).show(),n.data("col-td",s),n.data("col-content",s.html()),n.data("col-rowspan",1)})}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return r.raw?e:encodeURIComponent(e)}function i(e){return r.raw?e:decodeURIComponent(e)}function n(e){return t(r.json?JSON.stringify(e):String(e))}function s(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),r.json?JSON.parse(e):e}catch(e){}}function o(t,i){var n=r.raw?t:s(t);return e.isFunction(i)?i(n):n}var a=/\+/g,r=e.cookie=function(s,a,l){if(void 0!==a&&!e.isFunction(a)){if(l=e.extend({},r.defaults,l),"number"==typeof l.expires){var d=l.expires,c=l.expires=new Date;c.setTime(+c+864e5*d)}return document.cookie=[t(s),"=",n(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=s?void 0:{},u=document.cookie?document.cookie.split("; "):[],f=0,p=u.length;f<p;f++){var m=u[f].split("="),g=i(m.shift()),v=m.join("=");if(s&&s===g){h=o(v,a);break}s||void 0===(v=o(v))||(h[g]=v)}return h};r.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}}),function(e){function t(e){return e&&e.constructor===Number?e+"px":e}e.fn.bgiframe=e.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(i){i=e.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},i);var n='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+i.src+'"style="display:block;position:absolute;z-index:-1;'+(i.opacity!==!1?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==i.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":t(i.top))+";left:"+("auto"==i.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":t(i.left))+";width:"+("auto"==i.width?"expression(this.parentNode.offsetWidth+'px')":t(i.width))+";height:"+("auto"==i.height?"expression(this.parentNode.offsetHeight+'px')":t(i.height))+';"/>';return this.each(function(){0===e(this).children("iframe.bgiframe").length&&this.insertBefore(document.createElement(n),this.firstChild)})}:function(){return this},e.fn.bgIframe=e.fn.bgiframe}(jQuery);var ppHelper={uniquekey:function(){return(new Date).getTime().toString(36)},getSecureUrl:function(){return YH.isIE6?"javascript:''":"javascript:void(0);"},cacheData:{},getBoxid:function(e){var t="";return"string"==typeof e?t=e+"__":(e=$(e).parentsUntil(".ppbox").parent(),e.length>0&&(t=e.attr("id"))),t}};!function(e){function t(){return a||(a=999),++a}function n(){e(r).css({width:YH.dom.getDocumentWidth(s)+"px",height:YH.dom.getDocumentHeight(s)+"px"})}for(var s,o,a,r,l=window;l.parent!=l;)l=l.parent;s=l.document;var d=[];ppHelper.cacheData.arrPPBoxs=d;var c=function(t,i){this._content=t||"",this._options=i||{},this.btns=this.options=this.loadurl=this.selector=this.mh=this.db=this.dt=this.dd=this.fbox=null,this.defaults={boxid:null,title:null,width:"auto",height:"auto",ipos:null,cls:null,bodyCls:null,cache:!1,fixable:!0,closable:!0,draggable:!0,IsLocked:!1,range:!0,modal:!1,maskbgc:"#ccc",timeout:0,contentType:"html",loadingMessage:"Loading...",onLoad:e.noop,onOpen:e.noop,onClose:e.noop,onDestroy:e.noop,link:!1,ajaxOptions:{},submit_BtnName:"确 定",cancel_BtnName:"取 消",no_submit:!1,no_titlebar:!1,no_cancel:!1,submit_cb:e.noop,cancel_cb:e.noop,regDragWindow:[],pos:"c-c",offset:null,setZIndex:!0,prt:null},this.init()};c.prototype={parseOptions:function(){this._options.cls=this._options.cls||"shadow-container",""==this._options.contentType&&(this._options.contentType="#"==this._content.substr(0,1)?"selector":"html"),this.options=e.extend({},this.defaults,this._options),this._defaults=this._options=null,this.options.SetTopWin&&(l=this.options.SetTopWin,s=l.document),ppHelper.cacheData.topWin=l},createFrame:function(){var i=this.options,n='<div class="ppbox">\t<div class="title" style="position:relative;'+(i.no_titlebar?"display:none;":"")+'">\t\t<div class="name" style="margin-right:40px;height:40px;overflow:hidden"></div>'+(i.closable?'\t\t<div class="oper" style="position:absolute;right:4px;top:1px"><a href="javascript:void(0)" cl="close" title="关闭"></a></div>':"")+(i.fixable?'\t\t<div class="Expand" style="position:absolute;right:22px;top:1px"><a href="javascript:void(0)" cl="fix" status="move" title="可移动"></a></div>':"")+'\t</div>\t<table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td class="df_content" style="vertical-align:top;margin:0;padding:0"><div style="width:100%;height:100px;"></div></td></tr><tr><td><div class="myloading" style="position:absolute;top:45%;left:0%;height:25%;width:100%;text-align:center;"><img src="/Content/Images/zh-cn/Persons/loading19.gif"></div></td></tr></table></div>';try{a||(a=t()),this.fbox=e(n,s).appendTo(s.body).hide().css({position:"absolute",zIndex:i.zIndex||a}),i.boxid=(i.boxid?i.boxid+"__":"bid__")+ppHelper.uniquekey(),this.dd=this.fbox.find(".title"),this.dt=this.fbox.find(".name"),this.dd.css("cursor","move"),this.db=this.fbox.find(".df_content"),this.dt.html(i.title||""),this.loading=this.fbox.find(".myloading");var r=i.no_submit?"":'<input type="button" id="submit_'+i.boxid+'" value="'+i.submit_BtnName+'" />',l=i.no_cancel?"":'　<input type="button" id="cancel_'+i.boxid+'" value="'+i.cancel_BtnName+'" />';if(this.btns=""!=r||""!=l?'<div class="bottom"><div class="btn">'+r+l+"</div></div>":"",this.fbox.attr("id",i.boxid),this.dd.attr("id","handler_"+i.boxid),i.cls&&this.fbox.addClass(i.cls),i.bodyCls&&this.db.addClass(i.bodyCls),i.height>0&&this.fbox.css("height",i.height),i.width>0&&this.fbox.css("width",i.width),i.IsLocked&&this.setFix("fixed"),this.fbox.bgiframe(),o||(o=e('<div id="proxy_div" style="position:absolute;top:0px;left:0px;border:1px solid #000;background-color:#999;display:none;"></div>',s).css("opacity",.3).appendTo(s.body).bind("contextmenu",function(e){e.preventDefault()})[0]),i.prt&&this.findObj(i.prt)){var d=this.findObj(i.prt);this.fbox.data("pbox",{p:d});var c=d.fbox.data("sbox")||[];c.push(this),d.fbox.data("sbox",c),c=d=null}}catch(e){return!1}},initContent:function(){var t=this.options;"selector"==t.contentType?(this.selector=this._content,t=e(this.selector),t.attr("class")&&this.fbox.removeClass("shadow-container").addClass(t.attr("class")),t.data("htm")||(t.data("htm",t.wrapInner('<div assign="wrapin"></div>').html()),t.empty()),this._content=t.data("htm")||""):"ajax"==t.contentType?(this.loadurl=this._content,0==t.cache&&(this.loadurl+=(/\?/.test(this.loadurl)?"&":"?")+"_t="+Math.random())):"iframe"==t.contentType&&(this.loadurl=this._content,this._content='<iframe frameborder="0" scrolling="auto" class="dlgIframe" src="'+this.loadurl+'" style="display:none;width:100%;height:100%;"></iframe>'),this.LoadData()},__setPosition:function(){var e=this.fbox.getAlignToXY(s,this.options.pos,this.options.offset,s);return this.fbox.css({left:e.x,top:e.y}),e},LoadData:function(){var t=this,i=this.options;if(this.loadurl)if(i.onOpen(this),this.show(),"iframe"==i.contentType)this.setContent(this._content),this.infrm=e(".dlgIframe",t.fbox)[0],i.link||(this.inwin=this.infrm.contentWindow,this.infrm.dg=this),e(this.infrm).bind("load",function(){if(!i.link){var n=e.browser.msie?this.contentWindow.document:this.contentWindow;i.setZIndex&&e(n).mousedown(function(){t.setIndex()}),t.regWindow.push(this.contentWindow)}t.loading.hide(),this.style.display="block",i.onLoad(t)});else{var n={type:"get",url:this.loadurl,success:function(n){if(t.db.hide(),n=n.replace(/class=\"title\"/,'class="org_title_9527"'),t.setContent(n),t.db.find(".org_title_9527")[0]&&(n=t.db.find(".org_title_9527"),e(".name",n)[0]&&t.dt.html(e(".name",n).html()),t.setFix(n.find("a[status]").attr("status")),n.empty().hide()),t.db.find("div[assign='box']")[0]){n=t.db.find("div[assign='box']");var s=n.attr("class")||"";s&&t.fbox.removeClass("shadow-container").addClass(s),n.removeAttr("id").removeAttr("class").removeAttr("assign").removeAttr("style")}0==t.db.find(".bottom .btn").length&&t.db.append(t.btns),t.loading.hide(),t.db.show(),i.onLoad(t),t.show()},complete:function(){}};e.isEmptyObject(i.ajaxOptions)||(n=e.extend(n,i.ajaxOptions)),e.ajax(n)}else{if(t.db.hide(),this.setContent(this._content),t.db.find("div[assign='wrapin']")[0]){n=t.db.find("div[assign='wrapin']");var s=!1;e(".name",n)[0]&&t.dt.html(e(".name",n).html()),e(".title",n)[0]&&(s=!0,t.setFix(e(".title",n).find("a[status]").attr("status"))),n=s?e(".title",n).nextAll():n.html(),t.db.html(n),n=null}0==t.db.find(".bottom .btn").length&&t.db.append(t.btns),t.loading.hide(),t.db.show(),i.onOpen(this),this.show()}},initEvent:function(){var t=this,i=t.options;this.win=window,this.top=l,i.setZIndex&&this.fbox.mousedown(function(){t.setIndex()}),i.modal&&this.showMask(),i.closable&&this.fbox.find("div.oper>a").click(function(){t.destroy()}),i.timeout>0&&window.setTimeout(function(){t.destroy()},1e3*i.timeout),this.regWindow=[window],i.regDragWindow.length>0&&this.regWindow.push(i.regDragWindow),l!=window&&this.regWindow.push(l),this.initDrag(this.dd[0]),i.fixable&&this.fbox.find(".title div:last-child>a").click(function(){t.setFix("fixed",!0)}),i.no_submit||e("#submit_"+i.boxid,s).live("click",function(){0!=i.submit_cb(t)&&t.destroy()}),i.no_cancel||e("#cancel_"+i.boxid,s).live("click",function(){0!=i.cancel_cb(t)&&t.destroy()})},setFix:function(e,t){if(e){var i=this.dd.find("a[status]");"fixed"==e?(i.parent().removeClass("Expand").addClass("Nails"),i.attr({status:"fixed",title:"已固定"}),this.dd.css("cursor","default"),t&&(this.__setPosition(),this.fbox.center({left:this.fbox.css("left")})),this.options.draggable=!1):(i.parent().removeClass("Nails").addClass("Expand"),i.attr({status:"move",title:"可移动"}),this.dd.css("cursor","move"),this.options.draggable=!0)}},initDrag:function(t){function i(t){t={x:t.screenX,y:t.screenY},l={x:l.x+(t.x-r.x),y:l.y+(t.y-r.y)},r=t,h[0]=l.x,h[1]=l.y,d.options.range&&(h=YH.dom.Bound(e(o),s,l.x,l.y)),e(o).css({left:h[0]+"px",top:h[1]+"px"})}function n(){for(var s=0,a=c.length;s<a;s++)e(c[s].document).unbind("mousemove",i),e(c[s].document).unbind("mouseup",n);e.browser.msie&&o.releaseCapture(),e(o).hide(),t=r=null,d.fbox.css({marginTop:0,marginLeft:0,left:h[0]+"px",top:h[1]+"px"})}var r,l,d=this,c=d.regWindow,h=[];e(t).bind("mousedown",function(t){if(d.dd.css("cursor","move"),e(this).find("a[status]").attr({status:"move",title:"可移动"}).parent().removeClass("Nails").addClass("Expand"),"close"!==t.target.getAttribute("cl")&&"fix"!==t.target.getAttribute("cl")){var s=d.fbox.offset().left,h=d.fbox.offset().top,u=d.fbox.outerWidth(),f=d.fbox.outerHeight();for(l={x:s,y:h},r={x:t.screenX,y:t.screenY},s=d.options.setZIndex?parseInt(a,10):parseInt(d.fbox.css("zIndex"),10),e(o).css({width:u-2+"px",height:f-2+"px",left:l.x+"px",top:l.y+"px",zIndex:s+2,display:""}),u=0,f=c.length;u<f;u++)e(c[u].document).bind("mousemove",i),e(c[u].document).bind("mouseup",n);t.preventDefault(),e.browser.msie&&o.setCapture()}})},setIndex:function(){if(this.fbox.css("zIndex",parseInt(a,10)+1),a=parseInt(this.fbox.css("zIndex"),10),e(this.fbox).data("sbox")){var t=this.fbox.data("sbox")||[];if(t.length>0)for(var i=0;i<t.length;i++)t[i].fbox.css("zIndex",parseInt(a,10)+1),a=parseInt(t[i].fbox.css("zIndex"),10)}},getID:function(){return this.options.boxid},show:function(){this.__setPosition(),this.fbox.show()},setCaption:function(e){this.dt.html(e)},setContent:function(e){this.db.html(e)},hide:function(){this.fbox.hide(),this.options.prt||this.hideMask()},destroy:function(){if("iframe"==this.options.contentType){var t=this.fbox.find(".dlgIframe")[0];this.options.link||e(t.contentWindow).unbind("load"),t.src=ppHelper.getSecureUrl(),t=null}if(this.regWindow=[],this.fbox.data("sbox")&&(t=this.fbox.data("sbox")||[],t.length>0))for(var n=0;n<t.length;n++)t[n].destroy();if(this.fbox.data("pbox")){n=this.fbox.data("pbox").p;var s=this;n&&(t=n.fbox.data("sbox")||[],t.length>0&&(t=e.grep(t,function(e){return e!==s},!1),n.fbox.data("sbox",t)))}for(i=0;i<d.length;i++)if(d[i].fbox.get(0)==this.fbox.get(0)){d.splice(i,1);break}this.fbox.each(function(){e(this).remove(),e.browser.msie&&(this.outerHTML="")}),this.options.prt||this.hideMask(),this.options.onClose(this),this.options.onDestroy(this)},find:function(e){return this.fbox.find(e)},showMask:function(){if(!r){var i=['<div style="position:absolute;top:0px;left:0px;',"background-color:"+this.options.maskbgc+';">',YH.isIE6?'<iframe hideFocus="true" frameborder="0" src="'+ppHelper.getSecureUrl()+'" style="position:absolute;z-index:-1;width:100%;height:100%;top:0px;left:0px;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>':"","</div>"].join("");r=e(i,s).css("opacity",.5).appendTo(s.body)[0]}e(l).bind("resize",n),n(),e(r).css({display:"",zIndex:t()-2})},hideMask:function(){r&&(r.style.display="none")},findObj:function(e){if(e){for(var t=!1,i=0;i<d.length;i++){var n=d[i].fbox.attr("id");if(n==e||n.indexOf(e+"__")!=-1){t=d[i];break}}return t}},addBtn:function(t,i,n,s){var o=this;i='<input type="button" id="'+t+'" value="'+n+'"'+(""!=i?' class="'+i+'"':"")+" />",this.options.no_submit&&this.options.no_cancel&&!this.fbox.find(".bottom").get(0)?(this.fbox.append('<div class="bottom"><div class="btn">'+i+"</div></div>"),e("#"+t,o.fbox).click(function(){s.call(o)})):(this.dbot=this.fbox.find(".bottom"),e("#"+t,o.fbox)[0]?e("#"+t,o.fbox).val(n).click(function(){s.call(o)}):(this.dbot.find(".btn").prepend("　"+i),e("#"+t,o.fbox).click(function(){s.call(o)})))},removeBtn:function(t){e(t,this.fbox)[0]&&(e(t).remove(),e.trim(this.fbox.find(".bottom>.btn").html()).length<3&&this.fbox.find(".bottom").remove())},init:function(){return this.parseOptions(),this.createFrame(),d.push(this),this.initContent(),this.initEvent(),this}},e.extend({box:new function(){this.length=function(){return d.length},this.showbox=function(e,t){if(t=t||{},t.boxid&&t.one)for(var i=0;i<d.length;i++)if(d[i].fbox.attr("id").indexOf(t.boxid+"__")!=-1){d[i].destroy();break}return new c(e,t)},this.close=function(){}}}),e.fn.center=function(t){var i=e.extend({position:"absolute",top:"50%",left:"50%",relative:!1},t||{}),n=ppHelper.cacheData.topWin;return this.each(function(){var t=e(this);"50%"==i.top&&(i.marginTop=-t.outerHeight()/2),"50%"==i.left&&(i.marginLeft=-t.outerWidth()/2),i.marginTop+=e(n.document).scrollTop(),t.outerHeight()>=e(n).height()&&(i.marginTop=-140),e(n).scroll(function(){if("fixed"==t.find("a[status]").attr("status")){var i=0;i=t.outerHeight()>=e(n).height()?-140:e(n.document).scrollTop()-t.outerHeight()/2,t.stop().animate({marginTop:i})}}),t.css(i)})}}(jQuery);var linkUrl="",SelectUsers=function(e){var t,i,n,s=null,o={rType:"select",rselector:null,rselector1:null,multiSel:!0,prt:null,single:!1,after:null},a="";return{init:function(r){return void 0==typeof r?(alert("配置出错！请检查..."),!1):(e("#addSysUserModule").empty().attr("id","addSysUserModule1"),t="shadow-container",n=r.single?650:830,o=e.extend(o,r,{boxid:"uSel",title:"人员选择",contentType:"html",width:n,cls:t,zIndex:10050,setZIndex:!1}),a=['<div class="contain"><table width="100%">',"<tr>",'\t<td valign="top">','\t\t<div class="add-people" style="margin:5px 8px">','\t\t\t<dt style="height: 30px;display:none">','\t\t\t\t<input name="txttree" id="txttree" type="text" size="25" onkeypress="txtTreeKeyPressFunc()" />','\t\t\t\t<input type="button" name="btnTreeSearch" id="btnTreeSearch" onclick="btnTreeSearchFunc()" value=" 搜索 " /> <input type="button" id="btnCannelSearch" value=" 重置 " onclick=\'','$("#txttree").attr("value","");SelTree();\'/>',"\t\t\t</dt>",'\t\t\t<dt class="teee">','\t\t\t<div style=" background-color:#f7f7f7; line-height:25px">','\t\t\t\t<span class="tree-title"><input type="radio" name="radType" value="orgpost" onclick="SelTree();" checked />组织架构 </span>','\t\t\t\t<span style="display:none;"><input type="radio" name="radType" value="compost" onclick="SelTree();" />通用岗位</span>','\t\t\t\t<span style="display:none;"><input type="radio" name="radType" value="group" onclick="SelTree();" />群组</span>',"\t\t\t</div>",'\t\t\t<div style="width:250px; height:400px;" id="ifrm"></div>',"\t\t\t</dt>","\t\t</div>","\t</td>",'\t<td valign="top">','       <div style="margin-top:10px; margin-bottom:10px"><input class="inputborder" name="input" id="txtSearchUser"  onkeypress="txtSearchUserFunc()" type="text" size="25" />','            <a class="btn_05"  href="javascript:void(0);" id="btnSearchUser" onclick="btnSearchUserFunc()" >搜索<span></span></a></div>','\t\t<table style=" margin-top:5px">',"\t\t\t<tr>",'\t\t\t\t<td><select hidefocus="true" id="selUser" multiple="multiple" name="select5"'+(o.single?"":' ondblclick="adds();"')+' style="height: 350px; width: 250px;"></select></td>',"\t\t\t\t<td"+(o.single?' style="display:none;"':"")+">",'\t\t\t\t\t<div align="center">','\t\t\t\t\t\t<input type="image" id="sladd" hidefocus="true" onclick="adds();" src="/Content/images/common/btn-move.gif" style="margin:6px" /><br />','\t\t\t\t\t\t<input type="image" id="delete" hidefocus="true" onclick="dels();" src="/Content/images/common/btn-move2.gif" />',"\t\t\t\t\t</div>","\t\t\t\t</td>","\t\t\t\t<td"+(o.single?' style="display:none;"':"")+'><select id="selAdd" hidefocus="true" multiple="multiple" name="D2" ondblclick="dels();" style="height: 350px; width: 250px;"></select></td>',"\t\t\t</tr>","\t\t\t<tr"+(o.single?' style="display:none;"':"")+">",'               <td align="center" height="30"><a class="btn_01" href="javascript:void(0);" onclick="adds();" >添加<span></span></a></td>',"\t\t\t\t<td>&nbsp;</td>",'               <td align="center"><a class="btn_01" href="javascript:void(0);" onclick="dels();" >删除<span></span></a></td>',"\t\t\t</tr>","\t\t\t<tr"+(o.single?' style="display:none;"':"")+">",'\t\t\t\t<td height="50" align="center" valign="middle" class="gray">多选操作说明</td>',"\t\t\t\t<td>&nbsp;</td>","\t\t\t</tr>","\t\t</table>",'\t\t<input id="AddedUsersName" type="hidden" value="" /><input id="AddedUsers" type="hidden" value="," /><input id="DeledUsers" type="hidden" value="," />',"\t</td>","</tr>","</table></div>"].join(""),
s=box(a,o),i="selAdd",o.multiSel||(i=o.single?"selUser":"selAdd",seladd=s.fbox.find("select[id='"+i+"']"),seladd.click(function(){var t=this.selectedIndex;return e("#"+i+" option").removeAttr("selected"),!!this.options[t]&&void(this.options[t].selected=!0)})),"function"==typeof o.after&&o.after(),void this.commit())},commit:function(){s.options.submit_cb=function(){var t={};if(o.multiSel)e("#"+i+" option",s.fbox).each(function(){t[e(this).val()]=e(this).text()});else{if(0==e("#"+i+" option:selected").length)return alert("请选择一个用户！"),!1;e("#"+i+" option:selected",s.fbox).each(function(){t[e(this).val()]=e(this).text()})}if("select"==o.rType){if(e(o.rselector).length>0){var n=!1;for(var a in t)n=!1,e(o.rselector).find("option").length>0?(e(o.rselector).find("option").each(function(){a==e(this).val()&&(n=!0)}),n||e(o.rselector).append("<option value='"+a+"'>"+t[a]+"</option>")):e(o.rselector).append("<option value='"+a+"'>"+t[a]+"</option>")}}else if("input"==o.rType){var r="",l="";for(var a in t)r=r+","+a,l=l+","+t[a];r=r.substr(1),l=l.substr(1),e(o.rselector).length>0&&e(o.rselector).val(l),e(o.rselector1).length>0&&e(o.rselector1).val(r)}else o.callback(t)}}}}(jQuery),SelectUsersZHHY=function(e){var t,i,n,s=null,o={rType:"select",rselector:null,rselector1:null,multiSel:!0,prt:null,single:!1},a="";return{init:function(r){return void 0==typeof r?(alert("配置出错！请检查..."),!1):(e("#addSysUserModule").empty().attr("id","addSysUserModule1"),t="shadow-container",n=r.single?650:710,o=e.extend(o,r,{boxid:"uSel",title:"人员选择",contentType:"html",width:n,cls:t,zIndex:10050,setZIndex:!1}),a=['<div class="contain"><table width="100%">',"<tr>",'\t<td valign="top">','\t\t<div class="add-people boxmargin">','\t\t\t<dt style="height: 30px;display:none">','\t\t\t\t<input name="txttree" id="txttree" type="text" size="25" onkeypress="txtTreeKeyPressFunc()" />','\t\t\t\t<input type="button" name="btnTreeSearch" id="btnTreeSearch" onclick="btnTreeSearchFunc()" value=" 搜索 " /> <input type="button" id="btnCannelSearch" value=" 重置 " onclick=\'','$("#txttree").attr("value","");SelTree();\'/>',"\t\t\t</dt>",'\t\t\t<dt class="teee">','\t\t\t<div style=" background-color:#f7f7f7; line-height:25px">','\t\t\t\t<span><input type="radio" name="radType" value="orgpost" onclick="SelTree();" checked />组织架构</span>','\t\t\t\t<span style="display:none;"><input type="radio" name="radType" value="compost" onclick="SelTree();" />通用岗位</span>','\t\t\t\t<span style="display:none;"><input type="radio" name="radType" value="group" onclick="SelTree();" />群组</span>',"\t\t\t</div>",'\t\t\t<div style="width:250px; height:400px;" id="ifrm"></div>',"\t\t\t</dt>","\t\t</div>","\t</td>",'\t<td valign="top">','       <div style="margin-top:10px; margin-bottom:10px"><input class="inputborder" name="input" id="txtSearchUser"  onkeypress="txtSearchUserFunc()" type="text" size="30" />','            <a class="btn_05" href="javascript:void(0);" id="btnSearchUser" onclick="btnSearchUserFunc()" >搜索<span></span></a></div>','\t\t<table style=" margin-top:5px">',"\t\t\t<tr>",'\t\t\t\t<td><select hidefocus="true" id="selUser" multiple="multiple" name="select5"'+(o.single?"":' ondblclick="adds();"')+' style="height: 350px; width: 180px;"></select></td>',"\t\t\t\t<td"+(o.single?' style="display:none;"':"")+">",'\t\t\t\t\t<div align="center">','\t\t\t\t\t\t<input type="image" id="sladd" hidefocus="true" onclick="adds();" src="/Content/images/common/btn-move.gif" style="margin:6px" /><br />','\t\t\t\t\t\t<input type="image" id="delete" hidefocus="true" onclick="dels();" src="/Content/images/common/btn-move2.gif" />',"\t\t\t\t\t</div>","\t\t\t\t</td>","\t\t\t\t<td"+(o.single?' style="display:none;"':"")+'><select id="selAdd" hidefocus="true" multiple="multiple" name="D2" ondblclick="dels();" style="height: 350px; width: 180px;"></select></td>',"\t\t\t</tr>","\t\t\t<tr"+(o.single?' style="display:none;"':"")+">",'               <td align="center" height="30"><a class="btn_01" href="javascript:void(0);" onclick="adds();" >添加<span></span></a></td>',"\t\t\t\t<td>&nbsp;</td>",'               <td align="center"><a class="btn_01" href="javascript:void(0);" onclick="dels();" >删除<span></span></a></td>',"\t\t\t</tr>","\t\t\t<tr"+(o.single?' style="display:none;"':"")+">",'\t\t\t\t<td height="50" align="center" valign="middle" class="gray">多选操作说明</td>',"\t\t\t\t<td>&nbsp;</td>","\t\t\t</tr>","\t\t</table>",'\t\t<input id="AddedUsersName" type="hidden" value="" /><input id="AddedUsers" type="hidden" value="," /><input id="DeledUsers" type="hidden" value="," />',"\t</td>","</tr>","</table></div>"].join(""),s=box(a,o),i="selAdd",o.multiSel||(i=o.single?"selUser":"selAdd",seladd=s.fbox.find("select[id='"+i+"']"),seladd.click(function(){var t=this.selectedIndex;e("#"+i+" option").removeAttr("selected"),this.options[t].selected=!0})),void this.commit())},commit:function(){s.options.submit_cb=function(){var t,n,a=[];if(o.multiSel)e("#"+i+" option",s.fbox).each(function(){a.push({userId:e(this).val(),name:e(this).text()})});else{if(0==e("#"+i+" option:selected").length)return alert("请选择一个用户！"),!1;e("#"+i+" option:selected",s.fbox).each(function(){a.push({userId:e(this).val(),name:e(this).text()})})}if("select"==o.rType){if(e(o.rselector).length>0){var r=!1;for(var l in a)r=!1,t=a[l].userId,n=a[l].name,e(o.rselector).find("option").length>0?(e(o.rselector).find("option").each(function(){t==e(this).val()&&(r=!0)}),r||e(o.rselector).append("<option value='"+t+"'>"+n+"</option>")):e(o.rselector).append("<option value='"+t+"'>"+n+"</option>")}}else if("input"==o.rType){var d="",c="";for(var l in a)d=d+","+a[l].userId,c=c+","+a[l].name;d=d.substr(1),c=c.substr(1),e(o.rselector).length>0&&e(o.rselector).val(c),e(o.rselector1).length>0&&e(o.rselector1).val(d)}else o.callback(a)}}}}(jQuery);!function(e){e.fn.RemoveSelectTree=function(){return e(this).html(""),e(this).data("options",null),!0},e.fn.ReloadSelectTree=function(t){var i=!1;return t.startXml!=e(this).data("options").startXml&&(i=!0),t=e.extend(e(this).data("options"),t),1==i&&(t.nowselected=null),e(this).RemoveSelectTree(),e(this).SelectTree(t),!0},e.fn.selectTreeItem=function(t){return t?e(this).find("div[id=div"+t+"]").find(".name:first").click():e(this).find("div[lv=1]:first").find(".name:first").click(),!0},e.fn.removeSelection=function(){e(this).data("options").selectedhighlight.hide(),e(this).data("options").nowselected=null},e.fn.CollapseSelectTree=function(t){t||(t=1),options=e(this).data("options"),options.selectedhighlight.hide();var i=e(this);return i.find("div[lv="+t+"]").each(function(){var t=e(this);if(1!=t.attr("isfolder")){var n=(t.find("div:first").height(),t.find("img:first")),s=n.next(),o=null;"checkbox"==s.attr("type")&&(o=s,s=s.next()),n.attr("src",options.picurl+"ico-Collapsehover.gif"),s.attr("src",options.picurl+"ico-folder.gif"),t.find("div[lv="+(parseInt(t.attr("lv"))+1)+"]").hide(),t.css("height","auto"),null!=options.nowselected&&(options.nowselected.offset().top<options.outHtmlsInit.offset().top||options.nowselected.offset().top+options.nowselected.height()>options.outHtmlsInit.offset().top+options.outHtmlsInit.height()?options.selectedhighlight.hide():options.selectedhighlight.css("top",options.nowselected.offset().top-i.find(".tree:first").offset().top+i.find(".tree:first").position().top).show()),null!=options.highlight&&options.highlight.hide()}}),!0},e.fn.ExpandSelectTree=function(){options=e(this).data("options"),options.selectedhighlight.hide();var t=e(this);return t.find("div[top=top]").each(function(){var i=e(this);if(1!=i.attr("isfolder")){var n=i.find("img:first"),s=n.next(),o=null;"checkbox"==s.attr("type")&&(o=s,s=s.next()),n.attr("src",options.picurl+"ico-Expandhover.gif"),s.attr("src",options.picurl+"ico-folderoper.gif"),i.css("overflow","auto"),i.find("div[lv="+(parseInt(i.attr("lv"))+1)+"]").show(),null!=options.nowselected&&(options.nowselected.offset().top<options.outHtmlsInit.offset().top||options.nowselected.offset().top+options.nowselected.height()>options.outHtmlsInit.offset().top+options.outHtmlsInit.height()?options.selectedhighlight.hide():options.selectedhighlight.css("top",options.nowselected.offset().top-t.find(".tree:first").offset().top+t.find(".tree:first").position().top).show()),null!=options.highlight&&options.highlight.hide()}}),!0},e.fn.SelectTree=function(t){t=e.extend({startXml:"",asynUrl:"",target:this,cache:!1,dataXml:null,defaultShowItemLv:1,treeContent:e("<div class='treecontent'></div>"),highlight:e("<div type=mh class='selected' style='width: 100%; margin-left: -10px'><div class='treeleft'></div><div class='treeright'></div></div>"),selectedhighlight:e("<div type=sh class='selected' style='width: 100%; margin-left: -10px'><div class='treeleft'></div><div class='treeright'></div></div>"),outLine:null,needoutLine:!0,outHtmlsInit:e("<div class='tree' style='position:relative;'></div>"),outHtmls:e("<div style='position:relative; overflow: hidden' class='p-j-treeParent'></div>"),ImgShowHide:0,ImgShowHideAction:0,picurl:"../../Content/images/tree/",defaultMsg:"数据读取错误",nowmouseover:null,nowselected:null,hasCheckBox:!1,enableSelectChildren:!0,ReferenceDiv:null,behandHtml:"",loadIco:'<div style="padding-left:6px;clear:both;"><img src="/Content/images/icon/loading.gif" />&nbsp;加载中...</div>',_beforePrint:function(){},_afterPrint:function(e,t){},_afterPrintOnce:function(e){},_onCheckBoxClick:function(e,t){},_onClick:function(e,t,i,n){},_onRightClick:function(e,t,i,n){},_onMouseOver:function(e,t,i,n){},_onMouseOut:function(e,t,i,n){}},t);var i=this;e(this).data("options",t),this.setUpTree=function(){var n=e(t.dataXml).find("root");return null==n?(i.onError("XML信息为空"),!1):void this.putOutTreeXml(n,1)},this.loadXMLData=function(){var n=e('<div style="margin-top:25%; text-align:center; height:86px"><table height="95"><tr><td width="25"><img src="/Content/images/icon/loading.gif"/></td><td style="font-size:14px; font-weight:bold;">正在加载...</td></tr></table></div>');e(i).append(n);var s=this.urlDelcache(t.startXml);return e.ajax({url:s,type:"GET",dataType:"xml",timeout:2e4,error:function(e){i.onError(t.defaultMsg)},success:function(s){e.extend(t,{dataXml:s}),n.remove(),i.setUpTree()}}),!0},this.reloadXMLData=function(n){if(""==t.asynUrl||null==t.asynUrl)return!1;var s=n.attr("id").replace("div",""),o=parseInt(n.attr("lv"))+1,a=n.attr("objid"),r=e(t.loadIco);n.append(r),e.ajax({url:t.asynUrl,data:"id="+s+"&lv="+o+"&time="+Math.random(),type:"GET",dataType:"xml",timeout:2e4,error:function(e){i.onError("加载子节点数据读取错误")},success:function(l){r.remove(),e.extend(t,{dataXml:l});var d=e(t.dataXml).find("root");d.attr("id",s),i.putOutTreeXml(d,o++,n,a,n)}})},this.putOutTreeXml=function(n,s,o,a,r){function l(n,s){var o=d.getChildNode(n);null!=o&&(1==s&&t._beforePrint(),e(o).each(function(){"undefined"!=typeof e(this).attr("name")&&(c+=i.makeHtmlProc1(e(this),s),l(e(this),s+1),t._afterPrintOnce(e(t.target)))}),1==s&&(t.outHtmlsInit.append(t.outHtmls),t.treeContent.append(t.outHtmlsInit),t.selectedhighlight.hide(),t.treeContent.children(":eq(0)").prepend(t.selectedhighlight),t.highlight.hide(),t.treeContent.children(":eq(0)").prepend(t.highlight),t.target.append(t.treeContent),d.createResizeAble(),d.configureIco(),e(d).data("options",t),1==i.find(".tree").find("div").length&&i.html('<div style="color:#a5a5a5; text-align:center; font-size:16px; font-weight:bold;padding-top:30px;">暂无数据</div>'))),c+="</div>"}var d=this,c="<div>";if(l(n,s),null!=o?o.append(c):t.outHtmls.append(c),r){r.find("div[lv="+(parseInt(r.attr("lv"))+1)+"]").show();var h=r.height();t.selectedhighlight.hide(),r.css("height","24px").css("overflow","hidden").animate({height:h},500,function(){r.css("overflow","visible").css("height","auto")})}t._afterPrint(e(t.target))},this.createResizeAble=function(){var e=i.height();0==e&&(e=t.outHtmlsInit.height()),t.outHtmlsInit.css("width",i.width()-20).css("height",e).css("overflow-x","hidden").css("overflow-y","auto")},this.configureIco=function(){},this.imgShowHide=function(){return!(0==t.ImgShowHideAction||1==t.ImgShowHideAction&&100==t.ImgShowHide||t.ImgShowHideAction==-1&&0==t.ImgShowHide)&&(t.ImgShowHide<0?(t.ImgShowHide=0,!1):t.ImgShowHide>100?(t.ImgShowHide=100,!1):(1==t.ImgShowHideAction?t.ImgShowHide=parseInt(t.ImgShowHide,10)+10:t.ImgShowHide=parseInt(t.ImgShowHide,10)-2,e(t.outHtmls).find("img[co=true]").css("filter","alpha(opacity="+t.ImgShowHide+")"),void setTimeout(function(){i.imgShowHide()},1)))},this.makeHtmlProc1=function(i,n,s,o){i=e(i);var a,r,l=(i.attr("name"),n+"-"+i.attr("id")+"-"+Math.round((new Date).getTime()/1e3)),d="<img class='treeIconType' src="+t.picurl+"ico-folder.gif>",c="<img class='treeIconType' src="+t.picurl+"ico-folderoper.gif>";1==e(i).attr("isfolder")&&(d="<img class='treeIconType' src="+t.picurl+"ico-file.gif>",c="<img class='treeIconType' src="+t.picurl+"ico-file.gif>",r="visibility: hidden;");var h="level0";1!=n&&(h="levelx");var u="";return t.hasCheckBox&&(u="<input value='"+i.attr("id")+"' needChecked=needChecked type=checkbox style='float:left; margin-top:2px;'>"),a=i.attr("param")&&i.attr("param").indexOf("[")!=-1&&i.attr("param").indexOf("]")!=-1?n<t.defaultShowItemLv?"<div objid="+l+" param="+i.attr("param")+" childcount="+i.attr("childcount")+" leafcount="+i.attr("leafcount")+"  name="+i.attr("name")+" isfolder="+i.attr("isfolder")+" top=top class="+h+" id=div"+i.attr("id")+" lv="+n+"><img  class='treeIconArrow' co=true type=Expand src='"+t.picurl+"ico-Expand.gif' style='"+r+"'>"+u+c+"<div style='float:right'>"+t.behandHtml+"</div><div class='name' expand_name='"+i.attr("name")+"' collapse_name='"+i.attr("param")+"' state='expand'><span>"+i.attr("name")+"</span></div>":n==t.defaultShowItemLv?"<div objid="+l+" param="+i.attr("param")+" childcount="+i.attr("childcount")+" leafcount="+i.attr("leafcount")+"  name="+i.attr("name")+"  isfolder="+i.attr("isfolder")+" top=top class="+h+" id=div"+i.attr("id")+" lv="+n+"><img class='treeIconArrow' co=true type=Collapse src='"+t.picurl+"ico-Collapse.gif' style='"+r+"'>"+u+d+"<div style='float:right'>"+t.behandHtml+"</div><div class='name' expand_name='"+i.attr("name")+"' collapse_name='"+i.attr("param")+"' state='collapse'><span>"+i.attr("param")+"</span></div>":"<div objid="+l+" param="+i.attr("param")+" childcount="+i.attr("childcount")+" leafcount="+i.attr("leafcount")+"  name="+i.attr("name")+"  isfolder="+i.attr("isfolder")+" top=top class="+h+" style='display:none;' id=div"+i.attr("id")+" lv="+n+"><img class='treeIconArrow' co=true type=Collapse src='"+t.picurl+"ico-Collapse.gif' style='"+r+"'>"+u+d+"<div style='float:right'>"+t.behandHtml+"</div><div class='name' expand_name='"+i.attr("name")+"' collapse_name='"+i.attr("param")+"' state='collapse'><span>"+i.attr("param")+"</span></div>":n<t.defaultShowItemLv?"<div objid="+l+" param="+i.attr("param")+" childcount="+i.attr("childcount")+" leafcount="+i.attr("leafcount")+"  name="+i.attr("name")+" isfolder="+i.attr("isfolder")+" top=top class="+h+" id=div"+i.attr("id")+" lv="+n+"><img class='treeIconArrow' co=true type=Expand src='"+t.picurl+"ico-Expand.gif' style='"+r+"'>"+u+c+"<div style='float:right'>"+t.behandHtml+"</div><div class='name'><span>"+i.attr("name")+"</span></div>":n==t.defaultShowItemLv?"<div objid="+l+" param="+i.attr("param")+" childcount="+i.attr("childcount")+" leafcount="+i.attr("leafcount")+"  name="+i.attr("name")+"  isfolder="+i.attr("isfolder")+" top=top class="+h+" id=div"+i.attr("id")+" lv="+n+"><img class='treeIconArrow' co=true type=Collapse src='"+t.picurl+"ico-Collapse.gif' style='"+r+"'>"+u+d+"<div style='float:right'>"+t.behandHtml+"</div><div class='name'><span>"+i.attr("name")+"</span></div>":"<div objid="+l+" param="+i.attr("param")+" childcount="+i.attr("childcount")+" leafcount="+i.attr("leafcount")+"  name="+i.attr("name")+"  isfolder="+i.attr("isfolder")+" top=top class="+h+" style='display:none;' id=div"+i.attr("id")+" lv="+n+"><img class='treeIconArrow' co=true type=Collapse src='"+t.picurl+"ico-Collapse.gif' style='"+r+"'>"+u+d+"<div style='float:right'>"+t.behandHtml+"</div><div class='name'><span>"+i.attr("name")+"</span></div>"},t.outHtmlsInit.delegate("div[lv]","mousedown",function(i){t.nowselected=e(this).parent(),t.selectedhighlight.attr("class","selectedmouseover");var n=i;e(this).mouseup(function(){if(e(this).unbind("mouseup"),0==n.button)return void t._onRightClick.call(this,e(this).attr("id").replace("div",""),e(this).attr("name"),e(this),e(this))}),e(this)[0].oncontextmenu=function(){return!1}}).delegate("div[lv]","click",function(n){var s=e(this);e(".p-j-treeParent").find("div[select=true]").removeAttr("select"),s.attr("select","true");var o=e(this).children(".name:first");if(o.attr("expand_name")){var a=o.attr("expand_name").split("["),r=a[1].split("]"),l=r[0];if("collapse"==o.attr("state")&&l<=0)return i.ExpandObj(s),!1}t.selectedhighlight.css("top",s.position().top).show().attr("class","selectedmouseover"),t.nowselected=s,t.highlight.hide(),t._onClick.call(this,s.attr("id").replace("div",""),s.attr("name"),s,s),n.stopPropagation()}).delegate(".name","mouseover",function(n){var s=e(this).parent();if(t.highlight.css("top",s.position().top).show(),i.find("img[name=behandHtml]").hide(),i.find("img[name=behandHtml2]").hide(),""!=t.behandHtml&&(s.find("img[name=behandHtml]:first").show(),s.find("img[name=behandHtml2]:first").show(),s.find("img[name=behandHtml]").attr("divid",s.attr("id").replace("div","")),s.find("img[name=behandHtml2]").attr("divid",s.attr("id").replace("div",""))),t.nowmouseover=s,1==t.needoutLine&&e(this).children().height()>30){e("div[selectTreeTip=tip]").remove();var o=1;if(function(t){if(t.offsetParent){var i=e(t.offsetParent).css("zIndex");"auto"!=e(t.offsetParent).css("zIndex")&&(o=1*i+100),arguments.callee(t.offsetParent)}}(this),t.outLine=e("<div selectTreeTip=tip style='position:absolute;padding:2px 6px;cursor:hand;border:1px solid #000000;background-color:#fffff7; z-index:"+o+";'>"+s.children("div.name").text()+"</div>"),""!=t.behandHtml){t.outLine.append("&nbsp;"),s.find("img[name=behandHtml]:first");var a=s.find("img[name=behandHtml]:first").clone();t.outLine.append(a),s.find("img[name=behandHtml2]:first");var a=s.find("img[name=behandHtml2]:first").clone();t.outLine.append(a),t.outLine.append("&nbsp;").find("img[name=behandHtml]:first").show().find("img[name=behandHtml2]:first").show()}e(top.document.body).append(t.outLine),t.outLine.css({left:s.find("div.name").offset().left,top:s.find("div.name").offset().top}).click(function(){s.trigger("click")}).mouseleave(function(){t.outLine.hide()})}else null!=t.outLine&&t.outLine.hide();return t.nowmouseover!=t.nowselected&&null!=t.nowselected&&e(t.selectedhighlight).attr("class","selected"),t.nowmouseover!=t.nowselected?e(t.highlight).attr("class","unselectactive"):(t.highlight.hide(),e(t.selectedhighlight).attr("class","selectedmouseover")),!1}).delegate("img[co=true]","mouseover",function(){e(this).attr("src").indexOf("ico-Expand")!=-1?e(this).attr("src",t.picurl+"ico-Expandhover.gif"):e(this).attr("src",t.picurl+"ico-Collapsehover.gif"),t.highlight.css("top",e(this).parent().position().top).show()}).delegate("img[co=true]","mouseout",function(){e(this).attr("src").indexOf("ico-Expand")!=-1?e(this).attr("src",t.picurl+"ico-Expand.gif"):e(this).attr("src",t.picurl+"ico-Collapse.gif")}).delegate("img[co=true]","click",function(){return e(this).attr("src").indexOf("ico-Expand")!=-1?i.CollapseObj(e(this).parent()):i.ExpandObj(e(this).parent()),!1}).delegate("input:checkbox","change",function(){var i=e(this),n=i.closest("[lv]"),s=n.attr("lv");n.closest("div[lv=1]");if(t.enableSelectChildren&&i.closest(".levelx").find("input[type=checkbox]").prop("checked",i.prop("checked")),1==s)n.find("input[type=checkbox]").attr("checked",i.prop("checked"));else for(var o=s-1;o>0;o--){var a=n.closest("div[lv="+o+"]"),r=a.find("input[type=checkbox]"),l=0,d=a.children("input[type=checkbox]").attr("value");r.each(function(){e(this).attr("checked")&&e(this).attr("value")!=d&&(l+=1)}),a.children("input[type=checkbox]").prop("checked",l==r.length-1)}}),this.CollapseObj=function(e){t.selectedhighlight.hide();var i=e.find("div:first").height(),n=e.find("img:first"),s=n.next(),o=null,a=e.find("div.name:first");"checkbox"==s.attr("type")&&(o=s,s=s.next()),n.attr("src",t.picurl+"ico-Collapsehover.gif"),s.attr("src",t.picurl+"ico-folder.gif"),e.find("div[lv="+(parseInt(e.attr("lv"))+1)+"]").fadeOut(500),e.animate({height:i},500,function(){e.css("overflow","visible").css("height","auto"),a.attr("collapse_name")&&a.html(a.attr("collapse_name"))}),a.attr("state","collapse")},this.ExpandObj=function(e){if(1==e.attr("isfolder"))return!1;t.selectedhighlight.hide();var n=e.find("img:first"),s=n.next(),o=null,a=e.find("div.name:first");if("checkbox"==s.attr("type")&&(o=s,s=s.next()),n.attr("src",t.picurl+"ico-Expandhover.gif"),s.attr("src",t.picurl+"ico-folderoper.gif"),0==e.find("div[lv="+(parseInt(e.attr("lv"))+1)+"]").length)i.reloadXMLData(e);else{e.css("overflow","auto"),e.find("div[lv="+(parseInt(e.attr("lv"))+1)+"]").show();var r=24*e.find("div[lv]:visible").length;e.css("height","24px").css("overflow","hidden").animate({height:r},500,function(){e.css("overflow","visible").css("height","auto"),a.attr("expand_name")&&a.html(a.attr("expand_name"))}),a.attr("state","expand")}},this.makeLeverPadding=function(e){return 6},this.getChildNode=function(e){return e[0].childNodes?e[0].childNodes:null},this.urlDelcache=function(e){return 0==t.cache&&(e=e.indexOf("?")>=0?e+"&r="+Math.random():e+"?r="+Math.random()),e},this.onError=function(e){this.reportError(e)},this.reportError=function(e){alert(e)},this.init=function(){this.loadXMLData()},this.init()}}(jQuery),function(e){e.fn.EditTable=function(t){t=e.extend(!0,{NullTips:"单击可编辑...",EditClass:"edit",NumOnlyClass:"Num",ChangeClass:"taEidtAfter",SaveMode:1,EditMode:"click",SaveURL:"",SaveData:null,IsReload:!1,tableName:"",Primarykey:1,SaveType:"",DataConnectStr:"",width:"96%",callBack:function(e){},AddAction:[[null,null],[null,null]]},t);var n=this;this.doaction=function(e,n,s){for(i in t.AddAction)t.AddAction[i][0]==e&&"function"==typeof t.AddAction[i][1]&&t.AddAction[i][1].call(s,{editing:n.editing,savedata:n.savedata})},this.Numonly=function(t){return 46!=event.keyCode?event.keyCode>=45&&event.keyCode<=57:e(this).val().indexOf(".")==-1&&void 0};var s,o=e('<div style="height:1px; border-top:1px dotted #000; position:absolute; z-index: 100000"></div>'),a=e('<div style="height:1px; border-bottom:1px dotted #000; position:absolute; z-index: 100000"></div>'),r=e('<div style="width:1px; border-left:1px dotted #000; position:absolute; z-index: 100000"></div>'),l=e('<div style="width:1px; border-right:1px dotted #000; position:absolute; z-index: 100000"></div>'),d=e().add(o).add(a).add(r).add(l);if(this.editTable=function(){var i=t.NullTips,c=t.width,h=t.EditClass,u=t.EditMode,f=t.NumOnlyClass,p="<font color=silver>"+i+"</font>";n.find("."+h).each(function(){var t=e(this).find("div").html(),i=e.trim(t.replace(/&nbsp;/gi,""));""!=i&&"undefined"!=typeof i||(t=p);var n="<textarea style='display:none;overflow:auto;width:"+c+";height:60px;'>"+i+"</textarea><span>"+e.trim(t).replace(/[\n\r]/g,"<br/>")+"</span>";e(this).find("div").html(n)}),null!=f&&e("."+f+" textarea").bind("keypress",n.Numonly).css("ime-mode","Disabled"),n.on(u,"."+h,function(){if(s=this,"none"==e(this).find("textarea").css("display")){if(e(this).find("span").hide(),e(this).find("span").html().indexOf(i)!=-1)e(this).find("textarea").html("");else{var t=e.trim(e(this).find("span").html().replace(/&nbsp;/gi,"").replace(/<(br|BR) *\/?>/g,"\n"));e(this).find("textarea").html(t)}e(this).find("textarea").show().focus(function(){e(this).select()}).focus()}d.remove()}).on("mouseenter","."+h,function(){if(s!==this){var t=e(this),i=t.offset().top,n=t.offset().left,c=t.outerWidth(),h=t.outerHeight();o.css({top:i-2,left:n-2,width:c+3}),r.css({top:i-2,left:n-2,height:h+3}),a.css({top:i+h-1,left:n-2,width:c+3}),l.css({top:i-2,left:n+c-1,height:h+3}),d.appendTo(e(this).closest("body"))}}).on("mouseleave","."+h,function(){d.remove()}),n.on("blur","."+h+" textarea",function(){var o=this,a=e(this).parent().find("span").first(),r=e(this).parent().find("span").html(),l=e.trim(this.value);if(s=null,r.indexOf(i)==-1&&l!=r||r.indexOf(i)!=-1&&""!=l)if(e(this).parent().addClass(t.ChangeClass),a.html(l.replace(/[\n\r]/g,"<br/>")),1==t.SaveMode)n.saveBar();else if(2==t.SaveMode){var d="function"==typeof t.SaveData?t.SaveData():t.SaveData;e.ajax({url:t.SaveURL,type:t.SaveType,dataType:"json",data:d,success:function(i){i.Success?(hiOverAlert("保存成功"),n.doaction("AfterSave",{savedata:d},o),e("."+t.ChangeClass).removeClass(t.ChangeClass),t.callBack.call(o,i),console.log(2)):hiAlert("保存失败")}})}else if(3==t.SaveMode){var c=e(this).parent().parent().find("input").attr("name"),h=e(this).parent().parent().find("input").attr("valueid");""!=t.tableName&&e.ajax({url:t.SaveURL,type:"post",data:{tbName:t.tableName,queryStr:"db."+t.tableName+".distinct('_id',{'"+t.Primarykey+"':'"+h+"'})",dataStr:c+"="+encodeURIComponent(l)},dataType:"json",error:function(){e.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(i){0==i.Success?e.tmsg("m_jfw",i.Message,{infotype:2}):(e("."+t.ChangeClass).removeClass(t.ChangeClass),e.tmsg("m_jfw","保存成功！",{infotype:1,time_out:500}),n.doaction("AfterSave",{savedata:d},o))}})}else if(4==t.SaveMode){var c=e(this).parent().parent().find("input").attr("name"),h=e(this).parent().parent().find("input").attr("valueid");""!=t.tableName&&e.ajax({url:t.SaveURL,type:"post",data:{tbName:t.tableName,queryStr:"db."+t.tableName+".distinct('_id',{'"+t.Primarykey+"':'"+h+"'})",dataStr:c+"="+l},dataType:"json",error:function(){e.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(i){0==i.Success?e.tmsg("m_jfw",i.Message,{infotype:2}):(e("."+t.ChangeClass).removeClass(t.ChangeClass),e.tmsg("m_jfw","保存成功！",{infotype:1}),n.doaction("AfterSave",{savedata:d}))}})}else if(5==t.SaveMode){var c=e(this).parent().parent().find("input").attr("name"),h=e(this).parent().parent().find("input").attr("valueid");""!=t.tableName&&e.ajax({url:t.SaveURL,type:"post",data:{tbName:t.tableName,queryStr:t.Primarykey+"="+h,dataStr:c+"="+encodeURIComponent(l),connectStr:t.DataConnectStr},dataType:"json",error:function(){e.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(i){0==i.Success?e.tmsg("m_jfw",i.Message,{infotype:2}):(e("."+t.ChangeClass).removeClass(t.ChangeClass),e.tmsg("m_jfw","保存成功！",{infotype:1,time_out:500}),n.doaction("AfterSave",{savedata:d},o))}})}""==l&&a.html(p),e(this).hide(),a.show(),n.doaction("AfterEdit",{editing:e(this).parent()},o)})},this.editTable(),this.saveBar=function(){"none"==e("#savearea").css("display")&&e("#savearea").show()},1==t.SaveMode){var c='<DIV style="Z-INDEX: 10000; POSITION: fixed; WIDTH: 100%; BOTTOM: 0px; DISPLAY: none; HEIGHT: 40px" id="savearea"><DIV style="BACKGROUND: none transparent scroll repeat 0% 0%; HEIGHT: 40px" id=meerkat-container jQuery1323502422512="26"><DIV class="baoCun" style="TEXT-ALIGN: center; FILTER: ; ZOOM: 1" id=SeriesStepSaveButton class=baoCun jQuery1323502422512="27"><INPUT style="WIDTH: 300px" value=数据已更新，请点此保存 type=button></DIV></DIV></DIV>';e("body").append(c),e("#savearea input").click(function(){var i=this,s="function"==typeof t.SaveData?t.SaveData():t.SaveData;e.ajax({url:t.SaveURL,type:t.SaveType,dataType:"json",data:s,success:function(o){o.Success?(hiOverAlert("保存成功"),e("#savearea").hide(),e("."+t.ChangeClass).removeClass(t.ChangeClass),n.doaction("AfterSave",{savedata:s},i),1==t.IsReload&&window.location.reload()):hiAlert("保存失败")}})})}}}(jQuery),function(e){e.fn.EditTableV2=function(t){t=e.extend(!0,{NullTips:"单击可编辑...",EditClass:"edit",NumOnlyClass:"Num",ChangeClass:"taEidtAfter",SaveMode:1,EditMode:"click",SaveURL:"",SaveData:null,IsReload:!1,tableName:"",Primarykey:1,isShowMsg:!0,SaveType:"",width:"96%",height:"60px",callBack:function(e){},beforeSave:function(){return!0},AddAction:[[null,null],[null,null]]},t);var n=this;if(this.doaction=function(e,n){for(i in t.AddAction)t.AddAction[i][0]==e&&"function"==typeof t.AddAction[i][1]&&t.AddAction[i][1]({editing:n.editing,savedata:n.savedata})},this.Numonly=function(t){return 46!=event.keyCode?event.keyCode>=45&&event.keyCode<=57:e(this).val().indexOf(".")==-1&&void 0},this.editTable=function(){var i=t.NullTips,s=t.EditClass,o=t.width,a=t.height,r=t.NumOnlyClass,l="<font color=silver>"+i+"</font>",d=t.EditMode;n.find("td."+s).each(function(){var t=e(this),i=e.trim(t.find("div.value").html()),n=e.trim(i);n=""==n||"undefined"==typeof n?l:t.children("div.show").html();var s="<textarea style='display:none;overflow:auto;width:"+o+";height:"+a+";'>"+i+"</textarea><span>"+n+"</span>";t.find("div.show").html(s)}),null!=r&&e("."+r+" textarea").bind("keypress",n.Numonly).css("ime-mode","Disabled"),n.on(d,"td."+s,function(){var t=e(this);"none"==t.find("textarea").css("display")&&(t.find("span").hide(),t.find("span").html().indexOf(i)!=-1&&t.find("textarea").html(""),e(this).find("textarea").show().focus(function(){e(this).select()}).focus())}),n.on("blur","."+s+" textarea",function(){var s=e(this).parent().find("span").first(),o=e(this).parent().find("span").html(),a=this,r=e.trim(this.value);if(!t.beforeSave.call(a))return e.tmsg("m_jfw","合计值偏小！",{infotype:2}),!1;if(o.indexOf(i)==-1&&r!=o||o.indexOf(i)!=-1&&""!=r)if(e(this).parent().addClass(t.ChangeClass),s.html(r),1==t.SaveMode)n.saveBar();else if(2==t.SaveMode){var d="function"==typeof t.SaveData?t.SaveData():t.SaveData;e.ajax({url:t.SaveURL,type:t.SaveType,dataType:"json",data:d,success:function(i){i.Success?(hiOverAlert("保存成功"),n.doaction("AfterSave",{savedata:d}),e("."+t.ChangeClass).removeClass(t.ChangeClass),t.callBack.call(a,i)):hiAlert("保存失败")}})}else if(3==t.SaveMode){var c=e(this).parent().parent().find("input").attr("name"),h=e(this).parent().parent().find("input").attr("valueid");""!=t.tableName&&e.ajax({url:t.SaveURL,type:"post",data:{tbName:t.tableName,queryStr:"db."+t.tableName+".distinct('_id',{'"+t.Primarykey+"':'"+h+"'})",dataStr:c+"="+encodeURIComponent(r)},dataType:"json",error:function(){e.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(i){0==i.Success?e.tmsg("m_jfw",i.Message,{infotype:2}):(e("."+t.ChangeClass).removeClass(t.ChangeClass),t.isShowMsg&&e.tmsg("m_jfw","保存成功！",{infotype:1,time_out:500}),n.doaction("AfterSave",{savedata:d}),t.callBack.call(a,i))}})}else if(4==t.SaveMode){var c=e(this).parent().parent().find("input").attr("name"),h=e(this).parent().parent().find("input").attr("valueid");""!=t.tableName&&e.ajax({url:t.SaveURL,type:"post",data:{tbName:t.tableName,queryStr:"db."+t.tableName+".distinct('_id',{'"+t.Primarykey+"':'"+h+"'})",dataStr:c+"="+r},dataType:"json",error:function(){e.tmsg("m_jfw","未知错误，请联系服务器管理员，或者刷新页面重试",{infotype:2})},success:function(i){0==i.Success?e.tmsg("m_jfw",i.Message,{infotype:2}):(e("."+t.ChangeClass).removeClass(t.ChangeClass),e.tmsg("m_jfw","保存成功！",{infotype:1}),LoadDiv())}})}""==r&&s.html(l),e(this).hide(),s.show(),n.doaction("AfterEdit",{editing:e(this).parent()})})},this.editTable(),this.saveBar=function(){"none"==e("#savearea").css("display")&&e("#savearea").show()},1==t.SaveMode){var s='<DIV style="Z-INDEX: 10000; POSITION: fixed; WIDTH: 100%; BOTTOM: 0px; DISPLAY: none; HEIGHT: 40px" id="savearea"><DIV style="BACKGROUND: none transparent scroll repeat 0% 0%; HEIGHT: 40px" id=meerkat-container jQuery1323502422512="26"><DIV class="baoCun" style="TEXT-ALIGN: center; FILTER: ; ZOOM: 1" id=SeriesStepSaveButton class=baoCun jQuery1323502422512="27"><INPUT style="WIDTH: 300px" value=数据已更新，请点此保存 type=button></DIV></DIV></DIV>';e("body").append(s),e("#savearea input").click(function(){var i="function"==typeof t.SaveData?t.SaveData():t.SaveData;e.ajax({url:t.SaveURL,type:t.SaveType,dataType:"json",data:i,success:function(s){s.Success?(hiOverAlert("保存成功"),e("#savearea").hide(),e("."+t.ChangeClass).removeClass(t.ChangeClass),
n.doaction("AfterSave",{savedata:i}),1==t.IsReload&&window.location.reload()):hiAlert("保存失败")}})})}}}(jQuery);var lockTableHead=function(){function e(e,i){for(var n,o,a=i.id,c=$(i),h=c.find("thead")[0].rows,u=0,f=0,p=c.offset();o=h[f];++f)u+=parseInt(o.cells[0].offsetHeight,10)||24;d.push(a),r["table_"+a]={tbl:i,fHeadId:"scr_"+a,height:u,left:p.left,top:p.top,hasCalW:!1,tblht:i.offsetHeight},n=document.getElementById("scr_"+a),n||(n=t(i,a)),l=""==l?a:l,s()}function t(e,t){var i=$('<div><table cellpadding="0" style="margin-top:0px;" cellspacing="0" id="scr_'+t+'"><caption><div style="float:left"></div></caption><thead class="thead01"></thead><tbody></tbody></table></div>').appendTo(document.body),n=i.find("thead"),s=$(e),o=s.find("thead").html();return n.html(o),i=i[0],""!=e.className&&(i.className=e.className),i.style.display="none",i.style.zIndex=999,YH.dom.elemFixedPos(i),i}function i(e){var t,i=$(document).scrollTop();return t=e.top+e.height-100<i&&e.top+e.tblht-e.height/2>i?1:(e.top+e.tblht<i,0)}function n(){for(var e,t,n,s=d.length-1,o=0;s>=0;s--)if(e=d[s],t=r["table_"+e],n=i(t),1==n){o=e;break}return o}function s(){a||(a=!0,$(window).bind("scroll",function(){var e=r["table_"+l],t=i(e),s=document.getElementById("scr_"+l);if(0==t){var o=n();0!=o&&(l=o,e=r["table_"+l],t=i(e),s=document.getElementById("scr_"+l))}if(!e.hasCalW){var a,d=$(e.tbl).find("thead").find("tr");s.parentNode.style.width=$(e.tbl).width()+1+"px",d.each(function(e){if(0==e)for(var t=0;t<$(this).find("th").length;t++)a=$(this).find("th:eq("+t+")").width()+2+"px",$(s).find("tr:first").find("th:eq("+t+")").css("width",a);else for(var t=0;t<$(this).find("th").length;t++)a=$(this).find("th:eq("+t+")").width()-1+"px",$(s).find("tr:eq(1)").find("th:eq("+t+")").css("width",a)}),e.hasCalW=!0}1==t?(s.parentNode.style.top=0,s.parentNode.style.marginTop=0,s.parentNode.style.left=$(e.tbl).offset().left+"px",s.parentNode.style.display=""):s.parentNode.style.display="none"}).bind("resize",function(){o=YH.dom.getViewportHeight();var e=r["table_"+l],t=document.getElementById("scr_"+l);t&&(t.style.left=$(e.tbl).offset().left)}))}var o=YH.dom.getViewportHeight(),a=!1,r={},l="",d=[];return{doLock:function(t,i,n){i&&(YH.dom.fixedPosition(),e(t,i))}}}();LockTableHeadXC.fn=LockTableHeadXC.prototype={ids:[],sts:{},gtableid:"",hasBind:!1,doLockHead:function(e){var t,i,n=e.id,s=$(e),o=[],a=0,r=0,l=s.offset(),d=e.getElementsByTagName("thead"),c={};if(d.length>0)o=d[0].rows,c.content=d[0].innerHTML,c.className=d[0].className;else{var h=e.rows;if(!(h.length>0))return!1;o=[].push(h[0]),this.hasThead=!1,c.content=h[0].innerHTML,c.className=h[0].className}for(;i=o[r];++r)a+=parseInt(i.cells[0].offsetHeight,10)||24;var u=LockTableHeadXC.fn.ids,f=!1;for(r=0;r<u.length;r++)u[r]==n&&(f=!0);f||u.push(n),LockTableHeadXC.fn.sts["table_"+n]={tbl:e,fHeadId:"scr_"+n,height:a,left:l.left,top:l.top,hasCalW:!1,tblht:e.offsetHeight,rows:o,fixedHead:null},t=this.createScr_(e,n,c),""==LockTableHeadXC.fn.gtableid&&(LockTableHeadXC.fn.gtableid=n),this.bindRS_()},calculateState:function(e){var t,i=e.id,n=$(e),s=[],o=0,a=0,r=n.offset(),l=e.getElementsByTagName("thead"),d=e.rows,c=LockTableHeadXC.fn.sts["table_"+i];if(l.length>0)s=l[0].rows;else{if(!(d.length>0))return!1;s=[d[0]]}for(;t=s[a];++a)o+=parseInt(t.cells[0].offsetHeight,10)||24;c.tbl=e,c.height=o,c.left=r.left,c.top=r.top,c.hasCalW=!1,c.tblht=e.offsetHeight,c.rows=s},createScr_:function(e,t,i){$("#scr_"+t).remove();var n,s=$('<table cellpadding="0" style="margin-top:0px;" cellspacing="0" id="scr_'+t+'"></table>').appendTo(document.body),o=$(e),a=o.find("colgroup");if(a.length>0){var r=$("<colgroup></colgroup").appendTo(s);r.html(a.html())}return n=this.hasThead?$("<thead></thead>").appendTo(s):$("<tr></tr>").appendTo(s),n.html(i.content),""!=i.className&&(n[0].className=i.className),s=s[0],LockTableHeadXC.fn.sts["table_"+t].fixedHead=s,""!=e.className&&(s.className=e.className),s.style.display="none",s.style.zIndex=999,YH.dom.elemFixedPos(s),s},resetPos_:function(e){var t,i=$(document).scrollTop();e.tbl.id;return e.top!=e.tbl.offsetTop&&LockTableHeadXC.fn.calculateState(e.tbl),t=e.top+e.height-0<i&&e.top+e.tblht-e.height/2>i?1:(e.top+e.tblht<i,0)},checkNowId:function(){for(var e,t,i,n=LockTableHeadXC.fn.ids.length-1,s=0;n>=0;n--){e=LockTableHeadXC.fn.ids[n];var o=$("#"+e);if(!o.is(":hidden")&&(t=LockTableHeadXC.fn.sts["table_"+e],i=this.resetPos_(t),1==i)){s=e;break}}return s},bindRS_:function(){var e=this,t=LockTableHeadXC.fn;t.hasBind||(t.hasBind=!0,$(window).bind("scroll",function(){var i=t.gtableid,n=t.sts["table_"+i],s=0,o=n.fixedHead,a=$(n.tbl);if(s=a.is(":hidden")?0:e.resetPos_(n),0==s){var r=e.checkNowId();0!=r&&(t.gtableid=i=r,n=t.sts["table_"+i],s=e.resetPos_(n),o=n.fixedHead)}if(!n.hasCalW){var l,d="th";o.style.width=$(n.tbl).width()+"px";var c=(a.width(),0);$.each(n.rows,function(e){var t=$(this),i=0,n=1;t.find("td").length>0&&(d="td"),i=t.find(d).length;for(var s=0;s<i;s++)n=0==s?0:1,l=$(this).find(d).eq(s).width()+n+"px",c+=$(this).find(d).eq(s).width(),$(o).find("tr").eq(e).find(d).eq(s).css("width",l)}),n.hasCalW=!0}1==s?(o.style.top=0,o.style.left=$(n.tbl).offset().left+"px",o.style.display=""):o.style.display="none"}).bind("resize",function(){var e=LockTableHeadXC.fn.gtableid,t=LockTableHeadXC.fn.sts["table_"+e],i=document.getElementById("scr_"+e);i&&(i.style.left=$(t.tbl).offset().left)}))},doLock:function(e){"string"==typeof e&&(e=document.getElementById(e)),e&&(YH.dom.fixedPosition(),this.doLockHead(e))},copy:function(){var e=function(){};return e.prototype=LockTableHeadXC.fn,new e}},LockTableHeadZHHY.prototype=new LockTableHeadXC;for(var a3Stat={plan:{Unconfirmed:"未确认",Processing:"进行中",Completed:"已完成",Revising:"修订中"},work:{}},isSignal=!1,_gtop=window,_gdoc;_gtop.parent!=_gtop;)_gtop=_gtop.parent;_gdoc=_gtop.document;var SelTree=function(e){var t=$("input[name=radType][checked]").val(),i="";switch(t){case"orgpost":$(_gdoc).find("#ifrm .treecontent").remove(),$(_gdoc).find("#ifrm").SelectTree({startXml:"/Home/GetOrgAndPostTreeXML?lv=2",asynUrl:"/Home/GetOrgAndPostTreeXML",defaultShowItemLv:2,_onClick:function(e,t,i,n){var s=n.attr("param")||"";if(0==s.split("_")[0])var o="org",e=s.split("_")[1];else var o="orgpost",e=s.split("_")[2];GetUserList(t,e,o)}});break;case"compost":i="/HumanResource/CommonPostTree";break;case"group":i="/HumanResource/GroupTree?g=1";break;case"propost":i="/HumanResource/GroupTree?g=1"}},a3_plan_selectUser=function(){function e(){var e=$.extend({},{boxid:"pwtselUser",title:"选择人员",contentType:"ajax",cls:"shadow-container",width:400},n);e.onLoad=function(t){e.multisel||$("input[type='checkbox'][name='sel-userId']").each(function(){var e=$(this).val(),t=$(this).attr("zyid");$(this).parent().html('<input type="radio" name="sel-userId" zyid="'+t+'" value="'+e+'" />')}),$("#u_prof_usr").click(function(){hiConfirm("专业添加完成？","确定",function(t){t&&box("/Projects/Assignment/ProjManagers/?projId="+n.projId+"&type="+n.type+"&_t="+(new Date).getTime(),e)})}),$("a[projprofid]").click(function(){var e=$(this).attr("projprofid");SelectUsers.init({rType:"cb",prt:"selUser",onOpen:function(e){SelTree()},callback:function(n){i(n,e,t)}})}),t.db.find("input[name='btnSch']").click(function(){var e=$.trim(t.db.find("input[name='u_name']").val()),i=t.db.find("select[name='u_prof']").val();if("-1"==i&&""==e)return!1;var n,s=t.db.find("tr[usrs='1']"),o="",a=0;s.css("background-color",""),s.each(function(){o=$(this).text(),a=$(this).find("input").attr("zyid"),(("-1"==i||i==a)&&o&&o.indexOf(e)!=-1||i==a&&""==o)&&($(this).css("background-color","#B6EDF4"),n=$(this))}),n&&YH.dom.scrollintoContainer(n,$("#n_container"),!0,!0)})},e.submit_cb=function(t){var i={};t.db.find("input").each(function(){$(this).attr("checked")&&(i[$(this).val()]=$(this).parent().next().text(),i[$(this).val()+"_zy"]=$(this).attr("zyid"))}),e.callback(i),i=null},box("/Home/ProjManagers/?projId="+n.projId+"&type="+n.type+"&_t="+(new Date).getTime(),e)}function t(e,t){for(var i="",s=0,o=e.length,a=n.multisel?"checkbox":"radio",r=0;s<o;++s)0==s&&(r=e[s].id),i+='<tr usrs="1"><td><input type="'+a+'" zyid="'+t+'" name="sel-userId" value="'+e[s].id+'" /></td><td class="fontblue">'+e[s].name+"</td></tr>";$("#choseptb"+t).append(i),$("input[name='sel-userId']").each(function(){if(parseInt($(this).val(),10)==r)return $(this).attr("checked","checked"),!1}),i=null}function i(e,i,s){if($.isEmptyObject(e||{}))return void $.tmsg("selUsermsg","未选择任何人员！");var o="";for(var a in e)o+=a+",";s&&s.fbox.mask("保存中..."),$.ajax({type:"get",cache:!1,url:"/Home/QuickAddManager?ids="+o+"&projProfId="+i+"&type="+n.type,success:function(e){e.success?(t(e.items,i),s&&s.fbox.unmask(),$.tmsg("selUser1","添加成功！",{infotype:1})):$.tmsg("selUser1",e.msg,{infotype:2})}})}var n={multisel:!0};return{init:function(t){n=$.extend(n,t||{}),e()}}}();String.prototype.Tpl=function(e){return this.replace(/\{\w+\}/g,function(t){return String(e[t.replace(/\{|\}/g,"")])||""})},function(e){e.fn.a3Load=function(t,i,n){var s=this;i&&e.isFunction(i)&&(n=i,i=null),e.ajax({url:t,data:i,success:function(t){e(s).html(t),n&&n.call(s)},dataType:"html"})}}(jQuery);var currentListIndex=0,thisAObject,currentListedInputBox,defaultValueOfCurrentListedInputBox,defaultValueOfuserIdObj,defaultValueOfprofIdObj,userIdObject,profIdObject,bindASearchableInput=function(e,t,i,n,s,o,a){userIdObject=t,profIdObject=i,$(e).unbind("focus").bind("focus",function(){showTaskPeopleList(e,t,i,n,s,o,a)}),$(e).unbind("keyup").bind("keyup",function(){addKeyboardControlSupport(e,t,i,n,s,o)}),$(e).unbind("click").bind("click",function(){showTaskPeopleList(e,t,i,n,s,o,a)})};$(document.body).mousedown(function(e){var e=window.event||e;if("none"!=$(".ajs-layer").css("display")){var t=e.clientX,i=e.clientY+document.documentElement.scrollTop,n=$(".ajs-layer"),s=n.offset();s&&(t<s.left||i<s.top||t>s.left+n.width()||i>s.top+n.height())&&(n.fadeOut(),currentListedInputBox&&currentListedInputBox.val(defaultValueOfCurrentListedInputBox),userIdObject&&userIdObject.val(defaultValueOfuserIdObj),profIdObject&&profIdObject.val(defaultValueOfprofIdObj))}}),function(e){e.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.5,overlayColor:"#FFF",draggable:!0,okButton:"&nbsp;确定&nbsp;",cancelButton:"&nbsp;取消&nbsp;",dialogClass:null,alert:function(t,i,n){null==i&&(i="提示"),e.alerts._show(i,t,null,"alert",function(e){n&&n(e)},null,null,null,null)},confirm:function(t,i,n){null==i&&(i="请确认"),e.alerts._show(i,t,null,"confirm",function(e){n&&n(e)},null,null,null,null)},prompt:function(t,i,n,s){null==n&&(n="请填写"),e.alerts._show(n,t,i,"prompt",function(e){s&&s(e)},null,null,null,null)},openBox:function(t,i,n,s,o,a,r){null==i&&(i="提示"),e.alerts._show(i,t,null,"openBox",function(e){r&&r(e)},n,s,o,a)},overAlert:function(t,i){e.alerts._overShow(t,i)},_overShow:function(t,i){null==i&&(i=3e3);var n=i+600;e("body").append('<div id="over_container" style="display:none"><div id="over_message"></div></div>'),e("#over_message").text(t).html(e("#over_message").text().replace(/\n/g,"<br />")),e.alerts.dialogClass&&e("#over_container").addClass(e.alerts.dialogClass);var s=e.browser.msie&&parseInt(e.browser.version)<=6?"absolute":"fixed";e("#over_container").css({position:s,zIndex:99999,width:350,padding:0,margin:0}).show("fast"),e("#over_container").css({minWidth:e("#over_container").outerWidth(),maxWidth:e("#over_container").outerWidth()}),e.alerts._overReposition(),setTimeout(function(){document.getElementById("hiOverAlertClose")||e("#over_container").hide("fast")},i),setTimeout(function(){document.getElementById("hiOverAlertClose")||e("#over_container").remove()},n)},_overReposition:function(){var t=4,i=e(window).width()/2-e("#over_container").outerWidth()/2+e.alerts.horizontalOffset;t<0&&(t=0),i<0&&(i=0),e.browser.msie&&parseInt(e.browser.version)<=6&&(t+=e(window).scrollTop()),e.browser.msie&&parseInt(e.browser.version)<=6&&(i-=175),e("#over_container").css({top:t+"px",left:i+"px"}),e("#popup_overlay").height(e(document).height())},_show:function(t,i,n,s,o,a,r,l,d){e.alerts._hide(),e.alerts._overlay("show"),e("body").append('<div id="popup_container" style="display:none"><h1 id="popup_title"></h1><em id="ctl"></em><em id="cbl"></em><em id="ctr"></em><em id="cbr"></em><span id="popup_close"></span><div id="popup_content"><div id="popup_message"></div></div></div>'),e.alerts.dialogClass&&e("#popup_container").addClass(e.alerts.dialogClass);var c=e.browser.msie&&parseInt(e.browser.version)<=6?"absolute":"fixed";switch(e.browser.msie&&parseInt(e.browser.version)<=6&&(document.getElementById("hiAlertHiddenSelect")||$("body").append('<iframe id="hiAlertHiddenSelect" scrolling="no"   frameborder="0"  style="z-index:99998;position:absolute; top:0px; right:0px; display:none; background-color:Black;"></iframe> ')),e("#popup_container").css({position:c,zIndex:99999,padding:0,margin:0}).fadeIn("fast"),e("#popup_title").text(t),e("#popup_content").addClass(s),"openBox"!=s&&e("#popup_message").text(i).html(e("#popup_message").text().replace(/\n/g,"<br />")),e("#popup_container").css({}),e.alerts._reposition(),e.alerts._maintainPosition(!0),s){case"alert":e("#popup_message").after('<div id="popup_panel"><input type="button" value="'+e.alerts.okButton+'" id="popup_ok" /></div>'),e("#popup_ok").click(function(){e.alerts._hide(),o(!0)}),e("#popup_ok").focus().keypress(function(t){13!=t.keyCode&&27!=t.keyCode||e("#popup_ok").trigger("click")});break;case"confirm":e("#popup_message").after('<div id="popup_panel"><input type="button" value="'+e.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+e.alerts.cancelButton+'" id="popup_cancel" /></div>'),e("#popup_ok").click(function(){e.alerts._hide(),o&&o(!0)}),e("#popup_cancel").click(function(){e.alerts._hide(),o&&o(!1)}),e("#popup_ok").focus(),e("#popup_ok, #popup_cancel").keypress(function(t){13==t.keyCode&&e("#popup_ok").trigger("click"),27==t.keyCode&&e("#popup_cancel").trigger("click")});break;case"prompt":e("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><input type="button" value="'+e.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+e.alerts.cancelButton+'" id="popup_cancel" /></div>'),e("#popup_prompt").width(e("#popup_message").width()-10),e("#popup_ok").click(function(){var t=e("#popup_prompt").val();e.alerts._hide(),o&&o(t)}),e("#popup_cancel").click(function(){e.alerts._hide(),o&&o(null)}),e("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(t){13==t.keyCode&&e("#popup_ok").trigger("click"),27==t.keyCode&&e("#popup_cancel").trigger("click")}),n&&e("#popup_prompt").val(n),e("#popup_prompt").focus().select();break;case"openBox":e("#popup_message").append(e(i).html()),a&&e("#popup_container").css({width:a+"px"}),r&&(e("#popup_container").css({height:r+"px"}),e("#popup_message").css({height:r-48+"px"})),e.alerts._reposition(),l&&e(l).click(function(){e.alerts._hide(),o&&o(!0)}),d&&e(d).click(function(){return e.alerts._hide(),!1})}e("#popup_close").click(function(){e.alerts._hide(),o&&o(!1)});var h=e.alerts;if(h._hiddenSelect(),e.alerts.draggable)try{e("#popup_container").draggable({handle:e("#popup_title"),drag:function(e,t){h._hiddenSelect()}}),e("#popup_title").css({cursor:"move"})}catch(e){}},_hide:function(){e("#popup_container").remove(),e("#hiAlertHiddenSelect").hide(),e.alerts._overlay("hide"),e.alerts._maintainPosition(!1)},_setOpacity:function(t,i){var n=e(t)[0].style;"opacity"in n?n.opacity=i:"MozOpacity"in n?n.MozOpacity=i:"filter"in n&&(""===i?n.filter="":n.filter="alpha(opacity="+100*i+")")},_overlay:function(t){switch(t){case"show":e.alerts._overlay("hide"),e("BODY").append('<div id="popup_overlay"></div>'),e("#popup_overlay").css({position:"absolute",zIndex:99998,top:"0px",left:"0px",width:"100%",height:e(document).height(),background:e.alerts.overlayColor}),e.alerts._setOpacity(e("#popup_overlay")[0],e.alerts.overlayOpacity);break;case"hide":e("#popup_overlay").remove()}},_hiddenSelect:function(){if(e.browser.msie&&parseInt(e.browser.version)<=6){var t=e("#popup_container").offset(),i=t.top,n=t.left;e("#hiAlertHiddenSelect").css({top:i+"px",left:n+"px",display:"block"}),e("#hiAlertHiddenSelect").height(parseInt(e("#popup_container").height())+2),e("#hiAlertHiddenSelect").width(parseInt(e("#popup_container").width())+2),e("#popup_overlay").hide()}},_reposition:function(){var t=e(window).height()/2-e("#popup_container").height()/2+e.alerts.verticalOffset,i=e(window).width()/2-e("#popup_container").width()/2+e.alerts.horizontalOffset;t<0&&(t=0),i<0&&(i=0),e.browser.msie&&parseInt(e.browser.version)<=6&&(t+=e(window).scrollTop()),e("#popup_container").css({top:t+"px",left:i+"px"}),e("#popup_overlay").height(e(document).height()),e.alerts._hiddenSelect()},_maintainPosition:function(t){if(e.alerts.repositionOnResize)switch(t){case!0:e(window).bind("resize",e.alerts._reposition),e.alerts._hiddenSelect();break;case!1:e(window).unbind("resize",e.alerts._reposition)}}},hiAlert=function(t,i,n){$("#working").hide(),e.alerts.alert(t,i,n)},hiConfirm=function(t,i,n){$("#working").hide(),e.alerts.confirm(t,i,n)},hiPrompt=function(t,i,n,s){$("#working").hide(),e.alerts.prompt(t,i,n,s)},hiBox=function(t,i,n,s,o,a,r){$("#working").hide(),e.alerts.openBox(t,i,n,s,o,a,r)},hiOverAlert=function(t,i){$("#working").hide(),e.alerts.overAlert(t,i)}}(jQuery);var speed3=25,MyMar,demo,demo1,demo2,MarqueeAction=0,MarqueeSpeed=1;if(function(e){return e.fn.imgSwitch=function(t){t=e.extend(!0,{index:"0",_time:"3000",oClass:"this",_objClass:"dlClass"},t),e("."+t._objClass).each(function(){var i=e(this);this.autoScoll=function(){function n(e){i.find("dd a:eq("+e+")").addClass(t.oClass).siblings().removeClass(t.oClass),a.eq(e).fadeIn("4000").parent().siblings().find("img").hide()}var s,o=t.index,a=i.find("dt").find("img"),r=a.length,l=0;a.hover(function(){clearInterval(s)},function(){o=e(this).index(),s=setInterval(function(){n(o),o++,o==r&&(o=0)},t._time)}).eq(0).trigger("mouseleave"),e(this).find("dd a").hover(function(){clearInterval(s),e(this).addClass(t.oClass).siblings().removeClass(t.oClass),o=e(this).index(),a.eq(o).fadeIn("4000").parent().siblings().find("img").hide()},function(){o=e(this).index(),l=o,o==r-1?l=0:l+=1,a.eq(l).trigger("mouseleave")}),e(this).find("dd a:first").addClass("this")},this.autoScoll()})},this}(jQuery),function(){var mF={defConfig:{pattern:"mF_fscreen_tb",trigger:"click",txtHeight:"default",wrap:!0,auto:!0,time:4,index:0,waiting:20,delay:100,css:!0,path:"/Scripts/Reference/myFocus/js/pattern/",autoZoom:!1},pattern:{},extend:function(){var e=arguments,t=e.length,i=1,n=e[0];for(1===t&&(i=0,n=this.pattern),i;i<t;i++)for(var s in e[i])s in n||(n[s]=e[i][s])}},DOM={$:function(e){return"string"==typeof e?document.getElementById(e):e},$$:function(e,t){return(this.$(t)||document).getElementsByTagName(e)},$$_:function(e,t){for(var i=[],n=this.$$(e,t),s=0;s<n.length;s++)n[s].parentNode===t&&i.push(n[s]),s+=this.$$(e,n[s]).length;return i},$c:function(e,t){for(var i=this.$$("*",t),e=e.replace(/\-/g,"\\-"),n=new RegExp("(^|\\s)"+e+"(\\s|$)"),s=[],o=0,a=i.length;o<a;o++)if(n.test(i[o].className)){s.push(i[o]);break}return s[0]},$li:function(e,t){return this.$$_("li",this.$c(e,t))},wrap:function(e,t){var i=document.createElement("div");i.className=t,e[0].parentNode.insertBefore(i,e[0]);for(var n=0;n<e.length;n++)i.appendChild(e[n])},wrapIn:function(e,t){e.innerHTML="<ul class="+t+">"+e.innerHTML+"</ul>"},addList:function(e,t){for(var i,n=[],s=this.$$("ul",e)[0],o=this.$$_("li",s),a=o.length,r=t.length,l=0;l<r;l++){n.push("<ul class="+t[l]+">");for(var d=0;d<a;d++)i=this.$$("img",o[d])[0],n.push("<li>"+("num"==t[l]?"<a>"+(d+1)+"</a>":"txt"==t[l]&&i?o[d].innerHTML.replace(/\<img(.|\n|\r)*?\>/i,i.alt)+"<p>"+i.getAttribute("text")+"</p>":"thumb"==t[l]&&i?"<img src="+(i.getAttribute("thumb")||i.src)+" />":"")+"<span></span></li>");n.push("</ul>")}e.innerHTML+=n.join("")},addmF_pithy_tbList:function(e,t){for(var i,n=[],s=this.$$("ul",e)[0],o=this.$$_("li",s),a=o.length,r=t.length,l=0;l<r;l++){n.push("<ul class="+t[l]+">");for(var d=0;d<a;d++){i=this.$$("img",o[d])[0];var c="<div >";c+=i.getAttribute("text"),c+='  <img src="',c+=i.getAttribute("thumb")||i.src,c+='" />',c+="  </div>",n.push("<li>"+c+"<span></span></li>")}n.push("</ul>")}e.innerHTML+=n.join("")}},CSS={style:function(e,t){var i=(this.isIE?e.currentStyle:getComputedStyle(e,""))[t],n=parseFloat(i);return isNaN(n)?i:n},setOpa:function(e,t){e.style.filter="alpha(opacity="+t+")",e.style.opacity=t/100},removeClass:function(o,name){var cla=o.className,reg="/\\s*"+name+"\\b/g";o.className=cla?cla.replace(eval(reg),""):""}},Anim={animate:function(e,t,i,n,s,o){var a="opacity"===t,r=this,l=r.setOpa,d="string"==typeof i,c=(new Date).getTime();a&&"none"===r.style(e,"display")&&(e.style.display="block",l(e,0));var h=r.style(e,t),u=isNaN(h)?1:h,f=d?i/1:i-u,p=n||800,m=r.easing[s||"easeOut"],g=f>0?"ceil":"floor";return e[t+"Timer"]&&clearInterval(e[t+"Timer"]),e[t+"Timer"]=setInterval(function(){var n=(new Date).getTime()-c;n<p?a?l(e,Math[g](m(n,100*u,100*f,p))):e.style[t]=Math[g](m(n,u,f,p))+"px":(clearInterval(e[t+"Timer"]),a?l(e,100*(f+u)):e.style[t]=f+u+"px",a&&0===i&&(e.style.display="none"),o&&o.call(e))},13),r},fadeIn:function(e,t,i){return this.animate(e,"opacity",1,void 0==t?400:t,"linear",i),this},fadeOut:function(e,t,i){return this.animate(e,"opacity",0,void 0==t?400:t,"linear",i),this},slide:function(e,t,i,n,s){for(var o in t)this.animate(e,o,t[o],i,n,s);return this},stop:function(e){for(var t in e)t.indexOf("Timer")!==-1&&clearInterval(e[t]);return this},easing:{linear:function(e,t,i,n){return i*e/n+t},swing:function(e,t,i,n){return-i/2*(Math.cos(Math.PI*e/n)-1)+t},easeIn:function(e,t,i,n){return i*(e/=n)*e*e*e+t},easeOut:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeInOut:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t}}},Init={set:function(e,t,i){function n(){2==a&&(e.autoZoom&&o.fixIMG(e.id,e.width,e.height),o.pattern[e.pattern].call(o,e,o),i&&i())}function s(){var t=o.$(e.id);t.style.height="314px",o.loadPattern(e.pattern,e.path,function(){o.extend(e,o.pattern[e.pattern].cfg,o.defConfig),e.width=e.width||o.style(t,"width"),e.height=e.height||o.style(t,"height"),o.initCSS(e),t.className+=" "+e.pattern+" "+e.S,t.style.height="",a+=1,n()}),o.onloadIMG(t,e.waiting,function(){a+=1,n()})}"boolean"!=typeof t&&(i=t,t=!1);var o=this,a=0;return e.pattern=e.pattern||o.defConfig.pattern,e.path=e.path||o.defConfig.path,e.S=e.pattern+"-"+e.id,t?void s():void(window.attachEvent?!function(){try{s()}catch(e){setTimeout(arguments.callee,0)}}():o.addEvent(document,"DOMContentLoaded",s))},initCSS:function(e){var t=[],i=e.width,n=e.height,s=document.createElement("style");s.type="text/css",e.wrap&&this.wrap([this.$(e.id)],e.pattern+"_wrap"),e.css&&t.push("."+e.S+" *{margin:0;padding:0;border:0;list-style:none;}."+e.S+"{position:relative;width:"+i+"px;height:"+n+"px;overflow:hidden;font:12px/1.5 Verdana;text-align:left;background:#fff;visibility:visible!important;}."+e.S+" .loading{position:absolute;z-index:9999;width:100%;height:100%;color:#666;text-align:center;padding-top:"+.3*n+"px;background:#fff url(/Content/images/icon/loading.gif) center "+.4*n+"px no-repeat;}."+e.S+" .pic{position:relative;width:"+i+"px;height:"+n+"px;overflow:hidden;}."+e.S+" .txt li,."+e.S+" .txt li span,."+e.S+" .txt-bg{width:"+i+"px;height:"+e.txtHeight+"px!important;line-height:"+e.txtHeight+"px!important;overflow:hidden;}."+e.S+" .txt li p a{display:inline;}"),e.css&&e.autoZoom&&t.push("."+e.S+" .pic li{text-align:center;width:"+i+"px;height:"+n+"px;}"),s.styleSheet?s.styleSheet.cssText=t.join(""):s.innerHTML=t.join("");var o=this.$$("head",document)[0];o.insertBefore(s,o.firstChild)}},Method={isIE:!+[1],switchMF:function(e,t,i,n,s){return"var _F=this,_ld=_F.$c('loading',box),less="+i+",_tn,first=true,_dir="+n+"||'left',_dis=_dir=='left'||_dir=='right'?par.width:par.height,_wp=less&&("+s+"||pics),index=par.index,_t=par.time*1000;if(less){_wp.style[_dir]=-_dis*n+'px';index+=n;}if(_ld)box.removeChild(_ld);var run=function(idx){("+e+")();var prev=index;if(less&&index==2*n-1&&_tn!=1){_wp.style[_dir]=-(n-1)*_dis+'px';index=n-1}if(less&&index==0&&_tn!=2){_wp.style[_dir]=-n*_dis+'px';index=n}if(!less&&index==n-1&&idx==undefined)index=-1;if(less&&idx!==undefined&&index>n-1&&!_tn&&!first) idx+=n;var next=idx!==undefined?idx:index+1;if("+t+")("+t+")();index=next;_tn=first=null;};run(index);if(_t&&par.auto)var auto=setInterval(function(){run()},_t);_F.addEvent(box,'mouseover',function(){if(auto)clearInterval(auto)});_F.addEvent(box,'mouseout',function(){if(auto)auto=setInterval(function(){run()},_t)});for(var i=0,_lk=_F.$$('a',box),_ln=_lk.length;i<_ln;i++) _lk[i].onfocus=function(){this.blur();}"},bind:function(e,t,i){return"for (var j=0;j<n;j++){"+e+"[j].index=j;if("+t+"=='click'){"+e+"[j].onmouseover=function(){if(this.index!=index)this.className+=' hover'};"+e+"[j].onmouseout=function(){_F.removeClass(this,'hover')};"+e+"[j].onclick=function(){if(this.index!=index) {run(this.index);return false}};}else if("+t+"=='mouseover'){"+e+"[j].onmouseover=function(){var self=this;if("+i+"==0){if(self.index!=index){run(self.index);return false}}else "+e+".d=setTimeout(function(){if(self.index!=index) {run(self.index);return false}},"+i+")};"+e+"[j].onmouseout=function(){clearTimeout("+e+".d)};}else{alert('Error Setting : \"'+"+t+"+'\"');break;}}"},toggle:function(e,t,i){return"var _stop=false;"+e+".onclick=function(){this.className=this.className=='"+t+"'?'"+i+"':'"+t+"';if(!_stop){clearInterval(auto);auto=null;_stop=true;}else{auto=true;_stop=false;}}"},scroll:function(e,t,i,n,s){return"var scPar={},scDis="+i+",scN=Math.floor("+n+"/2),scDir=parseInt("+e+".style["+t+"])||0,scIdx=next>=n?next-n:next,scDur="+s+"||500,scMax=scDis*(n-"+n+"),scD=scDis*scIdx+scDir;if(scD>scDis*scN&&scIdx!==n-1) scPar["+t+"]='-'+scDis;if(scD<scDis&&scIdx!==0) scPar["+t+"]='+'+scDis;if(scIdx===n-1) scPar["+t+"]=-scMax;if(scIdx===0) scPar["+t+"]=0;_F.slide("+e+",scPar,scDur);"},turn:function(e,t){return e+".onclick=function(){_tn=1;run(index>0?index-1:n-1);};"+t+".onclick=function(){_tn=2;var tIdx=index>=2*n-1?n-1:index;run(index==n-1&&!less?0:tIdx+1);}"},alterSRC:function(o,name,del){var img=this.$$("img",o)[0];img.src=del?img.src.replace(eval("/"+name+"\\.(?=[^\\.]+$)/g"),"."):img.src.replace(/\.(?=[^\.]+$)/g,name+".")},onloadIMG:function(e,t,i){for(var n=this.$$("img",e),s=n.length,o=0,a=!1,r=0;r<s;r++)n[r].onload=function(){o+=1,o!=s||a||(a=!0,i())},this.isIE&&(n[r].src=n[r].src);if(t!==!0){var l=t===!1?0:1e3*t;setTimeout(function(){a||(a=!0,i())},l)}},fixIMG:function(e,t,i){for(var n=this.$$("img",e),s=new Image,o=0;o<n.length;o++){if(s.src=n[o].src,s.width/s.height>=t/i)var a="width",r="height",l=t;else var a="height",r="width",l=i;s[a]>l?(n[o]["style"][a]=l+"px",n[o]["style"][r]=s[r]*l/s[a]+"px"):(n[o]["style"][a]=s[a]+"px",n[o]["style"][r]=s[r]+"px");var d=parseInt(n[o].style.height);i>d&&(n[o].style.marginTop=(i-d)/2+"px")}},loadPattern:function(e,t,i){var n=document.createElement("script"),s=document.createElement("link"),o=t+e+".js",a=t+e+".css";n.type="text/javascript",n.src=o,s.rel="stylesheet",s.href=a,this.$$("head")[0].appendChild(s),this.$$("head")[0].appendChild(n),this.isIE?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||i()}:n.onload=function(){i()},n.onerror=function(){alert("Not Found (404): "+o)}},addEvent:function(e,t,i){var n=this.isIE,s=n?"attachEvent":"addEventListener",o=(n?"on":"")+t;e[s](o,i,!1)}};mF.extend(mF,DOM,CSS,Anim,Init,Method),mF.set.params=function(e,t){mF.pattern[e].cfg=t},myFocus__AGENT__=mF,"undefined"==typeof myFocus?myFocus=myFocus__AGENT__:window.console&&console.log('"myFocus" has been Defined, Please use "myFocus__AGENT__".'),"undefined"!=typeof jQuery&&jQuery.fn.extend({myFocus:function(e,t){e||(e={}),e.id=this[0].id,e.id||(e.id=this[0].id="mF__NAME__"),myFocus__AGENT__.set(e,!0,t)}})}(),function(e){e.fn.lightBox=function(t){function i(){return n(this,y),!1}function n(i,n){if(e("embed, object, select").css({visibility:"hidden"}),s(),t.imageArray.length=0,t.activeImage=0,1==n.length)t.imageArray.push(new Array(i.getAttribute("href"),i.getAttribute("title")));else for(var a=0;a<n.length;a++)t.imageArray.push(new Array(n[a].getAttribute("href"),n[a].getAttribute("title")));for(;t.imageArray[t.activeImage][0]!=i.getAttribute("href");)t.activeImage++;o()}function s(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev" hidefocus></a><a href="#" hidefocus id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" hidefocus id="lightbox-loading-link"><img src="'+t.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+t.imageBtnClose+'"></a></div></div></div></div>');var i=m();e("#jquery-overlay").css({backgroundColor:t.overlayBgColor,opacity:t.overlayOpacity,width:i[0],height:i[1]}).fadeIn();var n=g();e("#jquery-lightbox").css({top:n[1]+i[3]/10,left:n[0]}).show(),e("#jquery-overlay,#jquery-lightbox").click(function(){p()}),e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){return p(),!1}),e(window).resize(function(){var t=m();e("#jquery-overlay").css({width:t[0],height:t[1]});var i=g();e("#jquery-lightbox").css({top:i[1]+t[3]/10,left:i[0]})})}function o(){e("#lightbox-loading").show(),t.fixedNavigation?e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide():e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide();var i=new Image;i.onload=function(){e("#lightbox-image").attr("src",t.imageArray[t.activeImage][0]),a(i.width,i.height),i.onload=function(){}},i.src=t.imageArray[t.activeImage][0]}function a(i,n){var s=e("#lightbox-container-image-box").width(),o=e("#lightbox-container-image-box").height(),a=i+2*t.containerBorderSize,l=n+2*t.containerBorderSize,d=s-a,c=o-l;e("#lightbox-container-image-box").animate({width:a,height:l},t.containerResizeSpeed,function(){r()}),0==d&&0==c&&v(e.browser.msie?250:100),e("#lightbox-container-image-data-box").css({width:i}),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:n+2*t.containerBorderSize})}function r(){e("#lightbox-loading").hide(),e("#lightbox-image").fadeIn(function(){l(),d()}),f()}function l(){e("#lightbox-container-image-data-box").slideDown("fast"),e("#lightbox-image-details-caption").hide(),t.imageArray[t.activeImage][1]&&e("#lightbox-image-details-caption").html(t.imageArray[t.activeImage][1]).show(),t.imageArray.length>1&&e("#lightbox-image-details-currentNumber").html(t.txtImage+" "+(t.activeImage+1)+" "+t.txtOf+" "+t.imageArray.length).show()}function d(){e("#lightbox-nav").show(),e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+t.imageBlank+") no-repeat"}),0!=t.activeImage&&(t.fixedNavigation?e("#lightbox-nav-btnPrev").css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){return t.activeImage=t.activeImage-1,o(),!1}):e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){return t.activeImage=t.activeImage-1,o(),!1})),t.activeImage!=t.imageArray.length-1&&(t.fixedNavigation?e("#lightbox-nav-btnNext").css({background:"url("+t.imageBtnNext+") right 15% no-repeat"
}).unbind().bind("click",function(){return t.activeImage=t.activeImage+1,o(),!1}):e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+t.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+t.imageBlank+") no-repeat"})}).show().bind("click",function(){return t.activeImage=t.activeImage+1,o(),!1})),c()}function c(){e(document).keydown(function(e){u(e)})}function h(){e(document).unbind()}function u(e){null==e?(keycode=event.keyCode,escapeKey=27):(keycode=e.keyCode,escapeKey=e.DOM_VK_ESCAPE),key=String.fromCharCode(keycode).toLowerCase(),key!=t.keyToClose&&"x"!=key&&keycode!=escapeKey||p(),key!=t.keyToPrev&&37!=keycode||0!=t.activeImage&&(t.activeImage=t.activeImage-1,o(),h()),key!=t.keyToNext&&39!=keycode||t.activeImage!=t.imageArray.length-1&&(t.activeImage=t.activeImage+1,o(),h())}function f(){t.imageArray.length-1>t.activeImage&&(objNext=new Image,objNext.src=t.imageArray[t.activeImage+1][0]),t.activeImage>0&&(objPrev=new Image,objPrev.src=t.imageArray[t.activeImage-1][0])}function p(){e("#jquery-lightbox").remove(),e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()}),e("embed, object, select").each(function(){var t=this.id;t.indexOf("webCore")==-1&&t.indexOf("MTSpear")==-1&&e(this).css({visibility:"visible"})})}function m(){var e,t;window.innerHeight&&window.scrollMaxY?(e=window.innerWidth+window.scrollMaxX,t=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(e=document.body.scrollWidth,t=document.body.scrollHeight):(e=document.body.offsetWidth,t=document.body.offsetHeight);var i,n;return self.innerHeight?(i=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,n=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(i=document.documentElement.clientWidth,n=document.documentElement.clientHeight):document.body&&(i=document.body.clientWidth,n=document.body.clientHeight),t<n?pageHeight=n:pageHeight=t,e<i?pageWidth=e:pageWidth=i,arrayPageSize=new Array(pageWidth,pageHeight,i,n),arrayPageSize}function g(){var e,t;return self.pageYOffset?(t=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(t=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(t=document.body.scrollTop,e=document.body.scrollLeft),arrayPageScroll=new Array(e,t),arrayPageScroll}function v(e){var t=new Date;i=null;do var i=new Date;while(i-t<e)}t=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:!1,imageLoading:"images/lightbox-ico-loading.gif",imageBtnPrev:"images/lightbox-btn-prev.gif",imageBtnNext:"images/lightbox-btn-next.gif",imageBtnClose:"images/lightbox-btn-close.gif",imageBlank:"images/lightbox-blank.gif",containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},t);var y=this;return this.unbind("click").click(i)}}(jQuery),!hs){var hs={lang:{cssDirection:"ltr",loadingText:"Loading...",loadingTitle:"Click to cancel",focusTitle:"Click to bring to front",fullExpandTitle:"原始尺寸(快捷键：f)",creditsText:"",creditsTitle:"Go to the Highslide JS homepage",originalDocTitle:"原文件",originalDocText:"原文件",previousText:"上一张",nextText:"下一张",moveText:"移动",closeText:"关闭",closeTitle:"关闭(快捷键：esc)",resizeTitle:"Resize",playText:"播放",playTitle:"播放(快捷键：空格)",pauseText:"停止播放",pauseTitle:"停止播放(快捷键：空格)",previousTitle:"上一张(快捷键：方向键左键)",nextTitle:"下一张(快捷键：方向键右键)",moveTitle:"移动",fullExpandText:"原始尺寸",number:"Image %1 of %2",restoreTitle:"鼠标滚轮，进行放大缩小."},graphicsDir:"/Scripts/Reference/highslide/graphics/",expandCursor:"zoomin.cur",restoreCursor:"zoomout.cur",expandDuration:250,restoreDuration:250,marginLeft:15,marginRight:15,marginTop:15,marginBottom:15,zIndexCounter:1e5,loadingOpacity:.75,allowMultipleInstances:!0,numberOfImagesToPreload:5,outlineWhileAnimating:2,outlineStartOffset:3,padToMinWidth:!1,fullExpandPosition:"bottom right",fullExpandOpacity:1,showCredits:!0,creditsHref:"http://highslide.com/",creditsTarget:"_self",enableKeyListener:!0,openerTagNames:["a"],transitions:[],transitionDuration:250,dimmingOpacity:0,dimmingDuration:50,anchor:"auto",align:"auto",targetX:null,targetY:null,dragByHeading:!0,minWidth:200,minHeight:200,allowSizeReduction:!0,outlineType:"drop-shadow",skin:{controls:'<div class="highslide-controls"><ul><li class="highslide-originalDoc"><a href="#" title="{hs.lang.originalDocTitle}"><span>{hs.lang.originalDocText}</span></a></li><li class="highslide-previous"><a href="#" title="{hs.lang.previousTitle}"><span>{hs.lang.previousText}</span></a></li><li class="highslide-play"><a href="#" title="{hs.lang.playTitle}"><span>{hs.lang.playText}</span></a></li><li class="highslide-pause"><a href="#" title="{hs.lang.pauseTitle}"><span>{hs.lang.pauseText}</span></a></li><li class="highslide-next"><a href="#" title="{hs.lang.nextTitle}"><span>{hs.lang.nextText}</span></a></li><li class="highslide-move"><a href="#" title="{hs.lang.moveTitle}"><span>{hs.lang.moveText}</span></a></li><li class="highslide-full-expand"><a href="#" title="{hs.lang.fullExpandTitle}"><span>{hs.lang.fullExpandText}</span></a></li><li class="highslide-close"><a href="#" title="{hs.lang.closeTitle}" ><span>{hs.lang.closeText}</span></a></li></ul></div>'},preloadTheseImages:[],continuePreloading:!0,expanders:[],overrides:["allowSizeReduction","useBox","anchor","align","targetX","targetY","outlineType","outlineWhileAnimating","captionId","captionText","captionEval","captionOverlay","headingId","headingText","headingEval","headingOverlay","creditsPosition","dragByHeading","autoplay","numberPosition","transitions","dimmingOpacity","width","height","wrapperClassName","minWidth","minHeight","maxWidth","maxHeight","pageOrigin","slideshowGroup","easing","easingClose","fadeInOut","src"],overlays:[],idCounter:0,oPos:{x:["leftpanel","left","center","right","rightpanel"],y:["above","top","middle","bottom","below"]},mouse:{},headingOverlay:{},captionOverlay:{},timers:[],slideshows:[],pendingOutlines:{},clones:{},onReady:[],uaVersion:/Trident\/4\.0/.test(navigator.userAgent)?8:parseFloat((navigator.userAgent.toLowerCase().match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1]),ie:document.all&&!window.opera,safari:/Safari/.test(navigator.userAgent),geckoMac:/Macintosh.+rv:1\.[0-8].+Gecko/.test(navigator.userAgent),$:function(e){if(e)return document.getElementById(e)},push:function(e,t){e[e.length]=t},createElement:function(e,t,i,n,s){var o=document.createElement(e);return t&&hs.extend(o,t),s&&hs.setStyles(o,{padding:0,border:"none",margin:0}),i&&hs.setStyles(o,i),n&&n.appendChild(o),o},extend:function(e,t){for(var i in t)e[i]=t[i];return e},setStyles:function(e,t){for(var i in t)hs.ieLt9&&"opacity"==i?t[i]>.99?e.style.removeAttribute("filter"):e.style.filter="alpha(opacity="+100*t[i]+")":e.style[i]=t[i]},animate:function(e,t,i){var n,s,o;if("object"!=typeof i||null===i){var a=arguments;i={duration:a[2],easing:a[3],complete:a[4]}}"number"!=typeof i.duration&&(i.duration=250),i.easing=Math[i.easing]||Math.easeInQuad,i.curAnim=hs.extend({},t);for(var r in t){var l=new hs.fx(e,i,r);n=parseFloat(hs.css(e,r))||0,s=parseFloat(t[r]),o="opacity"!=r?"px":"",l.custom(n,s,o)}},css:function(e,t){if(e.style[t])return e.style[t];if(document.defaultView)return document.defaultView.getComputedStyle(e,null).getPropertyValue(t);"opacity"==t&&(t="filter");var i=e.currentStyle[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})];return"filter"==t&&(i=i.replace(/alpha\(opacity=([0-9]+)\)/,function(e,t){return t/100})),""===i?1:i},getPageSize:function(){var e=document,t=(window,e.compatMode&&"BackCompat"!=e.compatMode?e.documentElement:e.body),i=hs.ie&&(hs.uaVersion<9||"undefined"==typeof pageXOffset),n=i?t.clientWidth:e.documentElement.clientWidth||self.innerWidth,s=i?t.clientHeight:self.innerHeight;return hs.page={width:n,height:s,scrollLeft:i?t.scrollLeft:pageXOffset,scrollTop:i?t.scrollTop:pageYOffset},hs.page},getPosition:function(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e.offsetParent;)e=e.offsetParent,t.x+=e.offsetLeft,t.y+=e.offsetTop,e!=document.body&&e!=document.documentElement&&(t.x-=e.scrollLeft,t.y-=e.scrollTop);return t},expand:function(e,t,i,n){if(e||(e=hs.createElement("a",null,{display:"none"},hs.container)),"function"==typeof e.getParams)return t;try{return new hs.Expander(e,t,i),!1}catch(e){return!0}},getElementByClass:function(e,t,i){for(var n=e.getElementsByTagName(t),s=0;s<n.length;s++)if(new RegExp(i).test(n[s].className))return n[s];return null},replaceLang:function(e){e=e.replace(/\s/g," ");var t,i=/{hs\.lang\.([^}]+)\}/g,n=e.match(i);if(n)for(var s=0;s<n.length;s++)t=n[s].replace(i,"$1"),"undefined"!=typeof hs.lang[t]&&(e=e.replace(n[s],hs.lang[t]));return e},focusTopmost:function(){for(var e,t,i=0,n=-1,s=hs.expanders,o=0;o<s.length;o++)e=s[o],e&&(t=e.wrapper.style.zIndex,t&&t>i&&(i=t,n=o));n==-1?hs.focusKey=-1:s[n].focus()},getParam:function(e,t){e.getParams=e.onclick;var i=e.getParams?e.getParams():null;return e.getParams=null,i&&"undefined"!=typeof i[t]?i[t]:"undefined"!=typeof hs[t]?hs[t]:null},getSrc:function(e){var t=hs.getParam(e,"src");return t?t:e.href},getNode:function(e){var t=hs.$(e),i=hs.clones[e];return t||i?i?i.cloneNode(!0):(i=t.cloneNode(!0),i.id="",hs.clones[e]=i,t):null},discardElement:function(e){e&&hs.garbageBin.appendChild(e),hs.garbageBin.innerHTML=""},dim:function(e){function t(){hs.setStyles(hs.dimmer,{width:i.scrollWidth+"px",height:i.scrollHeight+"px"})}if(!hs.dimmer&&(n=!0,hs.dimmer=hs.createElement("div",{className:"highslide-dimming highslide-viewport-size",owner:"",onclick:function(){hs.close()}},{visibility:"visible",opacity:0},hs.container,!0),/(Android|iPad|iPhone|iPod)/.test(navigator.userAgent))){var i=document.body;t(),hs.addEventListener(window,"resize",t)}hs.dimmer.style.display="";var n=""==hs.dimmer.owner;hs.dimmer.owner+="|"+e.key,n&&(hs.geckoMac&&hs.dimmingGeckoFix?hs.setStyles(hs.dimmer,{background:"url("+hs.graphicsDir+"geckodimmer.png)",opacity:1}):hs.animate(hs.dimmer,{opacity:e.dimmingOpacity},hs.dimmingDuration))},undim:function(e){hs.dimmer&&("undefined"!=typeof e&&(hs.dimmer.owner=hs.dimmer.owner.replace("|"+e,"")),"undefined"!=typeof e&&""!=hs.dimmer.owner||hs.upcoming&&hs.getParam(hs.upcoming,"dimmingOpacity")||(hs.geckoMac&&hs.dimmingGeckoFix?hs.dimmer.style.display="none":hs.animate(hs.dimmer,{opacity:0},hs.dimmingDuration,null,function(){hs.dimmer.style.display="none"})))},transit:function(e,t){var i=t||hs.getExpander();if(t=i,hs.upcoming)return!1;hs.last=i,hs.removeEventListener(document,window.opera?"keypress":"keydown",hs.keyHandler);try{hs.upcoming=e,e.onclick()}catch(e){hs.last=hs.upcoming=null}try{e&&"crossfade"==t.transitions[1]||t.close()}catch(e){}return!1},previousOrNext:function(e,t){var i=hs.getExpander(e);return!!i&&hs.transit(i.getAdjacentAnchor(t),i)},previous:function(e){return hs.previousOrNext(e,-1)},next:function(e){return hs.previousOrNext(e,1)},keyHandler:function(e){if(e||(e=window.event),e.target||(e.target=e.srcElement),"undefined"!=typeof e.target.form)return!0;var t=hs.getExpander(),i=null;switch(e.keyCode){case 70:return t&&t.doFullExpand(),!0;case 32:i=2;break;case 34:case 39:case 40:i=1;break;case 8:case 33:case 37:case 38:i=-1;break;case 27:case 13:i=0}if(null!==i){if(2!=i&&hs.removeEventListener(document,window.opera?"keypress":"keydown",hs.keyHandler),!hs.enableKeyListener)return!0;if(e.preventDefault?e.preventDefault():e.returnValue=!1,t)return 0==i?t.close():2==i?t.slideshow&&t.slideshow.hitSpace():(t.slideshow&&t.slideshow.pause(),hs.previousOrNext(t.key,i)),!1}return!0},registerOverlay:function(e){hs.push(hs.overlays,hs.extend(e,{hsId:"hsId"+hs.idCounter++}))},addSlideshow:function(e){var t=e.slideshowGroup;if("object"==typeof t)for(var i=0;i<t.length;i++){var n={};for(var s in e)n[s]=e[s];n.slideshowGroup=t[i],hs.push(hs.slideshows,n)}else hs.push(hs.slideshows,e)},getWrapperKey:function(e,t){var i,n=/^highslide-wrapper-([0-9]+)$/;for(i=e;i.parentNode;){if(void 0!==i.hsKey)return i.hsKey;if(i.id&&n.test(i.id))return i.id.replace(n,"$1");i=i.parentNode}if(!t)for(i=e;i.parentNode;){if(i.tagName&&hs.isHsAnchor(i))for(var s=0;s<hs.expanders.length;s++){var o=hs.expanders[s];if(o&&o.a==i)return s}i=i.parentNode}return null},getExpander:function(e,t){return"undefined"==typeof e?hs.expanders[hs.focusKey]||null:"number"==typeof e?hs.expanders[e]||null:("string"==typeof e&&(e=hs.$(e)),hs.expanders[hs.getWrapperKey(e,t)]||null)},isHsAnchor:function(e){return e.onclick&&e.onclick.toString().replace(/\s/g," ").match(/hs.(htmlE|e)xpand/)},reOrder:function(){for(var e=0;e<hs.expanders.length;e++)hs.expanders[e]&&hs.expanders[e].isExpanded&&hs.focusTopmost()},mouseClickHandler:function(e){if(e||(e=window.event),e.button>1)return!0;e.target||(e.target=e.srcElement);for(var t=e.target;t.parentNode&&!/highslide-(image|move|html|resize)/.test(t.className);)t=t.parentNode;var i=hs.getExpander(t);if(i&&(i.isClosing||!i.isExpanded))return!0;if(i&&"mousedown"==e.type){if(e.target.form)return!0;var n=t.className.match(/highslide-(image|move|resize)/);if(n)return hs.dragArgs={exp:i,type:n[1],left:i.x.pos,width:i.x.size,top:i.y.pos,height:i.y.size,clickX:e.clientX,clickY:e.clientY},hs.addEventListener(document,"mousemove",hs.dragHandler),e.preventDefault&&e.preventDefault(),/highslide-(image|html)-blur/.test(i.content.className)&&(i.focus(),hs.hasFocused=!0),!1}else if("mouseup"==e.type)if(hs.removeEventListener(document,"mousemove",hs.dragHandler),hs.dragArgs){hs.styleRestoreCursor&&"image"==hs.dragArgs.type&&(hs.dragArgs.exp.content.style.cursor=hs.styleRestoreCursor);var s=hs.dragArgs.hasDragged;s||hs.hasFocused||/(move|resize)/.test(hs.dragArgs.type)?(s||!s&&hs.hasHtmlExpanders)&&hs.dragArgs.exp.doShowHide("hidden"):i.close(),hs.hasFocused=!1,hs.dragArgs=null}else/highslide-image-blur/.test(t.className)&&(t.style.cursor=hs.styleRestoreCursor);return!1},dragHandler:function(e){if(!hs.dragArgs)return!0;e||(e=window.event);var t=hs.dragArgs,i=t.exp;t.dX=e.clientX-t.clickX,t.dY=e.clientY-t.clickY;var n=Math.sqrt(Math.pow(t.dX,2)+Math.pow(t.dY,2));return t.hasDragged||(t.hasDragged="image"!=t.type&&n>0||n>(hs.dragSensitivity||5)),t.hasDragged&&e.clientX>5&&e.clientY>5&&("resize"==t.type?i.resize(t):(i.moveTo(t.left+t.dX,t.top+t.dY),"image"==t.type&&(i.content.style.cursor="move"))),!1},wrapperMouseHandler:function(e){try{e||(e=window.event);var t=/mouseover/i.test(e.type);e.target||(e.target=e.srcElement),e.relatedTarget||(e.relatedTarget=t?e.fromElement:e.toElement);var i=hs.getExpander(e.target);if(!i.isExpanded)return;if(!i||!e.relatedTarget||hs.getExpander(e.relatedTarget,!0)==i||hs.dragArgs)return;for(var n=0;n<i.overlays.length;n++)(function(){var e=hs.$("hsId"+i.overlays[n]);e&&e.hideOnMouseOut&&(t&&hs.setStyles(e,{visibility:"visible",display:""}),hs.animate(e,{opacity:t?e.opacity:0},e.dur))})()}catch(e){}},addEventListener:function(e,t,i){e==document&&"ready"==t&&hs.push(hs.onReady,i);try{e.addEventListener(t,i,!1)}catch(n){try{e.detachEvent("on"+t,i),e.attachEvent("on"+t,i)}catch(n){e["on"+t]=i}}},removeEventListener:function(e,t,i){try{e.removeEventListener(t,i,!1)}catch(n){try{e.detachEvent("on"+t,i)}catch(i){e["on"+t]=null}}},preloadFullImage:function(e){if(hs.continuePreloading&&hs.preloadTheseImages[e]&&"undefined"!=hs.preloadTheseImages[e]){var t=document.createElement("img");t.onload=function(){t=null,hs.preloadFullImage(e+1)},t.src=hs.preloadTheseImages[e]}},preloadImages:function(e){e&&"object"!=typeof e&&(hs.numberOfImagesToPreload=e);for(var t=hs.getAnchors(),i=0;i<t.images.length&&i<hs.numberOfImagesToPreload;i++)hs.push(hs.preloadTheseImages,hs.getSrc(t.images[i]));if(hs.outlineType?new hs.Outline(hs.outlineType,function(){hs.preloadFullImage(0)}):hs.preloadFullImage(0),hs.restoreCursor){hs.createElement("img",{src:hs.graphicsDir+hs.restoreCursor})}},init:function(){if(!hs.container){hs.ieLt7=hs.ie&&hs.uaVersion<7,hs.ieLt9=hs.ie&&hs.uaVersion<9,hs.getPageSize();for(var e in hs.langDefaults)"undefined"!=typeof hs[e]?hs.lang[e]=hs[e]:"undefined"==typeof hs.lang[e]&&"undefined"!=typeof hs.langDefaults[e]&&(hs.lang[e]=hs.langDefaults[e]);hs.container=hs.createElement("div",{className:"highslide-container"},{position:"absolute",left:0,top:0,width:"100%",zIndex:hs.zIndexCounter,direction:"ltr"},document.body,!0),hs.loading=hs.createElement("a",{className:"highslide-loading",title:hs.lang.loadingTitle,innerHTML:hs.lang.loadingText,href:"javascript:;"},{position:"absolute",top:"-9999px",opacity:hs.loadingOpacity,zIndex:1},hs.container),hs.garbageBin=hs.createElement("div",null,{display:"none"},hs.container),hs.viewport=hs.createElement("div",{className:"highslide-viewport highslide-viewport-size"},{visibility:hs.safari&&hs.uaVersion<525?"visible":"hidden","z-index":"1000000"},hs.container,1),Math.linearTween=function(e,t,i,n){return i*e/n+t},Math.easeInQuad=function(e,t,i,n){return i*(e/=n)*e+t},Math.easeOutQuad=function(e,t,i,n){return-i*(e/=n)*(e-2)+t},hs.hideSelects=hs.ieLt7,hs.hideIframes=window.opera&&hs.uaVersion<9||"KDE"==navigator.vendor||hs.ieLt7&&hs.uaVersion<5.5}},ready:function(){if(!hs.isReady){hs.isReady=!0;for(var e=0;e<hs.onReady.length;e++)hs.onReady[e]()}},updateAnchors:function(){for(var e,t,i,n=[],s=[],o={},a=0;a<hs.openerTagNames.length;a++){t=document.getElementsByTagName(hs.openerTagNames[a]);for(var r=0;r<t.length;r++)if(e=t[r],i=hs.isHsAnchor(e)){hs.push(n,e),"hs.expand"==i[0]&&hs.push(s,e);var l=hs.getParam(e,"slideshowGroup")||"none";o[l]||(o[l]=[]),hs.push(o[l],e)}}return hs.anchors={all:n,groups:o,images:s},hs.anchors},getAnchors:function(){return hs.anchors||hs.updateAnchors()},close:function(e){var t=hs.getExpander(e);return t&&t.close(),!1}};hs.fx=function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig||(t.orig={})},hs.fx.prototype={update:function(){(hs.fx.step[this.prop]||hs.fx.step._default)(this),this.options.step&&this.options.step.call(this.elem,this.now,this)},custom:function(e,t,i){function n(e){return s.step(e)}this.startTime=(new Date).getTime(),this.start=e,this.end=t,this.unit=i,this.now=this.start,this.pos=this.state=0;var s=this;n.elem=this.elem,n()&&1==hs.timers.push(n)&&(hs.timerId=setInterval(function(){for(var e=hs.timers,t=0;t<e.length;t++)e[t]()||e.splice(t--,1);e.length||clearInterval(hs.timerId)},13))},step:function(e){var t=(new Date).getTime();if(e||t>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;var i=!0;for(var n in this.options.curAnim)this.options.curAnim[n]!==!0&&(i=!1);return i&&this.options.complete&&this.options.complete.call(this.elem),!1}var s=t-this.startTime;return this.state=s/this.options.duration,this.pos=this.options.easing(s,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},hs.extend(hs.fx,{step:{opacity:function(e){hs.setStyles(e.elem,{opacity:e.now})},_default:function(e){try{e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}catch(e){}}}}),hs.Outline=function(e,t){this.onLoad=t,this.outlineType=e;var i;hs.uaVersion;if(this.hasAlphaImageLoader=hs.ie&&hs.uaVersion<7,!e)return void(t&&t());hs.init(),this.table=hs.createElement("table",{cellSpacing:0},{visibility:"hidden",position:"absolute",borderCollapse:"collapse",width:0},hs.container,!0);var n=hs.createElement("tbody",null,null,this.table,1);this.td=[];for(var s=0;s<=8;s++){s%3==0&&(i=hs.createElement("tr",null,{height:"auto"},n,!0)),this.td[s]=hs.createElement("td",null,null,i,!0);var o=4!=s?{lineHeight:0,fontSize:0}:{position:"relative"};hs.setStyles(this.td[s],o)}this.td[4].className=e+" highslide-outline",this.preloadGraphic()},hs.Outline.prototype={preloadGraphic:function(){var e=hs.graphicsDir+(hs.outlinesDir||"outlines/")+this.outlineType+".png",t=hs.safari&&hs.uaVersion<525?hs.container:null;this.graphic=hs.createElement("img",null,{position:"absolute",top:"-9999px"},t,!0);var i=this;this.graphic.onload=function(){i.onGraphicLoad()},this.graphic.src=e},onGraphicLoad:function(){for(var e=this.offset=this.graphic.width/4,t=[[0,0],[0,-4],[-2,0],[0,-8],0,[-2,-8],[0,-2],[0,-6],[-2,-2]],i={height:2*e+"px",width:2*e+"px"},n=0;n<=8;n++)if(t[n]){if(this.hasAlphaImageLoader){var s=1==n||7==n?"100%":this.graphic.width+"px",o=hs.createElement("div",null,{width:"100%",height:"100%",position:"relative",overflow:"hidden"},this.td[n],!0);hs.createElement("div",null,{filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale, src='"+this.graphic.src+"')",position:"absolute",width:s,height:this.graphic.height+"px",left:t[n][0]*e+"px",top:t[n][1]*e+"px"},o,!0)}else hs.setStyles(this.td[n],{background:"url("+this.graphic.src+") "+t[n][0]*e+"px "+t[n][1]*e+"px"});!window.opera||3!=n&&5!=n||hs.createElement("div",null,i,this.td[n],!0),hs.setStyles(this.td[n],i)}this.graphic=null,hs.pendingOutlines[this.outlineType]&&hs.pendingOutlines[this.outlineType].destroy(),hs.pendingOutlines[this.outlineType]=this,this.onLoad&&this.onLoad()},setPosition:function(e,t,i,n,s){var o=this.exp,t=(o.wrapper.style,t||0),e=e||{x:o.x.pos+t,y:o.y.pos+t,w:o.x.get("wsize")-2*t,h:o.y.get("wsize")-2*t};i&&(this.table.style.visibility=e.h>=4*this.offset?"visible":"hidden"),hs.setStyles(this.table,{left:e.x-this.offset+"px",top:e.y-this.offset+"px",width:e.w+2*this.offset+"px"}),e.w-=2*this.offset,e.h-=2*this.offset,hs.setStyles(this.td[4],{width:e.w>=0?e.w+"px":0,height:e.h>=0?e.h+"px":0}),this.hasAlphaImageLoader&&(this.td[3].style.height=this.td[5].style.height=this.td[4].style.height)},destroy:function(e){e?this.table.style.visibility="hidden":hs.discardElement(this.table)}},hs.Dimension=function(e,t){this.exp=e,this.dim=t,this.ucwh="x"==t?"Width":"Height",this.wh=this.ucwh.toLowerCase(),this.uclt="x"==t?"Left":"Top",this.lt=this.uclt.toLowerCase(),this.ucrb="x"==t?"Right":"Bottom",this.rb=this.ucrb.toLowerCase(),this.p1=this.p2=0},hs.Dimension.prototype={get:function(e){switch(e){case"loadingPos":return this.tpos+this.tb+(this.t-hs.loading["offset"+this.ucwh])/2;case"loadingPosXfade":return this.pos+this.cb+this.p1+(this.size-hs.loading["offset"+this.ucwh])/2;case"wsize":return this.size+2*this.cb+this.p1+this.p2;case"fitsize":return this.clientSize-this.marginMin-this.marginMax;case"maxsize":return this.get("fitsize")-2*this.cb-this.p1-this.p2;case"opos":return this.pos-(this.exp.outline?this.exp.outline.offset:0);case"osize":return this.get("wsize")+(this.exp.outline?2*this.exp.outline.offset:0);case"imgPad":return this.imgSize?Math.round((this.size-this.imgSize)/2):0}},calcBorders:function(){this.cb=(this.exp.content["offset"+this.ucwh]-this.t)/2,this.marginMax=hs["margin"+this.ucrb]},calcThumb:function(){this.t=this.exp.el[this.wh]?parseInt(this.exp.el[this.wh]):this.exp.el["offset"+this.ucwh],this.tpos=this.exp.tpos[this.dim],this.tb=(this.exp.el["offset"+this.ucwh]-this.t)/2,0!=this.tpos&&this.tpos!=-1||(this.tpos=hs.page[this.wh]/2+hs.page["scroll"+this.uclt])},calcExpanded:function(){var e=this.exp;this.justify="auto","center"==e.align?this.justify="center":new RegExp(this.lt).test(e.anchor)?this.justify=null:new RegExp(this.rb).test(e.anchor)&&(this.justify="max"),this.pos=this.tpos-this.cb+this.tb,this.maxHeight&&"x"==this.dim&&(e.maxWidth=Math.min(e.maxWidth||this.full,e.maxHeight*this.full/e.y.full)),this.size=Math.min(this.full,e["max"+this.ucwh]||this.full),this.minSize=e.allowSizeReduction?Math.min(e["min"+this.ucwh],this.full):this.full,e.isImage&&e.useBox&&(this.size=e[this.wh],this.imgSize=this.full),"x"==this.dim&&hs.padToMinWidth&&(this.minSize=e.minWidth),this.target=e["target"+this.dim.toUpperCase()],this.marginMin=hs["margin"+this.uclt],this.scroll=hs.page["scroll"+this.uclt],this.clientSize=hs.page[this.wh]},setSize:function(e){var t=this.exp;t.isImage&&(t.useBox||hs.padToMinWidth)?(this.imgSize=e,this.size=Math.max(this.size,this.imgSize),t.content.style[this.lt]=this.get("imgPad")+"px"):this.size=e,t.content.style[this.wh]=e+"px",t.wrapper.style[this.wh]=this.get("wsize")+"px",t.outline&&t.outline.setPosition(),"x"==this.dim&&t.overlayBox&&t.sizeOverlayBox(!0),"x"==this.dim&&t.slideshow&&t.isImage&&(e==this.full?t.slideshow.disable("full-expand"):t.slideshow.enable("full-expand"))},setPos:function(e){this.pos=e,this.exp.wrapper.style[this.lt]=e+"px",this.exp.outline&&this.exp.outline.setPosition()}},hs.Expander=function(e,t,i,n){if(document.readyState&&hs.ie&&!hs.isReady)return void hs.addEventListener(document,"ready",function(){new hs.Expander(e,t,i,n)});this.a=e,this.custom=i,this.contentType=n||"image",this.isImage=!this.isHtml,hs.continuePreloading=!1,this.overlays=[],this.last=hs.last,hs.last=null,hs.init();for(var s=this.key=hs.expanders.length,o=0;o<hs.overrides.length;o++){var a=hs.overrides[o];this[a]=t&&"undefined"!=typeof t[a]?t[a]:hs[a]}this.src||(this.src=e.href);var r=t&&t.thumbnailId?hs.$(t.thumbnailId):e;r=this.thumb=r.getElementsByTagName("img")[0]||r,this.thumbsUserSetId=r.id||e.id;for(var o=0;o<hs.expanders.length;o++)if(hs.expanders[o]&&hs.expanders[o].a==e&&(!this.last||"crossfade"!=this.transitions[1]))return hs.expanders[o].focus(),!1;if(!hs.allowSimultaneousLoading)for(var o=0;o<hs.expanders.length;o++)hs.expanders[o]&&hs.expanders[o].thumb!=r&&!hs.expanders[o].onLoadStarted&&hs.expanders[o].cancelLoading();hs.expanders[s]=this,hs.allowMultipleInstances||hs.upcoming||(hs.expanders[s-1]&&hs.expanders[s-1].close(),"undefined"!=typeof hs.focusKey&&hs.expanders[hs.focusKey]&&hs.expanders[hs.focusKey].close()),this.el=r,this.tpos=this.pageOrigin||hs.getPosition(r),hs.getPageSize();var l=this.x=new hs.Dimension(this,"x");l.calcThumb();var d=this.y=new hs.Dimension(this,"y");if(d.calcThumb(),this.wrapper=hs.createElement("div",{id:"highslide-wrapper-"+this.key,className:"highslide-wrapper "+this.wrapperClassName},{visibility:"hidden",position:"absolute",zIndex:hs.zIndexCounter+=2},null,!0),this.wrapper.onmouseover=this.wrapper.onmouseout=hs.wrapperMouseHandler,"image"==this.contentType&&2==this.outlineWhileAnimating&&(this.outlineWhileAnimating=0),!this.outlineType||this.last&&this.isImage&&"crossfade"==this.transitions[1])this[this.contentType+"Create"]();else if(hs.pendingOutlines[this.outlineType])this.connectOutline(),this[this.contentType+"Create"]();else{this.showLoading();var c=this;new hs.Outline(this.outlineType,function(){c.connectOutline(),c[c.contentType+"Create"]()})}return!0},hs.Expander.prototype={error:function(e){hs.debug?alert("Line "+e.lineNumber+": "+e.message):window.location.href=this.src},connectOutline:function(){var e=this.outline=hs.pendingOutlines[this.outlineType];e.exp=this,e.table.style.zIndex=this.wrapper.style.zIndex-1,hs.pendingOutlines[this.outlineType]=null},showLoading:function(){if(!this.onLoadStarted&&!this.loading){this.loading=hs.loading;var e=this;this.loading.onclick=function(){e.cancelLoading()};var e=this,t=this.x.get("loadingPos")+"px",i=this.y.get("loadingPos")+"px";if(!n&&this.last&&"crossfade"==this.transitions[1])var n=this.last;n&&(t=n.x.get("loadingPosXfade")+"px",i=n.y.get("loadingPosXfade")+"px",this.loading.style.zIndex=hs.zIndexCounter++),setTimeout(function(){e.loading&&hs.setStyles(e.loading,{left:t,top:i,zIndex:hs.zIndexCounter++})},100)}},imageCreate:function(){var e=this,t=document.createElement("img");this.content=t,t.onload=function(){hs.expanders[e.key]&&e.contentLoaded()},hs.blockRightClick&&(t.oncontextmenu=function(){return!1}),t.className="highslide-image",hs.setStyles(t,{visibility:"hidden",display:"block",position:"absolute",maxWidth:"9999px",zIndex:3}),t.title=hs.lang.restoreTitle,hs.safari&&hs.uaVersion<525&&hs.container.appendChild(t),hs.ie&&hs.flushImgSize&&(t.src=null),t.src=this.src,this.showLoading()},contentLoaded:function(){try{if(!this.content)return;if(this.content.onload=null,this.onLoadStarted)return;this.onLoadStarted=!0;var e=this.x,t=this.y;this.loading&&(hs.setStyles(this.loading,{top:"-9999px"}),this.loading=null),e.full=this.content.width,t.full=this.content.height,hs.setStyles(this.content,{width:e.t+"px",height:t.t+"px"}),this.wrapper.appendChild(this.content),hs.container.appendChild(this.wrapper),e.calcBorders(),t.calcBorders(),hs.setStyles(this.wrapper,{left:e.tpos+e.tb-e.cb+"px",top:t.tpos+e.tb-t.cb+"px"}),this.initSlideshow(),this.getOverlays();var i=e.full/t.full;if(e.calcExpanded(),this.justify(e),t.calcExpanded(),this.justify(t),this.overlayBox&&this.sizeOverlayBox(0,1),this.allowSizeReduction){this.correctRatio(i);var n=this.slideshow;if(n&&this.last&&n.controls&&n.fixedControls){var s,o=n.overlayOptions.position||"";for(var a in hs.oPos)for(var r=0;r<5;r++)s=this[a],o.match(hs.oPos[a][r])&&(s.pos=this.last[a].pos+(this.last[a].p1-s.p1)+(this.last[a].size-s.size)*[0,0,.5,1,1][r],"fit"==n.fixedControls&&(s.pos+s.size+s.p1+s.p2>s.scroll+s.clientSize-s.marginMax&&(s.pos=s.scroll+s.clientSize-s.size-s.marginMin-s.marginMax-s.p1-s.p2),s.pos<s.scroll+s.marginMin&&(s.pos=s.scroll+s.marginMin)))}this.isImage&&this.x.full>(this.x.imgSize||this.x.size)&&(this.createFullExpand(),1==this.overlays.length&&this.sizeOverlayBox())}this.show()}catch(e){this.error(e)}},justify:function(e,t){var i,n=e.target,s=e==this.x?"x":"y";if(n&&n.match(/ /)&&(i=n.split(" "),n=i[0]),n&&hs.$(n))e.pos=hs.getPosition(hs.$(n))[s],i&&i[1]&&i[1].match(/^[-]?[0-9]+px$/)&&(e.pos+=parseInt(i[1])),e.size<e.minSize&&(e.size=e.minSize);else if("auto"==e.justify||"center"==e.justify){var o=!1,a=e.exp.allowSizeReduction;"center"==e.justify?e.pos=Math.round(e.scroll+(e.clientSize+e.marginMin-e.marginMax-e.get("wsize"))/2):e.pos=Math.round(e.pos-(e.get("wsize")-e.t)/2),e.pos<e.scroll+e.marginMin&&(e.pos=e.scroll+e.marginMin,o=!0),!t&&e.size<e.minSize&&(e.size=e.minSize,a=!1),e.pos+e.get("wsize")>e.scroll+e.clientSize-e.marginMax&&(!t&&o&&a?e.size=Math.min(e.size,e.get("y"==s?"fitsize":"maxsize")):e.get("wsize")<e.get("fitsize")?e.pos=e.scroll+e.clientSize-e.marginMax-e.get("wsize"):(e.pos=e.scroll+e.marginMin,!t&&a&&(e.size=e.get("y"==s?"fitsize":"maxsize")))),!t&&e.size<e.minSize&&(e.size=e.minSize,a=!1)}else"max"==e.justify&&(e.pos=Math.floor(e.pos-e.size+e.t));if(e.pos<e.marginMin){var r=e.pos;e.pos=e.marginMin,a&&!t&&(e.size=e.size-(e.pos-r))}},correctRatio:function(e){var t=this.x,i=this.y,n=!1,s=Math.min(t.full,t.size),o=Math.min(i.full,i.size),a=this.useBox||hs.padToMinWidth;s/o>e?(s=o*e,s<t.minSize&&(s=t.minSize,o=s/e),n=!0):s/o<e&&(o=s/e,n=!0),hs.padToMinWidth&&t.full<t.minSize?(t.imgSize=t.full,i.size=i.imgSize=i.full):this.useBox?(t.imgSize=s,i.imgSize=o):(t.size=s,i.size=o),n=this.fitOverlayBox(this.useBox?null:e,n),a&&i.size<i.imgSize&&(i.imgSize=i.size,t.imgSize=i.size*e),(n||a)&&(t.pos=t.tpos-t.cb+t.tb,t.minSize=t.size,this.justify(t,!0),i.pos=i.tpos-i.cb+i.tb,i.minSize=i.size,this.justify(i,!0),this.overlayBox&&this.sizeOverlayBox())},fitOverlayBox:function(e,t){var i=this.x,n=this.y;if(this.overlayBox)for(;n.size>this.minHeight&&i.size>this.minWidth&&n.get("wsize")>n.get("fitsize");)n.size-=10,e&&(i.size=n.size*e),this.sizeOverlayBox(0,1),t=!0;return t},show:function(){var e=this.x,t=this.y;this.doShowHide("hidden"),this.slideshow&&this.slideshow.thumbstrip&&this.slideshow.thumbstrip.selectThumb(),this.changeSize(1,{wrapper:{width:e.get("wsize"),height:t.get("wsize"),left:e.pos,top:t.pos},content:{left:e.p1+e.get("imgPad"),top:t.p1+t.get("imgPad"),width:e.imgSize||e.size,height:t.imgSize||t.size}},hs.expandDuration)},changeSize:function(e,t,i){var n=this.transitions,s=e?this.last?this.last.a:null:hs.upcoming,o=n[1]&&s&&hs.getParam(s,"transitions")[1]==n[1]?n[1]:n[0];if(this[o]&&"expand"!=o)return void this[o](e,t);this.outline&&!this.outlineWhileAnimating&&(e?this.outline.setPosition():this.outline.destroy()),e||this.destroyOverlays();var a=this,r=a.x,l=a.y,d=this.easing;e||(d=this.easingClose||d);var c=e?function(){a.outline&&(a.outline.table.style.visibility="visible"),setTimeout(function(){a.afterExpand();
},50)}:function(){a.afterClose()};e&&hs.setStyles(this.wrapper,{width:r.t+"px",height:l.t+"px"}),this.fadeInOut&&(hs.setStyles(this.wrapper,{opacity:e?0:1}),hs.extend(t.wrapper,{opacity:e})),hs.animate(this.wrapper,t.wrapper,{duration:i,easing:d,step:function(t,i){if(a.outline&&a.outlineWhileAnimating&&"top"==i.prop){var n=e?i.pos:1-i.pos,s={w:r.t+(r.get("wsize")-r.t)*n,h:l.t+(l.get("wsize")-l.t)*n,x:r.tpos+(r.pos-r.tpos)*n,y:l.tpos+(l.pos-l.tpos)*n};a.outline.setPosition(s,0,1)}}}),hs.animate(this.content,t.content,i,d,c),e&&(this.wrapper.style.visibility="visible",this.content.style.visibility="visible",this.a.className+=" highslide-active-anchor")},fade:function(e,t){this.outlineWhileAnimating=!1;var i=this,n=e?hs.expandDuration:0;if(e&&(hs.animate(this.wrapper,t.wrapper,0),hs.setStyles(this.wrapper,{opacity:0,visibility:"visible"}),hs.animate(this.content,t.content,0),this.content.style.visibility="visible",hs.animate(this.wrapper,{opacity:1},n,null,function(){i.afterExpand()})),this.outline){this.outline.table.style.zIndex=this.wrapper.style.zIndex;for(var s=e||-1,o=this.outline.offset,a=e?3:o,r=e?o:3,l=a;s*l<=s*r;l+=s,n+=25)!function(){var t=e?r-l:a-l;setTimeout(function(){i.outline.setPosition(0,t,1)},n)}()}e||setTimeout(function(){i.outline&&i.outline.destroy(i.preserveContent),i.destroyOverlays(),hs.animate(i.wrapper,{opacity:0},hs.restoreDuration,null,function(){i.afterClose()})},n)},crossfade:function(e,t,i){if(e){var n=this,s=this.last,o=this.x,a=this.y,r=s.x,l=s.y,d=this.wrapper,c=this.content,h=this.overlayBox;hs.removeEventListener(document,"mousemove",hs.dragHandler),hs.setStyles(c,{width:(o.imgSize||o.size)+"px",height:(a.imgSize||a.size)+"px"}),h&&(h.style.overflow="visible"),this.outline=s.outline,this.outline&&(this.outline.exp=n),s.outline=null;var u=hs.createElement("div",{className:"highslide-"+this.contentType},{position:"absolute",zIndex:4,overflow:"hidden",display:"none"}),f={oldImg:s,newImg:this};for(var p in f)this[p]=f[p].content.cloneNode(1),hs.setStyles(this[p],{position:"absolute",border:0,visibility:"visible"}),u.appendChild(this[p]);d.appendChild(u),h&&(h.className="",d.appendChild(h)),u.style.display="",s.content.style.display="none",hs.safari&&hs.uaVersion<525&&(this.wrapper.style.visibility="visible"),hs.animate(d,{width:o.size},{duration:hs.transitionDuration,step:function(e,t){var i,f=t.pos,p=1-f,m={},g=["pos","size","p1","p2"];for(var v in g)i=g[v],m["x"+i]=Math.round(p*r[i]+f*o[i]),m["y"+i]=Math.round(p*l[i]+f*a[i]),m.ximgSize=Math.round(p*(r.imgSize||r.size)+f*(o.imgSize||o.size)),m.ximgPad=Math.round(p*r.get("imgPad")+f*o.get("imgPad")),m.yimgSize=Math.round(p*(l.imgSize||l.size)+f*(a.imgSize||a.size)),m.yimgPad=Math.round(p*l.get("imgPad")+f*a.get("imgPad"));n.outline&&n.outline.setPosition({x:m.xpos,y:m.ypos,w:m.xsize+m.xp1+m.xp2+2*o.cb,h:m.ysize+m.yp1+m.yp2+2*a.cb}),s.wrapper.style.clip="rect("+(m.ypos-l.pos)+"px, "+(m.xsize+m.xp1+m.xp2+m.xpos+2*r.cb-r.pos)+"px, "+(m.ysize+m.yp1+m.yp2+m.ypos+2*l.cb-l.pos)+"px, "+(m.xpos-r.pos)+"px)",hs.setStyles(c,{top:m.yp1+a.get("imgPad")+"px",left:m.xp1+o.get("imgPad")+"px",marginTop:a.pos-m.ypos+"px",marginLeft:o.pos-m.xpos+"px"}),hs.setStyles(d,{top:m.ypos+"px",left:m.xpos+"px",width:m.xp1+m.xp2+m.xsize+2*o.cb+"px",height:m.yp1+m.yp2+m.ysize+2*a.cb+"px"}),hs.setStyles(u,{width:(m.ximgSize||m.xsize)+"px",height:(m.yimgSize||m.ysize)+"px",left:m.xp1+m.ximgPad+"px",top:m.yp1+m.yimgPad+"px",visibility:"visible"}),hs.setStyles(n.oldImg,{top:l.pos-m.ypos+l.p1-m.yp1+l.get("imgPad")-m.yimgPad+"px",left:r.pos-m.xpos+r.p1-m.xp1+r.get("imgPad")-m.ximgPad+"px"}),hs.setStyles(n.newImg,{opacity:f,top:a.pos-m.ypos+a.p1-m.yp1+a.get("imgPad")-m.yimgPad+"px",left:o.pos-m.xpos+o.p1-m.xp1+o.get("imgPad")-m.ximgPad+"px"}),h&&hs.setStyles(h,{width:m.xsize+"px",height:m.ysize+"px",left:m.xp1+o.cb+"px",top:m.yp1+a.cb+"px"})},complete:function(){d.style.visibility=c.style.visibility="visible",c.style.display="block",hs.discardElement(u),n.afterExpand(),s.afterClose(),n.last=null}})}},reuseOverlay:function(e,t){if(!this.last)return!1;for(var i=0;i<this.last.overlays.length;i++){var n=hs.$("hsId"+this.last.overlays[i]);if(n&&n.hsId==e.hsId)return this.genOverlayBox(),n.reuse=this.key,hs.push(this.overlays,this.last.overlays[i]),!0}return!1},afterExpand:function(){this.isExpanded=!0,this.focus(),this.dimmingOpacity&&hs.dim(this),hs.upcoming&&hs.upcoming==this.a&&(hs.upcoming=null),this.prepareNextOutline();var e=hs.page,t=hs.mouse.x+e.scrollLeft,i=hs.mouse.y+e.scrollTop;this.mouseIsOver=this.x.pos<t&&t<this.x.pos+this.x.get("wsize")&&this.y.pos<i&&i<this.y.pos+this.y.get("wsize"),this.overlayBox&&this.showOverlays()},prepareNextOutline:function(){var e=this.key,t=this.outlineType;new hs.Outline(t,function(){try{hs.expanders[e].preloadNext()}catch(e){}})},preloadNext:function(){var e=this.getAdjacentAnchor(1);if(e&&e.onclick.toString().match(/hs\.expand/)){hs.createElement("img",{src:hs.getSrc(e)})}},getAdjacentAnchor:function(e){var t=this.getAnchorIndex(),i=hs.anchors.groups[this.slideshowGroup||"none"];if(i&&!i[t+e]&&this.slideshow&&this.slideshow.repeat){if(1==e)return i[0];if(e==-1)return i[i.length-1]}return i&&i[t+e]||null},getAnchorIndex:function(){var e=hs.getAnchors().groups[this.slideshowGroup||"none"];if(e)for(var t=0;t<e.length;t++)if(e[t]==this.a)return t;return null},getNumber:function(){if(this[this.numberPosition]){var e=hs.anchors.groups[this.slideshowGroup||"none"];if(e){var t=hs.lang.number.replace("%1",this.getAnchorIndex()+1).replace("%2",e.length);this[this.numberPosition].innerHTML='<div class="highslide-number">'+t+"</div>"+this[this.numberPosition].innerHTML}}},initSlideshow:function(){if(this.last)this.slideshow=this.last.slideshow;else for(var e=0;e<hs.slideshows.length;e++){var t=hs.slideshows[e],i=t.slideshowGroup;"undefined"!=typeof i&&null!==i&&i!==this.slideshowGroup||(this.slideshow=new hs.Slideshow(this.key,t))}var t=this.slideshow;if(t){var n=t.expKey=this.key;t.checkFirstAndLast(),t.disable("full-expand"),t.controls&&this.createOverlay(hs.extend(t.overlayOptions||{},{overlayId:t.controls,hsId:"controls",zIndex:5})),t.thumbstrip&&t.thumbstrip.add(this),!this.last&&this.autoplay&&t.play(!0),t.autoplay&&(t.autoplay=setTimeout(function(){hs.next(n)},t.interval||500))}},cancelLoading:function(){hs.discardElement(this.wrapper),hs.expanders[this.key]=null,hs.upcoming==this.a&&(hs.upcoming=null),hs.undim(this.key),this.loading&&(hs.loading.style.left="-9999px")},writeCredits:function(){this.credits||(this.credits=hs.createElement("a",{href:hs.creditsHref,target:hs.creditsTarget,className:"highslide-credits",innerHTML:hs.lang.creditsText,title:hs.lang.creditsTitle}),this.createOverlay({overlayId:this.credits,position:this.creditsPosition||"top left",hsId:"credits"}))},getInline:function(types,addOverlay){for(var i=0;i<types.length;i++){var type=types[i],s=null;if(!this[type+"Id"]&&this.thumbsUserSetId&&(this[type+"Id"]=type+"-for-"+this.thumbsUserSetId),this[type+"Id"]&&(this[type]=hs.getNode(this[type+"Id"])),!this[type]&&!this[type+"Text"]&&this[type+"Eval"])try{s=eval(this[type+"Eval"])}catch(e){}if(!this[type]&&this[type+"Text"]&&(s=this[type+"Text"]),!this[type]&&!s&&(this[type]=hs.getNode(this.a["_"+type+"Id"]),!this[type]))for(var next=this.a.nextSibling;next&&!hs.isHsAnchor(next);){if(new RegExp("highslide-"+type).test(next.className||null)){next.id||(this.a["_"+type+"Id"]=next.id="hsId"+hs.idCounter++),this[type]=hs.getNode(next.id);break}next=next.nextSibling}if(this[type]||s||this.numberPosition!=type||(s="\n"),!this[type]&&s&&(this[type]=hs.createElement("div",{className:"highslide-"+type,innerHTML:s})),addOverlay&&this[type]){var o={position:"heading"==type?"above":"below"};for(var x in this[type+"Overlay"])o[x]=this[type+"Overlay"][x];o.overlayId=this[type],this.createOverlay(o)}}},doShowHide:function(e){hs.hideSelects&&this.showHideElements("SELECT",e),hs.hideIframes&&this.showHideElements("IFRAME",e),hs.geckoMac&&this.showHideElements("*",e)},showHideElements:function(e,t){for(var i=document.getElementsByTagName(e),n="*"==e?"overflow":"visibility",s=0;s<i.length;s++)if("visibility"==n||"auto"==document.defaultView.getComputedStyle(i[s],"").getPropertyValue("overflow")||null!=i[s].getAttribute("hidden-by")){var o=i[s].getAttribute("hidden-by");if("visible"==t&&o)o=o.replace("["+this.key+"]",""),i[s].setAttribute("hidden-by",o),o||(i[s].style[n]=i[s].origProp);else if("hidden"==t){var a=hs.getPosition(i[s]);if(a.w=i[s].offsetWidth,a.h=i[s].offsetHeight,!this.dimmingOpacity)var r=a.x+a.w<this.x.get("opos")||a.x>this.x.get("opos")+this.x.get("osize"),l=a.y+a.h<this.y.get("opos")||a.y>this.y.get("opos")+this.y.get("osize");var d=hs.getWrapperKey(i[s]);r||l||d==this.key?o!="["+this.key+"]"&&hs.focusKey!=d||d==this.key?o&&o.indexOf("["+this.key+"]")>-1&&i[s].setAttribute("hidden-by",o.replace("["+this.key+"]","")):(i[s].setAttribute("hidden-by",""),i[s].style[n]=i[s].origProp||""):o?o.indexOf("["+this.key+"]")==-1&&i[s].setAttribute("hidden-by",o+"["+this.key+"]"):(i[s].setAttribute("hidden-by","["+this.key+"]"),i[s].origProp=i[s].style[n],i[s].style[n]="hidden")}}},focus:function(){this.wrapper.style.zIndex=hs.zIndexCounter+=2;for(var e=0;e<hs.expanders.length;e++)if(hs.expanders[e]&&e==hs.focusKey){var t=hs.expanders[e];t.content.className+=" highslide-"+t.contentType+"-blur",t.content.style.cursor=hs.ieLt7?"hand":"pointer",t.content.title=hs.lang.focusTitle}this.outline&&(this.outline.table.style.zIndex=this.wrapper.style.zIndex-1),this.content.className="highslide-"+this.contentType,this.content.title=hs.lang.restoreTitle,hs.restoreCursor&&(hs.styleRestoreCursor=window.opera?"pointer":"url("+hs.graphicsDir+hs.restoreCursor+"), pointer",hs.ieLt7&&hs.uaVersion<6&&(hs.styleRestoreCursor="hand"),this.content.style.cursor=hs.styleRestoreCursor),hs.focusKey=this.key,hs.addEventListener(document,window.opera?"keypress":"keydown",hs.keyHandler)},moveTo:function(e,t){this.x.setPos(e),this.y.setPos(t)},resize:function(e){var t,i,n=e.width/e.height;t=Math.max(e.width+e.dX,Math.min(this.minWidth,this.x.full)),this.isImage&&Math.abs(t-this.x.full)<12&&(t=this.x.full),i=t/n,i<Math.min(this.minHeight,this.y.full)&&(i=Math.min(this.minHeight,this.y.full),this.isImage&&(t=i*n)),this.resizeTo(t,i)},resizeTo:function(e,t){this.y.setSize(t),this.x.setSize(e),this.wrapper.style.height=this.y.get("wsize")+"px"},close:function(){if(!this.isClosing&&this.isExpanded){"crossfade"==this.transitions[1]&&hs.upcoming&&(hs.getExpander(hs.upcoming).cancelLoading(),hs.upcoming=null),this.isClosing=!0,this.slideshow&&!hs.upcoming&&this.slideshow.pause(),hs.removeEventListener(document,window.opera?"keypress":"keydown",hs.keyHandler);try{this.content.style.cursor="default",this.changeSize(0,{wrapper:{width:this.x.t,height:this.y.t,left:this.x.tpos-this.x.cb+this.x.tb,top:this.y.tpos-this.y.cb+this.y.tb},content:{left:0,top:0,width:this.x.t,height:this.y.t}},hs.restoreDuration)}catch(e){this.afterClose()}}},createOverlay:function(e){var t=e.overlayId,i="viewport"==e.relativeTo&&!/panel$/.test(e.position);if("string"==typeof t&&(t=hs.getNode(t)),e.html&&(t=hs.createElement("div",{innerHTML:e.html})),t&&"string"!=typeof t&&(t.style.display="block",e.hsId=e.hsId||e.overlayId,"crossfade"!=this.transitions[1]||!this.reuseOverlay(e,t))){this.genOverlayBox();var n=e.width&&/^[0-9]+(px|%)$/.test(e.width)?e.width:"auto";/^(left|right)panel$/.test(e.position)&&!/^[0-9]+px$/.test(e.width)&&(n="200px");var s=hs.createElement("div",{id:"hsId"+hs.idCounter++,hsId:e.hsId},{position:"absolute",visibility:"hidden",width:n,direction:hs.lang.cssDirection||"",opacity:0},i?hs.viewport:this.overlayBox,!0);i&&(s.hsKey=this.key),s.appendChild(t),hs.extend(s,{opacity:1,offsetX:0,offsetY:0,dur:0===e.fade||e.fade===!1||2==e.fade&&hs.ie?0:250}),hs.extend(s,e),this.gotOverlays&&(this.positionOverlay(s),s.hideOnMouseOut&&!this.mouseIsOver||hs.animate(s,{opacity:s.opacity},s.dur)),hs.push(this.overlays,hs.idCounter-1)}},positionOverlay:function(e){var t=e.position||"middle center",i="viewport"==e.relativeTo,n=e.offsetX,s=e.offsetY;i?(hs.viewport.style.display="block",e.hsKey=this.key,e.offsetWidth>e.parentNode.offsetWidth&&(e.style.width="100%")):e.parentNode!=this.overlayBox&&this.overlayBox.appendChild(e),/left$/.test(t)&&(e.style.left=n+"px"),/center$/.test(t)&&hs.setStyles(e,{left:"50%",marginLeft:n-Math.round(e.offsetWidth/2)+"px"}),/right$/.test(t)&&(e.style.right=-n+"px"),/^leftpanel$/.test(t)?(hs.setStyles(e,{right:"100%",marginRight:this.x.cb+"px",top:-this.y.cb+"px",bottom:-this.y.cb+"px",overflow:"auto"}),this.x.p1=e.offsetWidth):/^rightpanel$/.test(t)&&(hs.setStyles(e,{left:"100%",marginLeft:this.x.cb+"px",top:-this.y.cb+"px",bottom:-this.y.cb+"px",overflow:"auto"}),this.x.p2=e.offsetWidth);var o=e.parentNode.offsetHeight;e.style.height="auto",i&&e.offsetHeight>o&&(e.style.height=hs.ieLt7?o+"px":"100%"),/^top/.test(t)&&(e.style.top=s+"px"),/^middle/.test(t)&&hs.setStyles(e,{top:"50%",marginTop:s-Math.round(e.offsetHeight/2)+"px"}),/^bottom/.test(t)&&(e.style.bottom=-s+"px"),/^above$/.test(t)?(hs.setStyles(e,{left:-this.x.p1-this.x.cb+"px",right:-this.x.p2-this.x.cb+"px",bottom:"100%",marginBottom:this.y.cb+"px",width:"auto"}),this.y.p1=e.offsetHeight):/^below$/.test(t)&&(hs.setStyles(e,{position:"relative",left:-this.x.p1-this.x.cb+"px",right:-this.x.p2-this.x.cb+"px",top:"100%",marginTop:this.y.cb+"px",width:"auto"}),this.y.p2=e.offsetHeight,e.style.position="absolute")},getOverlays:function(){this.getInline(["heading","caption"],!0),this.getNumber(),this.heading&&this.dragByHeading&&(this.heading.className+=" highslide-move"),hs.showCredits&&this.writeCredits();for(var e=0;e<hs.overlays.length;e++){var t=hs.overlays[e],i=t.thumbnailId,n=t.slideshowGroup;(!i&&!n||i&&i==this.thumbsUserSetId||n&&n===this.slideshowGroup)&&this.createOverlay(t)}for(var s=[],e=0;e<this.overlays.length;e++){var t=hs.$("hsId"+this.overlays[e]);/panel$/.test(t.position)?this.positionOverlay(t):hs.push(s,t)}for(var e=0;e<s.length;e++)this.positionOverlay(s[e]);this.gotOverlays=!0},genOverlayBox:function(){this.overlayBox||(this.overlayBox=hs.createElement("div",{className:this.wrapperClassName},{position:"absolute",width:(this.x.size||(this.useBox?this.width:null)||this.x.full)+"px",height:(this.y.size||this.y.full)+"px",visibility:"hidden",overflow:"hidden",zIndex:hs.ie?4:"auto"},hs.container,!0))},sizeOverlayBox:function(e,t){var i=this.overlayBox,n=this.x,s=this.y;if(hs.setStyles(i,{width:n.size+"px",height:s.size+"px"}),e||t)for(var o=0;o<this.overlays.length;o++){var a=hs.$("hsId"+this.overlays[o]),r=hs.ieLt7||"BackCompat"==document.compatMode;a&&/^(above|below)$/.test(a.position)&&(r&&(a.style.width=i.offsetWidth+2*n.cb+n.p1+n.p2+"px"),s["above"==a.position?"p1":"p2"]=a.offsetHeight),a&&r&&/^(left|right)panel$/.test(a.position)&&(a.style.height=i.offsetHeight+2*s.cb+"px")}e&&(hs.setStyles(this.content,{top:s.p1+"px"}),hs.setStyles(i,{top:s.p1+s.cb+"px"}))},showOverlays:function(){var e=this.overlayBox;e.className="",hs.setStyles(e,{top:this.y.p1+this.y.cb+"px",left:this.x.p1+this.x.cb+"px",overflow:"visible"}),hs.safari&&(e.style.visibility="visible"),this.wrapper.appendChild(e);for(var t=0;t<this.overlays.length;t++){var i=hs.$("hsId"+this.overlays[t]);i.style.zIndex=i.zIndex||4,i.hideOnMouseOut&&!this.mouseIsOver||(i.style.visibility="visible",hs.setStyles(i,{visibility:"visible",display:""}),hs.animate(i,{opacity:i.opacity},i.dur))}},destroyOverlays:function(){if(this.overlays.length){if(this.slideshow){var e=this.slideshow.controls;e&&hs.getExpander(e)==this&&e.parentNode.removeChild(e)}for(var t=0;t<this.overlays.length;t++){var i=hs.$("hsId"+this.overlays[t]);i&&i.parentNode==hs.viewport&&hs.getExpander(i)==this&&hs.discardElement(i)}hs.discardElement(this.overlayBox)}},doShowOriDoc:function(){var readStr=this.a.getAttribute("data-click");return null==readStr||""==readStr||void 0==readStr?(alert("该文件不支持查看原文件！"),!1):void eval(readStr)},createFullExpand:function(){return this.slideshow&&this.slideshow.controls?void this.slideshow.enable("full-expand"):(this.fullExpandLabel=hs.createElement("a",{href:"javascript:hs.expanders["+this.key+"].doFullExpand();",title:hs.lang.fullExpandTitle,className:"highslide-full-expand"}),void this.createOverlay({overlayId:this.fullExpandLabel,position:hs.fullExpandPosition,hideOnMouseOut:!0,opacity:hs.fullExpandOpacity}))},doFullExpand:function(){try{this.fullExpandLabel&&hs.discardElement(this.fullExpandLabel),this.focus();var e=this.x.size,t=this.y.size;this.resizeTo(this.x.full,this.y.full);var i=this.x.pos-(this.x.size-e)/2;i<hs.marginLeft&&(i=hs.marginLeft);var n=this.y.pos-(this.y.size-t)/2;n<hs.marginTop&&(n=hs.marginTop),this.moveTo(i,n),this.doShowHide("hidden")}catch(e){this.error(e)}},afterClose:function(){this.a.className=this.a.className.replace("highslide-active-anchor",""),this.doShowHide("visible"),this.outline&&this.outlineWhileAnimating&&this.outline.destroy(),hs.discardElement(this.wrapper),this.destroyOverlays(),hs.viewport.childNodes.length||(hs.viewport.style.display="none"),this.dimmingOpacity&&hs.undim(this.key),hs.expanders[this.key]=null,hs.reOrder()}},hs.Slideshow=function(e,t){hs.dynamicallyUpdateAnchors!==!1&&hs.updateAnchors(),this.expKey=e;for(var i in t)this[i]=t[i];this.useControls&&this.getControls(),this.thumbstrip&&(this.thumbstrip=hs.Thumbstrip(this))},hs.Slideshow.prototype={getControls:function(){this.controls=hs.createElement("div",{innerHTML:hs.replaceLang(hs.skin.controls)},null,hs.container),$(this.controls).parent().hasClass("highslide-container")&&$(this.controls).remove();var e=["play","pause","previous","next","move","full-expand","close","originalDoc"];this.btn={};for(var t=0;t<e.length;t++)this.btn[e[t]]=hs.getElementByClass(this.controls,"li","highslide-"+e[t]),this.enable(e[t]);this.btn.pause.style.display="none"},checkFirstAndLast:function(){if(!this.repeat&&this.controls){var e=hs.expanders[this.expKey],t=e.getAnchorIndex(),i=/disabled$/;0==t?this.disable("previous"):i.test(this.btn.previous.getElementsByTagName("a")[0].className)&&this.enable("previous"),t+1==hs.anchors.groups[e.slideshowGroup||"none"].length?(this.disable("next"),this.disable("play")):i.test(this.btn.next.getElementsByTagName("a")[0].className)&&(this.enable("next"),this.enable("play"))}},enable:function(e){if(this.btn){var t=this,i=this.btn[e].getElementsByTagName("a")[0],n=/disabled$/;i.onclick=function(){return t[e](),!1},n.test(i.className)&&(i.className=i.className.replace(n,""))}},disable:function(e){if(this.btn){var t=this.btn[e].getElementsByTagName("a")[0];t.onclick=function(){return!1},/disabled$/.test(t.className)||(t.className+=" disabled")}},hitSpace:function(){this.autoplay?this.pause():this.play()},play:function(e){this.btn&&(this.btn.play.style.display="none",this.btn.pause.style.display=""),this.autoplay=!0,e||hs.next(this.expKey)},pause:function(){this.btn&&(this.btn.pause.style.display="none",this.btn.play.style.display=""),clearTimeout(this.autoplay),this.autoplay=null},previous:function(){this.pause(),hs.previous(this.btn.previous)},next:function(){this.pause(),hs.next(this.btn.next)},move:function(){},"full-expand":function(){hs.getExpander().doFullExpand()},close:function(){hs.close(this.btn.close)},originalDoc:function(){hs.getExpander().doShowOriDoc()}},hs.Thumbstrip=function(e){function t(e){hs.extend(a||{},{overlayId:h,hsId:"thumbstrip",className:"highslide-thumbstrip-"+r+"-overlay "+(a.className||"")}),hs.ieLt7&&(a.fade=0),e.createOverlay(a),hs.setStyles(h.parentNode,{overflow:"hidden"})}function i(e){n(void 0,Math.round(e*h[c?"offsetWidth":"offsetHeight"]*.7))}function n(t,i){if(void 0===t)for(var n=0;n<o.length;n++)if(o[n]==hs.expanders[e.expKey].a){t=n;break}if(void 0!==t){var s=h.getElementsByTagName("a"),a=s[t],r=a.parentNode,l=c?"Left":"Top",d=c?"Width":"Height",u="offset"+l,y="offset"+d,b=f.parentNode.parentNode[y],x=b-v[y],w=parseInt(v.style[c?"left":"top"])||0,C=w;if(void 0!==i)C=w-i,x>0&&(x=0),C>0&&(C=0),C<x&&(C=x);else{for(var n=0;n<s.length;n++)s[n].className="";a.className="highslide-active-anchor";var _=t>0?s[t-1].parentNode[u]:r[u],k=r[u]+r[y]+(s[t+1]?s[t+1].parentNode[y]:0);k>b-w?C=b-k:_<-w&&(C=-_)}var T=r[u]+(r[y]-g[y])/2+C;hs.animate(v,c?{left:C}:{top:C},null,"easeOutQuad"),hs.animate(g,c?{left:T}:{top:T},null,"easeOutQuad"),p.style.display=C<0?"block":"none",m.style.display=C>x?"block":"none"}}for(var s,o=hs.anchors.groups[hs.expanders[e.expKey].slideshowGroup||"none"],a=e.thumbstrip,r=a.mode||"horizontal",l="float"==r,d=l?["div","ul","li","span"]:["table","tbody","tr","td"],c="horizontal"==r,h=hs.createElement("div",{className:"highslide-thumbstrip highslide-thumbstrip-"+r,innerHTML:'<div class="highslide-thumbstrip-inner"><'+d[0]+"><"+d[1]+"></"+d[1]+"></"+d[0]+'></div><div class="highslide-scroll-up"><div></div></div><div class="highslide-scroll-down"><div></div></div><div class="highslide-marker"><div></div></div>'},{display:"none"},hs.container),u=h.childNodes,f=u[0],p=u[1],m=u[2],g=u[3],v=f.firstChild,y=h.getElementsByTagName(d[1])[0],b=0;b<o.length;b++)0!=b&&c||(s=hs.createElement(d[2],null,null,y)),function(){var e=o[b],t=hs.createElement(d[3],null,null,s);hs.createElement("a",{href:e.href,title:e.title,onclick:function(){return!/highslide-active-anchor/.test(this.className)&&(hs.getExpander(this).focus(),hs.transit(e))},innerHTML:hs.stripItemFormatter?hs.stripItemFormatter(e):e.innerHTML},null,t)}();return l||(p.onclick=function(){i(-1)},m.onclick=function(){i(1)},hs.addEventListener(y,void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",function(e){var t=0;e=e||window.event,e.wheelDelta?(t=e.wheelDelta/120,hs.opera&&(t=-t)):e.detail&&(t=-e.detail/3),t&&i(.2*-t),e.preventDefault&&e.preventDefault(),e.returnValue=!1})),{add:t,selectThumb:n}},hs.langDefaults=hs.lang;var HsExpander=hs.Expander;hs.ie&&window==window.top&&!function(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,50)}hs.ready()}(),hs.addEventListener(document,"DOMContentLoaded",hs.ready),hs.addEventListener(window,"load",hs.ready),hs.addEventListener(document,"ready",function(){function e(e,t){if(hs.ie&&(hs.uaVersion<9||n)){var s=document.styleSheets[document.styleSheets.length-1];"object"==typeof s.addRule&&s.addRule(e,t)}else i.appendChild(document.createTextNode(e+" {"+t+"}"))}function t(e){return"expression( ( ( ignoreMe = document.documentElement."+e+" ? document.documentElement."+e+" : document.body."+e+" ) ) + 'px' );"}if(hs.expandCursor||hs.dimmingOpacity){var i=hs.createElement("style",{type:"text/css"},null,document.getElementsByTagName("HEAD")[0]),n="BackCompat"==document.compatMode;hs.expandCursor&&e(".highslide img","cursor: url("+hs.graphicsDir+hs.expandCursor+"), pointer !important;"),e(".highslide-viewport-size",hs.ie&&(hs.uaVersion<7||n)?"position: absolute; left:"+t("scrollLeft")+"top:"+t("scrollTop")+"width:"+t("clientWidth")+"height:"+t("clientHeight"):"position: fixed; width: 100%; height: 100%; left: 0; top: 0")}}),hs.addEventListener(window,"resize",function(){if(hs.getPageSize(),hs.viewport)for(var e=0;e<hs.viewport.childNodes.length;e++){var t=hs.viewport.childNodes[e],i=hs.getExpander(t);i.positionOverlay(t),"thumbstrip"==t.hsId&&i.slideshow.thumbstrip.selectThumb()}}),hs.addEventListener(document,"mousemove",function(e){hs.mouse={x:e.clientX,y:e.clientY}}),hs.addEventListener(document,"mousedown",hs.mouseClickHandler),hs.addEventListener(document,"mouseup",hs.mouseClickHandler),hs.addEventListener(document,"ready",hs.getAnchors),hs.addEventListener(window,"load",hs.preloadImages),hs.addEventListener(document,void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",function(e){var t=0;e=e||window.event;var i=e.target,n=hs.getExpander(i);if(e.wheelDelta?(t=e.wheelDelta/120,hs.opera&&(t=-t)):e.detail&&(t=-e.detail/3),n){var s=n.x.size,o=n.y.size,a=e.offsetX,r=e.offsetY,l=a/n.x.size,d=r/n.y.size;1==t&&n.resizeTo(parseInt(1.1*s),parseInt(1.1*o)),t==-1&&n.resizeTo(parseInt(.9*s),parseInt(.9*o));var c=n.x.pos-(n.x.size*l-a),h=n.y.pos-(n.y.size*d-r);return n.moveTo(c,h),e.stopPropagation?(e.stopPropagation(),e.preventDefault()):window.event&&(window.event.cancelBubble=!0),!1}})}!function(e){e.fn.YHsuperTable=function(t){return t=e.extend({headerRows:1,fixedCols:1,colAutoWidth:120,colWidth:null,colLength:0,headerStyle:"background-color:#eee",colHeaderStyle:"background-color:#eee",rowHeaderStyle:"background-color:#eee",tableStyle:"background-color:#fff",fullScreen:!0},t),this.each(function(){if(!(e(this).parents(".YH-superTable-base").length>0)){if("table"!=this.tagName.toLowerCase())return void alert("超级表格只能应用于table标签");if(e(this).children("tbody").length<1)return void alert("表格格式不符合要求，表格中必须包含tbody标签");t.onStart&&t.onStart.call(this);var i,n,s,o=0,a=0,r=[],l=1,d=0,c="",h=0,u="",f="",p=e(this).parent();1===e(this).parent(".superTableDiv").parent(".superTableDiv").parent(".superTableDiv").length?(p=e(this).parent().parent().parent().parent(),1===p.children().length&&p.height()<e(window).height()?(i=p.width(),n="auto",p.css("overflow","visible")):(i=p.width(),n="500px"),window.navigator.userAgent.indexOf("Chrome")!==-1?(e(this).prependTo(p).removeAttr("width").width("auto").wrap('<div class="YH-superTable-base" style="background: #fff; position: relative; width: 100%; max-height: '+n+'; overflow: hidden;"><div class="YH-superTable-data"><div style="width:100000px;"></div></div></div>'),p.find(".superTableDiv").remove()):e(this).removeAttr("width").width("auto").parent().removeAttr("class").width(1e5).parent().attr("class","YH-superTable-data").parent().attr("class","YH-superTable-base").attr("style","position: relative; width: 100%; height: "+n+"; overflow: hidden;")):(1===p.children().length&&p.height()<e(window).height()?(i=p.width(),n="auto",p.css("overflow","visible")):(i=p.width(),n="500px"),e(this).removeAttr("width").width("auto").wrap('<div class="YH-superTable-base" style="*min-height:20px;position: relative; width: 100%; max-height: '+n+'; overflow: hidden;background:#fff;"><div class="YH-superTable-data"><div style="width:100000px;*float:left;"></div></div></div>'));var m=e(this).parent().parent().parent();if(parseInt(t.colLength)>0?d=parseInt(t.colLength):e(this).find("tr:first").children().each(function(t,i){d+=1*e(this).attr("colspan")||1}),t.colAutoWidth||"array"===e.type(t.colWidth)){for(var g="",v=0;v<d;v++)"array"===e.type(t.colWidthBack)&&"number"===e.type(t.colWidthBack[d-v-1])?colWidth=parseInt(t.colWidthBack[d-v-1])>0?parseInt(t.colWidthBack[d-v-1]):t.colAutoWidth||120:colWidth=t.colWidth&&t.colWidth[v]>0?1*t.colWidth[v]:t.colAutoWidth||120,g+='<col width="'+colWidth+'">';e(this).find("colgroup").length>0?e(this).find("colgroup").html(g):e(this).prepend("<colgroup>"+g+"</colgroup>")}if(t.fixedCols>0){if("Microsoft Internet Explorer"==navigator.appName&&"7."==navigator.appVersion.match(/7./i)){u="<tr style='display:none;'><td colspan='"+t.fixedCols+"'></td></tr>",f="<tr style='display:none;'><td colspan='"+d+"'></td></tr>";for(var v=0;v<d;v++)c+="<td>&nbsp;</td>";c='<tr style="height:0">'+c+"</tr></tbody>"}var y=[],b=[],x=e("<tbody>"+u+"</tbody>");e(this).find("tbody tr").each(function(i,n){var s=y.length,o=e("<tr></tr>");e(this).children().each(function(i,n){var a=e(this).attr("colspan")?e(this).attr("colspan"):1,r=e(this).attr("rowspan")?e(this).attr("rowspan"):1,l=0;if(a>1){for(var d=[],c=r,h=0;h<c;h++)d.push(a);b.push(d)}for(var h=0;h<b.length;h++)l+=b[h][0]-1;var u=i+s+l+1;if(r>1&&y.push(r),o.append(e(this).clone()),u>=t.fixedCols)return!1}),x.append(o),y=e.map(y,function(e){if(e-1)return e-1});var a=[];e.each(b,function(e,t){t.length>1&&(t.pop(),a.push(t))}),b=a})}1==e(this).find("thead").length&&("Microsoft Internet Explorer"==navigator.appName&&"7."==navigator.appVersion.match(/7./i)&&(h=3,f="<tr style='display:none;'><td colspan='"+d+"'></td></tr>"),o=e('<div class="YH-superTable-header" style="position: relative; z-index: 3; overflow: hidden; width:100%;'+t.colHeaderStyle+'"><div class="YH-superTable-headerInner" style="position: relative;width:100000px;"><table style="*float:left;" class="'+e(this).attr("class")+'" ><colgroup>'+e(this).find("colgroup").html()+"</colgroup><tbody>"+c+"</tbody></table></div></div>").find("table").append(e(this).find("thead").prepend(f)).end().prependTo(m).find("thead").height(),m.find(".YH-superTable-header").height(o+l+h),t.fixedCols>0&&e('<div class="YH-superTable-fHeader" style="position:absolute; z-index: 4; overflow: hidden; width:100px;  height:'+(o+l+h)+"px; "+t.headerStyle+'"><div style="width:100000px;"><table style="*float:left;" class="'+e(this).attr("class")+'" ><colgroup>'+e(this).find("colgroup").html()+"</colgroup><thead>"+m.find("thead").html()+"</thead><tbody>"+c+"</tbody></table></div></div>").prependTo(m));var w=parseInt(m.parent().css("max-height"))||500,C=m.height(),_="auto";if(C>=w?(m.css("max-height",w+"px"),_=w-o):(m.css("max-height",w+"px"),_=w-o),"Microsoft Internet Explorer"==navigator.appName&&"MSIE8.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")&&"auto"!=_&&(_-=20),s=e(this).children("tbody").prepend(f).end().parent().parent().attr("style","position: relative; z-index: 2; overflow: auto; top: -1px; max-height: "+_+"px; width:100px; "+t.tableStyle),t.fixedCols>0){var g="";e(this).find("colgroup col:lt("+t.fixedCols+")").each(function(e,t){g+=this.outerHTML}),a=e('<div class="YH-superTable-fData" style="top:'+o+"px;width:100px;position: absolute; z-index: 1; "+t.rowHeaderStyle+'"><div class="YH-superTable-fDataInner" style="position:relative; width:1920px; top: 0px;"><table style="*float:left;" class="'+e(this).attr("class")+'"><colgroup>'+g+"</colgroup>"+x[0].outerHTML+"</table></div></div>").prependTo(m).find("table").outerWidth(),s.css("left",a)}e(this).css({"margin-left":"-"+a+"px","max-width":"inherit"}).parent().width(e(this).outerWidth()-a).parent().width(i-a),m.children(".YH-superTable-fData").width(a).end().children(".YH-superTable-fHeader").width(a+l).end().children(".YH-superTable-data").scroll(function(){e(this).prevAll(".YH-superTable-header").children(".YH-superTable-headerInner").css("left",-e(this).scrollLeft()),e(this).prevAll(".YH-superTable-fData").children(".YH-superTable-fDataInner").css("top",-e(this).scrollTop())}),$fData=m.find(".YH-superTable-fDataInner tr"),"Microsoft Internet Explorer"==navigator.appName&&"9."==navigator.appVersion.match(/9./i)&&(e(this).find("tbody tr").each(function(t,i){var n=e(this).innerHeight();r.push(n)}),e(this).find("tbody tr").each(function(t,i){e(this).children('[rowspan="1"]:first,:not([rowspan]):first').first().height(r[t])})),e(this).find("tbody tr").each(function(t,i){if("Microsoft Internet Explorer"==navigator.appName&&"MSIE 8."==navigator.appVersion.match(/MSIE 8./i))var n=e(this).children('[rowspan="1"]').outerHeight();else if("Microsoft Internet Explorer"==navigator.appName&&"MSIE 7."==navigator.appVersion.match(/MSIE 7./i))var n=e(this).innerHeight()+5;else var n=e(this).innerHeight();"20px"==m.css("min-height")&&m.children(".YH-superTable-data").find("td").each(function(){""==e(this).text()&&e(this).html("&nbsp;")}),r.push(n),$fData.eq(t).height(n)}),"Microsoft Internet Explorer"==navigator.appName&&"9."==navigator.appVersion.match(/9./i)||e(this).find("tbody tr").each(function(t,i){e(this).height(r[t])}),t.onFinish&&t.onFinish.call(e(this).closest(".YH-superTable-base")[0]);var k={moveState:!1};if(m.children(".YH-superTable-data").mousedown(function(t){if(k.initScrollTop=e(this).scrollTop(),k.initScrollLeft=e(this).scrollLeft(),k.initX=t.screenX,k.initY=t.screenY,t.ctrlKey)return k.moveState=!0,!1}).mousemove(function(t){var i=e(this);return t.ctrlKey?(i.css({cursor:"move"}),k.moveState&&(i.scrollTop(k.initScrollTop+k.initY-t.screenY),i.scrollLeft(k.initScrollLeft+k.initX-t.screenX)),!1):void i.css({cursor:"default"})}).mouseup(function(e){k.moveState=!1}),t.fullScreen){var T="",S="",N="",E=e('<div class="YH-superTable-fullscreen" style="position: absolute; top: 0; left: 0; padding: 2px 5px; background: #333; cursor: pointer; color:#fff">全屏查看</div>'),I=function(){
m.css({width:"100%",height:e(window).height(),position:"fixed",top:0,left:0,zIndex:1e4,maxHeight:""}),m.children(".YH-superTable-data").css({width:m.width()-a,height:m.height()-o,maxHeight:""})};m.children(".YH-superTable-fHeader").append(E.fadeTo("fast",.15)),E.click(function(t){N?(E.text("全屏查看"),e("body").attr("style",T||""),e(window).unbind("resize",I),m.children(".YH-superTable-data").attr("style",S),m.attr("style",N).attr("fullscreen","false"),N=S=T=""):(E.text("退出全屏"),T=e("body").attr("style"),S=m.children(".YH-superTable-data").attr("style"),N=m.attr("style"),m.attr("fullscreen","true"),e("body").css({overflow:"hidden"}),I(),e(window).bind("resize",I)),t.stopPropagation?t.stopPropagation():window.event&&(window.event.cancelBubble=!0)}).mouseenter(function(){e(this).stop().fadeTo("fast",1)}).mouseleave(function(){e(this).stop().fadeTo("fast",.15)})}}}),this}}(jQuery),function(){function e(e,n){return i(e||self.document.URL||self.location.href,n||t())}function t(){var e=document.getElementsByTagName("script");return e[e.length-1].src}function i(e,t){var i=t;return/^(\/|\\\\)/.test(t)?i=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(t)||(e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),i=e+""+t),n(i)}function n(e){var t=/^[a-z]+:\/\//.exec(e)[0],i=null,n=[];for(e=e.replace(t,"").split("?")[0].split("#")[0],e=e.replace(/\\/g,"/").split(/\//),e[e.length-1]="";e.length;)".."===(i=e.shift())?n.pop():"."!==i&&n.push(i);return t+n.join("/")}var s="/Scripts/Reference/Ueditor/ueditor1_4_3-utf8-net/";window.UEDITOR_CONFIG={UEDITOR_HOME_URL:s,serverUrl:s+"net/controller.ashx",toolbars:[["undo","redo","fullscreen","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","|","fontfamily","fontsize","|","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts"]],zIndex:1,elementPathEnabled:!1},window.UE={getUEBasePath:e}}(),function(){function W(e,t,i){var n;return t=t.toLowerCase(),(n=e.__allListeners||i&&(e.__allListeners={}))&&(n[t]||i&&(n[t]=[]))}function X(e,t,i,n,s,o){n=n&&e[t];var a;for(!n&&(n=e[i]);!n&&(a=(a||e).parentNode);){if("BODY"==a.tagName||o&&!o(a))return null;n=a[i]}return n&&s&&!s(n)?X(n,t,i,!1,s):n}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var s=window.baidu||{};window.baidu=s,window.UE=s.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var L=UE.dom={},r=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,i={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(e),opera:!!t&&t.version,webkit:-1<e.indexOf(" applewebkit/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};i.gecko="Gecko"==navigator.product&&!i.webkit&&!i.opera&&!i.ie;var n=0;if(i.ie){var n=e.match(/(?:msie\s([\w.]+))/),s=e.match(/(?:trident.*rv:([\w.]+))/),n=n&&s&&n[1]&&s[1]?Math.max(1*n[1],1*s[1]):n&&n[1]?1*n[1]:s&&s[1]?1*s[1]:0;i.ie11Compat=11==document.documentMode,i.ie9Compat=9==document.documentMode,i.ie8=!!document.documentMode,i.ie8Compat=8==document.documentMode,i.ie7Compat=7==n&&!document.documentMode||7==document.documentMode,i.ie6Compat=7>n||i.quirks,i.ie9above=8<n,i.ie9below=9>n,i.ie11above=10<n,i.ie11below=11>n}return i.gecko&&(s=e.match(/rv:([\d\.]+)/))&&(s=s[1].split("."),n=1e4*s[0]+100*(s[1]||0)+1*(s[2]||0)),/chrome\/(\d+\.\d)/i.test(e)&&(i.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(i.safari=+(RegExp.$1||RegExp.$2)),i.opera&&(n=parseFloat(t.version())),i.webkit&&(n=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),i.version=n,i.isCompatible=!i.mobile&&(i.ie&&6<=n||i.gecko&&10801<=n||i.opera&&9.5<=n||i.air&&1<=n||i.webkit&&522<=n||!1),i}(),I=r.ie,ma=r.opera,p=UE.utils={each:function(e,t,i){if(null!=e)if(e.length===+e.length){for(var n=0,s=e.length;n<s;n++)if(!1===t.call(i,e[n],n,e))return!1}else for(n in e)if(e.hasOwnProperty(n)&&!1===t.call(i,e[n],n,e))return!1},makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,i){if(t)for(var n in t)i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e},extend2:function(e){for(var t=arguments,i=1;i<t.length;i++){var n,s=t[i];for(n in s)e.hasOwnProperty(n)||(e[n]=s[n])}return e},inherits:function(e,t){var i=e.prototype,n=p.makeInstance(t.prototype);return p.extend(n,i,!0),e.prototype=n,n.constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,i){var n;return function(){i&&clearTimeout(n),n=setTimeout(e,t)}},indexOf:function(e,t,i){var n=-1;return i=this.isNumber(i)?i:0,this.each(e,function(e,s){if(s>=i&&e===t)return n=s,!1}),n},removeItem:function(e,t){for(var i=0,n=e.length;i<n;i++)e[i]===t&&(e.splice(i,1),i--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=p.isArray(e)?e:e.split(",");for(var t,i=0,n={};t=e[i++];)n[t.toUpperCase()]=n[t]=1;return n},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:function(){var e=document.createElement("div").style,t={float:void 0!=e.cssFloat?"cssFloat":void 0!=e.styleFloat?"styleFloat":"float"};return function(e){return t[e]||(t[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}}(),loadFile:function(){function e(e,i){try{for(var n,s=0;n=t[s++];)if(n.doc===e&&n.url==(i.src||i.href))return n}catch(e){return null}}var t=[];return function(i,n,s){var o=e(i,n);if(o)o.ready?s&&s():o.funs.push(s);else if(t.push({doc:i,url:n.src||n.href,funs:[s]}),i.body){if(!n.id||!i.getElementById(n.id)){var a=i.createElement(n.tag);delete n.tag;for(r in n)a.setAttribute(r,n[r]);a.onload=a.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(o=e(i,n),0<o.funs.length){o.ready=1;for(var t;t=o.funs.pop();)t()}a.onload=a.onreadystatechange=null}},a.onerror=function(){throw Error("The load "+(n.href||n.src)+" fails,check the url settings of file ueditor.config.js ")},i.getElementsByTagName("head")[0].appendChild(a)}}else{s=[];for(var r in n)"tag"!=r&&s.push(r+'="'+n[r]+'"');i.write("<"+n.tag+" "+s.join(" ")+" ></"+n.tag+">")}}}(),isEmptyObject:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var i=t.split(",");if(3<i.length)return"";t="#";for(var n,s=0;n=i[s++];)n=parseInt(n.replace(/[^\d]/gi,""),10).toString(16),t+=1==n.length?"0"+n:n;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var i=e.top,n=e.bottom,s=e.left,o=e.right,a="";if(i&&s&&n&&o)a+=";"+t+":"+(i==n&&n==s&&s==o?i:i==n&&s==o?i+" "+s:s==o?i+" "+s+" "+n:i+" "+o+" "+n+" "+s)+";";else for(var r in e)a+=";"+t+"-"+r+":"+e[r]+";";return a}var i,n;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,s,o){if(1==o.split(" ").length)switch(t){case"padding":return!i&&(i={}),i[s]=o,"";case"margin":return!n&&(n={}),n[s]=o,"";case"border":return"initial"==o?"":e}return e}),e+=t(i,"padding")+t(n,"margin"),e.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var i;t=t||{};for(var n in e)e.hasOwnProperty(n)&&(i=e[n],"object"==typeof i?(t[n]=p.isArray(i)?[]:{},p.clone(e[n],t[n])):t[n]=i);return t},transUnitToPx:function(e){if(!/(pt|cm)/.test(e))return e;var t;switch(e.replace(/([\d.]+)(\w+)/,function(i,n,s){e=n,t=s}),t){case"cm":e=25*parseFloat(e);break;case"pt":e=Math.round(96*parseFloat(e)/72)}return e+(e?"px":"")},domReady:function(){function e(e){for(e.isReady=!0;e=t.pop();e());}var t=[];return function(i,n){n=n||window;var s=n.document;i&&t.push(i),"complete"===s.readyState?e(s):(s.isReady&&e(s),r.ie&&11!=r.version?(function(){if(!s.isReady){try{s.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e(s)}}(),n.attachEvent("onload",function(){e(s)})):(s.addEventListener("DOMContentLoaded",function(){s.removeEventListener("DOMContentLoaded",arguments.callee,!1),e(s)},!1),n.addEventListener("load",function(){e(s)},!1)))}}(),cssRule:r.ie&&11!=r.version?function(e,t,i){var n,s;if(void 0===t||t&&t.nodeType&&9==t.nodeType){if(i=t&&t.nodeType&&9==t.nodeType?t:i||document,n=i.indexList||(i.indexList={}),s=n[e],void 0!==s)return i.styleSheets[s].cssText}else{if(i=i||document,n=i.indexList||(i.indexList={}),s=n[e],""===t)return void 0!==s&&(i.styleSheets[s].cssText="",delete n[e],!0);void 0!==s?sheetStyle=i.styleSheets[s]:(sheetStyle=i.createStyleSheet("",s=i.styleSheets.length),n[e]=s),sheetStyle.cssText=t}}:function(e,t,i){var n;return void 0===t||t&&t.nodeType&&9==t.nodeType?(i=t&&t.nodeType&&9==t.nodeType?t:i||document,(n=i.getElementById(e))?n.innerHTML:void 0):(i=i||document,n=i.getElementById(e),""===t?!!n&&(n.parentNode.removeChild(n),!0):void(n?n.innerHTML=t:(n=i.createElement("style"),n.id=e,n.innerHTML=t,i.getElementsByTagName("head")[0].appendChild(n))))},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var i=0,n=e.length;i<n;i++)for(var s=i,o=e.length;s<o;s++)if(0<t(e[i],e[s])){var a=e[i];e[i]=e[s],e[s]=a}return e},serializeParam:function(e){var t,i=[];for(t in e)if("method"!=t&&"timeout"!=t&&"async"!=t)if("function"!=(typeof e[t]).toLowerCase()&&"object"!=(typeof e[t]).toLowerCase())i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));else if(p.isArray(e[t]))for(var n=0;n<e[t].length;n++)i.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e[t][n]));return i.join("&")},formatUrl:function(e){return e=e.replace(/&&/g,"&"),e=e.replace(/\?&/g,"?"),e=e.replace(/&$/g,""),e=e.replace(/&#/g,"#"),e=e.replace(/&+/g,"&")},isCrossDomainUrl:function(e){var t=document.createElement("a");return t.href=e,r.ie&&(t.href=t.href),!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||"80"==t.port&&""==location.port||""==t.port&&"80"==location.port))},clearEmptyAttrs:function(e){for(var t in e)""===e[t]&&delete e[t];return e},str2json:function(e){return p.isString(e)?window.JSON?JSON.parse(e):new Function("return "+p.trim(e||""))():null},json2str:function(){if(window.JSON)return JSON.stringify;var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t=function(t){return/["\\\x00-\x1f]/.test(t)&&(t=t.replace(/["\\\x00-\x1f]/g,function(t){var i=e[t];return i?i:(i=t.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),'"'+t+'"'},i=function(e){return 10>e?"0"+e:e};return function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return t(e);case"boolean":return String(e);default:if(null===e)return"null";if(p.isArray(e)){var n,s,o,a=["["],r=e.length;for(s=0;s<r;s++)switch(o=e[s],typeof o){case"undefined":case"function":case"unknown":break;default:n&&a.push(","),a.push(p.json2str(o)),n=1}return a.push("]"),a.join("")}if(p.isDate(e))return'"'+e.getFullYear()+"-"+i(e.getMonth()+1)+"-"+i(e.getDate())+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds())+'"';n=["{"],s=p.json2str;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r))switch(o=e[r],typeof o){case"undefined":case"unknown":case"function":break;default:a&&n.push(","),a=1,n.push(s(r)+":"+s(o))}return n.push("}"),n.join("")}}}()};p.each("String Function Array Number RegExp Object Date".split(" "),function(e){UE.utils["is"+e]=function(t){return Object.prototype.toString.apply(t)=="[object "+e+"]"}});var Z=UE.EventBase=function(){};Z.prototype={addListener:function(e,t){e=p.trim(e).split(/\s+/);for(var i,n=0;i=e[n++];)W(this,i,!0).push(t)},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=p.trim(e).split(/\s+/);for(var i,n=0;i=e[n++];)p.removeItem(W(this,i)||[],t)},fireEvent:function(){for(var e,t=arguments[0],t=p.trim(t).split(" "),i=0;e=t[i++];){var n,s,o,a=W(this,e);if(a)for(o=a.length;o--;)if(a[o]){if(s=a[o].apply(this,arguments),!0===s)return s;void 0!==s&&(n=s)}(s=this["on"+e.toLowerCase()])&&(n=s.apply(this,arguments))}return n}};var v=L.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=p.extend2,i=e({isindex:1,fieldset:1}),n=e({input:1,button:1,select:1,textarea:1,label:1}),s=t(e({a:1}),n),o=t({iframe:1},s),a=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),r=e({ins:1,del:1,script:1,style:1}),l=t(e({b:1,acronym:1,bdo:1,'var':1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),r),d=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),l),c=t(e({p:1}),d),n=t(e({iframe:1}),d,n),d=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,'var':1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),h=t(e({a:0}),n),u=e({tr:1}),f=e({"#":1}),m=t(e({param:1}),d),g=t(e({form:1}),i,o,a,c),v=e({li:1,ol:1,ul:1}),y=e({style:1,script:1}),b=e({base:1,link:1,meta:1,title:1}),y=t(b,y),x=e({head:1,body:1}),w=e({html:1}),C=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),_=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(w,x,b),$block:C,$inline:h,$inlineWithA:t(e({a:1}),h),$body:t(e({script:1,style:1}),C),$cdata:e({script:1,style:1}),$empty:_,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,'var':1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:x,head:y,style:f,script:f,body:g,base:{},link:{},meta:{},title:f,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:g,td:g,br:{},th:g,center:g,kbd:h,button:t(c,a),basefont:{},h5:h,h4:h,samp:h,h6:h,ol:v,h1:h,h3:h,option:f,h2:h,form:t(i,o,a,c),select:e({optgroup:1,option:1}),font:h,ins:h,menu:v,abbr:h,label:h,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:h,tfoot:u,cite:h,li:g,input:{},iframe:g,strong:h,textarea:f,noframes:g,big:h,small:h,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:h,dt:h,sub:h,optgroup:e({option:1}),param:{},bdo:h,'var':h,div:g,object:m,sup:h,dd:g,strike:h,area:{},dir:v,map:t(e({area:1,form:1,p:1}),i,r,a),applet:m,dl:e({dt:1,dd:1}),del:h,isindex:{},fieldset:t(e({legend:1}),d),thead:u,ul:v,acronym:h,b:h,a:t(e({a:1}),n),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),g),caption:h,i:h,u:h,tbody:u,s:h,address:t(o,c),tt:h,legend:h,q:h,pre:t(l,s),p:t(e({a:1}),h),em:h,dfn:h})}(),ea=I&&9>r.version?{tabindex:"tabIndex",readonly:"readOnly",'for':"htmlFor",'class':"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},oa=p.listToMap("-webkit-box -moz-box block list-item table table-row-group table-header-group table-footer-group table-row table-column-group table-column table-cell table-caption".split(" ")),f=L.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:I&&"6"==r.version?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var i,n=[e],s=[t];for(i=e;i=i.parentNode;){if(i===t)return 10;n.push(i)}for(i=t;i=i.parentNode;){if(i===e)return 20;s.push(i)}if(n.reverse(),s.reverse(),n[0]!==s[0])return 1;for(i=-1;i++,n[i]===s[i];);for(e=n[i],t=s[i];e=e.nextSibling;)if(e===t)return 4;return 2},getNodeIndex:function(e,t){for(var i=e,n=0;i=i.previousSibling;)t&&3==i.nodeType?i.nodeType!=i.nextSibling.nodeType&&n++:n++;return n},inDoc:function(e,t){return 10==f.getPosition(e,t)},findParent:function(e,t,i){if(e&&!f.isBody(e))for(e=i?e:e.parentNode;e;){if(!t||t(e)||f.isBody(e))return t&&!t(e)&&f.isBody(e)?null:e;e=e.parentNode}return null},findParentByTagName:function(e,t,i,n){return t=p.listToMap(p.isArray(t)?t:[t]),f.findParent(e,function(e){return t[e.tagName]&&!(n&&n(e))},i)},findParents:function(e,t,i,n){for(t=t&&(i&&i(e)||!i)?[e]:[];e=f.findParent(e,i);)t.push(e);return n?t:t.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var i,n=e.parentNode;if(n){if(t&&e.hasChildNodes())for(;i=e.firstChild;)n.insertBefore(i,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,i,n){return X(e,"firstChild","nextSibling",t,i,n)},getPreDomNode:function(e,t,i,n){return X(e,"lastChild","previousSibling",t,i,n)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){return e=e.ownerDocument||e,e.defaultView||e.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;for(var i=[e],n=[t],s=e,o=-1;s=s.parentNode;){if(s===t)return s;i.push(s)}for(s=t;s=s.parentNode;){if(s===e)return s;n.push(s)}for(i.reverse(),n.reverse();o++,i[o]===n[o];);return 0==o?null:i[o-1]},clearEmptySibling:function(e,t,i){function n(e,t){for(var i;e&&!f.isBookmarkNode(e)&&(f.isEmptyInlineElement(e)||!RegExp("[^\t\n\r"+f.fillChar+"]").test(e.nodeValue));)i=e[t],f.remove(e),e=i}!t&&n(e.nextSibling,"nextSibling"),!i&&n(e.previousSibling,"previousSibling")},split:function(e,t){var i=e.ownerDocument;if(r.ie&&t==e.nodeValue.length){var n=i.createTextNode("");return f.insertAfter(e,n)}return n=e.splitText(t),r.ie8&&(i=i.createTextNode(""),f.insertAfter(n,i),f.remove(i)),n},isWhitespace:function(e){return!RegExp("[^ \t\n\r"+f.fillChar+"]").test(e.nodeValue)},getXY:function(e){for(var t=0,i=0;e.offsetParent;)i+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:i}},on:function(e,t,i){var n=p.isArray(t)?t:p.trim(t).split(/\s+/),s=n.length;if(s)for(;s--;)if(t=n[s],e.addEventListener)e.addEventListener(t,i,!1);else{i._d||(i._d={els:[]});var o=t+i.toString(),a=p.indexOf(i._d.els,e);i._d[o]&&-1!=a||(-1==a&&i._d.els.push(e),i._d[o]||(i._d[o]=function(e){return i.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,i._d[o]))}e=null},un:function(e,t,i){var n=p.isArray(t)?t:p.trim(t).split(/\s+/),s=n.length;if(s)for(;s--;)if(t=n[s],e.removeEventListener)e.removeEventListener(t,i,!1);else{var o=t+i.toString();try{e.detachEvent("on"+t,i._d?i._d[o]:i)}catch(e){}i._d&&i._d[o]&&(t=p.indexOf(i._d.els,e),-1!=t&&i._d.els.splice(t,1),0==i._d.els.length&&delete i._d[o])}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var i=e.attributes,n=t.attributes;if(!I&&i.length!=n.length)return!1;for(var s,o,a=0,r=0,l=0;s=i[l++];){if("style"==s.nodeName){if(s.specified&&a++,f.isSameStyle(e,t))continue;return!1}if(I){if(!s.specified)continue;a++,o=n.getNamedItem(s.nodeName)}else o=t.attributes[s.nodeName];if(!o.specified||s.nodeValue!=o.nodeValue)return!1}if(I){for(l=0;o=n[l++];)o.specified&&r++;if(a!=r)return!1}return!0},isSameStyle:function(e,t){var i=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),n=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(r.opera){if(i=e.style,n=t.style,i.length!=n.length)return!1;for(var s in i)if(!/^(\d+|csstext)$/i.test(s)&&i[s]!=n[s])return!1;return!0}if(!i||!n)return i==n;if(i=i.split(";"),n=n.split(";"),i.length!=n.length)return!1;s=0;for(var o;o=i[s++];)if(-1==p.indexOf(n,o))return!1;return!0},isBlockElm:function(e){return 1==e.nodeType&&(v.$block[e.tagName]||oa[f.getComputedStyle(e,"display")])&&!v.$nonChild[e.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(e,t){var i,n,s,o=e,a=e;do{for(o=o.parentNode,n?(i=o.cloneNode(!1),i.appendChild(n),n=i,i=o.cloneNode(!1),i.appendChild(s),s=i):(n=o.cloneNode(!1),s=n.cloneNode(!1));i=a.previousSibling;)n.insertBefore(i,n.firstChild);for(;i=a.nextSibling;)s.appendChild(i);a=o}while(t!==o);return i=t.parentNode,i.insertBefore(n,t),i.insertBefore(s,t),i.insertBefore(e,s),f.remove(t),e},isEmptyInlineElement:function(e){if(1!=e.nodeType||!v.$removeEmpty[e.tagName])return 0;for(e=e.firstChild;e;){if(f.isBookmarkNode(e)||1==e.nodeType&&!f.isEmptyInlineElement(e)||3==e.nodeType&&!f.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(e){function t(t){for(var i;(i=e[t])&&3==i.nodeType&&f.isWhitespace(i);)e.removeChild(i)}t("firstChild"),t("lastChild")},mergeChild:function(e,t,i){t=f.getElementsByTagName(e,e.tagName.toLowerCase());for(var n,s=0;n=t[s++];)if(n.parentNode&&!f.isBookmarkNode(n))if("span"==n.tagName.toLowerCase()){if(e===n.parentNode&&(f.trimWhiteTextNode(e),1==e.childNodes.length)){e.style.cssText=n.style.cssText+";"+e.style.cssText,f.remove(n,!0);continue}if(n.style.cssText=e.style.cssText+";"+n.style.cssText,i){var o=i.style;if(o)for(var a,o=o.split(";"),r=0;a=o[r++];)n.style[p.cssStyleToDomStyle(a.split(":")[0])]=a.split(":")[1]}f.isSameStyle(n,e)&&f.remove(n,!0)}else f.isSameElement(e,n)&&f.remove(n,!0)},getElementsByTagName:function(e,t,i){if(i&&p.isString(i)){var n=i;i=function(e){return f.hasClass(e,n)}}t=p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var s,o=[],a=0;s=t[a++];){s=e.getElementsByTagName(s);for(var r,l=0;r=s[l++];)i&&!i(r)||o.push(r)}return o},mergeToParent:function(e){for(var t=e.parentNode;t&&v.$removeEmpty[t.tagName];){if(t.tagName==e.tagName||"A"==t.tagName){if(f.trimWhiteTextNode(t),"SPAN"==t.tagName&&!f.isSameStyle(t,e)||"A"==t.tagName&&"SPAN"==e.tagName){if(1<t.childNodes.length||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,"A"==t.tagName&&(t.style.textDecoration="underline")}if("A"!=t.tagName){t===e.parentNode&&f.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,i){function n(e,t,i){var n;if((n=i[e])&&!f.isBookmarkNode(n)&&1==n.nodeType&&f.isSameElement(i,n)){for(;n.firstChild;)"firstChild"==t?i.insertBefore(n.lastChild,i.firstChild):i.appendChild(n.firstChild);f.remove(n)}}!t&&n("previousSibling","firstChild",e),!i&&n("nextSibling","lastChild",e)},unSelectable:I&&r.ie9below||r.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t,i=0;t=e.all[i++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=p.isArray(t)?t:p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0;i=t[n++];){switch(i=ea[i]||i){case"className":e[i]="";break;case"style":e.style.cssText="";var s=e.getAttributeNode("style");!r.ie&&s&&e.removeAttributeNode(s)}e.removeAttribute(i)}},createElement:function(e,t,i){return f.setAttributes(e.createElement(t),i)},setAttributes:function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"class":e.className=n;break;case"style":e.style.cssText=e.style.cssText+";"+n;break;case"innerHTML":e[i]=n;break;case"value":e.value=n;break;default:e.setAttribute(ea[i]||i,n)}}return e},getComputedStyle:function(e,t){if(-1<"width height top left".indexOf(t))return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";if(3==e.nodeType&&(e=e.parentNode),r.ie&&9>r.version&&"font-size"==t&&!e.style.fontSize&&!v.$empty[e.tagName]&&!v.$nonChild[e.tagName]){var i=e.ownerDocument.createElement("span");i.style.cssText="padding:0;border:0;font-family:simsun;",i.innerHTML=".",e.appendChild(i);var n=i.offsetHeight;return e.removeChild(i),i=null,n+"px"}try{i=f.getStyle(e,t)||(window.getComputedStyle?f.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[p.cssStyleToDomStyle(t)])}catch(e){return""}return p.transUnitToPx(p.fixColor(t,i))},removeClasses:function(e,t){t=p.isArray(t)?t:p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,s=e.className;i=t[n++];)s=s.replace(RegExp("\\b"+i+"\\b"),"");(s=p.trim(s).replace(/[ ]{2,}/g," "))?e.className=s:f.removeAttributes(e,["class"])},addClass:function(e,t){if(e){t=p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,s=e.className;i=t[n++];)RegExp("\\b"+i+"\\b").test(s)||(s+=" "+i);e.className=p.trim(s)}},hasClass:function(e,t){if(p.isRegExp(t))return t.test(e.className);t=p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,s=e.className;i=t[n++];)if(!RegExp("\\b"+i+"\\b","i").test(s))return!1;return n-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){r.ie?("color"==t&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(p.cssStyleToDomStyle(t)),e.style.cssText||f.removeAttributes(e,["style"])},getStyle:function(e,t){var i=e.style[p.cssStyleToDomStyle(t)];return p.fixColor(t,i)},setStyle:function(e,t,i){e.style[p.cssStyleToDomStyle(t)]=i,p.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var i in t)t.hasOwnProperty(i)&&f.setStyle(e,i,t[i])},removeDirtyAttr:function(e){for(var t,i=0,n=e.getElementsByTagName("*");t=n[i++];)t.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var i=0,n=e.firstChild;for(t=t||function(){return 1};n;)t(n)&&i++,n=n.nextSibling;return i},isEmptyNode:function(e){return!e.firstChild||0==f.getChildCount(e,function(e){return!f.isBr(e)&&!f.isBookmarkNode(e)&&!f.isWhitespace(e)})},clearSelectedArr:function(e){for(var t;t=e.pop();)f.removeAttributes(t,["class"])},scrollToView:function(e,t,i){var n=function(){var e=t.document,i="CSS1Compat"==e.compatMode;return{width:(i?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(i?e.documentElement.clientHeight:e.body.clientHeight)||0}}().height;i=-1*n+i+(e.offsetHeight||0),e=f.getXY(e),i+=e.y,e=function(e){return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})}(t).y,(i>e||i<e-n)&&t.scrollTo(0,i+(0>i?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(e,t){if(3!=e.nodeType)return!1;var i=e.nodeValue;return t?RegExp("^"+f.fillChar).test(i):!i.replace(RegExp(f.fillChar,"g"),"").length},isStartInblock:function(e){e=e.cloneRange();var t,i=0,n=e.startContainer;if(1==n.nodeType&&n.childNodes[e.startOffset])for(var n=n.childNodes[e.startOffset],s=n.previousSibling;s&&f.isFillChar(s);)n=s,s=s.previousSibling;for(this.isFillChar(n,!0)&&1==e.startOffset&&(e.setStartBefore(n),n=e.startContainer);n&&f.isFillChar(n);)t=n,n=n.previousSibling;for(t&&(e.setStartBefore(t),n=e.startContainer),1==n.nodeType&&f.isEmptyNode(n)&&1==e.startOffset&&e.setStart(n,0).collapse(!0);!e.startOffset;){if(n=e.startContainer,f.isBlockElm(n)||f.isBody(n)){i=1;break}var o,s=e.startContainer.previousSibling;if(s){for(;s&&f.isFillChar(s);)o=s,s=s.previousSibling;o?e.setStartBefore(o):e.setStartBefore(e.startContainer)}else e.setStartBefore(e.startContainer)}return i&&!f.isBody(e.startContainer)?1:0},isEmptyBlock:function(e,t){if(1!=e.nodeType)return 0;if(t=t||RegExp("[  \t\r\n"+f.fillChar+"]","g"),0<e[r.ie?"innerText":"textContent"].replace(t,"").length)return 0;for(var i in v.$isNotEmpty)if(e.getElementsByTagName(i).length)return 0;return 1},setViewportOffset:function(e,t){var i=0|parseInt(e.style.left),n=0|parseInt(e.style.top),s=e.getBoundingClientRect(),o=t.left-s.left,s=t.top-s.top;o&&(e.style.left=i+o+"px"),s&&(e.style.top=n+s+"px")},fillNode:function(e,t){var i=r.ie?e.createTextNode(f.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(i)},moveChild:function(e,t,i){for(;e.firstChild;)i&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return r.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return 1==e.nodeType&&RegExp("\\b"+e.tagName+"\\b","i").test(t)},filterNodeList:function(e,t,i){var n=[];if(!p.isFunction(t)){var s=t;t=function(e){return-1!=p.indexOf(p.isArray(s)?s:s.split(" "),e.tagName.toLowerCase())}}return p.each(e,function(e){t(e)&&n.push(e)}),0==n.length?null:1!=n.length&&i?n:n[0]},isInNodeEndBoundary:function(e,t){var i=e.startContainer;if(3==i.nodeType&&e.startOffset!=i.nodeValue.length||1==i.nodeType&&e.startOffset!=i.childNodes.length)return 0;for(;i!==t;){if(i.nextSibling)return 0;i=i.parentNode}return 1},isBoundaryNode:function(e,t){for(var i;!f.isBody(e);)if(i=e,e=e.parentNode,i!==e[t])return!1;return!0},fillHtml:r.ie11below?"&nbsp;":"<br/>"},P=RegExp(f.fillChar,"g");!function(){function e(e){return!e.collapsed&&1==e.startContainer.nodeType&&e.startContainer===e.endContainer&&1==e.endOffset-e.startOffset}function t(e,t,i,n){return 1==t.nodeType&&(v.$empty[t.tagName]||v.$nonChild[t.tagName])&&(i=f.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(n.startContainer=t,n.startOffset=i,n.endContainer||n.collapse(!0)):(n.endContainer=t,n.endOffset=i,n.startContainer||n.collapse(!1)),n.collapsed=n.startContainer&&n.endContainer&&n.startContainer===n.endContainer&&n.startOffset==n.endOffset,n}function i(e,t){var i,n,s=e.startContainer,o=e.endContainer,a=e.startOffset,r=e.endOffset,l=e.document,d=l.createDocumentFragment();if(1==s.nodeType&&(s=s.childNodes[a]||(i=s.appendChild(l.createTextNode("")))),1==o.nodeType&&(o=o.childNodes[r]||(n=o.appendChild(l.createTextNode("")))),s===o&&3==s.nodeType)return d.appendChild(l.createTextNode(s.substringData(a,r-a))),t&&(s.deleteData(a,r-a),e.collapse(!0)),d;for(var c,h,u=d,p=f.findParents(s,!0),m=f.findParents(o,!0),g=0;p[g]==m[g];)g++;for(var v,y=g;v=p[y];y++){for(c=v.nextSibling,v==s?i||(3==e.startContainer.nodeType?(u.appendChild(l.createTextNode(s.nodeValue.slice(a))),t&&s.deleteData(a,s.nodeValue.length-a)):u.appendChild(t?s:s.cloneNode(!0))):(h=v.cloneNode(!1),u.appendChild(h));c&&c!==o&&c!==m[y];)v=c.nextSibling,u.appendChild(t?c:c.cloneNode(!0)),c=v;u=h}for(u=d,p[g]||(u.appendChild(p[g-1].cloneNode(!1)),u=u.firstChild),y=g;a=m[y];y++){if(c=a.previousSibling,
a==o?n||3!=e.endContainer.nodeType||(u.appendChild(l.createTextNode(o.substringData(0,r))),t&&o.deleteData(0,r)):(h=a.cloneNode(!1),u.appendChild(h)),y!=g||!p[g])for(;c&&c!==s;)a=c.previousSibling,u.insertBefore(t?c:c.cloneNode(!0),u.firstChild),c=a;u=h}return t&&e.setStartBefore(m[g]?p[g]?m[g]:p[g-1]:m[g-1]).collapse(!0),i&&f.remove(i),n&&f.remove(n),d}function n(e,t){try{if(o&&f.inDoc(o,e))if(o.nodeValue.replace(P,"").length)o.nodeValue=o.nodeValue.replace(P,"");else{var i=o.parentNode;for(f.remove(o);i&&f.isEmptyInlineElement(i)&&(r.safari?!(f.getPosition(i,t)&f.POSITION_CONTAINS):!i.contains(t));)o=i.parentNode,f.remove(i),i=o}}catch(e){}}function s(e,t){var i;for(e=e[t];e&&f.isFillChar(e);)i=e[t],f.remove(e),e=i}var o,a=0,l=f.fillChar,d=L.Range=function(e){this.startContainer=this.startOffset=this.endContainer=this.endOffset=null,this.document=e,this.collapsed=!0};d.prototype={cloneContents:function(){return this.collapsed?null:i(this,0)},deleteContents:function(){var e;return this.collapsed||i(this,1),r.webkit&&(e=this.startContainer,3!=e.nodeType||e.nodeValue.length||(this.setStartBefore(e).collapse(!0),f.remove(e))),this},extractContents:function(){return this.collapsed?null:i(this,2)},setStart:function(e,i){return t(!0,e,i,this)},setEnd:function(e,i){return t(!1,e,i,this)},setStartAfter:function(e){return this.setStart(e.parentNode,f.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,f.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,f.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,f.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){return new d(this.document).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},collapse:function(e){return e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0,this},shrinkBoundary:function(e){function t(e){return 1==e.nodeType&&!f.isBookmarkNode(e)&&!v.$empty[e.tagName]&&!v.$nonChild[e.tagName]}for(var i,n=this.collapsed;1==this.startContainer.nodeType&&(i=this.startContainer.childNodes[this.startOffset])&&t(i);)this.setStart(i,0);if(n)return this.collapse(!0);if(!e)for(;1==this.endContainer.nodeType&&0<this.endOffset&&(i=this.endContainer.childNodes[this.endOffset-1])&&t(i);)this.setEnd(i,i.childNodes.length);return this},getCommonAncestor:function(t,i){var n=this.startContainer,s=this.endContainer;return n===s?t&&e(this)&&(n=n.childNodes[this.startOffset],1==n.nodeType)?n:i&&3==n.nodeType?n.parentNode:n:f.getCommonAncestor(n,s)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,i=this.startOffset,n=this.collapsed,s=this.endContainer;if(3==t.nodeType){if(0==i)this.setStartBefore(t);else if(i>=t.nodeValue.length)this.setStartAfter(t);else{var o=f.split(t,i);t===s?this.setEnd(o,this.endOffset-i):t.parentNode===s&&(this.endOffset+=1),this.setStartBefore(o)}if(n)return this.collapse(!0)}return e||(i=this.endOffset,s=this.endContainer,3==s.nodeType&&(0==i?this.setEndBefore(s):(i<s.nodeValue.length&&f.split(s,i),this.setEndAfter(s)))),this},txtToElmBoundary:function(e){function t(e,t){var i=e[t+"Container"],n=e[t+"Offset"];3==i.nodeType&&(n?n>=i.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](i):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](i))}return!e&&this.collapsed||(t(this,"start"),t(this,"end")),this},insertNode:function(e){var t=e,i=1;11==e.nodeType&&(t=e.firstChild,i=e.childNodes.length),this.trimBoundary(!0);var n=this.startContainer,s=n.childNodes[this.startOffset];return s?n.insertBefore(e,s):n.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset+=i),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var i,n=this.document.createElement("span");return n.style.cssText="display:none;line-height:0px;",n.appendChild(this.document.createTextNode("‍")),n.id="_baidu_bookmark_start_"+(t?"":a++),this.collapsed||(i=n.cloneNode(!0),i.id="_baidu_bookmark_end_"+(t?"":a++)),this.insertNode(n),i&&this.collapse().insertNode(i).setEndBefore(i),this.setStartAfter(n),{start:e?n.id:n,end:i?e?i.id:i:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start;return e=e.end&&e.id?this.document.getElementById(e.end):e.end,this.setStartBefore(t),f.remove(t),e?(this.setEndBefore(e),f.remove(e)):this.collapse(!0),this},enlarge:function(e,t){var i,n,s=f.isBody,o=this.document.createTextNode("");if(e){for(n=this.startContainer,1==n.nodeType?n.childNodes[this.startOffset]?i=n=n.childNodes[this.startOffset]:(n.appendChild(o),i=n=o):i=n;;){if(f.isBlockElm(n)){for(n=i;(i=n.previousSibling)&&!f.isBlockElm(i);)n=i;this.setStartBefore(n);break}i=n,n=n.parentNode}for(n=this.endContainer,1==n.nodeType?((i=n.childNodes[this.endOffset])?n.insertBefore(o,i):n.appendChild(o),i=n=o):i=n;;){if(f.isBlockElm(n)){for(n=i;(i=n.nextSibling)&&!f.isBlockElm(i);)n=i;this.setEndAfter(n);break}i=n,n=n.parentNode}o.parentNode===this.endContainer&&this.endOffset--,f.remove(o)}if(!this.collapsed){for(;!(0!=this.startOffset||t&&t(this.startContainer)||s(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||t&&t(this.endContainer)||s(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(e){for(;!f.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!e)for(;!f.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!f.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!f.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(e,t,i){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return 1==e.nodeType&&f.isBlockElm(e)}).adjustmentBoundary();for(var n,s,o=this.createBookmark(),a=o.end,r=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!f.isWhitespace(e)},l=f.getNextDomNode(o.start,!1,r),d=this.cloneRange();l&&f.getPosition(l,a)&f.POSITION_PRECEDING;)if(3==l.nodeType||v[e][l.tagName]){for(d.setStartBefore(l),n=l;n&&(3==n.nodeType||v[e][n.tagName])&&n!==a;)s=n,n=f.getNextDomNode(n,1==n.nodeType,null,function(t){return v[e][t.tagName]});var c,l=d.setEndAfter(s).extractContents();if(i&&0<i.length){var h;h=c=i[0].cloneNode(!1);for(var u,p=1;u=i[p++];)c.appendChild(u.cloneNode(!1)),c=c.firstChild}else c=d.document.createElement(e);t&&f.setAttributes(c,t),c.appendChild(l),d.insertNode(i?h:c);var m;if("span"==e&&t.style&&/text\-decoration/.test(t.style)&&(m=f.findParentByTagName(c,"a",!0))?(f.setAttributes(m,t),f.remove(c,!0),c=m):(f.mergeSibling(c),f.clearEmptySibling(c)),f.mergeChild(c,t),l=f.getNextDomNode(c,!1,r),f.mergeToParent(c),n===a)break}else l=f.getNextDomNode(l,!0,r);return this.moveToBookmark(o)},removeInlineStyle:function(e){if(this.collapsed)return this;e=p.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();for(var t=this.startContainer,i=this.endContainer;;){if(1==t.nodeType){if(-1<p.indexOf(e,t.tagName.toLowerCase()))break;if("body"==t.tagName.toLowerCase()){t=null;break}}t=t.parentNode}for(;;){if(1==i.nodeType){if(-1<p.indexOf(e,i.tagName.toLowerCase()))break;if("body"==i.tagName.toLowerCase()){i=null;break}}i=i.parentNode}var n,s,o=this.createBookmark();for(t&&(s=this.cloneRange().setEndBefore(o.start).setStartBefore(t),n=s.extractContents(),s.insertNode(n),f.clearEmptySibling(t,!0),t.parentNode.insertBefore(o.start,t)),i&&(s=this.cloneRange().setStartAfter(o.end).setEndAfter(i),n=s.extractContents(),s.insertNode(n),f.clearEmptySibling(i,!1,!0),i.parentNode.insertBefore(o.end,i.nextSibling)),t=f.getNextDomNode(o.start,!1,function(e){return 1==e.nodeType});t&&t!==o.end;)i=f.getNextDomNode(t,!0,function(e){return 1==e.nodeType}),-1<p.indexOf(e,t.tagName.toLowerCase())&&f.remove(t,!0),t=i;return this.moveToBookmark(o)},getClosedNode:function(){var t;if(!this.collapsed){var i=this.cloneRange().adjustmentBoundary().shrinkBoundary();e(i)&&(i=i.startContainer.childNodes[i.startOffset])&&1==i.nodeType&&(v.$empty[i.tagName]||v.$nonChild[i.tagName])&&(t=i)}return t},select:r.ie?function(e,t){var i;this.collapsed||this.shrinkBoundary();var a=this.getClosedNode();if(a&&!t){try{i=this.document.body.createControlRange(),i.addElement(a),i.select()}catch(e){}return this}var a=this.createBookmark(),r=a.start;if(i=this.document.body.createTextRange(),i.moveToElementText(r),i.moveStart("character",1),this.collapsed){if(!e&&3!=this.startContainer.nodeType){var d=this.document.createTextNode(l),c=this.document.createElement("span");c.appendChild(this.document.createTextNode(l)),r.parentNode.insertBefore(c,r),r.parentNode.insertBefore(d,r),n(this.document,d),o=d,s(c,"previousSibling"),s(r,"nextSibling"),i.moveStart("character",-1),i.collapse(!0)}}else{var d=this.document.body.createTextRange(),r=a.end;d.moveToElementText(r),i.setEndPoint("EndToEnd",d)}this.moveToBookmark(a),c&&f.remove(c);try{i.select()}catch(e){}return this}:function(e){function t(e){function t(t,i,n){3==t.nodeType&&t.nodeValue.length<i&&(e[n+"Offset"]=t.nodeValue.length)}t(e.startContainer,e.startOffset,"start"),t(e.endContainer,e.endOffset,"end")}var i=f.getWindow(this.document),a=i.getSelection();if(r.gecko?this.document.body.focus():i.focus(),a){if(a.removeAllRanges(),this.collapsed&&!e&&(e=i=this.startContainer,1==i.nodeType&&(e=i.childNodes[this.startOffset]),3==i.nodeType&&this.startOffset||(e?e.previousSibling&&3==e.previousSibling.nodeType:i.lastChild&&3==i.lastChild.nodeType)||(e=this.document.createTextNode(l),this.insertNode(e),n(this.document,e),s(e,"previousSibling"),s(e,"nextSibling"),o=e,this.setStart(e,r.webkit?1:0).collapse(!0))),i=this.document.createRange(),this.collapsed&&r.opera&&1==this.startContainer.nodeType)if(e=this.startContainer.childNodes[this.startOffset]){for(;e&&f.isBlockElm(e)&&(1==e.nodeType&&e.childNodes[0]);)e=e.childNodes[0];e&&this.setStartBefore(e).collapse(!0)}else(e=this.startContainer.lastChild)&&f.isBr(e)&&this.setStartBefore(e).collapse(!0);t(this),i.setStart(this.startContainer,this.startOffset),i.setEnd(this.endContainer,this.endOffset),a.addRange(i)}return this},scrollToView:function(e,t){e=e?window:f.getWindow(this.document);var i=this.document.createElement("span");return i.innerHTML="&nbsp;",this.cloneRange().insertNode(i),f.scrollToView(i,e,t),f.remove(i),this},inFillChar:function(){var e=this.startContainer;return!(!this.collapsed||3!=e.nodeType||e.nodeValue.replace(RegExp("^"+f.fillChar),"").length+1!=e.nodeValue.length)},createAddress:function(e,t){function i(e){for(var i,n=e?s.startContainer:s.endContainer,o=f.findParents(n,!0,function(e){return!f.isBody(e)}),a=[],r=0;i=o[r++];)a.push(f.getNodeIndex(i,t));if(o=0,t)if(3==n.nodeType){for(n=n.previousSibling;n&&3==n.nodeType;)o+=n.nodeValue.replace(P,"").length,n=n.previousSibling;o+=e?s.startOffset:s.endOffset}else if(n=n.childNodes[e?s.startOffset:s.endOffset])o=f.getNodeIndex(n,t);else for(n=e?s.startContainer:s.endContainer,e=n.firstChild;e;)if(f.isFillChar(e))e=e.nextSibling;else if(o++,3==e.nodeType)for(;e&&3==e.nodeType;)e=e.nextSibling;else e=e.nextSibling;else o=e?f.isFillChar(n)?0:s.startOffset:s.endOffset;return 0>o&&(o=0),a.push(o),a}var n={},s=this;return n.startAddress=i(!0),e||(n.endAddress=s.collapsed?[].concat(n.startAddress):i()),n},moveToAddress:function(e,t){function i(e,t){for(var i,s,o,a=n.document.body,r=0,l=e.length;r<l;r++)if(o=e[r],i=a,a=a.childNodes[o],!a){s=o;break}t?a?n.setStartBefore(a):n.setStart(i,s):a?n.setEndBefore(a):n.setEnd(i,s)}var n=this;return i(e.startAddress,!0),!t&&e.endAddress&&i(e.endAddress),n},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;for(var i=this.createBookmark(),n=i.end,s=f.getNextDomNode(i.start,!1,t);s&&s!==n&&f.getPosition(s,n)&f.POSITION_PRECEDING;){var o=f.getNextDomNode(s,!1,t);e(s),s=o}return this.moveToBookmark(i)}}}(),function(){function e(e,t){var i=f.getNodeIndex;e=e.duplicate(),e.collapse(t);var n=e.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var s,o=n.children,a=e.duplicate(),r=0,l=o.length-1,d=-1;r<=l;){d=Math.floor((r+l)/2),s=o[d],a.moveToElementText(s);var c=a.compareEndPoints("StartToStart",e);if(0<c)l=d-1;else{if(!(0>c))return{container:n,offset:i(s)};r=d+1}}if(-1==d){if(a.moveToElementText(n),a.setEndPoint("StartToStart",e),a=a.text.replace(/(\r\n|\r)/g,"\n").length,o=n.childNodes,!a)return s=o[o.length-1],{container:s,offset:s.nodeValue.length};for(i=o.length;0<a;)a-=o[--i].nodeValue.length;return{container:o[i],offset:-a}}if(a.collapse(0<c),a.setEndPoint(0<c?"StartToStart":"EndToStart",e),a=a.text.replace(/(\r\n|\r)/g,"\n").length,!a)return v.$empty[s.tagName]||v.$nonChild[s.tagName]?{container:n,offset:i(s)+(0<c?0:1)}:{container:s,offset:0<c?0:s.childNodes.length};for(;0<a;)try{o=s,s=s[0<c?"previousSibling":"nextSibling"],a-=s.nodeValue.length}catch(e){return{container:n,offset:i(o)}}return{container:s,offset:0<c?-a:s.nodeValue.length+a}}function t(t,i){if(t.item)i.selectNode(t.item(0));else{var n=e(t,!0);i.setStart(n.container,n.offset),0!=t.compareEndPoints("StartToEnd",t)&&(n=e(t,!1),i.setEnd(n.container,n.offset))}return i}function i(e){var t;try{t=e.getNative().createRange()}catch(e){return null}var i=t.item?t.item(0):t.parentElement();return(i.ownerDocument||i)===e.document?t:null}(L.Selection=function(e){var t=this;t.document=e,r.ie9below&&(e=f.getWindow(e).frameElement,f.on(e,"beforedeactivate",function(){t._bakIERange=t.getIERange()}),f.on(e,"activate",function(){try{!i(t)&&t._bakIERange&&t._bakIERange.select()}catch(e){}t._bakIERange=null})),e=e=null}).prototype={rangeInBody:function(e,t){var i=r.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return i===this.document.body||f.inDoc(i,this.document)},getNative:function(){var e=this.document;try{return e?r.ie9below?e.selection:f.getWindow(e).getSelection():null}catch(e){return null}},getIERange:function(){var e=i(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?f.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(r.ie9below){var e=i(this);return!(!e||!this.rangeInBody(e))}return!!this.getNative().rangeCount}catch(e){return!1}},getRange:function(){function e(e){for(var t=i.document.body.firstChild,n=e.collapsed;t&&t.firstChild;)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(i.document.body,0),n&&e.collapse(!0)}var i=this;if(null!=i._cachedRange)return this._cachedRange;var n=new s.editor.dom.Range(i.document);if(r.ie9below){var o=i.getIERange();if(o)try{t(o,n)}catch(t){e(n)}else e(n)}else{var a=i.getNative();if(a&&a.rangeCount)o=a.getRangeAt(0),a=a.getRangeAt(a.rangeCount-1),n.setStart(o.startContainer,o.startOffset).setEnd(a.endContainer,a.endOffset),n.collapsed&&f.isBody(n.startContainer)&&!n.startOffset&&e(n);else{if(this._bakRange&&f.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;e(n)}}return this._bakRange=n},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e,t,i=r.ie9below?this.getIERange():this.getRange();if(r.ie9below){if(!i)return this.document.body.firstChild;if(i.item)return i.item(0);for(e=i.duplicate(),0<e.text.length&&e.moveStart("character",1),e.collapse(1),e=e.parentElement(),t=i=i.parentElement();i=i.parentNode;)if(i==e){e=t;break}}else if(i.shrinkBoundary(),e=i.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,i.startOffset)]),3==e.nodeType)return e.parentNode;return e},getText:function(){var e;return this.isFocus()&&(e=this.getNative())?(e=r.ie9below?e.createRange():e.getRangeAt(0),r.ie9below?e.text:e.toString()):""},clearRange:function(){this.getNative()[r.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function e(e,t){var i;if(t.textarea)if(p.isString(t.textarea)){for(var n,s=0,o=f.getElementsByTagName(e,"textarea");n=o[s++];)if(n.id=="ueditor_textarea_"+t.options.textarea){i=n;break}}else i=t.textarea;i||(e.appendChild(i=f.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=i),!i.getAttribute("name")&&i.setAttribute("name",t.options.textarea),i.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function t(e){for(var t in e)return t}function i(e){e.langIsReady=!0,e.fireEvent("langReady")}var n,s=0,o=UE.Editor=function(e){var n=this;n.uid=s++,Z.call(n),n.commands={},n.options=p.extend(p.clone(e||{}),UEDITOR_CONFIG,!0),n.shortcutkeys={},n.inputRules=[],n.outputRules=[],n.setOpt(o.defaultOptions(n)),n.loadServerConfig(),p.isEmptyObject(UE.I18N)?p.loadFile(document,{src:n.options.langPath+n.options.lang+"/"+n.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(n),i(n)}):(n.options.lang=t(UE.I18N),UE.plugin.load(n),i(n)),UE.instants["ueditorInstant"+n.uid]=n};o.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){e&&(this.isReady?e.apply(this):this.addListener("ready",e))},setOpt:function(e,t){var i={};p.isString(e)?i[e]=t:i=e,p.extend(this.options,i,!0)},getOpt:function(e){return this.options[e]},destroy:function(){this.fireEvent("destroy");var e=this.container.parentNode,t=this.textarea;t?t.style.display="":(t=document.createElement("textarea"),e.parentNode.insertBefore(t,e)),t.style.width=this.iframe.offsetWidth+"px",t.style.height=this.iframe.offsetHeight+"px",t.value=this.getContent(),t.id=this.key,e.innerHTML="",f.remove(e);var i,e=this.key;for(i in this)this.hasOwnProperty(i)&&delete this[i];UE.delEditor(e)},render:function(e){var t=this.options;if(p.isString(e)&&(e=document.getElementById(e)),e){t.minFrameWidth=t.initialFrameWidth?t.initialFrameWidth:t.initialFrameWidth=e.offsetWidth,t.initialFrameHeight?t.minFrameHeight=t.initialFrameHeight:t.initialFrameHeight=t.minFrameHeight=e.offsetHeight,e.style.width=/%$/.test(t.initialFrameWidth)?"100%":t.initialFrameWidth-parseInt(f.getComputedStyle(e,"padding-left"))-parseInt(f.getComputedStyle(e,"padding-right"))+"px",e.style.height=/%$/.test(t.initialFrameHeight)?"100%":t.initialFrameHeight-parseInt(f.getComputedStyle(e,"padding-top"))-parseInt(f.getComputedStyle(e,"padding-bottom"))+"px",e.style.zIndex=t.zIndex;var i=(I&&9>r.version?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(t.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+p.unhtml(t.iframeCssUrl)+"'/>":"")+(t.initialStyle?"<style>"+t.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(I?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+this.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";e.appendChild(f.createElement(document,"iframe",{id:"ueditor_"+this.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(t.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+i+'");document.close();}())'})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(t.initialFrameWidth)&&(t.minFrameWidth=t.initialFrameWidth=e.offsetWidth),/%$/.test(t.initialFrameHeight)&&(t.minFrameHeight=t.initialFrameHeight=e.offsetHeight,e.style.height=t.initialFrameHeight+"px")})}},_setup:function(t){var i=this,n=i.options;I?(t.body.disabled=!0,t.body.contentEditable=!0,t.body.disabled=!1):t.body.contentEditable=!0,t.body.spellcheck=!1,i.document=t,i.window=t.defaultView||t.parentWindow,i.iframe=i.window.frameElement,i.body=t.body,i.selection=new L.Selection(t);var s;r.gecko&&(s=this.selection.getNative())&&s.removeAllRanges(),this._initEvents();for(var o=this.iframe.parentNode;!f.isBody(o);o=o.parentNode)if("FORM"==o.tagName){i.form=o,i.options.autoSyncData?f.on(i.window,"blur",function(){e(o,i)}):f.on(o,"submit",function(){e(this,i)});break}if(n.initialContent)if(n.autoClearinitialContent){var a=i.execCommand;i.execCommand=function(){return i.fireEvent("firstBeforeExecCommand"),a.apply(i,arguments)},this._setDefaultContent(n.initialContent)}else this.setContent(n.initialContent,!1,!0);f.isEmptyNode(i.body)&&(i.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>"),n.focus&&setTimeout(function(){i.focus(i.options.focusInEnd),!i.options.autoClearinitialContent&&i._selectionChange()},0),i.container||(i.container=this.iframe.parentNode),n.fullscreen&&i.ui&&i.ui.setFullScreen(!0);try{i.document.execCommand("2D-position",!1,!1)}catch(e){}try{i.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}try{i.document.execCommand("enableObjectResizing",!1,!1)}catch(e){}i._bindshortcutKeys(),i.isReady=1,i.fireEvent("ready"),n.onready&&n.onready.call(i),r.ie9below||f.on(i.window,["blur","focus"],function(e){if("blur"==e.type){i._bakRange=i.selection.getRange();try{i._bakNativeRange=i.selection.getNative().getRangeAt(0),i.selection.getNative().removeAllRanges()}catch(e){i._bakNativeRange=null}}else try{i._bakRange&&i._bakRange.select()}catch(e){}}),r.gecko&&10902>=r.version&&(i.body.contentEditable=!1,setTimeout(function(){i.body.contentEditable=!0},100),setInterval(function(){i.body.style.height=i.iframe.offsetHeight-20+"px"},100)),!n.isShow&&i.setHide(),n.readonly&&i.setDisabled()},sync:function(t){(t=t?document.getElementById(t):f.findParent(this.iframe.parentNode,function(e){return"FORM"==e.tagName},!0))&&e(t,this)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px",!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var i={};t?i[e]=t:i=e,p.extend(this.shortcutkeys,i)},_bindshortcutKeys:function(){var e=this,t=this.shortcutkeys;e.addListener("keydown",function(i,n){var s,o=n.keyCode||n.which;for(s in t)for(var a,r=t[s].split(","),l=0;a=r[l++];){a=a.split(":");var d=a[0];a=a[1],(/^(ctrl)(\+shift)?\+(\d+)$/.test(d.toLowerCase())||/^(\d+)$/.test(d))&&("ctrl"==RegExp.$1&&(n.ctrlKey||n.metaKey)&&(""!=RegExp.$2?n[RegExp.$2.slice(1)+"Key"]:1)&&o==RegExp.$3||o==RegExp.$1)&&(-1!=e.queryCommandState(s,a)&&e.execCommand(s,a),f.preventDefault(n))}})},getContent:function(e,t,i,n,s){return e&&p.isFunction(e)&&(t=e,e=""),(t?t():this.hasContents())?(this.fireEvent("beforegetcontent"),t=UE.htmlparser(this.body.innerHTML,n),this.filterOutputRule(t),this.fireEvent("aftergetcontent",e,t),t.toHtml(s)):""},getAllHtml:function(){var e=[];if(this.fireEvent("getAllHtml",e),r.ie&&8<r.version){var t="";p.each(this.document.styleSheets,function(e){t+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),p.each(this.document.getElementsByTagName("script"),function(e){t+=e.outerHTML})}return"<html><head>"+(this.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+this.options.charset+'"/>':"")+(t||this.document.getElementsByTagName("head")[0].innerHTML)+e.join("\n")+"</head><body "+(I&&9>r.version?'class="view"':"")+">"+this.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=RegExp(f.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,""),t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>\/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,i){return v.$block[i]?"\n":t?t:""});return t.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){return this.body[r.ie?"innerText":"textContent"].replace(RegExp(f.fillChar,"g"),"").replace(/\u00a0/g," ")},setContent:function(t,i,n){if(this.fireEvent("beforesetcontent",t),t=UE.htmlparser(t),this.filterInputRule(t),t=t.toHtml(),this.body.innerHTML=(i?this.body.innerHTML:"")+t,"p"==this.options.enterTag)if(i=this.body.firstChild,!i||1==i.nodeType&&(v.$cdata[i.tagName]||"DIV"==i.tagName&&i.getAttribute("cdata_tag")||f.isCustomeNode(i))&&i===this.body.lastChild)this.body.innerHTML="<p>"+(r.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var s=this.document.createElement("p");i;){for(;i&&(3==i.nodeType||1==i.nodeType&&v.p[i.tagName]&&!v.$cdata[i.tagName]);)t=i.nextSibling,s.appendChild(i),i=t;if(s.firstChild){if(!i){this.body.appendChild(s);break}i.parentNode.insertBefore(s,i),s=this.document.createElement("p")}i=i.nextSibling}this.fireEvent("aftersetcontent"),this.fireEvent("contentchange"),!n&&this._selectionChange(),this._bakRange=this._bakIERange=this._bakNativeRange=null;var o;r.gecko&&(o=this.selection.getNative())&&o.removeAllRanges(),this.options.autoSyncData&&this.form&&e(this.form,this)},focus:function(e){try{var t=this.selection.getRange();if(e){var i=this.body.lastChild;i&&1==i.nodeType&&!v.$empty[i.tagName]&&(f.isEmptyBlock(i)?t.setStartAtFirst(i):t.setStartAtLast(i),t.collapse(!0)),t.setCursor(!0)}else!t.collapsed&&f.isBody(t.startContainer)&&0==t.startOffset&&(i=this.body.firstChild)&&1==i.nodeType&&!v.$empty[i.tagName]&&t.setStartAtFirst(i).collapse(!0),t.select(!0);this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&r.ie){var t=document.body.createTextRange();t.moveToElementText(document.body),t.collapse(!0),t.select(),e.empty()}else e.removeAllRanges()},_initEvents:function(){var e=this,t=e.document,i=e.window;e._proxyDomEvent=p.bind(e._proxyDomEvent,e),f.on(t,"click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart".split(" "),e._proxyDomEvent),f.on(i,["focus","blur"],e._proxyDomEvent),f.on(e.body,"drop",function(t){r.gecko&&t.stopPropagation&&t.stopPropagation(),e.fireEvent("contentchange")}),f.on(t,["mouseup","keydown"],function(t){"keydown"==t.type&&(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)||2!=t.button&&e._selectionChange(250,t)})},_proxyDomEvent:function(e){return!1!==this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())&&!1!==this.fireEvent(e.type.replace(/^on/,""),e)&&this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,t){var i,s,o=this,a=!1;r.ie&&9>r.version&&t&&"mouseup"==t.type&&!this.selection.getRange().collapsed&&(a=!0,i=t.clientX,s=t.clientY),clearTimeout(n),n=setTimeout(function(){if(o.selection&&o.selection.getNative()){var e;if(a&&"None"==o.selection.getNative().type){e=o.document.body.createTextRange();try{e.moveToPoint(i,s)}catch(t){e=null}}var n;e&&(n=o.selection.getIERange,o.selection.getIERange=function(){return e}),o.selection.cache(),n&&(o.selection.getIERange=n),o.selection._cachedRange&&o.selection._cachedStartElement&&(o.fireEvent("beforeselectionchange"),o.fireEvent("selectionchange",!!t),o.fireEvent("afterselectionchange"),o.selection.clear())}},e||50)},_callCmdFn:function(e,t){var i,n=t[0].toLowerCase();return i=(n=this.commands[n]||UE.commands[n])&&n[e],n&&i||"queryCommandState"!=e?i?i.apply(this,t):void 0:0},execCommand:function(e){e=e.toLowerCase();var t,i=this.commands[e]||UE.commands[e];return i&&i.execCommand?(i.notNeedUndo||this.__hasEnterExecCommand?(t=this._callCmdFn("execCommand",arguments),this.__hasEnterExecCommand||i.ignoreContentChange||this._ignoreContentChange||this.fireEvent("contentchange")):(this.__hasEnterExecCommand=!0,-1!=this.queryCommandState.apply(this,arguments)&&(this.fireEvent("saveScene"),this.fireEvent.apply(this,["beforeexeccommand",e].concat(arguments)),t=this._callCmdFn("execCommand",arguments),this.fireEvent.apply(this,["afterexeccommand",e].concat(arguments)),this.fireEvent("saveScene")),this.__hasEnterExecCommand=!1),this.__hasEnterExecCommand||i.ignoreContentChange||this._ignoreContentChange||this._selectionChange(),t):null},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t,i=0;t=e[i++];)if(0<this.document.getElementsByTagName(t).length)return!0;if(!f.isEmptyBlock(this.body))return!0;for(e=["div"],i=0;t=e[i++];){t=f.getElementsByTagName(this.document,t);for(var n,s=0;n=t[s++];)if(f.isCustomeNode(n))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var e;if("false"==this.body.contentEditable){this.body.contentEditable=!0,e=this.selection.getRange();try{e.moveToBookmark(this.lastBk),delete this.lastBk}catch(t){e.setStartAtFirst(this.body).collapse(!0)}e.select(!0),this.bkqueryCommandState&&(this.queryCommandState=this.bkqueryCommandState,delete this.bkqueryCommandState),this.bkqueryCommandValue&&(this.queryCommandValue=this.bkqueryCommandValue,delete this.bkqueryCommandValue),this.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var t=this;e=e?p.isArray(e)?e:[e]:[],"true"==t.body.contentEditable&&(t.lastBk||(t.lastBk=t.selection.getRange().createBookmark(!0)),t.body.contentEditable=!1,t.bkqueryCommandState=t.queryCommandState,t.bkqueryCommandValue=t.queryCommandValue,t.queryCommandState=function(i){return-1!=p.indexOf(e,i)?t.bkqueryCommandState.apply(t,arguments):-1},t.queryCommandValue=function(i){return-1!=p.indexOf(e,i)?t.bkqueryCommandValue.apply(t,arguments):null},t.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var t=this;t.document.getElementById("initContent")&&(t.body.innerHTML="<p>"+(I?"":"<br/>")+"</p>",t.removeListener("firstBeforeExecCommand focus",e),setTimeout(function(){t.focus(),t._selectionChange()},0))}return function(t){this.body.innerHTML='<p id="initContent">'+t+"</p>",this.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this.selection.getRange();if("none"==this.container.style.display){try{e.moveToBookmark(this.lastBk),delete this.lastBk}catch(t){e.setStartAtFirst(this.body).collapse(!0)}setTimeout(function(){e.select(!0)},100),this.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){this.lastBk||(this.lastBk=this.selection.getRange().createBookmark(!0)),this.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");for(var i,n=0;(i=e[n++])&&(t=t[i]););
return t},getContentLength:function(e,t){var i=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]);for(var n,i=this.getContentTxt().replace(/[\t\r\n]+/g,"").length,s=0;n=t[s++];)i+=this.document.getElementsByTagName(n).length}return i},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t,i=0;t=this.inputRules[i++];)t.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t,i=0;t=this.outputRules[i++];)t.call(this,e)},getActionUrl:function(e){e=this.getOpt(e)||e;var t=this.getOpt("imageUrl"),i=this.getOpt("serverUrl");return!i&&t&&(i=t.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),i?(i=i+(-1==i.indexOf("?")?"?":"&")+"action="+(e||""),p.formatUrl(i)):""}},p.inherits(o,Z)}(),UE.Editor.defaultOptions=function(e){return e=e.options.UEDITOR_HOME_URL,{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:e+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:e+"lang/",theme:"default",themePath:e+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function d(e){console&&console.error(e)}var c=this;setTimeout(function(){try{c.options.imageUrl&&c.setOpt("serverUrl",c.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var b=c.getActionUrl("config"),a=p.isCrossDomainUrl(b);c._serverConfigLoaded=!1,b&&UE.ajax.request(b,{method:"GET",dataType:a?"jsonp":"",onsuccess:function(b){try{var e=a?b:eval("("+b.responseText+")");p.extend(c.options,e),c.fireEvent("serverConfigLoaded"),c._serverConfigLoaded=!0}catch(e){d(c.getLang("loadconfigFormatError"))}},onerror:function(){d(c.getLang("loadconfigHttpError"))}})}catch(e){d(c.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(e){if(e&&p.isFunction(e)){var t=this,i=function(){e.apply(t,arguments),t.removeListener("serverConfigLoaded",i)};t.isServerConfigLoaded()?e.call(t,"serverConfigLoaded"):t.addListener("serverConfigLoaded",i)}}}(),UE.ajax=function(){function e(e){var t,i=[];for(t in e)if("method"!=t&&"timeout"!=t&&"async"!=t&&"dataType"!=t&&"callback"!=t&&void 0!=e[t]&&null!=e[t])if("function"!=(typeof e[t]).toLowerCase()&&"object"!=(typeof e[t]).toLowerCase())i.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));else if(p.isArray(e[t]))for(var n=0;n<e[t].length;n++)i.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e[t][n]));return i.join("&")}function t(t,i){var n=s(),o=!1,a={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof t&&(i=t,t=i.url),n&&t){var r=i?p.extend(a,i):a,a=e(r);p.isEmptyObject(r.data)||(a+=(a?"&":"")+e(r.data));var l=setTimeout(function(){4!=n.readyState&&(o=!0,n.abort(),clearTimeout(l))},r.timeout),d=r.method.toUpperCase(),c=t+(-1==t.indexOf("?")?"?":"&")+("POST"==d?"":a+"&noCache="+ +new Date);n.open(d,c,r.async),n.onreadystatechange=function(){4==n.readyState&&(o||200!=n.status?r.onerror(n):r.onsuccess(n))},"POST"==d?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(a)):n.send(null)}}function i(t,i){function n(e){return function(){try{if(e)d.onerror&&d.onerror();else try{clearTimeout(o),r.apply(window,arguments)}catch(e){}}catch(e){d.onerror&&d.onerror.call(window,e)}finally{d.oncomplete&&d.oncomplete.apply(window,arguments),l.parentNode&&l.parentNode.removeChild(l),window[s]=null;try{delete window[s]}catch(e){}}}}var s,o,a,r=i.onsuccess||function(){},l=document.createElement("SCRIPT"),d=i||{},c=d.charset,h=d.jsonp||"callback",u=d.timeOut||0,f=RegExp("(\\?|&)"+h+"=([^&]*)");p.isFunction(r)?(s="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[s]=n(0)):p.isString(r)?s=r:(a=f.exec(t))&&(s=a[2]),t=t.replace(f,"$1"+h+"="+s),0>t.search(f)&&(t+=(0>t.indexOf("?")?"?":"&")+h+"="+s),h=e(i),p.isEmptyObject(i.data)||(h+=(h?"&":"")+e(i.data)),h&&(t=t.replace(/\?/,"?"+h+"&")),l.onerror=n(1),u&&(o=setTimeout(n(1),u)),function(e,t,i){e.setAttribute("type","text/javascript"),e.setAttribute("defer","defer"),i&&e.setAttribute("charset",i),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}(l,t,c)}var n="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),n="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),n="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var s=new Function("return new "+n);return{request:function(e,n){n&&"jsonp"==n.dataType?i(e,n):t(e,n)},getJSONP:function(e,t,n){i(e,{data:t,oncomplete:n})}}}(),UE.filterWord=function(){function e(e){return e=e.replace(/[\d.]+\w+/g,function(e){return p.transUnitToPx(e)})}function t(t){return t.replace(/[\t\r\n]+/g," ").replace(/\x3c!--[\s\S]*?--\x3e/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(t){if(r.opera)return"";try{if(/Bitmap/i.test(t))return"";var i=t.match(/width:([ \d.]*p[tx])/i)[1],n=t.match(/height:([ \d.]*p[tx])/i)[1],s=t.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+e(i)+'" height="'+e(n)+'" src="'+s+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,i,n){return"class"==t&&"MsoListParagraph"==n?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,i){return i.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(t,i,n,s){t=[],s=s.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return p.transUnitToPx(e)}).split(/;\s*/g),n=0;for(var o;o=s[n];n++){var a,r=o.split(":");if(2==r.length&&(o=r[0].toLowerCase(),a=r[1].toLowerCase(),!(/^(background)\w*/.test(o)&&0==a.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(o)&&/^0\w+$/.test(a)))){switch(o){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(i)||(t[n]=o.replace(/^mso-|-alt$/g,"")+":"+e(a));continue;case"horiz-align":t[n]="text-align:"+a;continue;case"vert-align":t[n]="vertical-align:"+a;continue;case"font-color":case"mso-foreground":t[n]="color:"+a;continue;case"mso-background":case"mso-highlight":t[n]="background:"+a;continue;case"mso-default-height":t[n]="min-height:"+e(a);continue;case"mso-default-width":t[n]="min-width:"+e(a);continue;case"mso-padding-between-alt":t[n]="border-collapse:separate;border-spacing:"+e(a);continue;case"text-line-through":"single"!=a&&"double"!=a||(t[n]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==a&&(t[n]="display:none");continue;case"margin":if(!/[1-9]/.test(a))continue}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(o)||/text\-indent|padding|margin/.test(o)&&/\-[\d.]+/.test(a)||(t[n]=o+":"+r[1])}}return i+(t.length?' style="'+t.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(e)?t(e):e}}(),function(){function e(e,t,i){return e.push(h),t+(i?1:-1)}function t(e,t){for(var i=0;i<t;i++)e.push(c)}function i(s,o,a,r){switch(s.type){case"root":for(var l,c=0;l=s.children[c++];)a&&"element"==l.type&&!v.$inlineWithA[l.tagName]&&1<c&&(e(o,r,!0),t(o,r)),i(l,o,a,r);break;case"text":"pre"==s.parentNode.tagName?o.push(s.data):o.push(d[s.parentNode.tagName]?p.html(s.data):s.data.replace(/[ ]{2}/g," &nbsp;"));break;case"element":n(s,o,a,r);break;case"comment":o.push("<!--"+s.data+"-->")}return o}function n(n,s,o,a){var r="";if(n.attrs){var d,r=[],c=n.attrs;for(d in c)r.push(d+(void 0!==c[d]?'="'+(l[d]?p.html(c[d]).replace(/["]/g,function(e){return"&quot;"}):p.unhtml(c[d]))+'"':""));r=r.join(" ")}if(s.push("<"+n.tagName+(r?" "+r:"")+(v.$empty[n.tagName]?"/":"")+">"),o&&!v.$inlineWithA[n.tagName]&&"pre"!=n.tagName&&n.children&&n.children.length&&(a=e(s,a,!0),t(s,a)),n.children&&n.children.length)for(r=0;c=n.children[r++];)o&&"element"==c.type&&!v.$inlineWithA[c.tagName]&&1<r&&(e(s,a),t(s,a)),i(c,s,o,a);v.$empty[n.tagName]||(o&&!v.$inlineWithA[n.tagName]&&"pre"!=n.tagName&&n.children&&n.children.length&&(a=e(s,a),t(s,a)),s.push("</"+n.tagName+">"))}function s(e,t){var i;if("element"==e.type&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var n=0;i=e.children[n++];)if(i=s(i,t))return i}function o(e,t,i){if("element"==e.type&&e.tagName==t&&i.push(e),e.children&&e.children.length)for(var n,s=0;n=e.children[s++];)o(n,t,i)}function a(e,t){if(e.children&&e.children.length)for(var i,n=0;i=e.children[n];)a(i,t),i.parentNode&&(i.children&&i.children.length&&t(i),i.parentNode&&n++);else t(e)}var r=UE.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},l={href:1,src:1,_src:1,_href:1,cdata_data:1},d={style:1,script:1},c="    ",h="\n";r.createElement=function(e){return/[<>]/.test(e)?UE.htmlparser(e).children[0]:new r({type:"element",children:[],tagName:e})},r.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:p.unhtml(e||"")})},r.prototype={toHtml:function(e){var t=[];return i(this,t,e,0),t.join("")},innerHTML:function(e){if("element"!=this.type||v.$empty[this.tagName])return this;if(p.isString(e)){if(this.children)for(var t,i=0;t=this.children[i++];)t.parentNode=null;for(this.children=[],e=UE.htmlparser(e),i=0;t=e.children[i++];)this.children.push(t),t.parentNode=this;return this}return e=new UE.uNode({type:"root",children:this.children}),e.toHtml()},innerText:function(e,t){if("element"!=this.type||v.$empty[this.tagName])return this;if(e){if(this.children)for(var i,n=0;i=this.children[n++];)i.parentNode=null;return this.children=[],this.appendChild(r.createText(e,t)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var e,t=this.parentNode,i=0;e=t.children[i];i++)if(e===this)return 0==i?null:t.children[i-1]},nextSibling:function(){for(var e,t=this.parentNode,i=0;e=t.children[i++];)if(e===this)return t.children[i]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if("root"==this.type||"element"==this.type&&!v.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t,i=0;t=this.children[i];i++)if(t===e){this.children.splice(i,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var i,n=0;i=this.children[n];n++)if(i===e){if(this.children.splice(n,1),i.parentNode=null,t&&i.children&&i.children.length)for(var s,o=0;s=i.children[o];o++)this.children.splice(n+o,0,s),s.parentNode=this;return i}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(e)if(this.attrs||(this.attrs={}),p.isObject(e))for(var i in e)e[i]?this.attrs[i.toLowerCase()]=e[i]:delete this.attrs[i];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e];else delete this.attrs},getIndex:function(){for(var e,t=this.parentNode,i=0;e=t.children[i];i++)if(e===this)return i;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var i=0;t=this.children[i++];)if(t=s(t,e))return t},getNodesByTagName:function(e){e=p.trim(e).replace(/[ ]{2,}/g," ").split(" ");var t=[],i=this;return p.each(e,function(e){if(i.children&&i.children.length)for(var n,s=0;n=i.children[s++];)o(n,e,t)}),t},getStyle:function(e){var t=this.getAttr("style");return t&&(e=t.match(RegExp("(^|;)\\s*"+e+":([^;]+)","i")))&&e[0]?e[2]:""},setStyle:function(e,t){function i(e,t){n=n.replace(RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi"),"$1"),t&&(n=e+":"+p.unhtml(t)+";"+n)}var n=this.getAttr("style");if(n||(n=""),p.isObject(e))for(var s in e)i(s,e[s]);else i(e,t);this.setAttr("style",p.trim(n))},traversal:function(e){return this.children&&this.children.length&&a(this,e),this}}}(),UE.htmlparser=function(e,t){function i(e,t){if(h[e.tagName]){var i=d.createElement(h[e.tagName]);e.appendChild(i),i.appendChild(d.createText(t))}else e.appendChild(d.createText(t))}function n(e,t,i){var s;if(s=c[t]){for(var a,r=e;"root"!=r.type;){if(p.isArray(s)?-1!=p.indexOf(s,r.tagName):s==r.tagName){e=r,a=!0;break}r=r.parentNode}a||(e=n(e,p.isArray(s)?s[0]:s))}if(s=new d({parentNode:e,type:"element",tagName:t.toLowerCase(),children:v.$empty[t]?null:[]}),i){for(r={};a=o.exec(i);)r[a[1].toLowerCase()]=l[a[1].toLowerCase()]?a[2]||a[3]||a[4]:p.unhtml(a[2]||a[3]||a[4]);s.attrs=r}return e.children.push(s),v.$empty[t]?e:s}var s=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,o=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,a={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(RegExp(f.fillChar,"g"),""),t||(e=e.replace(RegExp("[\\r\\t\\n"+(t?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(t?"":" ")+"]*","g"),function(e,i){return i&&a[i.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(RegExp("^[\\r\\n"+(t?"":" ")+"]+"),"").replace(RegExp("[\\r\\n"+(t?"":" ")+"]+$"),"")}));for(var r,l={href:1,src:1},d=UE.uNode,c={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},h={ol:"li",ul:"li"},u=0,m=0,g=new d({type:"root",children:[]}),y=g;r=s.exec(e);){u=r.index;try{if(u>m&&i(y,e.slice(m,u)),r[3])v.$cdata[y.tagName]?i(y,r[0]):y=n(y,r[3].toLowerCase(),r[4]);else if(r[1]){if("root"!=y.type)if(v.$cdata[y.tagName]&&!v.$cdata[r[1]])i(y,r[0]);else{for(u=y;"element"==y.type&&y.tagName!=r[1].toLowerCase();)if(y=y.parentNode,"root"==y.type)throw y=u,"break";y=y.parentNode}}else r[2]&&y.children.push(new d({type:"comment",data:r[2],parentNode:y}))}catch(e){}m=s.lastIndex}return m<e.length&&i(y,e.slice(m)),g},UE.filterNode=function(){function e(t,i){switch(t.type){case"element":var n;if(n=i[t.tagName])if("-"===n)t.parentNode.removeChild(t);else if(p.isFunction(n)){var s=t.parentNode,o=t.getIndex();if(n(t),t.parentNode){if(t.children)for(n=0;o=t.children[n];)e(o,i),o.parentNode&&n++}else for(n=o;o=s.children[n];)e(o,i),o.parentNode&&n++}else{if((n=n.$)&&t.attrs){var a,o={};for(s in n){if(a=t.getAttr(s),"style"==s&&p.isArray(n[s])){var r=[];p.each(n[s],function(e){var i;(i=t.getStyle(e))&&r.push(e+":"+i)}),a=r.join(";")}a&&(o[s]=a)}t.attrs=o}if(t.children)for(n=0;o=t.children[n];)e(o,i),o.parentNode&&n++}else if(v.$cdata[t.tagName])t.parentNode.removeChild(t);else for(s=t.parentNode,o=t.getIndex(),t.parentNode.removeChild(t,!0),n=o;o=s.children[n];)e(o,i),o.parentNode&&n++;break;case"comment":t.parentNode.removeChild(t)}}return function(t,i){if(p.isEmptyObject(i))return t;var n;(n=i["-"])&&p.each(n.split(" "),function(e){i[e]="-"}),n=0;for(var s;s=t.children[n];)e(s,i),s.parentNode&&n++;return t}}(),UE.plugin=function(){var e={};return{register:function(t,i,n,s){n&&p.isFunction(n)&&(s=n,n=null),e[t]={optionName:n||t,execFn:i,afterDisabled:s}},load:function(t){p.each(e,function(e){var i=e.execFn.call(t);!1!==t.options[e.optionName]?i&&p.each(i,function(e,i){switch(i.toLowerCase()){case"shortcutkey":t.addshortcutkey(e);break;case"bindevents":p.each(e,function(e,i){t.addListener(i,e)});break;case"bindmultievents":p.each(p.isArray(e)?e:[e],function(e){var i=p.trim(e.type).split(/\s+/);p.each(i,function(i){t.addListener(i,e.handler)})});break;case"commands":p.each(e,function(e,i){t.commands[i]=e});break;case"outputrule":t.addOutputRule(e);break;case"inputrule":t.addInputRule(e);break;case"defaultoptions":t.setOpt(e)}}):e.afterDisabled&&e.afterDisabled.call(t)}),p.each(UE.plugins,function(e){e.call(t)})},run:function(t,i){var n=e[t];n&&n.exeFn.call(i)}}}();var $=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},Y=UE.LocalStorage=function(){function e(){var e=document.createElement("div");return e.style.display="none",e.addBehavior?(e.addBehavior("#default#userdata"),{getItem:function(t){var n=null;try{document.body.appendChild(e),e.load(i),n=e.getAttribute(t),document.body.removeChild(e)}catch(e){}return n},setItem:function(t,n){document.body.appendChild(e),e.setAttribute(t,n),e.save(i),document.body.removeChild(e)},removeItem:function(t){document.body.appendChild(e),e.removeAttribute(t),e.save(i),document.body.removeChild(e)}}):null}var t=window.localStorage||e()||null,i="localStorage";return{saveLocalData:function(e,i){return!(!t||!i)&&(t.setItem(e,i),!0)},getLocalData:function(e){return t?t.getItem(e):null},removeItem:function(e){t&&t.removeItem(e)}}}();!function(){UE.Editor.prototype.setPreferences=function(e,t){var i={};p.isString(e)?i[e]=t:i=e;var n=Y.getLocalData("ueditor_preference");n&&(n=p.str2json(n))?p.extend(n,i):n=i,n&&Y.saveLocalData("ueditor_preference",p.json2str(n))},UE.Editor.prototype.getPreferences=function(e){var t=Y.getLocalData("ueditor_preference");return t&&(t=p.str2json(t))?e?t[e]:t:null},UE.Editor.prototype.removePreferences=function(e){var t=Y.getLocalData("ueditor_preference");t&&(t=p.str2json(t))&&(t[e]=void 0,delete t[e]),t&&Y.saveLocalData("ueditor_preference",p.json2str(t))}}(),UE.plugins.defaultfilter=function(){var e=this;e.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),e.addInputRule(function(t){function i(e){for(;e&&"element"==e.type;){if("td"==e.tagName)return!0;e=e.parentNode}return!1}var n,s=this.options.allowDivTransToP;t.traversal(function(t){if("element"==t.type)if(v.$cdata[t.tagName]||!e.options.autoClearEmptyNode||!v.$inline[t.tagName]||v.$empty[t.tagName]||t.attrs&&!p.isEmptyObject(t.attrs))switch(t.tagName){case"style":case"script":t.setAttr({cdata_tag:t.tagName,cdata_data:t.innerHTML()||"",_ue_custom_node_:"true"}),t.tagName="div",t.innerHTML("");break;case"a":(n=t.getAttr("href"))&&t.setAttr("_href",n);break;case"img":if((n=t.getAttr("src"))&&/^data:/.test(n)){t.parentNode.removeChild(t);break}t.setAttr("_src",t.getAttr("src"));break;case"span":r.webkit&&(n=t.getStyle("white-space"))&&/nowrap|normal/.test(n)&&(t.setStyle("white-space",""),e.options.autoClearEmptyNode&&p.isEmptyObject(t.attrs)&&t.parentNode.removeChild(t,!0)),(n=t.getAttr("id"))&&/^_baidu_bookmark_/i.test(n)&&t.parentNode.removeChild(t);break;case"p":(n=t.getAttr("align"))&&(t.setAttr("align"),t.setStyle("text-align",n)),p.each(t.children,function(e){if("element"==e.type&&"p"==e.tagName){var i=e.nextSibling();for(t.parentNode.insertAfter(e,t);i;){var n=i.nextSibling();t.parentNode.insertAfter(i,e),e=i,i=n}return!1}}),t.firstChild()||t.innerHTML(r.ie?"&nbsp;":"<br/>");break;case"div":if(t.getAttr("cdata_tag"))break;if((n=t.getAttr("class"))&&/^line number\d+/.test(n))break;if(!s)break;for(var o,a=UE.uNode.createElement("p");o=t.firstChild();)"text"!=o.type&&UE.dom.dtd.$block[o.tagName]?a.firstChild()?(t.parentNode.insertBefore(a,t),a=UE.uNode.createElement("p")):t.parentNode.insertBefore(o,t):a.appendChild(o);a.firstChild()&&t.parentNode.insertBefore(a,t),t.parentNode.removeChild(t);break;case"dl":t.tagName="ul";break;case"dt":case"dd":t.tagName="li";break;case"li":(o=t.getAttr("class"))&&/list\-/.test(o)||t.setAttr(),o=t.getNodesByTagName("ol ul"),UE.utils.each(o,function(e){t.parentNode.insertAfter(e,t)});break;case"td":case"th":case"caption":t.children&&t.children.length||t.appendChild(r.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":e.options.disabledTableInTable&&i(t)&&(t.parentNode.insertBefore(UE.uNode.createText(t.innerText()),t),t.parentNode.removeChild(t))}else t.firstChild()?"span"!=t.tagName||t.attrs&&!p.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t)})}),e.addOutputRule(function(t){var i;t.traversal(function(t){if("element"==t.type)if(!e.options.autoClearEmptyNode||!v.$inline[t.tagName]||v.$empty[t.tagName]||t.attrs&&!p.isEmptyObject(t.attrs))switch(t.tagName){case"div":(i=t.getAttr("cdata_tag"))&&(t.tagName=i,t.appendChild(UE.uNode.createText(t.getAttr("cdata_data"))),t.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(i=t.getAttr("_href"))&&t.setAttr({href:p.html(i),_href:""});break;case"span":(i=t.getAttr("id"))&&/^_baidu_bookmark_/i.test(i)&&t.parentNode.removeChild(t);break;case"img":(i=t.getAttr("_src"))&&t.setAttr({src:t.getAttr("_src"),_src:""})}else t.firstChild()?"span"!=t.tagName||t.attrs&&!p.isEmptyObject(t.attrs)||t.parentNode.removeChild(t,!0):t.parentNode.removeChild(t)})})},UE.commands.inserthtml={execCommand:function(e,t,i){var n,s=this;if(t&&!0!==s.fireEvent("beforeinserthtml",t)){if(n=s.selection.getRange(),e=n.document.createElement("div"),e.style.display="inline",i||(i=UE.htmlparser(t),s.options.filterRules&&UE.filterNode(i,s.options.filterRules),s.filterInputRule(i),t=i.toHtml()),e.innerHTML=p.trim(t),!n.collapsed&&(i=n.startContainer,f.isFillChar(i)&&n.setStartBefore(i),i=n.endContainer,f.isFillChar(i)&&n.setEndAfter(i),n.txtToElmBoundary(),n.endContainer&&1==n.endContainer.nodeType&&(i=n.endContainer.childNodes[n.endOffset])&&f.isBr(i)&&n.setEndAfter(i),0==n.startOffset&&(i=n.startContainer,f.isBoundaryNode(i,"firstChild")&&(i=n.endContainer,n.endOffset==(3==i.nodeType?i.nodeValue.length:i.childNodes.length)&&f.isBoundaryNode(i,"lastChild")&&(s.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",n.setStart(s.body.firstChild,0).collapse(!0)))),!n.collapsed&&n.deleteContents(),1==n.startContainer.nodeType)){i=n.startContainer.childNodes[n.startOffset];var o;if(i&&f.isBlockElm(i)&&(o=i.previousSibling)&&f.isBlockElm(o)){for(n.setEnd(o,o.childNodes.length).collapse();i.firstChild;)o.appendChild(i.firstChild);f.remove(i)}}var a,l,d,c=0;n.inFillChar()&&(i=n.startContainer,f.isFillChar(i)?(n.setStartBefore(i).collapse(!0),f.remove(i)):f.isFillChar(i,!0)&&(i.nodeValue=i.nodeValue.replace(P,""),n.startOffset--,n.collapsed&&n.collapse(!0)));var h=f.findParentByTagName(n.startContainer,"li",!0);if(h){for(var u;i=e.firstChild;){for(;i&&(3==i.nodeType||!f.isBlockElm(i)||"HR"==i.tagName);)u=i.nextSibling,n.insertNode(i).collapse(),a=i,i=u;if(i)if(/^(ol|ul)$/i.test(i.tagName)){for(;i.firstChild;)a=i.firstChild,f.insertAfter(h,i.firstChild),h=h.nextSibling;f.remove(i)}else u=i.nextSibling,o=s.document.createElement("li"),f.insertAfter(h,o),o.appendChild(i),a=i,i=u,h=o}h=f.findParentByTagName(n.startContainer,"li",!0),f.isEmptyBlock(h)&&f.remove(h),a&&n.setStartAfter(a).collapse(!0).select(!0)}else{for(;i=e.firstChild;){if(c){for(a=s.document.createElement("p");i&&(3==i.nodeType||!v.$block[i.tagName]);)d=i.nextSibling,a.appendChild(i),i=d;a.firstChild&&(i=a)}if(n.insertNode(i),d=i.nextSibling,!c&&i.nodeType==f.NODE_ELEMENT&&f.isBlockElm(i)&&(a=f.findParent(i,function(e){return f.isBlockElm(e)}))&&"body"!=a.tagName.toLowerCase()&&(!v[a.tagName][i.nodeName]||i.parentNode!==a)){if(v[a.tagName][i.nodeName])for(l=i.parentNode;l!==a;)o=l,l=l.parentNode;else o=a;f.breakParent(i,o||l),o=i.previousSibling,f.trimWhiteTextNode(o),o.childNodes.length||f.remove(o),!r.ie&&(u=i.nextSibling)&&f.isBlockElm(u)&&u.lastChild&&!f.isBr(u.lastChild)&&u.appendChild(s.document.createElement("br")),c=1}if(u=i.nextSibling,!e.firstChild&&u&&f.isBlockElm(u)){n.setStart(u,0).collapse(!0);break}n.setEndAfter(i).collapse()}if(i=n.startContainer,d&&f.isBr(d)&&f.remove(d),f.isBlockElm(i)&&f.isEmptyNode(i))if(d=i.nextSibling)f.remove(i),1==d.nodeType&&v.$block[d.tagName]&&n.setStart(d,0).collapse(!0).shrinkBoundary();else try{i.innerHTML=r.ie?f.fillChar:"<br/>"}catch(e){n.setStartBefore(i),f.remove(i)}try{n.select(!0)}catch(e){}}setTimeout(function(){n=s.selection.getRange(),n.scrollToView(s.autoHeightEnabled,s.autoHeightEnabled?f.getXY(s.iframe).y:0),s.fireEvent("afterinserthtml",t)},200)}}},UE.plugins.autotypeset=function(){function e(e,t){return e&&3!=e.nodeType?f.isBr(e)?1:e&&e.parentNode&&d[e.tagName.toLowerCase()]?s&&s.contains(e)||e.getAttribute("pagebreak")?0:t?!f.isEmptyBlock(e):f.isEmptyBlock(e,RegExp("[\\s"+f.fillChar+"]","g")):void 0:0}function t(e){e.style.cssText||(f.removeAttributes(e,["style"]),"span"==e.tagName.toLowerCase()&&f.hasNoAttributes(e)&&f.remove(e,!0))}function i(i,n){var o;if(n){if(!a.pasteFilter)return;o=this.document.createElement("div"),o.innerHTML=n.html}else o=this.document.body;for(var d,c=f.getElementsByTagName(o,"*"),h=0;d=c[h++];)if(!0!==this.fireEvent("excludeNodeinautotype",d)){if(a.clearFontSize&&d.style.fontSize&&(f.removeStyle(d,"font-size"),t(d)),a.clearFontFamily&&d.style.fontFamily&&(f.removeStyle(d,"font-family"),t(d)),e(d)){if(a.mergeEmptyline)for(var u,m=d.nextSibling,g=f.isBr(d);e(m)&&(u=m,m=u.nextSibling,!g||m&&(!m||f.isBr(m)));)f.remove(u);if(a.removeEmptyline&&f.inDoc(d,o)&&!l[d.parentNode.tagName.toLowerCase()]){if(f.isBr(d)&&(m=d.nextSibling)&&!f.isBr(m))continue;f.remove(d);continue}}if(e(d,!0)&&"SPAN"!=d.tagName&&(a.indent&&(d.style.textIndent=a.indentValue),a.textAlign&&(d.style.textAlign=a.textAlign)),a.removeClass&&d.className&&!r[d.className.toLowerCase()]){if(s&&s.contains(d))continue;f.removeAttributes(d,["class"])}if(a.imageBlockLine&&"img"==d.tagName.toLowerCase()&&!d.getAttribute("emotion"))if(n)switch(g=d,a.imageBlockLine){case"left":case"right":case"none":for(var y,m=g.parentNode;v.$inline[m.tagName]||"A"==m.tagName;)m=m.parentNode;if(u=m,"P"==u.tagName&&"center"==f.getStyle(u,"text-align")&&!f.isBody(u)&&1==f.getChildCount(u,function(e){return!f.isBr(e)&&!f.isWhitespace(e)}))if(y=u.previousSibling,m=u.nextSibling,y&&m&&1==y.nodeType&&1==m.nodeType&&y.tagName==m.tagName&&f.isBlockElm(y)){for(y.appendChild(u.firstChild);m.firstChild;)y.appendChild(m.firstChild);f.remove(u),f.remove(m)}else f.setStyle(u,"text-align","");f.setStyle(g,"float",a.imageBlockLine);break;case"center":if("center"!=this.queryCommandValue("imagefloat")){for(m=g.parentNode,f.setStyle(g,"float","none"),u=g;m&&1==f.getChildCount(m,function(e){return!f.isBr(e)&&!f.isWhitespace(e)})&&(v.$inline[m.tagName]||"A"==m.tagName);)u=m,m=m.parentNode;m=this.document.createElement("p"),f.setAttributes(m,{style:"text-align:center"}),u.parentNode.insertBefore(m,u),m.appendChild(u),f.setStyle(u,"float","")}}else this.selection.getRange().selectNode(d).select(),this.execCommand("imagefloat",a.imageBlockLine);a.removeEmptyNode&&a.removeTagNames[d.tagName.toLowerCase()]&&f.hasNoAttributes(d)&&f.isEmptyBlock(d)&&f.remove(d)}a.tobdc&&(c=UE.htmlparser(o.innerHTML),c.traversal(function(e){if("text"==e.type){for(var t=e.data,t=p.html(t),i="",n=0;n<t.length;n++)i=32==t.charCodeAt(n)?i+String.fromCharCode(12288):127>t.charCodeAt(n)?i+String.fromCharCode(t.charCodeAt(n)+65248):i+t.charAt(n);e.data=i}}),o.innerHTML=c.toHtml()),a.bdc2sb&&(c=UE.htmlparser(o.innerHTML),c.traversal(function(e){if("text"==e.type){for(var t=e.data,i="",n=0;n<t.length;n++)var s=t.charCodeAt(n),i=65281<=s&&65373>=s?i+String.fromCharCode(t.charCodeAt(n)-65248):12288==s?i+String.fromCharCode(t.charCodeAt(n)-12288+32):i+t.charAt(n);e.data=i}}),o.innerHTML=c.toHtml()),n&&(n.html=o.innerHTML)}function n(){var e=o.getPreferences("autotypeset");p.extend(o.options.autotypeset,e)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:p.extend({div:1},v.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var s,o=this,a=o.options.autotypeset,r={selectTdClass:1,pagebreak:1,anchorclass:1},l={li:1},d={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};a&&(n(),a.pasteFilter&&o.addListener("beforepaste",i),o.commands.autotypeset={execCommand:function(){o.removeListener("beforepaste",i),a.pasteFilter&&o.addListener("beforepaste",i),i.call(o)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=f.findParentByTagName(this.iframe,"form",!1);e&&!1!==this.fireEvent("beforesubmit")&&(this.sync(),e.submit())}}}}}),UE.plugin.register("background",function(){function e(e){var t={};return e=e.split(";"),p.each(e,function(e){var i=e.indexOf(":"),n=p.trim(e.substr(0,i)).toLowerCase();n&&(t[n]=p.trim(e.substr(i+1)||""))}),t}function t(e){if(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t+":"+e[t]+"; ");p.cssRule(s,i.length?"body{"+i.join("")+"}":"",n.document)}else p.cssRule(s,"",n.document)}var i,n=this,s="editor_background",o=/body[\s]*\{(.+)\}/i,a=n.hasContents;return n.hasContents=function(){return!!n.queryCommandValue("background")||a.apply(n,arguments)},{bindEvents:{getAllHtml:function(e,t){var i,s=this.body,o=f.getComputedStyle(s,"background-image"),a="",a=0<o.indexOf(n.options.imagePath)?o.substring(o.indexOf(n.options.imagePath),o.length-1).replace(/"|\(|\)/gi,""):"none"!=o?o.replace(/url\("?|"?\)/gi,""):"",o='<style type="text/css">body{',s={"background-color":f.getComputedStyle(s,"background-color")||"#ffffff","background-image":a?"url("+a+")":"","background-repeat":f.getComputedStyle(s,"background-repeat")||"","background-position":r.ie?f.getComputedStyle(s,"background-position-x")+" "+f.getComputedStyle(s,"background-position-y"):f.getComputedStyle(s,"background-position"),height:f.getComputedStyle(s,"height")};for(i in s)s.hasOwnProperty(i)&&(o+=i+":"+s[i]+"; ");t.push(o+"}</style> ")},aftersetcontent:function(){0==i&&t()}},inputRule:function(n){i=!1,p.each(n.getNodesByTagName("p"),function(n){var s=n.getAttr("data-background");s&&(i=!0,t(e(s)),n.parentNode.removeChild(n))})},outputRule:function(e){var t=(p.cssRule(s,this.document)||"").replace(/[\n\r]+/g,"").match(o);t&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+p.trim(t[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,i){t(i)},queryCommandValue:function(){var t=(p.cssRule(s,this.document)||"").replace(/[\n\r]+/g,"").match(o);return t?e(t[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(e,t){var i=this.selection.getRange();if(!i.collapsed){var n=i.getClosedNode();if(n&&"IMG"==n.tagName)switch(t){case"left":case"right":case"none":for(var s,o,a=n.parentNode;v.$inline[a.tagName]||"A"==a.tagName;)a=a.parentNode;if(s=a,"P"==s.tagName&&"center"==f.getStyle(s,"text-align")){if(!f.isBody(s)&&1==f.getChildCount(s,function(e){return!f.isBr(e)&&!f.isWhitespace(e)}))if(a=s.previousSibling,o=s.nextSibling,a&&o&&1==a.nodeType&&1==o.nodeType&&a.tagName==o.tagName&&f.isBlockElm(a)){
for(a.appendChild(s.firstChild);o.firstChild;)a.appendChild(o.firstChild);f.remove(s),f.remove(o)}else f.setStyle(s,"text-align","");i.selectNode(n).select()}f.setStyle(n,"float","none"==t?"":t),"none"==t&&f.removeAttributes(n,"align");break;case"center":if("center"!=this.queryCommandValue("imagefloat")){for(a=n.parentNode,f.setStyle(n,"float",""),f.removeAttributes(n,"align"),s=n;a&&1==f.getChildCount(a,function(e){return!f.isBr(e)&&!f.isWhitespace(e)})&&(v.$inline[a.tagName]||"A"==a.tagName);)s=a,a=a.parentNode;i.setStartBefore(s).setCursor(!1),a=this.document.createElement("div"),a.appendChild(s),f.setStyle(s,"float",""),this.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+a.innerHTML+"</p>"),s=this.document.getElementById("_img_parent_tmp"),s.removeAttribute("id"),s=s.firstChild,i.selectNode(s).select(),(o=s.parentNode.nextSibling)&&f.isEmptyNode(o)&&f.remove(o)}}}},queryCommandValue:function(){var e,t=this.selection.getRange();return t.collapsed?"none":(t=t.getClosedNode())&&1==t.nodeType&&"IMG"==t.tagName?(e=f.getComputedStyle(t,"float")||t.getAttribute("align"),"none"==e&&(e="center"==f.getComputedStyle(t.parentNode,"text-align")?"center":e),{left:1,right:1,center:1}[e]?e:"none"):"none"},queryCommandState:function(){var e=this.selection.getRange();return e.collapsed?-1:(e=e.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?0:-1}},UE.commands.insertimage={execCommand:function(e,t){if(t=p.isArray(t)?t:[t],t.length){var i=this.selection.getRange(),n=i.getClosedNode();if(!0!==this.fireEvent("beforeinsertimage",t)){if(!n||!/img/i.test(n.tagName)||"edui-faked-video"==n.className&&-1==n.className.indexOf("edui-upload-video")||n.getAttribute("word_img")){var s,i=[],n="";if(s=t[0],1==t.length)n='<img src="'+s.src+'" '+(s._src?' _src="'+s._src+'" ':"")+(s.width?'width="'+s.width+'" ':"")+(s.height?' height="'+s.height+'" ':"")+("left"==s.floatStyle||"right"==s.floatStyle?' style="float:'+s.floatStyle+';"':"")+(s.title&&""!=s.title?' title="'+s.title+'"':"")+(s.border&&"0"!=s.border?' border="'+s.border+'"':"")+(s.alt&&""!=s.alt?' alt="'+s.alt+'"':"")+(s.hspace&&"0"!=s.hspace?' hspace = "'+s.hspace+'"':"")+(s.vspace&&"0"!=s.vspace?' vspace = "'+s.vspace+'"':"")+"/>","center"==s.floatStyle&&(n='<p style="text-align: center">'+n+"</p>"),i.push(n);else for(var o=0;s=t[o++];)n="<p "+("center"==s.floatStyle?'style="text-align: center" ':"")+'><img src="'+s.src+'" '+(s.width?'width="'+s.width+'" ':"")+(s._src?' _src="'+s._src+'" ':"")+(s.height?' height="'+s.height+'" ':"")+' style="'+(s.floatStyle&&"center"!=s.floatStyle?"float:"+s.floatStyle+";":"")+(s.border||"")+'" '+(s.title?' title="'+s.title+'"':"")+" /></p>",i.push(n);this.execCommand("insertHtml",i.join(""))}else s=t.shift(),o=s.floatStyle,delete s.floatStyle,f.setAttributes(n,s),this.execCommand("imagefloat",o),0<t.length&&(i.setStartAfter(n).setCursor(!1,!0),this.execCommand("insertimage",t));this.fireEvent("afterinsertimage",t)}}}},UE.plugins.justify=function(){var e=f.isBlockElm,t={left:1,right:1,center:1,justify:1},i=function(t,i){var n=t.createBookmark(),s=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!f.isBookmarkNode(e):!f.isWhitespace(e)};t.enlarge(!0);for(var o,a=t.createBookmark(),r=f.getNextDomNode(a.start,!1,s),l=t.cloneRange();r&&!(f.getPosition(r,a.end)&f.POSITION_FOLLOWING);)if(3!=r.nodeType&&e(r))r=f.getNextDomNode(r,!0,s);else{for(l.setStartBefore(r);r&&r!==a.end&&!e(r);)o=r,r=f.getNextDomNode(r,!1,null,function(t){return!e(t)});if(l.setEndAfter(o),r=l.getCommonAncestor(),!f.isBody(r)&&e(r))f.setStyles(r,p.isString(i)?{"text-align":i}:i);else{r=t.document.createElement("p"),f.setStyles(r,p.isString(i)?{"text-align":i}:i);var d=l.extractContents();r.appendChild(d),l.insertNode(r)}r=f.getNextDomNode(r,!1,s)}return t.moveToBookmark(a).moveToBookmark(n)};UE.commands.justify={execCommand:function(e,t){var n,s=this.selection.getRange();return s.collapsed&&(n=this.document.createTextNode("p"),s.insertNode(n)),i(s,t),n&&(s.setStartBefore(n).collapse(!0),f.remove(n)),s.select(),!0},queryCommandValue:function(){var e=this.selection.getStart(),e=f.getComputedStyle(e,"text-align");return t[e]?e:"left"},queryCommandState:function(){var e=this.selection.getStart();return e&&f.findParentByTagName(e,["td","th","caption"],!0)?-1:0}}},UE.plugins.font=function(){function e(e){for(var t;(t=e.parentNode)&&("SPAN"==t.tagName&&1==f.getChildCount(t,function(e){return!f.isBookmarkNode(e)&&!f.isBr(e)}));)t.style.cssText+=e.style.cssText,f.remove(e,!0),e=t}function t(e,t,i){if(o[t]&&(e.adjustmentBoundary(),!e.collapsed&&1==e.startContainer.nodeType)){var n=e.startContainer.childNodes[e.startOffset];if(n&&f.isTagNode(n,"span")){var s=e.createBookmark();p.each(f.getElementsByTagName(n,"span"),function(e){!e.parentNode||f.isBookmarkNode(e)||"backcolor"==t&&f.getComputedStyle(e,"background-color").toLowerCase()===i||(f.removeStyle(e,o[t]),0==e.style.cssText.replace(/^\s+$/,"").length&&f.remove(e,!0))}),e.moveToBookmark(s)}}}function i(i,n,s){var o=i.collapsed,a=i.createBookmark();if(o)for(o=a.start.parentNode;v.$inline[o.tagName];)o=o.parentNode;else o=f.getCommonAncestor(a.start,a.end);p.each(f.getElementsByTagName(o,"span"),function(t){if(t.parentNode&&!f.isBookmarkNode(t))if(/\s*border\s*:\s*none;?\s*/i.test(t.style.cssText))/^\s*border\s*:\s*none;?\s*$/.test(t.style.cssText)?f.remove(t,!0):f.removeStyle(t,"border");else{if(/border/i.test(t.style.cssText)&&"SPAN"==t.parentNode.tagName&&/border/i.test(t.parentNode.style.cssText)&&(t.style.cssText=t.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=n||"none"!=s)for(var i=t.nextSibling;i&&1==i.nodeType&&"SPAN"==i.tagName;){if(f.isBookmarkNode(i)&&"fontborder"==n)t.appendChild(i);else if(i.style.cssText==t.style.cssText&&(f.moveChild(i,t),f.remove(i)),t.nextSibling===i)break;i=t.nextSibling}e(t),r.ie&&8<r.version&&(i=f.findParent(t,function(e){return"SPAN"==e.tagName&&/background-color/.test(e.style.cssText)}))&&!/background-color/.test(t.style.cssText)&&(t.style.backgroundColor=i.style.backgroundColor)}}),i.moveToBookmark(a),t(i,n,s)}var n={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},s={underline:1,strikethrough:1,fontborder:1},o={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};this.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),this.addInputRule(function(e){p.each(e.getNodesByTagName("u s del font strike"),function(e){if("font"==e.tagName){var t,i=[];for(t in e.attrs)switch(t){case"size":i.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[t]]||e.attrs[t])+"px");break;case"color":i.push("color:"+e.attrs[t]);break;case"face":i.push("font-family:"+e.attrs[t]);break;case"style":i.push(e.attrs[t])}e.attrs={style:i.join(";")}}else i="u"==e.tagName?"underline":"line-through",e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+i+";"};e.tagName="span"})});for(var a in n)(function(e,t){UE.commands[e]={execCommand:function(n,o){o=o||(this.queryCommandState(n)?"none":"underline"==n?"underline":"fontborder"==n?"1px solid #000":"line-through");var a,l=this.selection.getRange();if("default"==o)l.collapsed&&(a=this.document.createTextNode("font"),l.insertNode(a).select()),this.execCommand("removeFormat","span,a",t),a&&(l.setStartBefore(a).collapse(!0),f.remove(a)),i(l,n,o),l.select();else if(l.collapsed){var d=f.findParentByTagName(l.startContainer,"span",!0);if(a=this.document.createTextNode("font"),!d||d.children.length||d[r.ie?"innerText":"textContent"].replace(P,"").length){if(l.insertNode(a),l.selectNode(a).select(),d=l.document.createElement("span"),s[e]){if(f.findParentByTagName(a,"a",!0))return l.setStartBefore(a).setCursor(),void f.remove(a);this.execCommand("removeFormat","span,a",t)}if(d.style.cssText=t+":"+o,a.parentNode.insertBefore(d,a),!r.ie||r.ie&&9==r.version)for(var c=d.parentNode;!f.isBlockElm(c);)"SPAN"==c.tagName&&(d.style.cssText=c.style.cssText+";"+d.style.cssText),c=c.parentNode;ma?setTimeout(function(){l.setStart(d,0).collapse(!0),i(l,n,o),l.select()}):(l.setStart(d,0).collapse(!0),i(l,n,o),l.select())}else l.insertNode(a),s[e]&&(l.selectNode(a).select(),this.execCommand("removeFormat","span,a",t,null),d=f.findParentByTagName(a,"span",!0),l.setStartBefore(a)),d&&(d.style.cssText+=";"+t+":"+o),l.collapse(!0).select();f.remove(a)}else s[e]&&this.queryCommandValue(e)&&this.execCommand("removeFormat","span,a",t),l=this.selection.getRange(),l.applyInlineStyle("span",{style:t+":"+o}),i(l,n,o),l.select();return!0},queryCommandValue:function(e){var i=this.selection.getStart();if("underline"==e||"strikethrough"==e){for(var n=i;n&&!f.isBlockElm(n)&&!f.isBody(n);){if(1==n.nodeType&&(e=f.getComputedStyle(n,t),"none"!=e))return e;n=n.parentNode}return"none"}if("fontborder"==e){for(e=i;e&&v.$inline[e.tagName];){if((n=f.getComputedStyle(e,"border"))&&/1px/.test(n)&&/solid/.test(n))return n;e=e.parentNode}return""}return"FontSize"==e?(n=f.getComputedStyle(i,t),(e=/^([\d\.]+)(\w+)$/.exec(n))?Math.floor(e[1])+e[2]:n):f.getComputedStyle(i,t)},queryCommandState:function(e){if(!s[e])return 0;var t=this.queryCommandValue(e);return"fontborder"==e?/1px/.test(t)&&/solid/.test(t):"underline"==e?/underline/.test(t):/line\-through/.test(t)}}})(a,n[a])},UE.plugins.link=function(){function e(e){var t=e.startContainer,i=e.endContainer;(t=f.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(i=f.findParentByTagName(i,"a",!0))&&e.setEndAfter(i)}UE.commands.unlink={execCommand:function(){var t,i=this.selection.getRange();i.collapsed&&!f.findParentByTagName(i.startContainer,"a",!0)||(t=i.createBookmark(),e(i),i.removeInlineStyle("a").moveToBookmark(t).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(t,i){var n;i._href&&(i._href=p.unhtml(i._href,/[<">]/g)),i.href&&(i.href=p.unhtml(i.href,/[<">]/g)),i.textValue&&(i.textValue=p.unhtml(i.textValue,/[<">]/g));var s=n=this.selection.getRange(),o=s.cloneRange(),a=this.queryCommandValue("link");e(s=s.adjustmentBoundary());var l=s.startContainer;if(1==l.nodeType&&a&&(l=l.childNodes[s.startOffset])&&1==l.nodeType&&"A"==l.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(l[r.ie?"innerText":"textContent"])&&(l[r.ie?"innerText":"textContent"]=p.html(i.textValue||i.href)),o.collapsed&&!a||(s.removeInlineStyle("a"),o=s.cloneRange()),o.collapsed){var a=s.document.createElement("a"),d="";i.textValue?(d=p.html(i.textValue),delete i.textValue):d=p.html(i.href),f.setAttributes(a,i),(l=f.findParentByTagName(o.startContainer,"a",!0))&&f.isInNodeEndBoundary(o,l)&&s.setStartAfter(l).collapse(!0),a[r.ie?"innerText":"textContent"]=d,s.insertNode(a).selectNode(a)}else s.applyInlineStyle("a",i);n.collapse().select(!0)},queryCommandValue:function(){var e,t=this.selection.getRange();if(!t.collapsed){t.shrinkBoundary();var i=3!=t.startContainer.nodeType&&t.startContainer.childNodes[t.startOffset]?t.startContainer.childNodes[t.startOffset]:t.startContainer,n=3==t.endContainer.nodeType||0==t.endOffset?t.endContainer:t.endContainer.childNodes[t.endOffset-1],t=t.getCommonAncestor();if(e=f.findParentByTagName(t,"a",!0),!e&&1==t.nodeType)for(var s,o,a,t=t.getElementsByTagName("a"),r=0;a=t[r++];)if(s=f.getPosition(a,i),o=f.getPosition(a,n),(s&f.POSITION_FOLLOWING||s&f.POSITION_CONTAINS)&&(o&f.POSITION_PRECEDING||o&f.POSITION_CONTAINS)){e=a;break}return e}if(e=t.startContainer,(e=1==e.nodeType?e:e.parentNode)&&(e=f.findParentByTagName(e,"a",!0))&&!f.isInNodeEndBoundary(t,e))return e},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return!e||"edui-faked-video"!=e.className&&-1==e.className.indexOf("edui-upload-video")?0:-1}}},UE.plugins.insertframe=function(){var e=this;e.addListener("selectionchange",function(){e._iframe&&delete e._iframe})},UE.commands.scrawl={queryCommandState:function(){return r.ie&&8>=r.version?-1:0}},UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),this.commands.removeformat={execCommand:function(e,t,i,n,s){function o(e){if(3==e.nodeType||"span"!=e.tagName.toLowerCase())return 0;if(r.ie){var t=e.attributes;if(t.length){e=0;for(var i=t.length;e<i;e++)if(t[e].specified)return 0;return 1}}return!e.attributes.length}var a=RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),l=i?[]:(n||this.options.removeFormatAttributes).split(",");e=new L.Range(this.document);var d,c,h=function(e){return 1==e.nodeType};e=this.selection.getRange(),function(e){var t=e.createBookmark();if(e.collapsed&&e.enlarge(!0),!s){var n=f.findParentByTagName(e.startContainer,"a",!0);n&&e.setStartBefore(n),(n=f.findParentByTagName(e.endContainer,"a",!0))&&e.setEndAfter(n)}for(d=e.createBookmark(),n=d.start;(c=n.parentNode)&&!f.isBlockElm(c);)f.breakParent(n,c),f.clearEmptySibling(n);if(d.end){for(n=d.end;(c=n.parentNode)&&!f.isBlockElm(c);)f.breakParent(n,c),f.clearEmptySibling(n);for(var r,n=f.getNextDomNode(d.start,!1,h);n&&n!=d.end;)r=f.getNextDomNode(n,!0,h),v.$empty[n.tagName.toLowerCase()]||f.isBookmarkNode(n)||(a.test(n.tagName)?i?(f.removeStyle(n,i),o(n)&&"text-decoration"!=i&&f.remove(n,!0)):f.remove(n,!0):v.$tableContent[n.tagName]||v.$list[n.tagName]||(f.removeAttributes(n,l),o(n)&&f.remove(n,!0))),n=r}for(n=d.start.parentNode,!f.isBlockElm(n)||v.$tableContent[n.tagName]||v.$list[n.tagName]||f.removeAttributes(n,l),n=d.end.parentNode,d.end&&f.isBlockElm(n)&&!v.$tableContent[n.tagName]&&!v.$list[n.tagName]&&f.removeAttributes(n,l),e.moveToBookmark(d).moveToBookmark(t),n=e.startContainer,r=e.collapsed;1==n.nodeType&&f.isEmptyNode(n)&&v.$removeEmpty[n.tagName];)t=n.parentNode,e.setStartBefore(n),e.startContainer===e.endContainer&&e.endOffset--,f.remove(n),n=t;if(!r)for(n=e.endContainer;1==n.nodeType&&f.isEmptyNode(n)&&v.$removeEmpty[n.tagName];)t=n.parentNode,e.setEndBefore(n),f.remove(n),n=t}(e),e.select()}}},UE.plugins.blockquote=function(){this.commands.blockquote={execCommand:function(e,t){var i=this.selection.getRange(),n=f.filterNodeList(this.selection.getStartElementPath(),"blockquote"),s=v.blockquote,o=i.createBookmark();if(n){var s=i.startContainer,s=f.isBlockElm(s)?s:f.findParent(s,function(e){return f.isBlockElm(e)}),a=i.endContainer,a=f.isBlockElm(a)?a:f.findParent(a,function(e){return f.isBlockElm(e)}),s=f.findParentByTagName(s,"li",!0)||s,a=f.findParentByTagName(a,"li",!0)||a;"LI"==s.tagName||"TD"==s.tagName||s===n||f.isBody(s)?f.remove(n,!0):f.breakParent(s,n),s!==a&&(n=f.findParentByTagName(a,"blockquote"))&&("LI"==a.tagName||"TD"==a.tagName||f.isBody(a)?n.parentNode&&f.remove(n,!0):f.breakParent(a,n));for(var r,l=f.getElementsByTagName(this.document,"blockquote"),n=0;r=l[n++];)r.childNodes.length?f.getPosition(r,s)&f.POSITION_FOLLOWING&&f.getPosition(r,a)&f.POSITION_PRECEDING&&f.remove(r,!0):f.remove(r)}else{for(n=i.cloneRange(),l=a=1==n.startContainer.nodeType?n.startContainer:n.startContainer.parentNode,r=1;;){if(f.isBody(a)){l!==a?i.collapsed?(n.selectNode(l),r=0):n.setStartBefore(l):n.setStart(a,0);break}if(!s[a.tagName]){i.collapsed?n.selectNode(l):n.setStartBefore(l);break}l=a,a=a.parentNode}if(r)for(l=a=a=1==n.endContainer.nodeType?n.endContainer:n.endContainer.parentNode;;){if(f.isBody(a)){l!==a?n.setEndAfter(l):n.setEnd(a,a.childNodes.length);break}if(!s[a.tagName]){n.setEndAfter(l);break}l=a,a=a.parentNode}for(a=i.document.createElement("blockquote"),f.setAttributes(a,t),a.appendChild(n.extractContents()),n.insertNode(a),s=f.getElementsByTagName(a,"blockquote"),n=0;a=s[n++];)a.parentNode&&f.remove(a,!0)}i.moveToBookmark(o).select()},queryCommandState:function(){return f.filterNodeList(this.selection.getStartElementPath(),"blockquote")?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(e){var t=this.selection.getRange();if(t.collapsed)return t;for(var i=t.createBookmark(),n=i.end,s=function(e){return!f.isBr(e)&&!f.isWhitespace(e)},o=f.getNextDomNode(i.start,!1,s);o&&f.getPosition(o,n)&f.POSITION_PRECEDING&&(3==o.nodeType&&(o.nodeValue=o.nodeValue["touppercase"==e?"toUpperCase":"toLowerCase"]()),o=f.getNextDomNode(o,!0,s),o!==n););t.moveToBookmark(i).select()}},UE.commands.indent={execCommand:function(){var e=this.queryCommandState("indent")?"0em":this.options.indentValue||"2em";this.execCommand("Paragraph","p",{style:"text-indent:"+e})},queryCommandState:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var e=window.open("","_blank","").document;e.open(),e.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"></script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)</script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),e.close()},notNeedUndo:1},UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var e=this.body,t=this.selection.getRange();t.selectNodeContents(e),f.isEmptyBlock(e)&&(r.opera&&e.firstChild&&1==e.firstChild.nodeType&&t.setStartAtFirst(e.firstChild),t.collapse(!0)),t.select(!0)},notNeedUndo:1},this.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var e=f.isBlockElm,t=["TD","LI","PRE"],i=function(i,n,s,o){var a,r=i.createBookmark(),l=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!f.isBookmarkNode(e):!f.isWhitespace(e)};i.enlarge(!0);var d=i.createBookmark();a=f.getNextDomNode(d.start,!1,l);for(var c,h=i.cloneRange();a&&!(f.getPosition(a,d.end)&f.POSITION_FOLLOWING);)if(3!=a.nodeType&&e(a))a=f.getNextDomNode(a,!0,l);else{for(h.setStartBefore(a);a&&a!==d.end&&!e(a);)c=a,a=f.getNextDomNode(a,!1,null,function(t){return!e(t)});h.setEndAfter(c),a=i.document.createElement(n),s&&(f.setAttributes(a,s),o&&"customstyle"==o&&s.style&&(a.style.cssText=s.style)),a.appendChild(h.extractContents()),f.isEmptyNode(a)&&f.fillChar(i.document,a),h.insertNode(a);var u=a.parentNode;e(u)&&!f.isBody(a.parentNode)&&-1==p.indexOf(t,u.tagName)&&(o&&"customstyle"==o||(u.getAttribute("dir")&&a.setAttribute("dir",u.getAttribute("dir")),u.style.cssText&&(a.style.cssText=u.style.cssText+";"+a.style.cssText),u.style.textAlign&&!a.style.textAlign&&(a.style.textAlign=u.style.textAlign),u.style.textIndent&&!a.style.textIndent&&(a.style.textIndent=u.style.textIndent),u.style.padding&&!a.style.padding&&(a.style.padding=u.style.padding)),s&&/h\d/i.test(u.tagName)&&!/h\d/i.test(a.tagName)?(f.setAttributes(u,s),o&&"customstyle"==o&&s.style&&(u.style.cssText=s.style),f.remove(a,!0),a=u):f.remove(a.parentNode,!0)),a=-1!=p.indexOf(t,u.tagName)?u:a,a=f.getNextDomNode(a,!1,l)}return i.moveToBookmark(d).moveToBookmark(r)};this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),this.commands.paragraph={execCommand:function(e,t,n,s){if(e=this.selection.getRange(),e.collapsed){var o=this.document.createTextNode("p");if(e.insertNode(o),r.ie){var a=o.previousSibling;a&&f.isWhitespace(a)&&f.remove(a),(a=o.nextSibling)&&f.isWhitespace(a)&&f.remove(a)}}return e=i(e,t,n,s),o&&(e.setStartBefore(o).collapse(!0),pN=o.parentNode,f.remove(o),f.isBlockElm(pN)&&f.isEmptyNode(pN)&&f.fillNode(this.document,pN)),r.gecko&&e.collapsed&&1==e.startContainer.nodeType&&(n=e.startContainer.childNodes[e.startOffset])&&1==n.nodeType&&n.tagName.toLowerCase()==t&&e.setStart(n,0).collapse(!0),e.select(),!0},queryCommandValue:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},function(){var e=f.isBlockElm,t=function(e){return f.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&1==e.nodeType&&e.getAttribute("dir")})},i=function(i,n,s){var o=function(e){return 1==e.nodeType?!f.isBookmarkNode(e):!f.isWhitespace(e)};if((n=t(n))&&i.collapsed)return n.setAttribute("dir",s),i;n=i.createBookmark(),i.enlarge(!0);for(var a,r=i.createBookmark(),l=f.getNextDomNode(r.start,!1,o),d=i.cloneRange();l&&!(f.getPosition(l,r.end)&f.POSITION_FOLLOWING);)if(3!=l.nodeType&&e(l))l=f.getNextDomNode(l,!0,o);else{for(d.setStartBefore(l);l&&l!==r.end&&!e(l);)a=l,l=f.getNextDomNode(l,!1,null,function(t){return!e(t)});if(d.setEndAfter(a),l=d.getCommonAncestor(),!f.isBody(l)&&e(l))l.setAttribute("dir",s);else{l=i.document.createElement("p"),l.setAttribute("dir",s);var c=d.extractContents();l.appendChild(c),d.insertNode(l)}l=f.getNextDomNode(l,!1,o)}return i.moveToBookmark(r).moveToBookmark(n)};UE.commands.directionality={execCommand:function(e,t){var n=this.selection.getRange();if(n.collapsed){var s=this.document.createTextNode("d");n.insertNode(s)}return i(n,this,t),s&&(n.setStartBefore(s).collapse(!0),f.remove(s)),n.select(),!0},queryCommandValue:function(){var e=t(this);return e?e.getAttribute("dir"):"ltr"}}}(),UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(e){if(-1!==this.queryCommandState(e)){this.execCommand("insertHtml","<hr>"),e=this.selection.getRange();var t=e.startContainer;if(1==t.nodeType&&!t.childNodes[e.startOffset]){var i;(i=t.childNodes[e.startOffset-1])&&1==i.nodeType&&"HR"==i.tagName&&("p"==this.options.enterTag?(i=this.document.createElement("p"),e.insertNode(i),e.setStart(i,0).setCursor()):(i=this.document.createElement("br"),e.insertNode(i),e.setStartBefore(i).setCursor()))}return!0}},queryCommandState:function(){return f.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},this.addListener("delkeydown",function(e,t){var i=this.selection.getRange();if(i.txtToElmBoundary(!0),f.isStartInblock(i)){var n=i.startContainer.previousSibling;if(n&&f.isTagNode(n,"hr"))return f.remove(n),i.select(),f.preventDefault(t),!0}})},UE.commands.time=UE.commands.date={execCommand:function(e,t){function i(e,t){var i=("0"+e.getHours()).slice(-2),n=("0"+e.getMinutes()).slice(-2),s=("0"+e.getSeconds()).slice(-2);return(t||"hh:ii:ss").replace(/hh/gi,i).replace(/ii/gi,n).replace(/ss/gi,s)}function n(e,t){var i=("000"+e.getFullYear()).slice(-4),n=i.slice(-2),s=("0"+(e.getMonth()+1)).slice(-2),o=("0"+e.getDate()).slice(-2);return(t||"yyyy-mm-dd").replace(/yyyy/gi,i).replace(/yy/gi,n).replace(/mm/gi,s).replace(/dd/gi,o)}var s=new Date;this.execCommand("insertHtml","time"==e?i(s,t):n(s,t))}},UE.plugins.rowspacing=function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),this.commands.rowspacing={execCommand:function(e,t,i){return this.execCommand("paragraph","p",{style:"margin-"+i+":"+t+"px"}),!0},queryCommandValue:function(e,t){var i=f.filterNodeList(this.selection.getStartElementPath(),function(e){return f.isBlockElm(e)});return i&&(i=f.getComputedStyle(i,"margin-"+t).replace(/[^\d]/g,""))?i:0}}},UE.plugins.lineheight=function(){this.setOpt({lineheight:"1 1.5 1.75 2 3 4 5".split(" ")}),this.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==t?"normal":t+"em")}),!0},queryCommandValue:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),function(e){return f.isBlockElm(e)});if(e)return e=f.getComputedStyle(e,"line-height"),"normal"==e?1:e.replace(/[^\d.]*/gi,"")}}},UE.plugins.insertcode=function(){var e=this;e.ready(function(){p.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",e.document)}),e.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),e.commands.insertcode={execCommand:function(e,t){var i=this.selection.getRange(),n=f.findParentByTagName(i.startContainer,"pre",!0);if(n)n.className="brush:"+t+";toolbar:false;";else{var s="";i.collapsed?s=r.ie&&r.ie11below?8>=r.version?"&nbsp;":"":"<br/>":(n=i.extractContents(),i=this.document.createElement("div"),i.appendChild(n),p.each(UE.filterNode(UE.htmlparser(i.innerHTML.replace(/[\r\t]/g,"")),this.options.filterTxtRules).children,function(e){r.ie&&r.ie11below&&8<r.version?("element"==e.type?"br"==e.tagName?s+="\n":v.$empty[e.tagName]||(p.each(e.children,function(t){"element"==t.type?"br"==t.tagName?s+="\n":v.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/\n$/.test(s)||(s+="\n")):s+=e.data+"\n",!e.nextSibling()&&/\n$/.test(s)&&(s=s.replace(/\n$/,""))):r.ie&&r.ie11below?("element"==e.type?"br"==e.tagName?s+="<br>":v.$empty[e.tagName]||(p.each(e.children,function(t){"element"==t.type?"br"==t.tagName?s+="<br>":v.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/br>$/.test(s)||(s+="<br>")):s+=e.data+"<br>",!e.nextSibling()&&/<br>$/.test(s)&&(s=s.replace(/<br>$/,""))):(s+="element"==e.type?v.$empty[e.tagName]?"":e.innerText():e.data,!/br\/?\s*>$/.test(s)&&e.nextSibling()&&(s+="<br>"))})),this.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+s+"</pre>",!0),n=this.document.getElementById("coder"),f.removeAttributes(n,"id"),(i=n.previousSibling)&&(3==i.nodeType&&1==i.nodeValue.length&&r.ie&&6==r.version||f.isEmptyBlock(i))&&f.remove(i),i=this.selection.getRange(),f.isEmptyBlock(n)?i.setStart(n,0).setCursor(!1,!0):i.selectNodeContents(n).select()}},queryCommandValue:function(){var e=this.selection.getStartElementPath(),t="";return p.each(e,function(e){if("PRE"==e.nodeName)return t=(e=e.className.match(/brush:([^;]+)/))&&e[1]?e[1]:"",!1}),t}},e.addInputRule(function(e){p.each(e.getNodesByTagName("pre"),function(e){var t=e.getNodesByTagName("br");t.length?r.ie&&r.ie11below&&8<r.version&&p.each(t,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}):r.ie&&r.ie11below&&8<r.version||(t=e.innerText().split(/\n/),e.innerHTML(""),p.each(t,function(t){t.length&&e.appendChild(UE.uNode.createText(t)),e.appendChild(UE.uNode.createElement("br"))}))})}),e.addOutputRule(function(e){p.each(e.getNodesByTagName("pre"),function(e){var t="";p.each(e.children,function(e){t="text"==e.type?t+e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==e.tagName?t+"\n":t+(v.$empty[e.tagName]?e.innerText():"")}),e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})}),e.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1},e.queryCommandState=function(e){return!this.notNeedCodeQuery[e.toLowerCase()]&&this.selection&&this.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},e.addListener("beforeenterkeydown",function(){var t=e.selection.getRange(),i=f.findParentByTagName(t.startContainer,"pre",!0);if(i){if(e.fireEvent("saveScene"),t.collapsed||t.deleteContents(),!r.ie||r.ie9above){i=e.document.createElement("br"),t.insertNode(i).setStartAfter(i).collapse(!0),i.nextSibling||r.ie&&!(10<r.version)?t.setStartAfter(i):t.insertNode(i.cloneNode(!1));for(var n,i=i.previousSibling;i;)if(n=i,i=i.previousSibling,!i||"BR"==i.nodeName){i=n;break}if(i){for(n="";i&&"BR"!=i.nodeName&&RegExp("^[\\s"+f.fillChar+"]*$").test(i.nodeValue);)n+=i.nodeValue,i=i.nextSibling;"BR"!=i.nodeName&&(i=i.nodeValue.match(RegExp("^([\\s"+f.fillChar+"]+)")))&&i[1]&&(n+=i[1]),n&&(n=e.document.createTextNode(n),t.insertNode(n).setStartAfter(n))}t.collapse(!0).select(!0)}else if(8<r.version)if(i=e.document.createTextNode("\n"),n=t.startContainer,0==t.startOffset){if(n.previousSibling){t.insertNode(i);var s=e.document.createTextNode(" ");t.setStartAfter(i).insertNode(s).setStart(s,0).collapse(!0).select(!0)}}else t.insertNode(i).setStartAfter(i),s=e.document.createTextNode(" "),(n=t.startContainer.childNodes[t.startOffset])&&!/^\n/.test(n.nodeValue)&&t.setStartBefore(i),t.insertNode(s).setStart(s,0).collapse(!0).select(!0);else{for(i=e.document.createElement("br"),t.insertNode(i),t.insertNode(e.document.createTextNode(f.fillChar)),t.setStartAfter(i),i=i.previousSibling;i;)if(n=i,i=i.previousSibling,!i||"BR"==i.nodeName){i=n;break}if(i){for(n="";i&&"BR"!=i.nodeName&&RegExp("^[ "+f.fillChar+"]*$").test(i.nodeValue);)n+=i.nodeValue,i=i.nextSibling;"BR"!=i.nodeName&&(i=i.nodeValue.match(RegExp("^([ "+f.fillChar+"]+)")))&&i[1]&&(n+=i[1]),n=e.document.createTextNode(n),t.insertNode(n).setStartAfter(n)}t.collapse(!0).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("tabkeydown",function(t,i){var n=e.selection.getRange(),s=f.findParentByTagName(n.startContainer,"pre",!0);if(s){if(e.fireEvent("saveScene"),!i.shiftKey)if(n.collapsed)s=e.document.createTextNode("    "),n.insertNode(s).setStartAfter(s).collapse(!0).select(!0);else{for(var o=n.createBookmark(),a=o.start.previousSibling;a;){if(s.firstChild===a&&!f.isBr(a)){s.insertBefore(e.document.createTextNode("    "),a);break}if(f.isBr(a)){s.insertBefore(e.document.createTextNode("    "),a.nextSibling);break}a=a.previousSibling}var r=o.end,a=o.start.nextSibling;for(s.firstChild===o.start&&s.insertBefore(e.document.createTextNode("    "),a.nextSibling);a&&a!==r;){if(f.isBr(a)&&a.nextSibling){if(a.nextSibling===r)break;s.insertBefore(e.document.createTextNode("    "),a.nextSibling)}a=a.nextSibling}n.moveToBookmark(o).select()}return e.fireEvent("saveScene"),!0}}),e.addListener("beforeinserthtml",function(e,t){var i=this,n=i.selection.getRange();if(f.findParentByTagName(n.startContainer,"pre",!0)){n.collapsed||n.deleteContents();var s="";if(r.ie&&8<r.version){p.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?s+="\n":v.$empty[e.tagName]||(p.each(e.children,function(t){"element"==t.type?"br"==t.tagName?s+="\n":v.$empty[e.tagName]||(s+=t.innerText()):s+=t.data}),/\n$/.test(s)||(s+="\n")):s+=e.data+"\n",!e.nextSibling()&&/\n$/.test(s)&&(s=s.replace(/\n$/,""))});var o=i.document.createTextNode(p.html(s.replace(/&nbsp;/g," ")));n.insertNode(o).selectNode(o).select()}else{var a=i.document.createDocumentFragment();p.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?a.appendChild(i.document.createElement("br")):v.$empty[e.tagName]||(p.each(e.children,function(t){"element"==t.type?"br"==t.tagName?a.appendChild(i.document.createElement("br")):v.$empty[e.tagName]||a.appendChild(i.document.createTextNode(p.html(t.innerText().replace(/&nbsp;/g," ")))):a.appendChild(i.document.createTextNode(p.html(t.data.replace(/&nbsp;/g," "))))}),"BR"!=a.lastChild.nodeName&&a.appendChild(i.document.createElement("br"))):a.appendChild(i.document.createTextNode(p.html(e.data.replace(/&nbsp;/g," ")))),e.nextSibling()||"BR"!=a.lastChild.nodeName||a.removeChild(a.lastChild)}),n.insertNode(a).select()}return!0}}),e.addListener("keydown",function(e,t){if(40==(t.keyCode||t.which)){var i,n=this.selection.getRange(),s=n.startContainer;if(n.collapsed&&(i=f.findParentByTagName(n.startContainer,"pre",!0))&&!i.nextSibling){for(var o=i.lastChild;o&&"BR"==o.nodeName;)o=o.previousSibling;(o===s||n.startContainer===i&&n.startOffset==i.childNodes.length)&&(this.execCommand("insertparagraph"),f.preventDefault(t))}}}),e.addListener("delkeydown",function(t,i){
var n=this.selection.getRange();n.txtToElmBoundary(!0);var s=n.startContainer;if(f.isTagNode(s,"pre")&&n.collapsed&&f.isStartInblock(n)){var o=e.document.createElement("p");return f.fillNode(e.document,o),s.parentNode.insertBefore(o,s),f.remove(s),n.setStart(o,0).setCursor(!1,!0),f.preventDefault(i),!0}})},UE.commands.cleardoc={execCommand:function(e){var t=this;e=t.options.enterTag;var i=t.selection.getRange();"br"==e?(t.body.innerHTML="<br/>",i.setStart(t.body,0).setCursor()):(t.body.innerHTML="<p>"+(I?"":"<br/>")+"</p>",i.setStart(t.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){t.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){p.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){var t;(t=e.getAttr("anchorname"))&&(e.tagName="a",e.setAttr({anchorname:"",name:t,'class':""}))})},inputRule:function(e){p.each(e.getNodesByTagName("a"),function(e){e.getAttr("name")&&!e.getAttr("href")&&(e.tagName="img",e.setAttr({anchorname:e.getAttr("name"),'class':"anchorclass"}),e.setAttr("name"))})},commands:{anchor:{execCommand:function(e,t){var i=this.selection.getRange(),n=i.getClosedNode();n&&n.getAttribute("anchorname")?t?n.setAttribute("anchorname",t):(i.setStartBefore(n).setCursor(),f.remove(n)):t&&(n=this.document.createElement("img"),i.collapse(!0),f.setAttributes(n,{anchorname:t,'class':"anchorclass"}),i.insertNode(n).setStartAfter(n).setCursor(!1,!0))}}}}}),UE.plugins.wordcount=function(){var e=this;e.setOpt("wordCount",!0),e.addListener("contentchange",function(){e.fireEvent("wordcount")});var t;e.addListener("ready",function(){var e=this;f.on(e.body,"keyup",function(i){(i.keyCode||i.which)in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout(t),t=setTimeout(function(){e.fireEvent("wordcount")},200))})})},UE.plugins.pagebreak=function(){function e(e){if(f.isEmptyBlock(e)){for(var t,n=e.firstChild;n&&1==n.nodeType&&f.isEmptyBlock(n);)t=n,n=n.firstChild;!t&&(t=e),f.fillNode(i.document,t)}}function t(e){return e&&1==e.nodeType&&"HR"==e.tagName&&"pagebreak"==e.className}var i=this,n=["td"];i.setOpt("pageBreakTag","_ueditor_page_break_tag_"),i.ready(function(){p.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",i.document)}),i.addInputRule(function(e){e.traversal(function(e){if("text"==e.type&&e.data==i.options.pageBreakTag){var t=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),i.addOutputRule(function(e){p.each(e.getNodesByTagName("hr"),function(e){if("pagebreak"==e.getAttr("class")){var t=UE.uNode.createText(i.options.pageBreakTag);e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),i.commands.pagebreak={execCommand:function(){var s=i.selection.getRange(),o=i.document.createElement("hr");f.setAttributes(o,{'class':"pagebreak",noshade:"noshade",size:"5"}),f.unSelectable(o);var a=f.findParentByTagName(s.startContainer,n,!0),r=[];if(a)switch(a.tagName){case"TD":a=a.parentNode,a.previousSibling?(a.parentNode.insertBefore(o,a),r=f.findParents(o)):(s=f.findParentByTagName(a,"table"),s.parentNode.insertBefore(o,s),r=f.findParents(o,!0)),a=r[1],o!==a&&f.breakParent(o,a),i.fireEvent("afteradjusttable",i.document)}else{if(!s.collapsed)for(s.deleteContents(),a=s.startContainer;!f.isBody(a)&&f.isBlockElm(a)&&f.isEmptyNode(a);)s.setStartBefore(a).collapse(!0),f.remove(a),a=s.startContainer;for(s.insertNode(o),a=o.parentNode;!f.isBody(a);)f.breakParent(o,a),(a=o.nextSibling)&&f.isEmptyBlock(a)&&f.remove(a),a=o.parentNode;a=o.nextSibling,r=o.previousSibling,t(r)?f.remove(r):r&&e(r),a?(t(a)?f.remove(a):e(a),s.setEndAfter(o).collapse(!1)):(a=i.document.createElement("p"),o.parentNode.appendChild(a),f.fillNode(i.document,a),s.setStart(a,0).collapse(!0)),s.select(!0)}}}},UE.plugin.register("wordimage",function(){var e=this,t=[];return{commands:{wordimage:{execCommand:function(){for(var t,i=f.getElementsByTagName(e.body,"img"),n=[],s=0;t=i[s++];)(t=t.getAttribute("word_img"))&&n.push(t);return n},queryCommandState:function(){t=f.getElementsByTagName(e.body,"img");for(var i,n=0;i=t[n++];)if(i.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(t){p.each(t.getNodesByTagName("img"),function(t){var i=t.attrs,n=128>parseInt(i.width)||43>parseInt(i.height),s=e.options,o=s.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";i.src&&/^(?:(file:\/+))/.test(i.src)&&t.setAttr({width:i.width,height:i.height,alt:i.alt,word_img:i.src,src:o,style:"background:url("+(n?s.themePath+s.theme+"/images/word.gif":s.langPath+s.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var e=this;e.ready(function(){f.on(this.body,"dragend",function(){var t=e.selection.getRange(),i=t.getClosedNode()||e.selection.getStart();if(i&&"IMG"==i.tagName){for(var n,s=i.previousSibling;(n=i.nextSibling)&&1==n.nodeType&&"SPAN"==n.tagName&&!n.firstChild;)f.remove(n);(!s||1!=s.nodeType||f.isEmptyBlock(s))&&s||n&&(!n||f.isEmptyBlock(n))||(s&&"P"==s.tagName&&!f.isEmptyBlock(s)?(s.appendChild(i),f.moveChild(n,s),f.remove(n)):n&&"P"==n.tagName&&!f.isEmptyBlock(n)&&n.insertBefore(i,n.firstChild),s&&"P"==s.tagName&&f.isEmptyBlock(s)&&f.remove(s),n&&"P"==n.tagName&&f.isEmptyBlock(n)&&f.remove(n),t.selectNode(i).select(),e.fireEvent("saveScene"))}})}),e.addListener("keyup",function(t,i){if(13==(i.keyCode||i.which)){var n,s=e.selection.getRange();(n=f.findParentByTagName(s.startContainer,"p",!0))&&"center"==f.getComputedStyle(n,"text-align")&&f.removeStyle(n,"text-align")}})},UE.plugins.undo=function(){function e(e,t){if(e.length!=t.length)return 0;for(var i=0,n=e.length;i<n;i++)if(e[i]!=t[i])return 0;return 1}var t,i=this,n=i.options.maxUndoCount||20,s=i.options.maxInputCount||20,o=RegExp(f.fillChar+"|</hr>","gi"),a={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},l=i.options.autoClearEmptyNode;i.undoManger=new function(){this.list=[],this.index=0,this.hasRedo=this.hasUndo=!1,this.undo=function(){if(this.hasUndo)if(this.list[this.index-1]||1!=this.list.length){for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}else this.reset()},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var e=this.editor,t=this.list[this.index],i=UE.htmlparser(t.content.replace(o,""));e.options.autoClearEmptyNode=!1,e.filterInputRule(i),e.options.autoClearEmptyNode=l,e.document.body.innerHTML=i.toHtml(),e.fireEvent("afterscencerestore"),r.ie&&p.each(f.getElementsByTagName(e.document,"td th caption p"),function(t){f.isEmptyNode(t)&&f.fillNode(e.document,t)});try{var n=new L.Range(e.document).moveToAddress(t.address);n.select(a[n.startContainer.nodeName.toLowerCase()])}catch(e){}this.update(),this.clearKey(),e.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange().createAddress(!1,!0);e.fireEvent("beforegetscene");var i=UE.htmlparser(e.body.innerHTML);return e.options.autoClearEmptyNode=!1,e.filterOutputRule(i),e.options.autoClearEmptyNode=l,i=i.toHtml(),e.fireEvent("aftergetscene"),{address:t,content:i}},this.save=function(s,o){clearTimeout(t);var a=this.getScene(o),r=this.list[this.index];r&&r.content!=a.content&&i.trigger("contentchange");var l;(l=r)&&(l=r.content==a.content)&&(s?r=1:(r=r.address,l=a.address,r=r.collapsed!=l.collapsed?0:e(r.startAddress,l.startAddress)&&e(r.endAddress,l.endAddress)?1:0),l=r),l||(this.list=this.list.slice(0,this.index+1),this.list.push(a),this.list.length>n&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasRedo=this.hasUndo=!1,this.clearKey()},this.clearKey=function(){c=0}},i.undoManger.editor=i,i.addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),i.addListener("reset",function(e,t){t||this.undoManger.reset()}),i.commands.redo=i.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+("undo"==e.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var d={16:1,17:1,18:1,37:1,38:1,39:1,40:1},c=0,h=!1;i.addListener("ready",function(){f.on(this.body,"compositionstart",function(){h=!0}),f.on(this.body,"compositionend",function(){h=!1})}),i.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var u=!0;i.addListener("keydown",function(e,i){var n=this;if(!(d[i.keyCode||i.which]||i.ctrlKey||i.metaKey||i.shiftKey||i.altKey||h))if(n.selection.getRange().collapsed){0==n.undoManger.list.length&&n.undoManger.save(!0),clearTimeout(t);var o=function(e){e.undoManger.save(!1,!0),e.fireEvent("selectionchange")};t=setTimeout(function(){if(h)var e=setInterval(function(){h||(o(n),clearInterval(e))},300);else o(n)},200),c++,c>=s&&o(n)}else n.undoManger.save(!1,!0),u=!1}),i.addListener("keyup",function(e,t){d[t.keyCode||t.which]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||h||u||(this.undoManger.save(!1,!0),u=!0)}),i.stopCmdUndo=function(){i.__hasEnterExecCommand=!0},i.startCmdUndo=function(){i.__hasEnterExecCommand=!1}},UE.plugin.register("copy",function(){function e(){ZeroClipboard.config({debug:!1,swfPath:t.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var e=t.zeroclipboard=new ZeroClipboard;e.on("copy",function(e){e=e.client;var i=t.selection.getRange(),n=document.createElement("div");n.appendChild(i.cloneContents()),e.setText(n.innerText||n.textContent),e.setHtml(n.innerHTML),i.select()}),e.on("mouseover mouseout",function(e){var t=e.target;"mouseover"==e.type?f.addClass(t,"edui-state-hover"):"mouseout"==e.type&&f.removeClasses(t,"edui-state-hover")}),e.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}var t=this;return{bindEvents:{ready:function(){r.ie||(window.ZeroClipboard?e():p.loadFile(document,{src:t.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){e()}))}},commands:{copy:{execCommand:function(e){t.document.execCommand("copy")||alert(t.getLang("copymsg"))}}}}}),UE.plugins.paste=function(){function e(e){var t=this.document;if(!t.getElementById("baidu_pastebin")){var i=this.selection.getRange(),n=i.createBookmark(),s=t.createElement("div");s.id="baidu_pastebin",r.webkit&&s.appendChild(t.createTextNode(f.fillChar+f.fillChar)),t.body.appendChild(s),n.start.style.display="",s.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+f.getXY(n.start).y+"px",i.selectNodeContents(s).select(!0),setTimeout(function(){if(r.webkit)for(var o,a=0,l=t.querySelectorAll("#baidu_pastebin");o=l[a++];){if(!f.isEmptyNode(o)){s=o;break}f.remove(o)}try{s.parentNode.removeChild(s)}catch(e){}i.moveToBookmark(n).select(!0),e(s)},0)}}function t(e){return e.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,i,n){return i=i.toLowerCase(),{img:1}[i]?e:(n=n.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,i){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+i+" ":""}),{span:1,div:1}[i]?"":"<"+t+i+" "+p.trim(n)+">")})}function i(e){var i;if(e.firstChild){var l=f.getElementsByTagName(e,"span");i=0;for(var d;d=l[i++];)"_baidu_cut_start"!=d.id&&"_baidu_cut_end"!=d.id||f.remove(d);if(r.webkit){for(d=e.querySelectorAll("div br"),i=0;l=d[i++];)l=l.parentNode,"DIV"==l.tagName&&1==l.childNodes.length&&(l.innerHTML="<p><br/></p>",f.remove(l));for(l=e.querySelectorAll("#baidu_pastebin"),i=0;d=l[i++];){var c=n.document.createElement("p");for(d.parentNode.insertBefore(c,d);d.firstChild;)c.appendChild(d.firstChild);f.remove(d)}for(d=e.querySelectorAll("meta"),i=0;l=d[i++];)f.remove(l);for(d=e.querySelectorAll("br"),i=0;l=d[i++];)/^apple-/i.test(l.className)&&f.remove(l)}if(r.gecko)for(d=e.querySelectorAll("[_moz_dirty]"),i=0;l=d[i++];)l.removeAttribute("_moz_dirty");if(!r.ie)for(d=e.querySelectorAll("span.Apple-style-span"),i=0;l=d[i++];)f.remove(l,!0);i=e.innerHTML,i=UE.filterWord(i),e=UE.htmlparser(i),n.options.filterRules&&UE.filterNode(e,n.options.filterRules),n.filterInputRule(e),r.webkit&&((i=e.lastChild())&&"element"==i.type&&"br"==i.tagName&&e.removeChild(i),p.each(n.body.querySelectorAll("div"),function(e){f.isEmptyBlock(e)&&f.remove(e,!0)})),i={html:e.toHtml()},n.fireEvent("beforepaste",i,e),i.html&&(e=UE.htmlparser(i.html,!0),1===n.queryCommandState("pasteplain")?n.execCommand("insertHtml",UE.filterNode(e,n.options.filterTxtRules).toHtml(),!0):(UE.filterNode(e,n.options.filterTxtRules),s=e.toHtml(),o=i.html,a=n.selection.getRange().createAddress(!0),n.execCommand("insertHtml",!0===n.getOpt("retainOnlyLabelPasted")?t(o):o,!0)),n.fireEvent("afterpaste",i))}}var n=this;n.setOpt({retainOnlyLabelPasted:!1});var s,o,a;n.addListener("pasteTransfer",function(e,i){if(a&&s&&o&&s!=o){var r=n.selection.getRange();if(r.moveToAddress(a,!0),!r.collapsed){for(;!f.isBody(r.startContainer);){var l=r.startContainer;if(1==l.nodeType){if(l=l.childNodes[r.startOffset],!l){r.setStartBefore(r.startContainer);continue}(l=l.previousSibling)&&3==l.nodeType&&RegExp("^[\n\r\t "+f.fillChar+"]*$").test(l.nodeValue)&&r.setStartBefore(l)}if(0!=r.startOffset)break;r.setStartBefore(r.startContainer)}for(;!f.isBody(r.endContainer);){if(l=r.endContainer,1==l.nodeType){if(l=l.childNodes[r.endOffset],!l){r.setEndAfter(r.endContainer);continue}(l=l.nextSibling)&&3==l.nodeType&&RegExp("^[\n\r\t"+f.fillChar+"]*$").test(l.nodeValue)&&r.setEndAfter(l)}if(r.endOffset!=r.endContainer[3==r.endContainer.nodeType?"nodeValue":"childNodes"].length)break;r.setEndAfter(r.endContainer)}}for(r.deleteContents(),r.select(!0),n.__hasEnterExecCommand=!0,r=o,2===i?r=t(r):i&&(r=s),n.execCommand("inserthtml",r,!0),n.__hasEnterExecCommand=!1,r=n.selection.getRange();!f.isBody(r.startContainer)&&!r.startOffset&&r.startContainer[3==r.startContainer.nodeType?"nodeValue":"childNodes"].length;)r.setStartBefore(r.startContainer);r=r.createAddress(!0),a.endAddress=r.startAddress}}),n.addListener("ready",function(){f.on(n.body,"cut",function(){!n.selection.getRange().collapsed&&n.undoManger&&n.undoManger.save()}),f.on(n.body,r.ie||r.opera?"keydown":"paste",function(t){(!r.ie&&!r.opera||(t.ctrlKey||t.metaKey)&&"86"==t.keyCode)&&e.call(n,function(e){i(e)})})}),n.commands.paste={execCommand:function(t){r.ie?(e.call(n,function(e){i(e)}),n.document.execCommand("paste")):alert(n.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){this.setOpt({pasteplain:!1,filterTxtRules:function(){function e(e){e.tagName="p",e.setStyle()}function t(e){e.parentNode.removeChild(e,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){for(var t,i=UE.uNode.createElement("p");t=e.firstChild();)"text"!=t.type&&UE.dom.dtd.$block[t.tagName]?i.firstChild()?(e.parentNode.insertBefore(i,e),i=UE.uNode.createElement("p")):e.parentNode.insertBefore(t,e):i.appendChild(t);i.firstChild()&&e.parentNode.insertBefore(i,e),e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){e.innerText()&&e.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),e),e.parentNode.removeChild(e,e.innerText())}}}()});var e=this.options.pasteplain;this.commands.pasteplain={queryCommandState:function(){return e?1:0},execCommand:function(){e=0|!e},notNeedUndo:1}},UE.plugins.list=function(){function e(e){var t,i=[];for(t in e)i.push(t);return i}function t(e){var t=e.className;return f.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:f.getStyle(e,"list-style-type")}function i(e,i){p.each(f.getElementsByTagName(e,"ol ul"),function(o){if(f.inDoc(o,e)){var a=o.parentNode;if(a.tagName==o.tagName){var r=t(o)||("OL"==o.tagName?"decimal":"disc"),l=t(a)||("OL"==a.tagName?"decimal":"disc");r==l&&(r=p.indexOf(u[o.tagName],r),r=r+1==u[o.tagName].length?0:r+1,s(o,u[o.tagName][r]))}var d=0,r=2;f.hasClass(o,/custom_/)?/[ou]l/i.test(a.tagName)&&f.hasClass(a,/custom_/)||(r=1):/[ou]l/i.test(a.tagName)&&f.hasClass(a,/custom_/)&&(r=3),(a=f.getStyle(o,"list-style-type"))&&(o.style.cssText="list-style-type:"+a),o.className=p.trim(o.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+r,p.each(f.getElementsByTagName(o,"li"),function(e){if(e.style.cssText&&(e.style.cssText=""),e.firstChild){if(e.parentNode===o){if(d++,f.hasClass(o,/custom_/)){var i=1,n=t(o);if("OL"==o.tagName){if(n)switch(n){case"cn":case"cn1":case"cn2":10<d&&(0==d%10||10<d&&20>d)?i=2:20<d&&(i=3);break;case"num2":9<d&&(i=2)}e.className="list-"+c[n]+d+" list-"+n+"-paddingleft-"+i}else e.className="list-"+c[n]+" list-"+n+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");i=e.getAttribute("class"),null===i||i.replace(/\s/g,"")||f.removeAttributes(e,"class")}}else f.remove(e)}),!i&&n(o,o.tagName.toLowerCase(),t(o)||f.getStyle(o,"list-style-type"),!0)}})}function n(e,n,s,o){var a=e.nextSibling;a&&1==a.nodeType&&a.tagName.toLowerCase()==n&&(t(a)||f.getStyle(a,"list-style-type")||("ol"==n?"decimal":"disc"))==s&&(f.moveChild(a,e),0==a.childNodes.length&&f.remove(a)),a&&f.isFillChar(a)&&f.remove(a),(a=e.previousSibling)&&1==a.nodeType&&a.tagName.toLowerCase()==n&&(t(a)||f.getStyle(a,"list-style-type")||("ol"==n?"decimal":"disc"))==s&&f.moveChild(e,a),a&&f.isFillChar(a)&&f.remove(a),!o&&f.isEmptyBlock(e)&&f.remove(e),t(e)&&i(e.ownerDocument,!0)}function s(e,t){c[t]&&(e.className="custom_"+t);try{f.setStyle(e,"list-style-type",t)}catch(e){}}function o(e){var t=e.previousSibling;t&&f.isEmptyBlock(t)&&f.remove(t),(t=e.nextSibling)&&f.isEmptyBlock(t)&&f.remove(t)}function a(e){for(;e&&!f.isBody(e);){if("TABLE"==e.nodeName)return null;if("LI"==e.nodeName)return e;e=e.parentNode}}var l=this,d={TD:1,PRE:1,BLOCKQUOTE:1},c={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};l.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var h,u={OL:e(l.options.insertorderedlist),UL:e(l.options.insertunorderedlist)},m=l.options.listiconpath;for(h in c)l.options.insertorderedlist.hasOwnProperty(h)||l.options.insertunorderedlist.hasOwnProperty(h)||delete c[h];l.ready(function(){var e,t=[];for(e in c){if("dash"==e||"dot"==e)t.push("li.list-"+c[e]+"{background-image:url("+m+c[e]+".gif)}"),t.push("ul.custom_"+e+"{list-style:none;}ul.custom_"+e+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var i=0;99>i;i++)t.push("li.list-"+c[e]+i+"{background-image:url("+m+"list-"+c[e]+i+".gif)}");t.push("ol.custom_"+e+"{list-style:none;}ol.custom_"+e+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(e){case"cn":t.push("li.list-"+e+"-paddingleft-1{padding-left:25px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:40px}"),t.push("li.list-"+e+"-paddingleft-3{padding-left:55px}");break;case"cn1":t.push("li.list-"+e+"-paddingleft-1{padding-left:30px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:40px}"),t.push("li.list-"+e+"-paddingleft-3{padding-left:55px}");break;case"cn2":t.push("li.list-"+e+"-paddingleft-1{padding-left:40px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:55px}"),t.push("li.list-"+e+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":t.push("li.list-"+e+"-paddingleft-1{padding-left:25px}");break;case"num2":t.push("li.list-"+e+"-paddingleft-1{padding-left:35px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:40px}");break;case"dash":t.push("li.list-"+e+"-paddingleft{padding-left:35px}");break;case"dot":t.push("li.list-"+e+"-paddingleft{padding-left:20px}")}}t.push(".list-paddingleft-1{padding-left:0}"),t.push(".list-paddingleft-2{padding-left:"+l.options.listDefaultPaddingLeft+"px}"),t.push(".list-paddingleft-3{padding-left:"+2*l.options.listDefaultPaddingLeft+"px}"),p.cssRule("list","ol,ul{margin:0;pading:0;"+(r.ie?"":"width:95%")+"}li{clear:both;}"+t.join("\n"),l.document)}),l.ready(function(){f.on(l.body,"cut",function(){setTimeout(function(){var e,t=l.selection.getRange();if(!t.collapsed&&(e=f.findParentByTagName(t.startContainer,"li",!0))&&!e.nextSibling&&f.isEmptyBlock(e)){e=e.parentNode;var i;(i=e.previousSibling)?(f.remove(e),t.setStartAtLast(i).collapse(!0)):(i=e.nextSibling)?(f.remove(e),t.setStartAtFirst(i).collapse(!0)):(i=l.document.createElement("p"),f.fillNode(l.document,i),e.parentNode.insertBefore(i,e),f.remove(e),t.setStart(i,0).collapse(!0)),t.select(!0)}})})}),l.addListener("beforepaste",function(e,i){var n=this.selection.getRange(),s=UE.htmlparser(i.html,!0);if(n=f.findParentByTagName(n.startContainer,"li",!0)){var o=n.parentNode;p.each(s.getNodesByTagName("OL"==o.tagName?"ul":"ol"),function(i){if(i.tagName=o.tagName,i.setAttr(),i.parentNode===s)e=t(o)||("OL"==o.tagName?"decimal":"disc");else{var n=i.parentNode.getAttr("class");(e=n&&/custom_/.test(n)?n.match(/custom_(\w+)/)[1]:i.parentNode.getStyle("list-style-type"))||(e="OL"==o.tagName?"decimal":"disc")}n=p.indexOf(u[o.tagName],e),i.parentNode!==s&&(n=n+1==u[o.tagName].length?0:n+1),n=u[o.tagName][n],c[n]?i.setAttr("class","custom_"+n):i.setStyle("list-style-type",n)})}i.html=s.toHtml()}),!0===l.getOpt("disablePInList")&&l.addOutputRule(function(e){p.each(e.getNodesByTagName("li"),function(e){var t=[],i=0;p.each(e.children,function(n){if("p"==n.tagName){for(var s;s=n.children.pop();)t.splice(i,0,s),s.parentNode=e,lastNode=s;s=t[t.length-1],s&&"element"==s.type&&"br"==s.tagName||(n=UE.uNode.createElement("br"),n.parentNode=e,t.push(n)),i=t.length}}),t.length&&(e.children=t)})}),l.addInputRule(function(e){if(p.each(e.getNodesByTagName("li"),function(e){for(var t,i=UE.uNode.createElement("p"),n=0;t=e.children[n];)"text"==t.type||v.p[t.tagName]?i.appendChild(t):i.firstChild()?(e.insertBefore(i,t),i=UE.uNode.createElement("p"),n+=2):n++;(i.firstChild()&&!i.parentNode||!e.firstChild())&&e.appendChild(i),i.firstChild()||i.innerHTML(r.ie?"&nbsp;":"<br/>"),e=e.firstChild(),(i=e.lastChild())&&"text"==i.type&&/^\s*$/.test(i.data)&&e.removeChild(i)}),l.options.autoTransWordToList){var t={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},i={square:"n"},n=function(e,n){var s=n.firstChild();if(s&&"element"==s.type&&"span"==s.tagName&&/Wingdings|Symbol/.test(s.getStyle("font-family"))){for(var o in i)if(i[o]==s.data)return o;return"disc"}for(o in t)if(t[o].test(e))return o};p.each(e.getNodesByTagName("p"),function(e){if("MsoListParagraph"==e.getAttr("class")){e.setStyle("margin",""),e.setStyle("margin-left",""),e.setAttr("class","");var i,s=e,o=e;if("li"!=e.parentNode.tagName&&(i=n(e.innerText(),e))){var a=UE.uNode.createElement(l.options.insertorderedlist.hasOwnProperty(i)?"ol":"ul");for(c[i]?a.setAttr("class","custom_"+i):a.setStyle("list-style-type",i);e&&"li"!=e.parentNode.tagName&&n(e.innerText(),e);){(s=e.nextSibling())||e.parentNode.insertBefore(a,e);var d=a,h=i;if("ol"==d.tagName)if(r.ie){var u=e.firstChild();"element"==u.type&&"span"==u.tagName&&t[h].test(u.innerText())&&e.removeChild(u)}else e.innerHTML(e.innerHTML().replace(t[h],""));else e.removeChild(e.firstChild());h=UE.uNode.createElement("li"),h.appendChild(e),d.appendChild(h),e=s}!a.parentNode&&e&&e.parentNode&&e.parentNode.insertBefore(a,e)}(s=o.firstChild())&&"element"==s.type&&"span"==s.tagName&&/^\s*(&nbsp;)+\s*$/.test(s.innerText())&&s.parentNode.removeChild(s)}})}}),l.addListener("contentchange",function(){i(l.document)}),l.addListener("keydown",function(e,t){function i(){t.preventDefault?t.preventDefault():t.returnValue=!1,l.fireEvent("contentchange"),l.undoManger&&l.undoManger.save()}function n(e,t){for(;e&&!f.isBody(e)&&!t(e);){if(1==e.nodeType&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var s=t.keyCode||t.which;if(13==s&&!t.shiftKey){var a=l.selection.getRange(),r=f.findParent(a.startContainer,function(e){return f.isBlockElm(e)},!0),d=f.findParentByTagName(a.startContainer,"li",!0);if(r&&"PRE"!=r.tagName&&!d&&(d=r.innerHTML.replace(RegExp(f.fillChar,"g"),""),/^\s*1\s*\.[^\d]/.test(d)&&(r.innerHTML=d.replace(/^\s*1\s*\./,""),a.setStartAtLast(r).collapse(!0).select(),l.__hasEnterExecCommand=!0,l.execCommand("insertorderedlist"),l.__hasEnterExecCommand=!1)),a=l.selection.getRange(),r=n(a.startContainer,function(e){return"TABLE"==e.tagName}),d=a.collapsed?r:n(a.endContainer,function(e){return"TABLE"==e.tagName}),r&&d&&r===d){if(!a.collapsed){if(r=f.findParentByTagName(a.startContainer,"li",!0),d=f.findParentByTagName(a.endContainer,"li",!0),!r||!d||r!==d){var r=a.cloneRange(),c=r.collapse(!1).createBookmark();return a.deleteContents(),r.moveToBookmark(c),d=f.findParentByTagName(r.startContainer,"li",!0),o(d),r.select(),void i()}if(a.deleteContents(),(d=f.findParentByTagName(a.startContainer,"li",!0))&&f.isEmptyBlock(d))return u=d.previousSibling,next=d.nextSibling,r=l.document.createElement("p"),f.fillNode(l.document,r),h=d.parentNode,u&&next?(a.setStart(next,0).collapse(!0).select(!0),f.remove(d)):((u||next)&&u?d.parentNode.parentNode.insertBefore(r,h.nextSibling):h.parentNode.insertBefore(r,h),f.remove(d),h.firstChild||f.remove(h),a.setStart(r,0).setCursor()),void i()}if(d=f.findParentByTagName(a.startContainer,"li",!0)){if(f.isEmptyBlock(d)){var c=a.createBookmark(),h=d.parentNode;if(d!==h.lastChild?(f.breakParent(d,h),o(d)):(h.parentNode.insertBefore(d,h.nextSibling),f.isEmptyNode(h)&&f.remove(h)),!v.$list[d.parentNode.tagName])if(f.isBlockElm(d.firstChild))f.remove(d,!0);else{for(r=l.document.createElement("p"),d.parentNode.insertBefore(r,d);d.firstChild;)r.appendChild(d.firstChild);f.remove(d)}a.moveToBookmark(c).select()}else{if(r=d.firstChild,!r||!f.isBlockElm(r)){for(r=l.document.createElement("p"),!d.firstChild&&f.fillNode(l.document,r);d.firstChild;)r.appendChild(d.firstChild);d.appendChild(r)}c=l.document.createElement("span"),a.insertNode(c),f.breakParent(c,d),u=c.nextSibling,r=u.firstChild,r||(r=l.document.createElement("p"),f.fillNode(l.document,r),u.appendChild(r)),f.isEmptyNode(r)&&(r.innerHTML="",f.fillNode(l.document,r)),a.setStart(r,0).collapse(!0).shrinkBoundary().select(),f.remove(c);var u=u.previousSibling;u&&f.isEmptyBlock(u)&&(u.innerHTML="<p></p>",f.fillNode(l.document,u.firstChild))}i()}}}if(8==s&&(a=l.selection.getRange(),a.collapsed&&f.isStartInblock(a)&&(r=a.cloneRange().trimBoundary(),(d=f.findParentByTagName(a.startContainer,"li",!0))&&f.isStartInblock(r))))if((r=f.findParentByTagName(a.startContainer,"p",!0))&&r!==d.firstChild)h=f.findParentByTagName(r,["ol","ul"]),f.breakParent(r,h),o(r),l.fireEvent("contentchange"),a.setStart(r,0).setCursor(!1,!0),l.fireEvent("saveScene"),f.preventDefault(t);else if(d&&(u=d.previousSibling)){if(46!=s||!d.childNodes.length){if(v.$list[u.tagName]&&(u=u.lastChild),l.undoManger&&l.undoManger.save(),r=d.firstChild,f.isBlockElm(r))if(f.isEmptyNode(r))for(u.appendChild(r),a.setStart(r,0).setCursor(!1,!0);d.firstChild;)u.appendChild(d.firstChild);else c=l.document.createElement("span"),a.insertNode(c),f.isEmptyBlock(u)&&(u.innerHTML=""),f.moveChild(d,u),a.setStartBefore(c).collapse(!0).select(!0),f.remove(c);else if(f.isEmptyNode(d))r=l.document.createElement("p"),u.appendChild(r),a.setStart(r,0).setCursor();else for(a.setEnd(u,u.childNodes.length).collapse().select(!0);d.firstChild;)u.appendChild(d.firstChild);f.remove(d),l.fireEvent("contentchange"),l.fireEvent("saveScene"),f.preventDefault(t)}}else if(d&&!d.previousSibling){if(h=d.parentNode,c=a.createBookmark(),f.isTagNode(h.parentNode,"ol ul"))h.parentNode.insertBefore(d,h);else{for(;d.firstChild;)h.parentNode.insertBefore(d.firstChild,h);f.remove(d)}f.isEmptyNode(h)&&f.remove(h),a.moveToBookmark(c).setCursor(!1,!0),l.fireEvent("contentchange"),l.fireEvent("saveScene"),f.preventDefault(t)}}),l.addListener("keyup",function(e,i){if(8==(i.keyCode||i.which)){var s,o=l.selection.getRange();(s=f.findParentByTagName(o.startContainer,["ol","ul"],!0))&&n(s,s.tagName.toLowerCase(),t(s)||f.getComputedStyle(s,"list-style-type"),!0)}}),l.addListener("tabkeydown",function(){function e(e){if(-1!=l.options.maxListLevel){e=e.parentNode;for(var t=0;/[ou]l/i.test(e.tagName);)t++,e=e.parentNode;if(t>=l.options.maxListLevel)return!0}}var i=l.selection.getRange(),o=f.findParentByTagName(i.startContainer,"li",!0);if(o){var a;if(!i.collapsed){l.fireEvent("saveScene"),a=i.createBookmark();for(var r,d,c=0,h=f.findParents(o);d=h[c++];)if(f.isTagNode(d,"ol ul")){r=d;break}if(d=o,a.end)for(;d&&!(f.getPosition(d,a.end)&f.POSITION_FOLLOWING);)if(e(d))d=f.getNextDomNode(d,!1,null,function(e){return e!==r});else{for(c=d.parentNode,h=l.document.createElement(c.tagName),m=p.indexOf(u[h.tagName],t(c)||f.getComputedStyle(c,"list-style-type")),m=u[h.tagName][m+1==u[h.tagName].length?0:m+1],s(h,m),c.insertBefore(h,d);d&&!(f.getPosition(d,a.end)&f.POSITION_FOLLOWING);){if(o=d.nextSibling,h.appendChild(d),!o||f.isTagNode(o,"ol ul")){if(o)for(;(o=o.firstChild)&&"LI"!=o.tagName;);else o=f.getNextDomNode(d,!1,null,function(e){return e!==r});break}d=o}n(h,h.tagName.toLowerCase(),m),d=o}return l.fireEvent("contentchange"),i.moveToBookmark(a).select(),!0}if(e(o))return!0;var c=o.parentNode,h=l.document.createElement(c.tagName),m=p.indexOf(u[h.tagName],t(c)||f.getComputedStyle(c,"list-style-type")),m=m+1==u[h.tagName].length?0:m+1,m=u[h.tagName][m];if(s(h,m),f.isStartInblock(i))return l.fireEvent("saveScene"),a=i.createBookmark(),c.insertBefore(h,o),h.appendChild(o),n(h,h.tagName.toLowerCase(),m),l.fireEvent("contentchange"),i.moveToBookmark(a).select(!0),!0}}),l.commands.insertorderedlist=l.commands.insertunorderedlist={execCommand:function(e,i){i||(i="insertorderedlist"==e.toLowerCase()?"decimal":"disc");var o=this.selection.getRange(),r=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!f.isWhitespace(e)},l="insertorderedlist"==e.toLowerCase()?"ol":"ul",c=this.document.createDocumentFragment();o.adjustmentBoundary().shrinkBoundary();var h,u,p,m,g=o.createBookmark(!0),y=a(this.document.getElementById(g.start)),b=0,x=a(this.document.getElementById(g.end)),w=0;if(y||x){if(y&&(h=y.parentNode),g.end||(x=y),x&&(u=x.parentNode),h===u){for(;y!==x;){if(m=y,y=y.nextSibling,!f.isBlockElm(m.firstChild)){for(r=this.document.createElement("p");m.firstChild;)r.appendChild(m.firstChild);m.appendChild(r)}c.appendChild(m)}if(m=this.document.createElement("span"),h.insertBefore(m,x),!f.isBlockElm(x.firstChild)){for(r=this.document.createElement("p");x.firstChild;)r.appendChild(x.firstChild);x.appendChild(r)}if(c.appendChild(x),f.breakParent(m,h),f.isEmptyNode(m.previousSibling)&&f.remove(m.previousSibling),f.isEmptyNode(m.nextSibling)&&f.remove(m.nextSibling),r=t(h)||f.getComputedStyle(h,"list-style-type")||("insertorderedlist"==e.toLowerCase()?"decimal":"disc"),h.tagName.toLowerCase()==l&&r==i){for(x=0,x=this.document.createDocumentFragment();r=c.firstChild;)if(f.isTagNode(r,"ol ul"))x.appendChild(r);else for(;r.firstChild;)x.appendChild(r.firstChild),f.remove(r);m.parentNode.insertBefore(x,m)}else p=this.document.createElement(l),s(p,i),p.appendChild(c),m.parentNode.insertBefore(p,m);return f.remove(m),p&&n(p,l,i),void o.moveToBookmark(g).select();
}if(y){for(;y;){if(m=y.nextSibling,f.isTagNode(y,"ol ul"))c.appendChild(y);else{p=this.document.createDocumentFragment();for(var C=0;y.firstChild;)f.isBlockElm(y.firstChild)&&(C=1),p.appendChild(y.firstChild);C?c.appendChild(p):(C=this.document.createElement("p"),C.appendChild(p),c.appendChild(C)),f.remove(y)}y=m}h.parentNode.insertBefore(c,h.nextSibling),f.isEmptyNode(h)?(o.setStartBefore(h),f.remove(h)):o.setStartAfter(h),b=1}if(x&&f.inDoc(u,this.document)){for(y=u.firstChild;y&&y!==x;){if(m=y.nextSibling,f.isTagNode(y,"ol ul"))c.appendChild(y);else{for(p=this.document.createDocumentFragment(),C=0;y.firstChild;)f.isBlockElm(y.firstChild)&&(C=1),p.appendChild(y.firstChild);C?c.appendChild(p):(C=this.document.createElement("p"),C.appendChild(p),c.appendChild(C)),f.remove(y)}y=m}m=f.createElement(this.document,"div",{tmpDiv:1}),f.moveChild(x,m),c.appendChild(m),f.remove(x),u.parentNode.insertBefore(c,u),o.setEndBefore(u),f.isEmptyNode(u)&&f.remove(u),w=1}}for(b||o.setStartBefore(this.document.getElementById(g.start)),g.end&&!w&&o.setEndAfter(this.document.getElementById(g.end)),o.enlarge(!0,function(e){return d[e.tagName]}),c=this.document.createDocumentFragment(),x=o.createBookmark(),h=f.getNextDomNode(x.start,!1,r),p=o.cloneRange(),b=f.isBlockElm;h&&h!==x.end&&f.getPosition(h,x.end)&f.POSITION_PRECEDING;)if(3==h.nodeType||v.li[h.tagName])if(1==h.nodeType&&v.$list[h.tagName]){for(;h.firstChild;)c.appendChild(h.firstChild);y=f.getNextDomNode(h,!1,r),f.remove(h),h=y}else{for(y=h,p.setStartBefore(h);h&&h!==x.end&&(!b(h)||f.isBookmarkNode(h));)y=h,h=f.getNextDomNode(h,!1,null,function(e){return!d[e.tagName]});if(h&&b(h)&&(m=f.getNextDomNode(y,!1,r))&&f.isBookmarkNode(m)&&(h=f.getNextDomNode(m,!1,r),y=m),p.setEndAfter(y),h=f.getNextDomNode(y,!1,r),m=o.document.createElement("li"),m.appendChild(p.extractContents()),f.isEmptyNode(m)){for(y=o.document.createElement("p");m.firstChild;)y.appendChild(m.firstChild);m.appendChild(y)}c.appendChild(m)}else h=f.getNextDomNode(h,!0,r);for(o.moveToBookmark(x).collapse(!0),p=this.document.createElement(l),s(p,i),p.appendChild(c),o.insertNode(p),n(p,l,i),x=0,l=f.getElementsByTagName(p,"div");r=l[x++];)r.getAttribute("tmpDiv")&&f.remove(r,!0);o.moveToBookmark(g).select()},queryCommandState:function(e){e="insertorderedlist"==e.toLowerCase()?"ol":"ul";for(var t,i=this.selection.getStartElementPath(),n=0;(t=i[n++])&&"TABLE"!=t.nodeName;)if(e==t.nodeName.toLowerCase())return 1;return 0},queryCommandValue:function(e){e="insertorderedlist"==e.toLowerCase()?"ol":"ul";for(var i,n,s=this.selection.getStartElementPath(),o=0;n=s[o++];){if("TABLE"==n.nodeName){i=null;break}if(e==n.nodeName.toLowerCase()){i=n;break}}return i?t(i)||f.getComputedStyle(i,"list-style-type"):null}}},function(){var e={textarea:function(e,t){var i=t.ownerDocument.createElement("textarea");return i.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",r.ie&&8>r.version&&(i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px",t.onresize=function(){i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px"}),t.appendChild(i),{setContent:function(e){i.value=e},getContent:function(){return i.value},select:function(){var e;r.ie?(e=i.createTextRange(),e.collapse(!0),e.select()):(i.setSelectionRange(0,0),i.focus())},dispose:function(){t.removeChild(i),t=i=t.onresize=null}}},codemirror:function(e,t){var i=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),n=i.getWrapperElement();return n.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',i.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",i.refresh(),{getCodeMirror:function(){return i},setContent:function(e){i.setValue(e)},getContent:function(){return i.getValue()},select:function(){i.focus()},dispose:function(){t.removeChild(n),i=n=null}}}};UE.plugins.source=function(){var t,i,n=this,s=this.options,o=!1;s.sourceEditor=r.ie?"textarea":s.sourceEditor||"codemirror",n.setOpt({sourceEditorFirst:!1});var a,l,d;n.commands.source={execCommand:function(){if(o=!o){d=n.selection.getRange().createAddress(!1,!0),n.undoManger&&n.undoManger.save(!0),r.gecko&&(n.body.contentEditable=!1),a=n.iframe.style.cssText,n.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",n.fireEvent("beforegetcontent");var c=UE.htmlparser(n.body.innerHTML);n.filterOutputRule(c),c.traversal(function(e){if("element"==e.type)switch(e.tagName){case"td":case"th":case"caption":e.children&&1==e.children.length&&"br"==e.firstChild().tagName&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),n.fireEvent("aftergetcontent"),c=c.toHtml(!0),t=e["codemirror"==s.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](n,n.iframe.parentNode),t.setContent(c),i=n.setContent,n.setContent=function(e){e=UE.htmlparser(e),n.filterInputRule(e),e=e.toHtml(),t.setContent(e)},setTimeout(function(){t.select(),n.addListener("fullscreenchanged",function(){try{t.getCodeMirror().refresh()}catch(e){}})}),l=n.getContent,n.getContent=function(){return t.getContent()||"<p>"+(r.ie?"":"<br/>")+"</p>"}}else if(n.iframe.style.cssText=a,c=t.getContent()||"<p>"+(r.ie?"":"<br/>")+"</p>",c=c.replace(RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!v.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),n.setContent=i,n.setContent(c),t.dispose(),t=null,n.getContent=l,c=n.body.firstChild,c||(n.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",c=n.body.firstChild),n.undoManger&&n.undoManger.save(!0),r.gecko){var h=document.createElement("input");h.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(h),n.body.contentEditable=!1,setTimeout(function(){f.setViewportOffset(h,{left:-32768,top:0}),h.focus(),setTimeout(function(){n.body.contentEditable=!0,n.selection.getRange().moveToAddress(d).select(!0),f.remove(h)})})}else try{n.selection.getRange().moveToAddress(d).select(!0)}catch(e){}this.fireEvent("sourcemodechanged",o)},queryCommandState:function(){return 0|o},notNeedUndo:1};var c=n.queryCommandState;n.queryCommandState=function(e){return e=e.toLowerCase(),o?e in{source:1,fullscreen:1}?1:-1:c.apply(this,arguments)},"codemirror"==s.sourceEditor&&n.addListener("ready",function(){p.loadFile(document,{src:s.codeMirrorJsUrl||s.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){s.sourceEditorFirst&&setTimeout(function(){n.execCommand("source")},0)}),p.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:s.codeMirrorCssUrl||s.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}(),UE.plugins.enterkey=function(){var e,t=this,i=t.options.enterTag;t.addListener("keyup",function(i,n){if(13==(n.keyCode||n.which)){var s,o=t.selection.getRange(),a=o.startContainer;if(r.ie)t.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(e)){if(r.gecko)f.findParentByTagName(a,"h1 h2 h3 h4 h5 h6 blockquote caption table".split(" "),!0)||(t.document.execCommand("formatBlock",!1,"<p>"),s=1);else if(1==a.nodeType){var l,a=t.document.createTextNode("");if(o.insertNode(a),l=f.findParentByTagName(a,"div",!0)){for(s=t.document.createElement("p");l.firstChild;)s.appendChild(l.firstChild);l.parentNode.insertBefore(s,l),f.remove(l),o.setStartBefore(a).setCursor(),s=1}f.remove(a)}t.undoManger&&s&&t.undoManger.save()}r.opera&&o.select()}}}),t.addListener("keydown",function(n,s){if(13==(s.keyCode||s.which))if(t.fireEvent("beforeenterkeydown"))f.preventDefault(s);else{t.fireEvent("saveScene",!0,!0),e="";var o=t.selection.getRange();if(!o.collapsed){var a=o.startContainer,l=o.endContainer,a=f.findParentByTagName(a,"td",!0),l=f.findParentByTagName(l,"td",!0);if(a&&l&&a!==l||!a&&l||a&&!l)return void(s.preventDefault?s.preventDefault():s.returnValue=!1)}if("p"==i)r.ie||((a=f.findParentByTagName(o.startContainer,"ol ul p h1 h2 h3 h4 h5 h6 blockquote caption".split(" "),!0))||r.opera?(e=a.tagName,"p"==a.tagName.toLowerCase()&&r.gecko&&f.removeDirtyAttr(a)):(t.document.execCommand("formatBlock",!1,"<p>"),r.gecko&&(o=t.selection.getRange(),(a=f.findParentByTagName(o.startContainer,"p",!0))&&f.removeDirtyAttr(a))));else if(s.preventDefault?s.preventDefault():s.returnValue=!1,o.collapsed)l=o.document.createElement("br"),o.insertNode(l),l.parentNode.lastChild===l?(l.parentNode.insertBefore(l.cloneNode(!0),l),o.setStartBefore(l)):o.setStartAfter(l),o.setCursor();else if(o.deleteContents(),a=o.startContainer,1==a.nodeType&&(a=a.childNodes[o.startOffset])){for(;1==a.nodeType;){if(v.$empty[a.tagName])return o.setStartBefore(a).setCursor(),t.undoManger&&t.undoManger.save(),!1;if(!a.firstChild)return l=o.document.createElement("br"),a.appendChild(l),o.setStart(a,0).setCursor(),t.undoManger&&t.undoManger.save(),!1;a=a.firstChild}a===o.startContainer.childNodes[o.startOffset]?(l=o.document.createElement("br"),o.insertNode(l).setCursor()):o.setStart(a,0).setCursor()}else l=o.document.createElement("br"),o.insertNode(l).setStartAfter(l).setCursor()}})},UE.plugins.keystrokes=function(){var e=this,t=!0;e.addListener("keydown",function(i,n){var s=n.keyCode||n.which,o=e.selection.getRange();if(!(o.collapsed||n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)&&(65<=s&&90>=s||48<=s&&57>=s||96<=s&&111>=s||{13:1,8:1,46:1}[s])){var a=o.startContainer;if(f.isFillChar(a)&&o.setStartBefore(a),a=o.endContainer,f.isFillChar(a)&&o.setEndAfter(a),o.txtToElmBoundary(),o.endContainer&&1==o.endContainer.nodeType&&(a=o.endContainer.childNodes[o.endOffset])&&f.isBr(a)&&o.setEndAfter(a),0==o.startOffset&&(a=o.startContainer,f.isBoundaryNode(a,"firstChild")&&(a=o.endContainer,o.endOffset==(3==a.nodeType?a.nodeValue.length:a.childNodes.length)&&f.isBoundaryNode(a,"lastChild"))))return e.fireEvent("saveScene"),e.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",o.setStart(e.body.firstChild,0).setCursor(!1,!0),void e._selectionChange()}if(s==$.Backspace){if(o=e.selection.getRange(),t=o.collapsed,e.fireEvent("delkeydown",n))return;var l,d;if(o.collapsed&&o.inFillChar()&&(l=o.startContainer,f.isFillChar(l)?(o.setStartBefore(l).shrinkBoundary(!0).collapse(!0),f.remove(l)):(l.nodeValue=l.nodeValue.replace(RegExp("^"+f.fillChar),""),o.startOffset--,o.collapse(!0).select(!0))),l=o.getClosedNode())return e.fireEvent("saveScene"),o.setStartBefore(l),f.remove(l),o.setCursor(),e.fireEvent("saveScene"),void f.preventDefault(n);if(!r.ie&&(l=f.findParentByTagName(o.startContainer,"table",!0),d=f.findParentByTagName(o.endContainer,"table",!0),l&&!d||!l&&d||l!==d))return void n.preventDefault()}if(s==$.Tab){var c={ol:1,ul:1,table:1};if(e.fireEvent("tabkeydown",n))return void f.preventDefault(n);o=e.selection.getRange(),e.fireEvent("saveScene");var a=0,h="";for(l=e.options.tabSize||4,d=e.options.tabNode||"&nbsp;";a<l;a++)h+=d;if(a=e.document.createElement("span"),a.innerHTML=h+f.fillChar,o.collapsed)o.insertNode(a.cloneNode(!0).firstChild).setCursor(!0);else if(h=function(e){return f.isBlockElm(e)&&!c[e.tagName.toLowerCase()]},l=f.findParent(o.startContainer,h,!0),d=f.findParent(o.endContainer,h,!0),l&&d&&l===d)o.deleteContents(),o.insertNode(a.cloneNode(!0).firstChild).setCursor(!0);else{l=o.createBookmark(),o.enlarge(!0),d=o.createBookmark();for(var u=f.getNextDomNode(d.start,!1,h);u&&!(f.getPosition(u,d.end)&f.POSITION_FOLLOWING);)u.insertBefore(a.cloneNode(!0).firstChild,u.firstChild),u=f.getNextDomNode(u,!1,h);o.moveToBookmark(d).moveToBookmark(l).select()}f.preventDefault(n)}if(r.gecko&&46==s&&(o=e.selection.getRange(),o.collapsed&&(l=o.startContainer,f.isEmptyBlock(l)))){for(s=l.parentNode;1==f.getChildCount(s)&&!f.isBody(s);)l=s,s=s.parentNode;l===s.lastChild&&n.preventDefault()}}),e.addListener("keyup",function(e,i){var n;if((i.keyCode||i.which)==$.Backspace&&!this.fireEvent("delkeyup")){if(n=this.selection.getRange(),n.collapsed){var s;if((s=f.findParentByTagName(n.startContainer,"h1 h2 h3 h4 h5 h6".split(" "),!0))&&f.isEmptyBlock(s)){var o=s.previousSibling;if(o&&"TABLE"!=o.nodeName)return f.remove(s),void n.setStartAtLast(o).setCursor(!1,!0);if((o=s.nextSibling)&&"TABLE"!=o.nodeName)return f.remove(s),void n.setStartAtFirst(o).setCursor(!1,!0)}f.isBody(n.startContainer)&&(s=f.createElement(this.document,"p",{innerHTML:r.ie?f.fillChar:"<br/>"}),n.insertNode(s).setStart(s,0).setCursor(!1,!0))}!t&&(3==n.startContainer.nodeType||1==n.startContainer.nodeType&&f.isEmptyBlock(n.startContainer))&&(r.ie?(s=n.document.createElement("span"),n.insertNode(s).setStartBefore(s).collapse(!0),n.select(),f.remove(s)):n.select())}})},UE.plugins.fiximgclick=function(){function e(){this.cover=this.resizer=this.editor=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var t=!1;return function(){var n=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];e.prototype={init:function(e){var t=this;t.editor=e,t.startPos=this.prePos={x:0,y:0},t.dragId=-1,e=[];var n=t.cover=document.createElement("div"),s=t.resizer=document.createElement("div");for(n.id=t.editor.ui.id+"_imagescale_cover",n.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",f.on(n,"mousedown click",function(){t.hide()}),i=0;8>i;i++)e.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');s.id=t.editor.ui.id+"_imagescale",s.className="edui-editor-imagescale",s.innerHTML=e.join(""),s.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";",t.editor.ui.getDom().appendChild(n),t.editor.ui.getDom().appendChild(s),t.initStyle(),t.initEvents()},initStyle:function(){p.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){this.startPos.x=this.startPos.y=0,this.isDraging=!1},_eventHandler:function(e){switch(e.type){case"mousedown":var i=e.target||e.srcElement;-1!=i.className.indexOf("edui-editor-imagescale-hand")&&-1==this.dragId&&(this.dragId=i.className.slice(-1),this.startPos.x=this.prePos.x=e.clientX,this.startPos.y=this.prePos.y=e.clientY,f.on(this.doc,"mousemove",this.proxy(this._eventHandler,this)));break;case"mousemove":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:e.clientX-this.prePos.x,y:e.clientY-this.prePos.y}),this.prePos.x=e.clientX,this.prePos.y=e.clientY,t=!0,this.updateTargetElement());break;case"mouseup":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:e.clientX-this.prePos.x,y:e.clientY-this.prePos.y}),this.updateTargetElement(),this.target.parentNode&&this.attachTo(this.target),this.dragId=-1),f.un(this.doc,"mousemove",this.proxy(this._eventHandler,this)),t&&(t=!1,this.editor.fireEvent("contentchange"))}},updateTargetElement:function(){f.setStyles(this.target,{width:this.resizer.style.width,height:this.resizer.style.height}),this.target.width=parseInt(this.resizer.style.width),this.target.height=parseInt(this.resizer.style.height),this.attachTo(this.target)},updateContainerStyle:function(e,t){var i,s=this.resizer;0!=n[e][0]&&(i=parseInt(s.style.left)+t.x,s.style.left=this._validScaledProp("left",i)+"px"),0!=n[e][1]&&(i=parseInt(s.style.top)+t.y,s.style.top=this._validScaledProp("top",i)+"px"),0!=n[e][2]&&(i=s.clientWidth+n[e][2]*t.x,s.style.width=this._validScaledProp("width",i)+"px"),0!=n[e][3]&&(i=s.clientHeight+n[e][3]*t.y,s.style.height=this._validScaledProp("height",i)+"px")},_validScaledProp:function(e,t){var i=this.resizer,n=document;switch(t=isNaN(t)?0:t,e){case"left":return 0>t?0:t+i.clientWidth>n.clientWidth?n.clientWidth-i.clientWidth:t;case"top":return 0>t?0:t+i.clientHeight>n.clientHeight?n.clientHeight-i.clientHeight:t;case"width":return 0>=t?1:t+i.offsetLeft>n.clientWidth?n.clientWidth-i.offsetLeft:t;case"height":return 0>=t?1:t+i.offsetTop>n.clientHeight?n.clientHeight-i.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=f.getXY(this.editor.ui.getDom()),t=f.getXY(this.editor.iframe);f.setStyles(this.cover,{width:this.editor.iframe.offsetWidth+"px",height:this.editor.iframe.offsetHeight+"px",top:t.y-e.y+"px",left:t.x-e.x+"px",position:"absolute",display:""})},show:function(e){this.resizer.style.display="block",e&&this.attachTo(e),f.on(this.resizer,"mousedown",this.proxy(this._eventHandler,this)),f.on(this.doc,"mouseup",this.proxy(this._eventHandler,this)),this.showCover(),this.editor.fireEvent("afterscaleshow",this),this.editor.fireEvent("saveScene")},hide:function(){this.hideCover(),this.resizer.style.display="none",f.un(this.resizer,"mousedown",this.proxy(this._eventHandler,this)),f.un(this.doc,"mouseup",this.proxy(this._eventHandler,this)),this.editor.fireEvent("afterscalehide",this)},proxy:function(e,t){return function(i){return e.apply(t||this,arguments)}},attachTo:function(e){e=this.target=e;var t=this.resizer,i=f.getXY(e),n=f.getXY(this.editor.iframe),s=f.getXY(t.parentNode);f.setStyles(t,{width:e.width+"px",height:e.height+"px",left:n.x+i.x-this.editor.document.body.scrollLeft-s.x-parseInt(t.style.borderLeftWidth)+"px",top:n.y+i.y-this.editor.document.body.scrollTop-s.y-parseInt(t.style.borderTopWidth)+"px"})}}}(),function(){var t,i=this;i.setOpt("imageScaleEnabled",!0),!r.ie&&i.options.imageScaleEnabled&&i.addListener("click",function(n,s){var o=i.selection.getRange().getClosedNode();if(o&&"IMG"==o.tagName&&"false"!=i.body.contentEditable){if(!(-1!=o.className.indexOf("edui-faked-music")||o.getAttribute("anchorname")||f.hasClass(o,"loadingclass")||f.hasClass(o,"loaderrorclass"))){if(!t){t=new e,t.init(i),i.ui.getDom().appendChild(t.resizer);var a,r=function(e){t.hide(),t.target&&i.selection.getRange().selectNode(t.target).select()},l=function(e){var t=e.target||e.srcElement;!t||void 0!==t.className&&-1!=t.className.indexOf("edui-editor-imagescale")||r(e)};i.addListener("afterscaleshow",function(e){i.addListener("beforekeydown",r),i.addListener("beforemousedown",l),f.on(document,"keydown",r),f.on(document,"mousedown",l),i.selection.getNative().removeAllRanges()}),i.addListener("afterscalehide",function(e){i.removeListener("beforekeydown",r),i.removeListener("beforemousedown",l),f.un(document,"keydown",r),f.un(document,"mousedown",l),e=t.target,e.parentNode&&i.selection.getRange().selectNode(e).select()}),f.on(t.resizer,"mousedown",function(e){i.selection.getNative().removeAllRanges();var n=e.target||e.srcElement;n&&-1==n.className.indexOf("edui-editor-imagescale-hand")&&(a=setTimeout(function(){t.hide(),t.target&&i.selection.getRange().selectNode(n).select()},200))}),f.on(t.resizer,"mouseup",function(e){(e=e.target||e.srcElement)&&-1==e.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(a)})}t.show(o)}}else t&&"none"!=t.resizer.style.display&&t.hide()}),r.webkit&&i.addListener("click",function(e,t){"IMG"==t.target.tagName&&"false"!=i.body.contentEditable&&new L.Range(i.document).selectNode(t.target).select()})}}(),UE.plugin.register("autolink",function(){return r.ie?{}:{bindEvents:{reset:function(){},keydown:function(e,t){var i=t.keyCode||t.which;if(32==i||13==i){for(var n,i=this.selection.getNative(),s=i.getRangeAt(0).cloneRange(),o=s.startContainer;1==o.nodeType&&0<s.startOffset&&(o=s.startContainer.childNodes[s.startOffset-1],o);)s.setStart(o,1==o.nodeType?o.childNodes.length:o.nodeValue.length),s.collapse(!0),o=s.startContainer;do{if(0==s.startOffset){for(o=s.startContainer.previousSibling;o&&1==o.nodeType;)o=o.lastChild;if(!o||f.isFillChar(o))break;n=o.nodeValue.length}else o=s.startContainer,n=s.startOffset;s.setStart(o,n-1),n=s.toString().charCodeAt(0)}while(160!=n&&32!=n);if(s.toString().replace(RegExp(f.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;s.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(s.toString());)try{s.setStart(s.startContainer,s.startOffset+1)}catch(e){for(o=s.startContainer;!(next=o.nextSibling);){if(f.isBody(o))return;o=o.parentNode}s.setStart(next,0)}if(!f.findParentByTagName(s.startContainer,"a",!0)){n=this.document.createElement("a");var a,o=this.document.createTextNode(" ");this.undoManger&&this.undoManger.save(),n.appendChild(s.extractContents()),n.href=n.innerHTML=n.innerHTML.replace(/<[^>]+>/g,""),a=n.getAttribute("href").replace(RegExp(f.fillChar,"g"),""),a=/^(?:https?:\/\/)/gi.test(a)?a:"http://"+a,n.setAttribute("_src",p.html(a)),n.href=p.html(a),s.insertNode(n),n.parentNode.insertBefore(o,n.nextSibling),s.setStart(o,0),s.collapse(!0),i.removeAllRanges(),i.addRange(s),this.undoManger&&this.undoManger.save()}}}}}}},function(){function e(e){if(3==e.nodeType)return null;if("A"==e.nodeName)return e;for(e=e.lastChild;e;){if("A"==e.nodeName)return e;if(3==e.nodeType){if(f.isWhitespace(e)){e=e.previousSibling;continue}return null}e=e.lastChild}}var t={37:1,38:1,39:1,40:1,13:1,32:1};r.ie&&this.addListener("keyup",function(i,n){var s=n.keyCode;if(t[s]){var o=this.selection.getRange(),a=o.startContainer;if(13==s){for(;a&&!f.isBody(a)&&!f.isBlockElm(a);)a=a.parentNode;a&&!f.isBody(a)&&"P"==a.nodeName&&(o=a.previousSibling)&&1==o.nodeType&&(o=e(o))&&!o.getAttribute("_href")&&f.remove(o,!0)}else 32==s?3==a.nodeType&&/^\s$/.test(a.nodeValue)&&(a=a.previousSibling)&&"A"==a.nodeName&&!a.getAttribute("_href")&&f.remove(a,!0):(a=f.findParentByTagName(a,"a",!0))&&!a.getAttribute("_href")&&(s=o.createBookmark(),f.remove(a,!0),o.moveToBookmark(s).select(!0))}})}),UE.plugins.autoheight=function(){function e(){var e=this;clearTimeout(s),o||e.queryCommandState&&(!e.queryCommandState||1==e.queryCommandState("source"))||(s=setTimeout(function(){for(var t=e.body.lastChild;t&&1!=t.nodeType;)t=t.previousSibling;t&&1==t.nodeType&&(t.style.clear="both",n=Math.max(f.getXY(t).y+t.offsetHeight+25,Math.max(l.minFrameHeight,l.initialFrameHeight)),n!=a&&(n!==parseInt(e.iframe.parentNode.style.height)&&(e.iframe.parentNode.style.height=n+"px"),e.body.style.height=n+"px",a=n),f.removeStyle(t,"clear"))},50))}var t=this;if(t.autoHeightEnabled=!1!==t.options.autoHeightEnabled,t.autoHeightEnabled){var i,n,s,o,a=0,l=t.options;t.addListener("fullscreenchanged",function(e,t){o=t}),t.addListener("destroy",function(){t.removeListener("contentchange afterinserthtml keyup mouseup",e)}),t.enableAutoHeight=function(){var t=this;if(t.autoHeightEnabled){var n=t.document;t.autoHeightEnabled=!0,i=n.body.style.overflowY,n.body.style.overflowY="hidden",t.addListener("contentchange afterinserthtml keyup mouseup",e),setTimeout(function(){e.call(t)},r.gecko?100:0),t.fireEvent("autoheightchanged",t.autoHeightEnabled)}},t.disableAutoHeight=function(){t.body.style.overflowY=i||"",t.removeListener("contentchange",e),t.removeListener("keyup",e),t.removeListener("mouseup",e),t.autoHeightEnabled=!1,t.fireEvent("autoheightchanged",t.autoHeightEnabled)},t.on("setHeight",function(){t.disableAutoHeight()}),t.addListener("ready",function(){t.enableAutoHeight();var i;f.on(r.ie?t.body:t.document,r.webkit?"dragover":"drop",function(){clearTimeout(i),i=setTimeout(function(){e.call(t)},100)});var n;window.onscroll=function(){null===n?n=this.scrollY:0==this.scrollY&&0!=n&&(t.window.scrollTo(0,0),n=null)}})}},UE.plugins.autofloat=function(){function e(){var e=document.body.style;e.backgroundImage='url("about:blank")',e.backgroundAttachment="fixed"}function t(){v=!0,g.parentNode&&g.parentNode.removeChild(g),l.style.cssText=a}function i(){var e=c(n.container),i=n.options.toolbarTopOffset||0;if(0>e.top&&e.bottom-l.offsetHeight>i){var e=f.getXY(l),i=f.getComputedStyle(l,"position"),s=f.getComputedStyle(l,"left");l.style.width=l.offsetWidth+"px",l.style.zIndex=1*n.options.zIndex+1,l.parentNode.insertBefore(g,l),u||m&&r.ie?("absolute"!=l.style.position&&(l.style.position="absolute"),l.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-d+o+"px"):(r.ie7Compat&&v&&(v=!1,l.style.left=f.getXY(l).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=l.style.position&&(l.style.position="fixed",l.style.top=o+"px",("absolute"==i||"relative"==i)&&parseFloat(s)&&(l.style.left=e.x+"px")))}else t()}var n=this,s=n.getLang();n.setOpt({topOffset:0});var o=n.options.topOffset;if(!1!==n.options.autoFloatEnabled){var a,l,d,c,h=UE.ui.uiUtils,u=r.ie&&6>=r.version,m=r.quirks,g=document.createElement("div"),v=!0,y=p.defer(function(){i()},r.ie?200:100,!0);n.addListener("destroy",function(){f.un(window,["scroll","resize"],i),n.removeListener("keydown",y)}),n.addListener("ready",function(){var o;UE.ui?o=1:(alert(s.autofloatMsg),o=0),o&&n.ui&&(c=h.getClientRect,l=n.ui.getDom("toolbarbox"),d=c(l).top,a=l.style.cssText,g.style.height=l.offsetHeight+"px",u&&e(),f.on(window,["scroll","resize"],i),n.addListener("keydown",y),n.addListener("beforefullscreenchange",function(e,i){i&&t()}),n.addListener("fullscreenchanged",function(e,t){t||i()}),n.addListener("sourcemodechanged",function(e,t){setTimeout(function(){i()},0)}),n.addListener("clearDoc",function(){setTimeout(function(){i()},0)}))})}},UE.plugins.video=function(){function e(e,t,n,s,o,a,r){var l;switch(r){case"image":l="<img "+(s?'id="'+s+'"':"")+' width="'+t+'" height="'+n+'" _url="'+e+'" class="'+a.replace(/\bvideo-js\b/,"")+'" src="'+i.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+i.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(o?"float:"+o+";":"")+'" />';break;case"embed":l='<embed type="application/x-shockwave-flash" class="'+a+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+p.html(e)+'" width="'+t+'" height="'+n+'"'+(o?' style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":r=e.substr(e.lastIndexOf(".")+1),"ogv"==r&&(r="ogg"),l="<video"+(s?' id="'+s+'"':"")+' class="'+a+' video-js" '+(o?' style="float:'+o+'"':"")+' controls preload="none" width="'+t+'" height="'+n+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+r+'" /></video>'}return l}function t(t,i){p.each(t.getNodesByTagName(i?"img":"embed video"),function(t){var n=t.getAttr("class");if(n&&-1!=n.indexOf("edui-faked-video")){var s=e(i?t.getAttr("_url"):t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",n,i?"embed":"image");t.parentNode.replaceChild(UE.uNode.createElement(s),t)}n&&-1!=n.indexOf("edui-upload-video")&&(s=e(i?t.getAttr("_url"):t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),null,t.getStyle("float")||"",n,i?"video":"image"),t.parentNode.replaceChild(UE.uNode.createElement(s),t))})}var i=this;i.addOutputRule(function(e){t(e,!0)}),i.addInputRule(function(e){t(e)}),i.commands.insertvideo={execCommand:function(t,n,s){n=p.isArray(n)?n:[n];var o,a=[];t=0;for(var r,l=n.length;t<l;t++)r=n[t],o="upload"==s?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",a.push(e(r.url,r.width||420,r.height||280,"tmpVedio"+t,null,o,"image"));for(i.execCommand("inserthtml",a.join(""),!0),s=this.selection.getRange(),t=0,l=n.length;t<l;t++)a=this.document.getElementById("tmpVedio"+t),f.removeAttributes(a,"id"),s.selectNode(a).select(),i.execCommand("imagefloat",n[t].align)},queryCommandState:function(){var e=i.selection.getRange().getClosedNode();return!e||"edui-faked-video"!=e.className&&-1==e.className.indexOf("edui-upload-video")?0:1}}},function(){var e=UE.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)};e.removeSelectedClass=function(e){p.each(e,function(e){f.removeClasses(e,"selectTdClass")})},e.addSelectedClass=function(e){p.each(e,function(e){f.addClass(e,"selectTdClass")})},e.isEmptyBlock=function(e){var t=RegExp(f.fillChar,"g");if(0<e[r.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length)return 0;for(var i in v.$isNotEmpty)if(v.$isNotEmpty.hasOwnProperty(i)&&e.getElementsByTagName(i).length)return 0;return 1},e.getWidth=function(e){return e?parseInt(f.getComputedStyle(e,"width"),10):0},e.getTableCellAlignState=function(e){!p.isArray(e)&&(e=[e]);var t={},i=["align","valign"],n=null,s=!0;return p.each(e,function(e){return p.each(i,function(i){if(n=e.getAttribute(i),!t[i]&&n)t[i]=n;else if(!t[i]||n!==t[i])return s=!1}),s}),s?t:null},e.getTableItemsByRange=function(e){var t=e.selection.getStart();t&&t.id&&0===t.id.indexOf("_baidu_bookmark_start_")&&t.nextSibling&&(t=t.nextSibling);var i=(e=t&&f.findParentByTagName(t,["td","th"],!0))&&e.parentNode,t=t&&f.findParentByTagName(t,"caption",!0);return{cell:e,tr:i,table:t?t.parentNode:i&&i.parentNode.parentNode,caption:t}},e.getUETableBySelected=function(t){return(t=e.getTableItemsByRange(t).table)&&t.ueTable&&t.ueTable.selectedTds.length?t.ueTable:null},e.getDefaultValue=function(e,t){var i,n,s,o={thin:"0px",medium:"1px",thick:"2px"};if(t)a=t.getElementsByTagName("td")[0],s=f.getComputedStyle(t,"border-left-width"),i=parseInt(o[s]||s,10),s=f.getComputedStyle(a,"padding-left"),n=parseInt(o[s]||s,10),s=f.getComputedStyle(a,"border-left-width"),o=parseInt(o[s]||s,10);else{t=e.document.createElement("table"),t.insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var a=t.getElementsByTagName("td")[0];s=f.getComputedStyle(t,"border-left-width"),i=parseInt(o[s]||s,10),s=f.getComputedStyle(a,"padding-left"),n=parseInt(o[s]||s,10),s=f.getComputedStyle(a,"border-left-width"),o=parseInt(o[s]||s,10),f.remove(t)}return{tableBorder:i,tdPadding:n,tdBorder:o}},e.getUETable=function(t){var i=t.tagName.toLowerCase();return t="td"==i||"th"==i||"caption"==i?f.findParentByTagName(t,"table",!0):t,t.ueTable||(t.ueTable=new e(t)),t.ueTable},e.cloneCell=function(e,t,i){if(!e||p.isString(e))return this.table.ownerDocument.createElement(e||"td");var n=f.hasClass(e,"selectTdClass");n&&f.removeClasses(e,"selectTdClass");var s=e.cloneNode(!0);return t&&(s.rowSpan=s.colSpan=1),!i&&f.removeAttributes(s,"width height"),!i&&f.removeAttributes(s,"style"),s.style.borderLeftStyle="",s.style.borderTopStyle="",s.style.borderLeftColor=e.style.borderRightColor,s.style.borderLeftWidth=e.style.borderRightWidth,s.style.borderTopColor=e.style.borderBottomColor,s.style.borderTopWidth=e.style.borderBottomWidth,n&&f.addClass(e,"selectTdClass"),s},e.prototype={getMaxRows:function(){for(var e,t=this.table.rows,i=1,n=0;e=t[n];n++){for(var s,o=1,a=0;s=e.cells[a++];)o=Math.max(s.rowSpan||1,o);i=Math.max(o+n,i)}return i},getMaxCols:function(){for(var e,t=this.table.rows,i=0,n={},s=0;e=t[s];s++){for(var o,a=0,r=0;o=e.cells[r++];)if(a+=o.colSpan||1,o.rowSpan&&1<o.rowSpan)for(var l=1;l<o.rowSpan;l++)n["row_"+(s+l)]?n["row_"+(s+l)]++:n["row_"+(s+l)]=o.colSpan||1;a+=n["row_"+s]||0,i=Math.max(a,i)}return i},getCellColIndex:function(e){},getHSideCell:function(e,t){
try{var i,n,s=this.getCellInfo(e),o=this.selectedTds.length,a=this.cellsRange;return!t&&(o?!a.beginColIndex:!s.colIndex)||t&&(o?a.endColIndex==this.colsNum-1:s.colIndex==this.colsNum-1)?null:(i=o?a.beginRowIndex:s.rowIndex,n=t?o?a.endColIndex+1:s.colIndex+1:o?a.beginColIndex-1:1>s.colIndex?0:s.colIndex-1,this.getCell(this.indexTable[i][n].rowIndex,this.indexTable[i][n].cellIndex))}catch(e){}},getTabNextCell:function(e,t){var i,n=this.getCellInfo(e),s=t||n.rowIndex,n=n.colIndex+1+(n.colSpan-1);try{i=this.getCell(this.indexTable[s][n].rowIndex,this.indexTable[s][n].cellIndex)}catch(e){try{s=1*s+1,n=0,i=this.getCell(this.indexTable[s][n].rowIndex,this.indexTable[s][n].cellIndex)}catch(e){}}return i},getVSideCell:function(e,t,i){try{var n,s,o=this.getCellInfo(e),a=this.selectedTds.length&&!i,r=this.cellsRange;return!t&&0==o.rowIndex||t&&(a?r.endRowIndex==this.rowsNum-1:o.rowIndex+o.rowSpan>this.rowsNum-1)?null:(n=t?a?r.endRowIndex+1:o.rowIndex+o.rowSpan:a?r.beginRowIndex-1:o.rowIndex-1,s=a?r.beginColIndex:o.colIndex,this.getCell(this.indexTable[n][s].rowIndex,this.indexTable[n][s].cellIndex))}catch(e){}},getSameEndPosCells:function(e,t){try{for(var i="x"===t.toLowerCase(),n=f.getXY(e)[i?"x":"y"]+e["offset"+(i?"Width":"Height")],s=this.table.rows,o=null,a=[],r=0;r<this.rowsNum;r++)for(var l,o=s[r].cells,d=0;l=o[d++];){var c=f.getXY(l)[i?"x":"y"]+l["offset"+(i?"Width":"Height")];if(c>n&&i)break;if((e==l||n==c)&&(1==l[i?"colSpan":"rowSpan"]&&a.push(l),i))break}return a}catch(e){}},setCellContent:function(e,t){e.innerHTML=t||(r.ie?f.fillChar:"<br />")},cloneCell:e.cloneCell,getSameStartPosXCells:function(e){try{var t,i=f.getXY(e).x+e.offsetWidth,n=this.table.rows;e=[];for(var s=0;s<this.rowsNum;s++){t=n[s].cells;for(var o,a=0;o=t[a++];){var r=f.getXY(o).x;if(r>i)break;if(r==i&&1==o.colSpan){e.push(o);break}}}return e}catch(e){}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[],e=this.table.rows;for(var t=this.getMaxRows(),i=t-e.length,n=this.getMaxCols();i--;)this.table.insertRow(e.length);this.rowsNum=t,this.colsNum=n;for(var i=0,s=e.length;i<s;i++)this.indexTable[i]=Array(n);for(var o,i=0;o=e[i];i++){var a,s=0;for(o=o.cells;a=o[s];s++){a.rowSpan>t&&(a.rowSpan=t);var r=s,l=a.rowSpan||1;for(a=a.colSpan||1;this.indexTable[i][r];)r++;for(var d=0;d<l;d++)for(var c=0;c<a;c++)this.indexTable[i+d][r+c]={rowIndex:i,cellIndex:s,colIndex:r,rowSpan:l,colSpan:a}}}for(d=0;d<t;d++)for(c=0;c<n;c++)void 0===this.indexTable[d][c]&&(o=e[d],a=(a=o.cells[o.cells.length-1])?a.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(a),1!==a.colSpan&&(a.colSpan=1),1!==a.rowSpan&&(a.rowSpan=1),o.appendChild(a),this.indexTable[d][c]={rowIndex:d,cellIndex:a.cellIndex,colIndex:c,rowSpan:1,colSpan:1});e=f.getElementsByTagName(this.table,"td");var h=[];if(p.each(e,function(e){f.hasClass(e,"selectTdClass")&&h.push(e)}),h.length&&(t=h[h.length-1],e=this.getCellInfo(h[0]),t=this.getCellInfo(t),this.selectedTds=h,this.cellsRange={beginRowIndex:e.rowIndex,beginColIndex:e.colIndex,endRowIndex:t.rowIndex+t.rowSpan-1,endColIndex:t.colIndex+t.colSpan-1}),!f.hasClass(this.table.rows[0],"firstRow"))for(f.addClass(this.table.rows[0],"firstRow"),i=1;i<this.table.rows.length;i++)f.removeClasses(this.table.rows[i],"firstRow")},getCellInfo:function(e){if(e){var t=e.cellIndex;e=e.parentNode.rowIndex;for(var i=this.indexTable[e],n=this.colsNum,s=t;s<n;s++){var o=i[s];if(o.rowIndex===e&&o.cellIndex===t)return o}}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t="number"==typeof t?t:e.parentNode.rowIndex,this.table.rows[t].deleteCell(e.cellIndex)},getCellsRange:function(e,t){function i(e,t,s,o){var a,r,l,d=e,c=t,h=s,u=o;if(0<e)for(r=t;r<o;r++)a=n.indexTable[e][r],l=a.rowIndex,l<e&&(d=Math.min(l,d));if(o<n.colsNum)for(l=e;l<s;l++)a=n.indexTable[l][o],r=a.colIndex+a.colSpan-1,r>o&&(u=Math.max(r,u));if(s<n.rowsNum)for(r=t;r<o;r++)a=n.indexTable[s][r],l=a.rowIndex+a.rowSpan-1,l>s&&(h=Math.max(l,h));if(0<t)for(l=e;l<s;l++)a=n.indexTable[l][t],r=a.colIndex,r<t&&(c=Math.min(a.colIndex,c));return d!=e||c!=t||h!=s||u!=o?i(d,c,h,u):{beginRowIndex:e,beginColIndex:t,endRowIndex:s,endColIndex:o}}try{var n=this,s=n.getCellInfo(e);if(e===t)return{beginRowIndex:s.rowIndex,beginColIndex:s.colIndex,endRowIndex:s.rowIndex+s.rowSpan-1,endColIndex:s.colIndex+s.colSpan-1};var o=n.getCellInfo(t),a=Math.min(s.rowIndex,o.rowIndex),r=Math.min(s.colIndex,o.colIndex),l=Math.max(s.rowIndex+s.rowSpan-1,o.rowIndex+o.rowSpan-1),d=Math.max(s.colIndex+s.colSpan-1,o.colIndex+o.colSpan-1);return i(a,r,l,d)}catch(e){}},getCells:function(e){this.clearSelected();for(var t,i,n=e.beginColIndex,s=e.endRowIndex,o=e.endColIndex,a={},r=[],l=e.beginRowIndex;l<=s;l++)for(var d=n;d<=o;d++){e=this.indexTable[l][d],t=e.rowIndex,i=e.colIndex;var c=t+"|"+i;if(!a[c]){if(a[c]=1,t<l||i<d||t+e.rowSpan-1>s||i+e.colSpan-1>o)return null;r.push(this.getCell(t,e.cellIndex))}}return r},clearSelected:function(){e.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(t){var i=this.getCells(t);e.addSelectedClass(i),this.selectedTds=i,this.cellsRange=t},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table.getElementsByTagName("th"),e=e.endRowIndex-e.beginRowIndex+1;return t.length?e==this.rowsNum||e==this.rowsNum-1:e==this.rowsNum},getNextCell:function(e,t,i){try{var n,s,o=this.getCellInfo(e),a=this.selectedTds.length&&!i,r=this.cellsRange;return!t&&0==o.rowIndex||t&&(a?r.endRowIndex==this.rowsNum-1:o.rowIndex+o.rowSpan>this.rowsNum-1)?null:(n=t?a?r.endRowIndex+1:o.rowIndex+o.rowSpan:a?r.beginRowIndex-1:o.rowIndex-1,s=a?r.beginColIndex:o.colIndex,this.getCell(this.indexTable[n][s].rowIndex,this.indexTable[n][s].cellIndex))}catch(e){}},getPreviewCell:function(e,t){try{var i,n,s=this.getCellInfo(e),o=this.selectedTds.length,a=this.cellsRange;return!t&&(o?!a.beginColIndex:!s.colIndex)||t&&(o?a.endColIndex==this.colsNum-1:s.rowIndex>this.colsNum-1)?null:(i=t?o?a.beginRowIndex:1>s.rowIndex?0:s.rowIndex-1:o?a.beginRowIndex:s.rowIndex,n=t?o?a.endColIndex+1:s.colIndex:o?a.beginColIndex-1:1>s.colIndex?0:s.colIndex-1,this.getCell(this.indexTable[i][n].rowIndex,this.indexTable[i][n].cellIndex))}catch(e){}},moveContent:function(t,i){if(!e.isEmptyBlock(i))if(e.isEmptyBlock(t))t.innerHTML=i.innerHTML;else{var n=t.lastChild;for(3!=n.nodeType&&v.$block[n.tagName]||t.appendChild(t.ownerDocument.createElement("br"));n=i.firstChild;)t.appendChild(n)}},mergeRight:function(e){var t=this.getCellInfo(e),i=this.indexTable[t.rowIndex][t.colIndex+t.colSpan],n=this.getCell(i.rowIndex,i.cellIndex);e.colSpan=t.colSpan+i.colSpan,e.removeAttribute("width"),this.moveContent(e,n),this.deleteCell(n,i.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),i=this.indexTable[t.rowIndex+t.rowSpan][t.colIndex],n=this.getCell(i.rowIndex,i.cellIndex);e.rowSpan=t.rowSpan+i.rowSpan,e.removeAttribute("height"),this.moveContent(e,n),this.deleteCell(n,i.rowIndex),this.update()},mergeRange:function(){var e=this.cellsRange,t=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex);if("TH"==t.tagName&&e.endRowIndex!==e.beginRowIndex)var i=this.indexTable,e=this.getCellInfo(t),t=this.getCell(1,i[1][e.colIndex].cellIndex),e=this.getCellsRange(t,this.getCell(i[this.rowsNum-1][e.colIndex].rowIndex,i[this.rowsNum-1][e.colIndex].cellIndex));for(var n,s=this.getCells(e),i=0;n=s[i++];)n!==t&&(this.moveContent(t,n),this.deleteCell(n));if(t.rowSpan=e.endRowIndex-e.beginRowIndex+1,1<t.rowSpan&&t.removeAttribute("height"),t.colSpan=e.endColIndex-e.beginColIndex+1,1<t.colSpan&&t.removeAttribute("width"),t.rowSpan==this.rowsNum&&1!=t.colSpan&&(t.colSpan=1),t.colSpan==this.colsNum&&1!=t.rowSpan){if(s=t.parentNode.rowIndex,this.table.deleteRow)for(i=s+1,s+=1,e=t.rowSpan;i<e;i++)this.table.deleteRow(s);else for(i=0,e=t.rowSpan-1;i<e;i++)n=this.table.rows[s+1],n.parentNode.removeChild(n);t.rowSpan=1}this.update()},insertRow:function(e,t){function i(e,t,i){0==e?(e=(i.nextSibling||i.previousSibling).cells[e],"TH"==e.tagName&&(e=t.ownerDocument.createElement("th"),e.appendChild(t.firstChild),i.insertBefore(e,t),f.remove(t))):"TH"==t.tagName&&(e=t.ownerDocument.createElement("td"),e.appendChild(t.firstChild),i.insertBefore(e,t),f.remove(t))}var n,s=this.colsNum,o=this.table.insertRow(e),a="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.rowsNum)for(var r=0;r<s;r++)n=this.cloneCell(t,!0),this.setCellContent(n),n.getAttribute("vAlign")&&n.setAttribute("vAlign",n.getAttribute("vAlign")),o.appendChild(n),a||i(r,n,o);else for(var l=this.indexTable[e],r=0;r<s;r++){var d=l[r];d.rowIndex<e?(n=this.getCell(d.rowIndex,d.cellIndex),n.rowSpan=d.rowSpan+1):(n=this.cloneCell(t,!0),this.setCellContent(n),o.appendChild(n)),a||i(r,n,o)}return this.update(),o},deleteRow:function(e){for(var t=this.table.rows[e],i=this.indexTable[e],n=this.colsNum,s=0,o=0;o<n;){var a=i[o],r=this.getCell(a.rowIndex,a.cellIndex);if(1<r.rowSpan&&a.rowIndex==e){a=r.cloneNode(!0),a.rowSpan=r.rowSpan-1,a.innerHTML="",r.rowSpan=1;var l=e+1,d=this.table.rows[l],l=this.getPreviewMergedCellsNum(l,o)-s;l<o?(l=o-l-1,f.insertAfter(d.cells[l],a)):d.cells.length&&d.insertBefore(a,d.cells[0]),s+=1}o+=r.colSpan||1}for(e=[],s={},o=0;o<n;o++)r=i[o].rowIndex,a=i[o].cellIndex,d=r+"_"+a,s[d]||(s[d]=1,r=this.getCell(r,a),e.push(r));var c=[];p.each(e,function(e){1==e.rowSpan?e.parentNode.removeChild(e):c.push(e)}),p.each(c,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,i){function n(e,t,i){0==e?(e=t.nextSibling||t.previousSibling,"TH"==e.tagName&&(e=t.ownerDocument.createElement("th"),e.appendChild(t.firstChild),i.insertBefore(e,t),f.remove(t))):"TH"==t.tagName&&(e=t.ownerDocument.createElement("td"),e.appendChild(t.firstChild),i.insertBefore(e,t),f.remove(t))}var s,o,a,r=this.rowsNum,l=0,d=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),c="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.colsNum)for(;l<r;l++)s=this.table.rows[l],a=s.cells[0==e?e:s.cells.length],o=this.cloneCell(t,!0),this.setCellContent(o),o.setAttribute("vAlign",o.getAttribute("vAlign")),a&&o.setAttribute("width",a.getAttribute("width")),e?f.insertAfter(s.cells[s.cells.length-1],o):s.insertBefore(o,s.cells[0]),c||n(l,o,s);else for(;l<r;l++)a=this.indexTable[l][e],a.colIndex<e?(o=this.getCell(a.rowIndex,a.cellIndex),o.colSpan=a.colSpan+1):(s=this.table.rows[l],a=s.cells[a.cellIndex],o=this.cloneCell(t,!0),this.setCellContent(o),o.setAttribute("vAlign",o.getAttribute("vAlign")),a&&o.setAttribute("width",a.getAttribute("width")),a?s.insertBefore(o,a):s.appendChild(o)),c||n(l,o,s);this.update(),this.updateWidth(d,i||{tdPadding:10,tdBorder:1})},updateWidth:function(t,i){var n=this.table,s=e.getWidth(n)-2*i.tdPadding-i.tdBorder+t;s<n.ownerDocument.body.offsetWidth?n.setAttribute("width",s):(n=f.getElementsByTagName(this.table,"td th"),p.each(n,function(e){e.setAttribute("width",t)}))},deleteCol:function(e){for(var t=this.indexTable,i=this.table.rows,n=this.table.getAttribute("width"),s=0,o=this.rowsNum,a={},r=0;r<o;){var l=t[r][e],d=l.rowIndex+"_"+l.colIndex;a[d]||(a[d]=1,d=this.getCell(l.rowIndex,l.cellIndex),s||(s=d&&parseInt(d.offsetWidth/d.colSpan,10).toFixed(0)),1<d.colSpan?d.colSpan--:i[r].deleteCell(l.cellIndex),r+=l.rowSpan||1)}this.table.setAttribute("width",n-s),this.update()},splitToCells:function(e){var t=this;e=this.splitToRows(e),p.each(e,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),i=t.rowIndex,n=t.colIndex,s=[];e.rowSpan=1,s.push(e);for(var o=i,a=i+t.rowSpan;o<a;o++)if(o!=i){var r=this.table.rows[o].insertCell(n-this.getPreviewMergedCellsNum(o,n));r.colSpan=t.colSpan,this.setCellContent(r),r.setAttribute("vAlign",e.getAttribute("vAlign")),r.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(r.style.cssText=e.style.cssText),s.push(r)}return this.update(),s},getPreviewMergedCellsNum:function(e,t){for(var i=this.indexTable[e],n=0,s=0;s<t;)var o=i[s].colSpan,n=n+(o-(i[s].rowIndex==e?1:0)),s=s+o;return n},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),i=this.getCellInfo(e),n=i.rowIndex,s=i.colIndex,o=[];e.colSpan=1,e.setAttribute("width",t),o.push(e);for(var a=s,r=s+i.colSpan;a<r;a++)if(a!=s){var l=this.table.rows[n],d=l.insertCell(this.indexTable[n][a].cellIndex+1);if(d.rowSpan=i.rowSpan,this.setCellContent(d),d.setAttribute("vAlign",e.getAttribute("vAlign")),d.setAttribute("align",e.getAttribute("align")),d.setAttribute("width",t),e.style.cssText&&(d.style.cssText=e.style.cssText),"TH"==e.tagName){var c=e.ownerDocument.createElement("th");c.appendChild(d.firstChild),c.setAttribute("vAlign",e.getAttribute("vAlign")),c.rowSpan=d.rowSpan,l.insertBefore(c,d),f.remove(d)}o.push(d)}return this.update(),o},isLastCell:function(e,t,i){return t=t||this.rowsNum,i=i||this.colsNum,e=this.getCellInfo(e),e.rowIndex+e.rowSpan==t&&e.colIndex+e.colSpan==i},getLastCell:function(e){e=e||this.table.getElementsByTagName("td"),this.getCellInfo(e[0]);var t,i=this,n=e[0],s=n.parentNode,o=0,a=0;return p.each(e,function(e){e.parentNode==s&&(a+=e.colSpan||1),o+=e.rowSpan*e.colSpan||1}),t=o/a,p.each(e,function(e){if(i.isLastCell(e,t,a))return n=e,!1}),n},selectRow:function(e){var t=this.indexTable[e];e=this.getCell(t[0].rowIndex,t[0].cellIndex),t=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),e=this.getCellsRange(e,t),this.setSelected(e)},selectTable:function(){var e=this.table.getElementsByTagName("td"),e=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(e)},setBackground:function(e,t){if("string"==typeof t)p.each(e,function(e){e.style.backgroundColor=t});else if("object"==typeof t){t=p.extend({repeat:!0,colorList:["#ddd","#fff"]},t);for(var i,n=this.getCellInfo(e[0]).rowIndex,s=0,o=t.colorList,a=function(e,t,i){return e[t]?e[t]:i?e[t%e.length]:""},r=0;i=e[r++];){var l=this.getCellInfo(i);i.style.backgroundColor=a(o,n+s==l.rowIndex?s:++s,t.repeat)}}},removeBackground:function(e){p.each(e,function(e){e.style.backgroundColor=""})}}}(),function(){function e(e,i){var s=f.getElementsByTagName(e,"td th");p.each(s,function(e){e.removeAttribute("width")}),e.setAttribute("width",t(i,!0,n.getDefaultValue(i,e)));var o=[];setTimeout(function(){p.each(s,function(e){1==e.colSpan&&o.push(e.offsetWidth)}),p.each(s,function(e,t){1==e.colSpan&&e.setAttribute("width",o[t]+"")})},0)}function t(e,t,i){var n=e.body;return n.offsetWidth-(t?2*parseInt(f.getComputedStyle(n,"margin-left"),10):0)-2*i.tableBorder-(e.options.offsetWidth||0)}function i(e){if(e=s(e).cell){var t=o(e);return t.selectedTds.length?t.selectedTds:[e]}return[]}var n=UE.UETable,s=function(e){return n.getTableItemsByRange(e)},o=function(e){return n.getUETable(e)};UE.commands.inserttable={queryCommandState:function(){return s(this).table?-1:0},execCommand:function(e,t){t||(t=p.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var i=this.selection.getRange().startContainer,i=f.findParent(i,function(e){return f.isBlockElm(e)},!0)||this.body,s=n.getDefaultValue(this,void 0),i=Math.floor(i.offsetWidth/t.numCols-2*s.tdPadding-s.tdBorder);!t.tdvalign&&(t.tdvalign=this.options.tdvalign),this.execCommand("inserthtml",function(e,t){for(var i=[],n=e.numRows,s=e.numCols,o=0;o<n;o++){i.push("<tr"+(0==o?' class="firstRow"':"")+">");for(var a=0;a<s;a++)i.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(r.ie&&11>r.version?f.fillChar:"<br/>")+"</td>");i.push("</tr>")}return"<table><tbody>"+i.join("")+"</tbody></table>"}(t,i))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return s(this).cell?0:-1},execCommand:function(){var e=s(this).table;if(e){var t=this.document.createElement("p");t.innerHTML=r.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(t,e),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return f.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var i=this.selection.getRange();if(t=t||f.findParentByTagName(i.startContainer,"table",!0)){var n=t.nextSibling;n||(n=f.createElement(this.document,"p",{innerHTML:r.ie?f.fillChar:"<br/>"}),t.parentNode.insertBefore(n,t)),f.remove(t),i=this.selection.getRange(),3==n.nodeType?i.setStartBefore(n):i.setStart(n,0),i.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return i(this).length?0:-1},execCommand:function(e,t){var n=i(this);if(n.length)for(var s,o=0;s=n[o++];)s.setAttribute("align",t)}},UE.commands.cellvalign={queryCommandState:function(){return i(this).length?0:-1},execCommand:function(e,t){var n=i(this);if(n.length)for(var s,o=0;s=n[o++];)s.setAttribute("vAlign",t)}},UE.commands.insertcaption={queryCommandState:function(){var e=s(this).table;return e&&0==e.getElementsByTagName("caption").length?1:-1},execCommand:function(){var e=s(this).table;if(e){var t=this.document.createElement("caption");t.innerHTML=r.ie?f.fillChar:"<br/>",e.insertBefore(t,e.firstChild),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange();return(e=f.findParentByTagName(e.startContainer,"table"))?0==e.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange();(e=f.findParentByTagName(e.startContainer,"table"))&&(f.remove(e.getElementsByTagName("caption")[0]),this.selection.getRange().setStart(e.rows[0].cells[0],0).setCursor())}},UE.commands.inserttitle={queryCommandState:function(){var e=s(this).table;return e?(e=e.rows[0],"th"!=e.cells[e.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var e=s(this).table;e&&o(e).insertRow(0,"th"),e=e.getElementsByTagName("th")[0],this.selection.getRange().setStart(e,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var e=s(this).table;return e?(e=e.rows[0],"th"==e.cells[e.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var e=s(this).table;e&&f.remove(e.rows[0]),e=e.getElementsByTagName("td")[0],this.selection.getRange().setStart(e,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var e=s(this).table;return e?e.rows[e.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(t){(t=s(this).table)&&o(t).insertCol(0,"th"),e(t,this),t=t.getElementsByTagName("th")[0],this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var e=s(this).table;return e&&e.rows[e.rows.length-1].getElementsByTagName("th").length?0:-1},execCommand:function(){var t=s(this).table;if(t)for(var i=0;i<t.rows.length;i++)f.remove(t.rows[i].children[0]);e(t,this),t=t.getElementsByTagName("td")[0],this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(e){var t=s(this);if(e=t.table,t=t.cell,!e||!t)return-1;var i=o(e);if(i.selectedTds.length)return-1;var n=i.getCellInfo(t),a=n.colIndex+n.colSpan;return a>=i.colsNum?-1:(i=i.indexTable[n.rowIndex][a],(e=e.rows[i.rowIndex].cells[i.cellIndex])&&t.tagName==e.tagName&&i.rowIndex==n.rowIndex&&i.rowSpan==n.rowSpan?0:-1)},execCommand:function(e){e=this.selection.getRange();var t=e.createBookmark(!0),i=s(this).cell;o(i).mergeRight(i),e.moveToBookmark(t).select()}},UE.commands.mergedown={queryCommandState:function(e){var t=s(this);if(e=t.table,t=t.cell,!e||!t)return-1;var i=o(e);if(i.selectedTds.length)return-1;var n=i.getCellInfo(t),a=n.rowIndex+n.rowSpan;return a>=i.rowsNum?-1:(i=i.indexTable[a][n.colIndex],(e=e.rows[i.rowIndex].cells[i.cellIndex])&&t.tagName==e.tagName&&i.colIndex==n.colIndex&&i.colSpan==n.colSpan?0:-1)},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this).cell;o(i).mergeDown(i),e.moveToBookmark(t).select()}},UE.commands.mergecells={queryCommandState:function(){return n.getUETableBySelected(this)?0:-1},execCommand:function(){var e=n.getUETableBySelected(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange(),e=this.selection.getRange(),f.isEmptyBlock(t)?e.setStart(t,0).collapse(!0):e.selectNodeContents(t),e.select()}}},UE.commands.insertrow={queryCommandState:function(){var e=s(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&e.tr!==e.table.rows[0])&&o(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this),n=i.cell,i=i.table,a=o(i),r=a.getCellInfo(n);if(a.selectedTds.length)for(var r=a.cellsRange,l=0,d=r.endRowIndex-r.beginRowIndex+1;l<d;l++)a.insertRow(r.beginRowIndex,n);else a.insertRow(r.rowIndex,n);e.moveToBookmark(t).select(),"enabled"===i.getAttribute("interlaced")&&this.fireEvent("interlacetable",i)}},UE.commands.insertrownext={queryCommandState:function(){var e=s(this),t=e.cell;return t&&"TD"==t.tagName&&o(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this),n=i.cell,i=i.table,a=o(i),r=a.getCellInfo(n);if(a.selectedTds.length)for(var r=a.cellsRange,l=0,d=r.endRowIndex-r.beginRowIndex+1;l<d;l++)a.insertRow(r.endRowIndex+1,n);else a.insertRow(r.rowIndex+r.rowSpan,n);e.moveToBookmark(t).select(),"enabled"===i.getAttribute("interlaced")&&this.fireEvent("interlacetable",i)}},UE.commands.deleterow={queryCommandState:function(){return s(this).cell?0:-1},execCommand:function(){var e=s(this).cell,t=o(e),i=t.cellsRange,n=t.getCellInfo(e),a=t.getVSideCell(e),r=t.getVSideCell(e,!0),e=this.selection.getRange();if(p.isEmptyObject(i))t.deleteRow(n.rowIndex);else for(var l=i.beginRowIndex;l<i.endRowIndex+1;l++)t.deleteRow(i.beginRowIndex);l=t.table,l.getElementsByTagName("td").length?1==n.rowSpan||n.rowSpan==i.endRowIndex-i.beginRowIndex+1?(r||a)&&e.selectNodeContents(r||a).setCursor(!1,!0):(t=t.getCell(n.rowIndex,t.indexTable[n.rowIndex][n.colIndex].cellIndex))&&e.selectNodeContents(t).setCursor(!1,!0):(t=l.nextSibling,f.remove(l),t&&e.setStart(t,0).setCursor(!1,!0)),"enabled"===l.getAttribute("interlaced")&&this.fireEvent("interlacetable",l)}},UE.commands.insertcol={queryCommandState:function(e){e=s(this);var t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&t!==e.tr.cells[0])&&o(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var t=this.selection.getRange(),i=t.createBookmark(!0);if(-1!=this.queryCommandState(e)){e=s(this).cell;var n=o(e),a=n.getCellInfo(e);if(n.selectedTds.length)for(var a=n.cellsRange,r=0,l=a.endColIndex-a.beginColIndex+1;r<l;r++)n.insertCol(a.beginColIndex,e);else n.insertCol(a.colIndex,e);t.moveToBookmark(i).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var e=s(this);return e.cell&&o(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this).cell,n=o(i),a=n.getCellInfo(i);if(n.selectedTds.length)for(var a=n.cellsRange,r=0,l=a.endColIndex-a.beginColIndex+1;r<l;r++)n.insertCol(a.endColIndex+1,i);else n.insertCol(a.colIndex+a.colSpan,i);e.moveToBookmark(t).select()}},UE.commands.deletecol={queryCommandState:function(){return s(this).cell?0:-1},execCommand:function(){var e=s(this).cell,t=o(e),i=t.cellsRange,n=t.getCellInfo(e),a=t.getHSideCell(e),r=t.getHSideCell(e,!0);if(p.isEmptyObject(i))t.deleteCol(n.colIndex);else for(n=i.beginColIndex;n<i.endColIndex+1;n++)t.deleteCol(i.beginColIndex);t=t.table,i=this.selection.getRange(),t.getElementsByTagName("td").length?f.inDoc(e,this.document)?i.setStart(e,0).setCursor(!1,!0):r&&f.inDoc(r,this.document)?i.selectNodeContents(r).setCursor(!1,!0):a&&f.inDoc(a,this.document)&&i.selectNodeContents(a).setCursor(!0,!0):(e=t.nextSibling,f.remove(t),e&&i.setStart(e,0).setCursor(!1,!0))}},UE.commands.splittocells={queryCommandState:function(){var e=s(this),t=e.cell;return!t||0<o(e.table).selectedTds.length?-1:t&&(1<t.colSpan||1<t.rowSpan)?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this).cell;o(i).splitToCells(i),e.moveToBookmark(t).select()}},UE.commands.splittorows={queryCommandState:function(){var e=s(this),t=e.cell;return!t||0<o(e.table).selectedTds.length?-1:t&&1<t.rowSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this).cell;o(i).splitToRows(i),e.moveToBookmark(t).select()}},UE.commands.splittocols={queryCommandState:function(){var e=s(this),t=e.cell;return!t||0<o(e.table).selectedTds.length?-1:t&&1<t.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=s(this).cell;o(i).splitToCols(i),e.moveToBookmark(t).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return s(this).table?0:-1},execCommand:function(t){var i=s(this).table;i&&("adaptbywindow"==t?e(i,this):(t=f.getElementsByTagName(i,"td th"),p.each(t,function(e){e.removeAttribute("width")}),i.removeAttribute("width")))}},UE.commands.averagedistributecol={queryCommandState:function(){var e=n.getUETableBySelected(this);return e&&(e.isFullRow()||e.isFullCol())?0:-1},execCommand:function(e){function t(){var e=o.table,t=0,i=0,a=n.getDefaultValue(s,e);if(o.isFullRow())t=e.offsetWidth,i=o.colsNum;else for(var r,e=o.cellsRange.endColIndex,l=o.cellsRange.beginColIndex;l<=e;)r=o.selectedTds[l],t+=r.offsetWidth,l+=r.colSpan,i+=1;return Math.ceil(t/i)-2*a.tdBorder-2*a.tdPadding}function i(e){p.each(f.getElementsByTagName(o.table,"th"),function(e){e.setAttribute("width","")});var t=o.isFullRow()?f.getElementsByTagName(o.table,"td"):o.selectedTds;p.each(t,function(t){1==t.colSpan&&t.setAttribute("width",e)})}var s=this,o=n.getUETableBySelected(s);o&&o.selectedTds.length&&i(t())}},UE.commands.averagedistributerow={queryCommandState:function(){var e=n.getUETableBySelected(this);return!e||e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1},execCommand:function(e){function t(){var e,t=0;e=o.table;var i=n.getDefaultValue(s,e),a=parseInt(f.getComputedStyle(e.getElementsByTagName("td")[0],"padding-top"));if(o.isFullCol()){var l,d,t=f.getElementsByTagName(e,"caption"),c=f.getElementsByTagName(e,"th");0<t.length&&(l=t[0].offsetHeight),0<c.length&&(d=c[0].offsetHeight),t=e.offsetHeight-(l||0)-(d||0),e=0==c.length?o.rowsNum:o.rowsNum-1}else{for(d=o.cellsRange.beginRowIndex,c=o.cellsRange.endRowIndex,l=0,e=f.getElementsByTagName(e,"tr");d<=c;d++)t+=e[d].offsetHeight,l+=1;e=l}return r.ie&&9>r.version?Math.ceil(t/e):Math.ceil(t/e)-2*i.tdBorder-2*a}function i(e){var t=o.isFullCol()?f.getElementsByTagName(o.table,"td"):o.selectedTds;p.each(t,function(t){1==t.rowSpan&&t.setAttribute("height",e)})}var s=this,o=n.getUETableBySelected(s);o&&o.selectedTds.length&&i(t())}},UE.commands.cellalignment={queryCommandState:function(){return s(this).table?0:-1},execCommand:function(e,t){var i=n.getUETableBySelected(this);i?p.each(i.selectedTds,function(e){f.setAttributes(e,t)}):(i=(i=this.selection.getStart())&&f.findParentByTagName(i,["td","th","caption"],!0),/caption/gi.test(i.tagName)?(i.style.textAlign=t.align,i.style.verticalAlign=t.vAlign):f.setAttributes(i,t),this.selection.getRange().setCursor(!0))},queryCommandValue:function(e){if((e=s(this).cell)||(e=i(this)[0]),e){var t=UE.UETable.getUETable(e).selectedTds;return!t.length&&(t=e),UE.UETable.getTableCellAlignState(t)}return null}},UE.commands.tablealignment={queryCommandState:function(){return r.ie&&8>r.version?-1:s(this).table?0:-1},execCommand:function(e,t){var i=this.selection.getStart();(i=i&&f.findParentByTagName(i,["table"],!0))&&i.setAttribute("align",t)}},UE.commands.edittable={queryCommandState:function(){return s(this).table?0:-1},execCommand:function(e,t){var i=this.selection.getRange();(i=f.findParentByTagName(i.startContainer,"table"))&&(i=f.getElementsByTagName(i,"td").concat(f.getElementsByTagName(i,"th"),f.getElementsByTagName(i,"caption")),p.each(i,function(e){e.style.borderColor=t}))}},UE.commands.edittd={queryCommandState:function(){return s(this).table?0:-1},execCommand:function(e,t){var i=n.getUETableBySelected(this);i?p.each(i.selectedTds,function(e){e.style.backgroundColor=t}):(i=(i=this.selection.getStart())&&f.findParentByTagName(i,["td","th","caption"],!0))&&(i.style.backgroundColor=t)}},UE.commands.settablebackground={queryCommandState:function(){return 1<i(this).length?0:-1},execCommand:function(e,t){var n;n=i(this),o(n[0]).setBackground(n,t)}},UE.commands.cleartablebackground={queryCommandState:function(){var e=i(this);if(!e.length)return-1;for(var t,n=0;t=e[n++];)if(""!==t.style.backgroundColor)return 0;return-1},execCommand:function(){var e=i(this);o(e[0]).removeBackground(e)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(e){var t=s(this).table;return t?(t=t.getAttribute("interlaced"),"interlacetable"==e?"enabled"===t?-1:0:t&&"disabled"!==t?0:-1):-1},execCommand:function(e,t){var i=s(this).table;"interlacetable"==e?(i.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",i,t)):(i.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",i))}},UE.commands.setbordervisible={queryCommandState:function(e){return s(this).table?0:-1},execCommand:function(){var e=s(this).table;p.each(f.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px",e.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function e(e,i){t(e,"width",!0),t(e,"height",!0)}function t(e,t,i){e.style[t]&&(i&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function i(e){if("TD"==e.tagName||"TH"==e.tagName)return e;var t;return(t=f.findParentByTagName(e,"td",!0)||f.findParentByTagName(e,"th",!0))?t:null}function n(e){var t=RegExp(f.fillChar,"g");if(0<e[r.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length)return 0;for(var i in v.$isNotEmpty)if(e.getElementsByTagName(i).length)return 0;return 1}function s(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+O.document.body.scrollLeft-O.document.body.clientLeft,y:e.clientY+O.document.body.scrollTop-O.document.body.clientTop}}function o(e){if(!S())try{var t,n=i(e.target||e.srcElement);if(U&&(O.body.style.webkitUserSelect="none",Math.abs(V.x-e.clientX)>W||Math.abs(V.y-e.clientY)>W)&&(x(),U=!1,q=0,C(e)),J&&se){if(q=0,O.body.style.webkitUserSelect="none",O.selection.getNative()[r.ie9below?"empty":"removeAllRanges"](),t=s(e),c(O,!0,J,t,n),"h"==J){var o,l=ne.style,n=se,u=K(n);if(u){var p=u.getSameEndPosCells(n,"x")[0],m=u.getSameStartPosXCells(n)[0],g=s(e).x,v=(p?f.getXY(p).x:f.getXY(u.table).x)+20,y=m?f.getXY(m).x+m.offsetWidth-20:O.body.offsetWidth+5||parseInt(f.getComputedStyle(O.body,"width"),10),v=v+F,y=y-F;o=g<v?v:g>y?y:g}else o=void 0;l.left=o+"px"}else if("v"==J){var b,w=ne.style;e:{try{var _=f.getXY(se).y,k=s(e).y;b=k<_?_:k;break e}catch(e){}b=void 0}w.top=b+"px"}}else if(n){if(!0!==O.fireEvent("excludetable",n)){t=s(e);var T=h(n,t),N=f.findParentByTagName(n,"table",!0);d(N,n,e,!0)?!0!==O.fireEvent("excludetable",N)&&(O.body.style.cursor="url("+O.options.cursorpath+"h.png),pointer"):d(N,n,e)?!0!==O.fireEvent("excludetable",N)&&(O.body.style.cursor="url("+O.options.cursorpath+"v.png),pointer"):(O.body.style.cursor="text",/\d/.test(T)&&(T=T.replace(/\d/,""),n=K(n).getPreviewCell(n,"v"==T)),c(O,!!n&&!!T,n?T:"",t,n))}}else a(!1,N,O)}catch(e){}}function a(e,t,i){e?l(t,i):ie||setTimeout(function(){!ie&&te&&te.parentNode&&te.parentNode.removeChild(te)},2e3)}function l(e,t){function i(i,n){clearTimeout(o),o=setTimeout(function(){t.fireEvent("tableClicked",e,n)},300)}var n=f.getXY(e),s=e.ownerDocument;if(te&&te.parentNode)return te;te=s.createElement("div"),te.contentEditable=!1,te.innerHTML="",te.style.cssText="width:15px;height:15px;background-image:url("+t.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(n.y-15)+"px;left:"+n.x+"px;",
f.unSelectable(te),te.onmouseover=function(e){ie=!0},te.onmouseout=function(e){ie=!1},f.on(te,"click",function(e,t){i(t,this)}),f.on(te,"dblclick",function(i,n){clearTimeout(o);var s=K(e),a=e.rows[0].cells[0],r=s.getLastCell(),r=s.getCellsRange(a,r);t.selection.getRange().setStart(a,0).setCursor(!1,!0),s.setSelected(r)}),f.on(te,"dragstart",function(e,t){f.preventDefault(t)});var o;s.body.appendChild(te)}function d(e,t,i,n){return i=s(i),t=h(t,i),n?(n=(n=e.getElementsByTagName("caption")[0])?n.offsetHeight:0,"v1"==t&&8>i.y-f.getXY(e).y-n):"h1"==t&&8>i.x-f.getXY(e).x}function c(e,t,i,n,s){try{e.body.style.cursor="h"==i?"col-resize":"v"==i?"row-resize":"text",r.ie&&(!i||oe||X.getUETableBySelected(e)?P(e):(A(e,e.document),B(i,s))),ee=t}catch(e){}}function h(e,t){var i=f.getXY(e);return i?i.x+e.offsetWidth-t.x<z?"h":t.x-i.x<z?"h1":i.y+e.offsetHeight-t.y<z?"v":t.y-i.y<z?"v1":"":""}function u(e,t){if(!S())if(V={x:t.clientX,y:t.clientY},2==t.button){var i=X.getUETableBySelected(O),n=!1;if(i){var s=R(O,t);p.each(i.selectedTds,function(e){e===s&&(n=!0)}),n?(s=i.selectedTds[0],setTimeout(function(){O.selection.getRange().setStart(s,0).setCursor(!1,!0)},0)):(G(f.getElementsByTagName(O.body,"th td")),i.clearSelected())}}else g(t)}function m(e){q=0,e=e||O.window.event;var t=i(e.target||e.srcElement);if(t){var n;if((n=h(t,s(e)))&&(P(O),"h1"==n&&(n="h",d(f.findParentByTagName(t,"table"),t,e)?O.execCommand("adaptbywindow"):(t=K(t).getPreviewCell(t))&&O.selection.getRange().selectNodeContents(t).setCursor(!0,!0)),"h"==n)){e=K(t);var o=E(t,e.table,!0),o=b(o,"left");e.width=e.offsetWidth;var a=[],r=[];p.each(o,function(e){a.push(e.offsetWidth)}),p.each(o,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var e=!0;p.each(o,function(t,i){var n=t.offsetWidth;return n>a[i]?e=!1:void r.push(n)});var t=e?r:a;p.each(o,function(e,i){e.width=t[i]-D()})},0)}}}function g(e){if(G(f.getElementsByTagName(O.body,"td th")),p.each(O.document.getElementsByTagName("table"),function(e){e.ueTable=null}),Q=R(O,e)){var t=f.findParentByTagName(Q,"table",!0);(ut=K(t))&&ut.clearSelected(),ee?y(e):(O.document.body.style.webkitUserSelect="",oe=!0,O.addListener("mouseover",k))}}function y(e){r.ie&&(e=w(e)),x(),U=!0,j=setTimeout(function(){C(e)},Y)}function b(e,t){for(var i=[],n=null,s=0,o=e.length;s<o;s++)(n=e[s][t])&&i.push(n);return i}function x(){j&&clearTimeout(j),j=null}function w(e){var t="pageX pageY clientX clientY srcElement target".split(" "),i={};if(e)for(var n,s,o=0;n=t[o];o++)(s=e[n])&&(i[n]=s);return i}function C(e){U=!1,(Q=e.target||e.srcElement)&&(e=h(Q,s(e)),/\d/.test(e)&&(e=e.replace(/\d/,""),Q=K(Q).getPreviewCell(Q,"v"==e)),P(O),A(O,O.document),O.fireEvent("saveScene"),B(e,Q),oe=!0,J=e,se=Q)}function _(e,t){if(!S()){if(x(),U=!1,ee&&(q=++q%3,V={x:t.clientX,y:t.clientY},setTimeout(function(){0<q&&q--},Y),2===q))return q=0,void m(t);if(2!=t.button){var i=this.selection.getRange(),n=f.findParentByTagName(i.startContainer,"table",!0),s=f.findParentByTagName(i.endContainer,"table",!0);if((n||s)&&(n===s?(n=f.findParentByTagName(i.startContainer,["td","th","caption"],!0),s=f.findParentByTagName(i.endContainer,["td","th","caption"],!0),n!==s&&this.selection.clearRange()):this.selection.clearRange()),oe=!1,this.document.body.style.webkitUserSelect="",J&&se&&(this.selection.getNative()[r.ie9below?"empty":"removeAllRanges"](),q=0,ne=this.document.getElementById("ue_tableDragLine"))){switch(i=f.getXY(se),n=f.getXY(ne),J){case"h":T(se,n.x-i.x);break;case"v":N(se,n.y-i.y-se.offsetHeight)}return J="",se=null,P(this),void this.fireEvent("saveScene")}if(Q)(n=(i=K(Q))?i.selectedTds[0]:null)?(i=new L.Range(this.document),f.isEmptyBlock(n)?i.setStart(n,0).setCursor(!1,!0):i.selectNodeContents(n).shrinkBoundary().setCursor(!1,!0)):(i=this.selection.getRange().shrinkBoundary(),i.collapsed||(n=f.findParentByTagName(i.startContainer,["td","th"],!0),s=f.findParentByTagName(i.endContainer,["td","th"],!0),(n&&!s||!n&&s||n&&s&&n!==s)&&i.setCursor(!1,!0))),Q=null,this.removeListener("mouseover",k);else if((n=f.findParentByTagName(t.target||t.srcElement,"td",!0))||(n=f.findParentByTagName(t.target||t.srcElement,"th",!0)),n&&("TD"==n.tagName||"TH"==n.tagName)){if(!0===this.fireEvent("excludetable",n))return;i=new L.Range(this.document),i.setStart(n,0).setCursor(!1,!0)}this._selectionChange(250,t)}}}function k(e,t){if(!S()){var i=t.target||t.srcElement;if(Z=f.findParentByTagName(i,"td",!0)||f.findParentByTagName(i,"th",!0),Q&&Z&&("TD"==Q.tagName&&"TD"==Z.tagName||"TH"==Q.tagName&&"TH"==Z.tagName)&&f.findParentByTagName(Q,"table")==f.findParentByTagName(Z,"table"))if(i=K(Z),Q!=Z){this.document.body.style.webkitUserSelect="none",this.selection.getNative()[r.ie9below?"empty":"removeAllRanges"]();var n=i.getCellsRange(Q,Z);i.setSelected(n)}else this.document.body.style.webkitUserSelect="",i.clearSelected();t.preventDefault?t.preventDefault():t.returnValue=!1}}function T(e,t){var i=K(e);if(i){var i=i.table,n=E(e,i);i.style.width="",i.removeAttribute("width"),t=I(t,e,n),e.nextSibling?p.each(n,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)}):p.each(n,function(e){e.left.width-=-t})}}function S(){return"false"===O.body.contentEditable}function N(e,t){if(!(10>Math.abs(t))){var i=K(e);if(i)for(var n,i=i.getSameEndPosCells(e,"y"),s=i[0]?i[0].offsetHeight:0,o=0;n=i[o++];){var a=t,r=s,l=parseInt(f.getComputedStyle(n,"line-height"),10),a=r+a,a=a<l?l:a;n.style.height&&(n.style.height=""),1==n.rowSpan?n.setAttribute("height",a):n.removeAttribute&&n.removeAttribute("height")}}}function E(e,t,i){if(t||(t=f.findParentByTagName(e,"table")),!t)return null;f.getNodeIndex(e),t=t.rows;for(var n=0;e;)1===e.nodeType&&(n+=e.colSpan||1),e=e.previousSibling;e=null;var s=[];return p.each(t,function(e){var t=0;p.each(e.cells,function(e){return t+=e.colSpan||1,t===n?(s.push({left:e,right:e.nextSibling||null}),!1):t>n?(i&&s.push({left:e}),!1):void 0})}),s}function I(e,t,i){if(e-=D(),0>e)return 0;e-=$(t);var n=0>e?"left":"right";return e=Math.abs(e),p.each(i,function(t){(t=t[n])&&(e=Math.min(e,$(t)-F))}),e=0>e?0:e,"left"===n?-e:e}function $(e){var t=0,t=e.offsetWidth-D();if(!e.nextSibling){if(tab=f.findParentByTagName(e,"table",!1),void 0===tab.offsetVal){var i=e.previousSibling;tab.offsetVal=i&&e.offsetWidth-i.offsetWidth===X.borderWidth?X.borderWidth:0}t-=tab.offsetVal}t=0>t?0:t;try{e.width=t}catch(e){}return t}function D(){if(void 0===X.tabcellSpace){var e=O.document.createElement("table"),t=O.document.createElement("tbody"),i=O.document.createElement("tr"),n=O.document.createElement("td"),s=null;n.style.cssText="border: 0;",n.width=1,i.appendChild(n),i.appendChild(s=n.cloneNode(!1)),t.appendChild(i),e.appendChild(t),e.style.cssText="visibility: hidden;",O.body.appendChild(e),X.paddingSpace=n.offsetWidth-1,t=e.offsetWidth,n.style.cssText="",s.style.cssText="",X.borderWidth=(e.offsetWidth-t)/3,X.tabcellSpace=X.paddingSpace+X.borderWidth,O.body.removeChild(e)}return D=function(){return X.tabcellSpace},X.tabcellSpace}function A(e,t){oe||(ne=e.document.createElement("div"),f.setAttributes(ne,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild(ne))}function P(e){if(!oe)for(var t;t=e.document.getElementById("ue_tableDragLine");)f.remove(t)}function B(e,t){if(t){var i=f.findParentByTagName(t,"table"),n=i.getElementsByTagName("caption"),s=i.offsetWidth,o=i.offsetHeight-(0<n.length?n[0].offsetHeight:0),i=f.getXY(i),a=f.getXY(t);switch(e){case"h":n="height:"+o+"px;top:"+(i.y+(0<n.length?n[0].offsetHeight:0))+"px;left:"+(a.x+t.offsetWidth),ne.style.cssText=n+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":n="width:"+s+"px;left:"+i.x+"px;top:"+(a.y+t.offsetHeight),ne.style.cssText=n+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function M(e,t){for(var i,n,s=f.getElementsByTagName(e.body,"table"),o=0;n=s[o++];)i=f.getElementsByTagName(n,"td"),i[0]&&(t?(i=i[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(i)&&f.addClass(n,"noBorderTable")):f.removeClasses(n,"noBorderTable"))}function H(e,t,i){var n=e.body;return n.offsetWidth-(t?2*parseInt(f.getComputedStyle(n,"margin-left"),10):0)-2*i.tableBorder-(e.options.offsetWidth||0)}function R(e,t){var i=f.findParentByTagName(t.target||t.srcElement,["td","th"],!0),n=null;if(!i)return null;if(n=h(i,s(t)),!i)return null;if("h1"===n&&i.previousSibling){var n=f.getXY(i),o=i.offsetWidth;Math.abs(n.x+o-t.clientX)>o/3&&(i=i.previousSibling)}else"v1"===n&&i.parentNode.previousSibling&&(n=f.getXY(i),o=i.offsetHeight,Math.abs(n.y+o-t.clientY)>o/3&&(i=i.parentNode.previousSibling.firstChild));return i&&!0!==e.fireEvent("excludetable",i)?i:null}var O=this,j=null,F=5,U=!1,z=5,W=10,q=0,V=null,Y=360,X=UE.UETable,K=function(e){return X.getUETable(e)},G=function(e){return X.removeSelectedClass(e)};O.ready(function(){var e=this,t=e.selection.getText;e.selection.getText=function(){var i=X.getUETableBySelected(e);if(i){var n="";return p.each(i.selectedTds,function(e){n+=e[r.ie?"innerText":"textContent"]}),n}return t.call(e.selection)}});var Q=null,Z=null,J="",ee=!1,te=null,ie=!1,ne=null,se=null,oe=!1;O.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:O.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),O.getUETable=K;var ae={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};O.ready(function(){p.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",O.document);var t,s,l;O.addListener("keydown",function(e,i){var o=i.keyCode||i.which;if(8==o){var a=X.getUETableBySelected(this);a&&a.selectedTds.length&&(a.isFullCol()?this.execCommand("deletecol"):a.isFullRow()?this.execCommand("deleterow"):this.fireEvent("delcells"),f.preventDefault(i));var r=f.findParentByTagName(this.selection.getStart(),"caption",!0),d=this.selection.getRange();d.collapsed&&r&&n(r)&&(this.fireEvent("saveScene"),a=r.parentNode,f.remove(r),a&&d.setStart(a.rows[0].cells[0],0).setCursor(!1,!0),this.fireEvent("saveScene"))}if(46==o&&(a=X.getUETableBySelected(this))){for(this.fireEvent("saveScene"),r=0;d=a.selectedTds[r++];)f.fillNode(this.document,d);this.fireEvent("saveScene"),f.preventDefault(i)}if(13==o){if(o=this.selection.getRange(),r=f.findParentByTagName(o.startContainer,"caption",!0))return a=f.findParentByTagName(r,"table"),o.collapsed?r&&o.setStart(a.rows[0].cells[0],0).setCursor(!1,!0):(o.deleteContents(),this.fireEvent("saveScene")),void f.preventDefault(i);o.collapsed&&(a=f.findParentByTagName(o.startContainer,"table"))&&(d=a.rows[0].cells[0],r=f.findParentByTagName(this.selection.getStart(),["td","th"],!0),a=a.previousSibling,d===r&&(!a||1==a.nodeType&&"TABLE"==a.tagName)&&f.isStartInblock(o)&&(o=f.findParent(this.selection.getStart(),function(e){return f.isBlockElm(e)},!0))&&(/t(h|d)/i.test(o.tagName)||o===r.firstChild)&&(this.execCommand("insertparagraphbeforetable"),f.preventDefault(i)))}if((i.ctrlKey||i.metaKey)&&"67"==i.keyCode&&(t=null,a=X.getUETableBySelected(this)))for(o=a.selectedTds,s=a.isFullCol(),l=a.isFullRow(),t=[[a.cloneCell(o[0],null,!0)]],r=1;d=o[r];r++)d.parentNode!==o[r-1].parentNode?t.push([a.cloneCell(d,null,!0)]):t[t.length-1].push(a.cloneCell(d,null,!0))}),O.addListener("tablehasdeleted",function(){c(this,!1,"",null),te&&f.remove(te)}),O.addListener("beforepaste",function(i,o){var a=this,d=a.selection.getRange();if(f.findParentByTagName(d.startContainer,"caption",!0))d=a.document.createElement("div"),d.innerHTML=o.html,o.html=d[r.ie9below?"innerText":"textContent"];else{var c=X.getUETableBySelected(a);if(t){a.fireEvent("saveScene");var h,u,d=a.selection.getRange(),m=f.findParentByTagName(d.startContainer,["td","th"],!0);if(m){if(c=K(m),l){var g=c.getCellInfo(m).rowIndex;"TH"==m.tagName&&g++;for(var v,d=0;v=t[d++];){u=c.insertRow(g++,"td");for(var y,b=0;y=v[b];b++)(m=u.cells[b])||(m=u.insertCell(b)),m.innerHTML=y.innerHTML,y.getAttribute("width")&&m.setAttribute("width",y.getAttribute("width")),y.getAttribute("vAlign")&&m.setAttribute("vAlign",y.getAttribute("vAlign")),y.getAttribute("align")&&m.setAttribute("align",y.getAttribute("align")),y.style.cssText&&(m.style.cssText=y.style.cssText);for(b=0;(y=u.cells[b])&&v[b];b++)y.innerHTML=v[b].innerHTML,v[b].getAttribute("width")&&y.setAttribute("width",v[b].getAttribute("width")),v[b].getAttribute("vAlign")&&y.setAttribute("vAlign",v[b].getAttribute("vAlign")),v[b].getAttribute("align")&&y.setAttribute("align",v[b].getAttribute("align")),v[b].style.cssText&&(y.style.cssText=v[b].style.cssText)}}else{if(s){for(g=c.getCellInfo(m),b=m=0,v=t[0];y=v[b++];)m+=y.colSpan||1;for(a.__hasEnterExecCommand=!0,d=0;d<m;d++)a.execCommand("insertcol");a.__hasEnterExecCommand=!1,m=c.table.rows[0].cells[g.cellIndex],"TH"==m.tagName&&(m=c.table.rows[1].cells[g.cellIndex])}for(d=0;v=t[d++];){for(h=m,b=0;y=v[b++];)m?(m.innerHTML=y.innerHTML,y.getAttribute("width")&&m.setAttribute("width",y.getAttribute("width")),y.getAttribute("vAlign")&&m.setAttribute("vAlign",y.getAttribute("vAlign")),y.getAttribute("align")&&m.setAttribute("align",y.getAttribute("align")),y.style.cssText&&(m.style.cssText=y.style.cssText),u=m,m=m.nextSibling):(g=y.cloneNode(!0),f.removeAttributes(g,["class","rowSpan","colSpan"]),u.parentNode.appendChild(g));if(m=c.getNextCell(h,!0,!0),!t[d])break;m||(g=c.getCellInfo(h),c.table.insertRow(c.table.rows.length),c.update(),m=c.getVSideCell(h,!0))}}c.update()}else{for(c=a.document.createElement("table"),d=0;v=t[d++];){for(u=c.insertRow(c.rows.length),b=0;y=v[b++];)g=X.cloneCell(y,null,!0),f.removeAttributes(g,["class"]),u.appendChild(g);2==b&&1<g.rowSpan&&(g.rowSpan=1)}d=X.getDefaultValue(a,void 0),d=a.body.offsetWidth-2*parseInt(f.getComputedStyle(a.body,"margin-left"),10)-2*d.tableBorder-(a.options.offsetWidth||0),a.execCommand("insertHTML","<table  "+(s&&l?'width="'+d+'"':"")+">"+c.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return a.fireEvent("contentchange"),a.fireEvent("saveScene"),o.html="",!0}d=a.document.createElement("div"),d.innerHTML=o.html,v=d.getElementsByTagName("table"),f.findParentByTagName(a.selection.getStart(),"table")?(p.each(v,function(e){f.remove(e)}),f.findParentByTagName(a.selection.getStart(),"caption",!0)&&(d.innerHTML=d[r.ie?"innerText":"textContent"])):p.each(v,function(t){e(t,!0),f.removeAttributes(t,["style","border"]),p.each(f.getElementsByTagName(t,"td"),function(t){n(t)&&f.fillNode(a.document,t),e(t,!0)})}),o.html=d.innerHTML}}),O.addListener("afterpaste",function(){p.each(f.getElementsByTagName(O.body,"table"),function(e){if(e.offsetWidth>O.body.offsetWidth){var t=X.getDefaultValue(O,e);e.style.width=O.body.offsetWidth-2*parseInt(f.getComputedStyle(O.body,"margin-left"),10)-2*t.tableBorder-(O.options.offsetWidth||0)+"px"}})}),O.addListener("blur",function(){t=null});var h;O.addListener("keydown",function(){clearTimeout(h),h=setTimeout(function(){var e=O.selection.getRange();if(e=f.findParentByTagName(e.startContainer,["th","td"],!0)){var t=e.parentNode.parentNode.parentNode;t.offsetWidth>t.getAttribute("width")&&(e.style.wordBreak="break-all")}},100)}),O.addListener("selectionchange",function(){c(O,!1,"",null)}),O.addListener("contentchange",function(){var e=this;if(P(e),!X.getUETableBySelected(e)){var t=e.selection.getRange().startContainer,t=f.findParentByTagName(t,["td","th"],!0);p.each(f.getElementsByTagName(e.document,"table"),function(t){!0!==e.fireEvent("excludetable",t)&&(t.ueTable=new X(t),t.onmouseover=function(){e.fireEvent("tablemouseover",t)},t.onmousemove=function(){e.fireEvent("tablemousemove",t),e.options.tableDragable&&a(!0,this,e),p.defer(function(){e.fireEvent("contentchange",50)},!0)},t.onmouseout=function(){e.fireEvent("tablemouseout",t),c(e,!1,"",null),P(e)},t.onclick=function(t){t=e.window.event||t;var n=i(t.target||t.srcElement);if(n){var s=K(n),o=s.table,a=s.getCellInfo(n),r=e.selection.getRange();d(o,n,t,!0)?(o=s.getCell(s.indexTable[s.rowsNum-1][a.colIndex].rowIndex,s.indexTable[s.rowsNum-1][a.colIndex].cellIndex),t.shiftKey&&s.selectedTds.length?s.selectedTds[0]!==o?(t=s.getCellsRange(s.selectedTds[0],o),s.setSelected(t)):r&&r.selectNodeContents(o).select():n!==o?(t=s.getCellsRange(n,o),s.setSelected(t)):r&&r.selectNodeContents(o).select()):d(o,n,t)&&(o=s.getCell(s.indexTable[a.rowIndex][s.colsNum-1].rowIndex,s.indexTable[a.rowIndex][s.colsNum-1].cellIndex),t.shiftKey&&s.selectedTds.length?s.selectedTds[0]!==o?(t=s.getCellsRange(s.selectedTds[0],o),s.setSelected(t)):r&&r.selectNodeContents(o).select():n!==o?(t=s.getCellsRange(n,o),s.setSelected(t)):r&&r.selectNodeContents(o).select())}})}),M(e,!0)}}),f.on(O.document,"mousemove",o),f.on(O.document,"mouseout",function(e){"TABLE"==(e.target||e.srcElement).tagName&&c(O,!1,"",null)}),O.addListener("interlacetable",function(e,t,i){if(t){e=t.rows,t=e.length;for(var n=0;n<t;n++){var s=i||this.options.classList;e[n].className=s[n]?s[n]:s[n%s.length]}}}),O.addListener("uninterlacetable",function(e,t){if(t)for(var i=t.rows,n=this.options.classList,s=i.length,o=0;o<s;o++)f.removeClasses(i[o],n)}),O.addListener("mousedown",u),O.addListener("mouseup",_),f.on(O.body,"dragstart",function(e){_.call(O,"dragstart",e)}),O.addOutputRule(function(e){p.each(e.getNodesByTagName("div"),function(e){"ue_tableDragLine"==e.getAttr("id")&&e.parentNode.removeChild(e)})});var m=0;O.addListener("mousedown",function(){m=0}),O.addListener("tabkeydown",function(){var e=this.selection.getRange(),t=e.getCommonAncestor(!0,!0),i=f.findParentByTagName(t,"table");if(i){if(f.findParentByTagName(t,"caption",!0))(t=f.getElementsByTagName(i,"th td"))&&t.length&&e.setStart(t[0],0).setCursor(!1,!0);else{var t=f.findParentByTagName(t,["td","th"],!0),s=K(t);m=1<t.rowSpan?m:s.getCellInfo(t).rowIndex,(t=s.getTabNextCell(t,m))?n(t)?e.setStart(t,0).setCursor(!1,!0):e.selectNodeContents(t).select():(O.fireEvent("saveScene"),O.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),O.__hasEnterExecCommand=!1,e=this.selection.getRange(),e.setStart(i.rows[i.rows.length-1].cells[0],0).setCursor(),O.fireEvent("saveScene"))}return!0}}),r.ie&&O.addListener("selectionchange",function(){c(this,!1,"",null)}),O.addListener("keydown",function(e,t){var i=t.keyCode||t.which;if(8!=i&&46!=i){(i=!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey))&&G(f.getElementsByTagName(this.body,"td"));var n=X.getUETableBySelected(this);n&&i&&n.clearSelected()}}),O.addListener("beforegetcontent",function(){M(this,!1),r.ie&&p.each(this.document.getElementsByTagName("caption"),function(e){f.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),O.addListener("aftergetcontent",function(){M(this,!0)}),O.addListener("getAllHtml",function(){G(O.document.getElementsByTagName("td"))}),O.addListener("fullscreenchanged",function(e,t){if(!t){var i=this.body.offsetWidth/document.body.offsetWidth,n=f.getElementsByTagName(this.body,"table");p.each(n,function(e){if(e.offsetWidth<O.body.offsetWidth)return!1;var t=f.getElementsByTagName(e,"td"),n=[];p.each(t,function(e){n.push(e.offsetWidth)});for(var s,o=0;s=t[o];o++)s.setAttribute("width",Math.floor(n[o]*i));e.setAttribute("width",Math.floor(H(O,!0,X.getDefaultValue(O,void 0))))})}});var g=O.execCommand;O.execCommand=function(e,t){e=e.toLowerCase();var i,s=X.getUETableBySelected(this),o=new L.Range(this.document),a=this.commands[e]||UE.commands[e];if(a){if(!s||ae[e]||a.notNeedUndo||this.__hasEnterExecCommand)i=g.apply(this,arguments);else{this.__hasEnterExecCommand=!0,this.fireEvent("beforeexeccommand",e);for(var r,l,d,s=s.selectedTds,c=a=-2,h=0;d=s[h];h++)n(d)?o.setStart(d,0).setCursor(!1,!0):o.selectNode(d).select(!0),l=this.queryCommandState(e),r=this.queryCommandValue(e),-1!=l&&(a===l&&c===r||(this._ignoreContentChange=!0,i=g.apply(this,arguments),this._ignoreContentChange=!1),a=this.queryCommandState(e),c=this.queryCommandValue(e),f.isEmptyBlock(d)&&f.fillNode(this.document,d));o.setStart(s[0],0).shrinkBoundary(!0).setCursor(!1,!0),this.fireEvent("contentchange"),this.fireEvent("afterexeccommand",e),this.__hasEnterExecCommand=!1,this._selectionChange()}return i}}})},UE.UETable.prototype.sortTable=function(e,t){var i=this.table,n=i.rows,s=[],o="TH"===n[0].cells[0].tagName,a=0;if(this.selectedTds.length){for(var l=this.cellsRange,d=l.endRowIndex+1,c=l.beginRowIndex;c<d;c++)s[c]=n[c];s.splice(0,l.beginRowIndex),a=l.endRowIndex+1===this.rowsNum?0:l.endRowIndex+1}else for(c=0,d=n.length;c<d;c++)s[c]=n[c];var h={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){return(e.innerText||e.textContent).localeCompare(t.innerText||t.textContent)},reversebyasc:function(e,t){return t.innerHTML.localeCompare(e.innerHTML)},orderbynum:function(e,t){var i=e[r.ie?"innerText":"textContent"].match(/\d+/),n=t[r.ie?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(i||0)-(n||0)},reversebynum:function(e,t){var i=e[r.ie?"innerText":"textContent"].match(/\d+/),n=t[r.ie?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(n||0)-(i||0)}};for(i.setAttribute("data-sort-type",t&&"string"==typeof t&&h[t]?t:""),o&&s.splice(0,1),s=p.sort(s,function(i,n){return t&&"function"==typeof t?t.call(this,i.cells[e],n.cells[e]):t&&"number"==typeof t?1:t&&"string"==typeof t&&h[t]?h[t].call(this,i.cells[e],n.cells[e]):h.orderbyasc.call(this,i.cells[e],n.cells[e])}),o=i.ownerDocument.createDocumentFragment(),c=0,d=s.length;c<d;c++)o.appendChild(s[c]);i=i.getElementsByTagName("tbody")[0],a?i.insertBefore(o,n[a-l.endRowIndex+l.beginRowIndex-1]):i.appendChild(o)},UE.plugins.tablesort=function(){var e=this,t=UE.UETable;e.ready(function(){p.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document),e.addListener("afterexeccommand",function(e,t){"mergeright"!=t&&"mergedown"!=t&&"mergecells"!=t||this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){var e=t.getTableItemsByRange(this);if(!e.cell)return-1;for(var i,e=e.table.getElementsByTagName("td"),n=0;i=e[n++];)if(1!=i.rowSpan||1!=i.colSpan)return-1;return 0},execCommand:function(e,i){var n=this.selection.getRange(),s=n.createBookmark(!0),o=t.getTableItemsByRange(this),a=o.cell,o=t.getUETable(o.table),a=o.getCellInfo(a);o.sortTable(a.cellIndex,i),n.moveToBookmark(s);try{n.select()}catch(e){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(e){var i=t.getTableItemsByRange(this).table;if(i&&"enablesort"==e)for(var n=f.getElementsByTagName(i,"th td"),s=0;s<n.length;s++)if(1<n[s].getAttribute("colspan")||1<n[s].getAttribute("rowspan"))return-1;return i?"enablesort"==e^"sortEnabled"!=i.getAttribute("data-sort")?-1:0:-1},execCommand:function(e){var i=t.getTableItemsByRange(this).table;i.setAttribute("data-sort","enablesort"==e?"sortEnabled":"sortDisabled"),"enablesort"==e?f.addClass(i,"sortEnabled"):f.removeClasses(i,"sortEnabled")}}},UE.plugins.contextmenu=function(){var e=this;if(e.setOpt("enableContextMenu",!0),!1!==e.getOpt("enableContextMenu")){var t,i=e.getLang("contextMenu"),n=e.options.contextMenu||[{label:i.selectall,cmdName:"selectall"},{label:i.cleardoc,cmdName:"cleardoc",exec:function(){confirm(i.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:i.unlink,cmdName:"unlink"},"-",{group:i.paragraph,icon:"justifyjustify",subMenu:[{label:i.justifyleft,cmdName:"justify",value:"left"},{label:i.justifyright,cmdName:"justify",value:"right"},{label:i.justifycenter,cmdName:"justify",value:"center"},{label:i.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:i.table,icon:"table",subMenu:[{label:i.inserttable,cmdName:"inserttable"},{label:i.deletetable,cmdName:"deletetable"},"-",{label:i.deleterow,cmdName:"deleterow"},{label:i.deletecol,cmdName:"deletecol"},{label:i.insertcol,cmdName:"insertcol"},{label:i.insertcolnext,cmdName:"insertcolnext"},{label:i.insertrow,cmdName:"insertrow"},{label:i.insertrownext,cmdName:"insertrownext"},"-",{label:i.insertcaption,cmdName:"insertcaption"},{label:i.deletecaption,cmdName:"deletecaption"},{label:i.inserttitle,cmdName:"inserttitle"},{label:i.deletetitle,cmdName:"deletetitle"},{label:i.inserttitlecol,cmdName:"inserttitlecol"},{label:i.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:i.mergecells,cmdName:"mergecells"},{label:i.mergeright,cmdName:"mergeright"},{label:i.mergedown,cmdName:"mergedown"},"-",{label:i.splittorows,cmdName:"splittorows"},{label:i.splittocols,cmdName:"splittocols"},{label:i.splittocells,cmdName:"splittocells"},"-",{label:i.averageDiseRow,cmdName:"averagedistributerow"},{label:i.averageDisCol,cmdName:"averagedistributecol"},"-",{label:i.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:i.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:i.setbordervisible,cmdName:"setbordervisible"}]},{group:i.tablesort,icon:"tablesort",subMenu:[{label:i.enablesort,cmdName:"enablesort"},{label:i.disablesort,cmdName:"disablesort"},"-",{label:i.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:i.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:i.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:i.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:i.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:i.borderbk,icon:"borderBack",subMenu:[{label:i.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:i.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:i.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:i.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:i.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:i.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:i.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:i.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:i.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:i.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:i.tableright,value:"right"}]},"-",{label:i.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:i.insertparagraphafter,cmdName:"insertparagraph"},{label:i.copy,cmdName:"copy"},{label:i.paste,cmdName:"paste"}];if(n.length){var s=UE.ui.uiUtils;e.addListener("contextmenu",function(o,a){var l=s.getViewportOffsetByEvent(a);e.fireEvent("beforeselectionchange"),t&&t.destroy();for(var d,c=0,h=[];d=n[c];c++){var u;!function(t){if("-"==t)(u=h[h.length-1])&&"-"!==u&&h.push("-");else if(t.hasOwnProperty("group")){for(var n,s=0,o=[];n=t.subMenu[s];s++)(function(t){"-"==t?(u=o[o.length-1])&&"-"!==u?o.push("-"):o.splice(o.length-1):(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&-1<(t.query?t.query():e.queryCommandState(t.cmdName))&&o.push({label:t.label||e.getLang("contextMenu."+t.cmdName+(t.value||""))||"",className:"edui-for-"+t.cmdName+(t.className?" edui-for-"+t.cmdName+"-"+t.className:""),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})})(n);o.length&&h.push({label:function(){switch(t.icon){case"table":return e.getLang("contextMenu.table");case"justifyjustify":return e.getLang("contextMenu.paragraph");case"aligntd":return e.getLang("contextMenu.aligntd");case"aligntable":return e.getLang("contextMenu.aligntable");case"tablesort":return i.tablesort;case"borderBack":return i.borderbk;default:return""}}(),className:"edui-for-"+t.icon,subMenu:{items:o,editor:e}})}else(e.commands[t.cmdName]||UE.commands[t.cmdName]||t.query)&&-1<(t.query?t.query.call(e):e.queryCommandState(t.cmdName))&&h.push({label:t.label||e.getLang("contextMenu."+t.cmdName),className:"edui-for-"+(t.icon?t.icon:t.cmdName+(t.value||"")),onclick:t.exec?function(){t.exec.call(e)}:function(){e.execCommand(t.cmdName,t.value)}})}(d)}if("-"==h[h.length-1]&&h.pop(),t=new UE.ui.Menu({items:h,className:"edui-contextmenu",editor:e}),t.render(),t.showAt(l),e.fireEvent("aftershowcontextmenu",t),f.preventDefault(a),r.ie){var p;try{p=e.selection.getNative().createRange()}catch(e){return}p.item&&new L.Range(e.document).selectNode(p.item(0)).select(!0,!0)}}),e.addListener("aftershowcontextmenu",function(t,i){if(e.zeroclipboard){var n,s=i.items;for(n in s)"edui-for-copy"==s[n].className&&e.zeroclipboard.clip(s[n].getDom())}})}}},UE.plugins.shortcutmenu=function(){var e,t=this.options.shortcutMenu||[];t.length&&(this.addListener("contextmenu mouseup",function(i,n){var o=this,a={type:i,target:n.target||n.srcElement,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY};if(setTimeout(function(){!1!==o.selection.getRange().collapsed&&"contextmenu"!=i||(e||(e=new s.editor.ui.ShortCutMenu({editor:o,items:t,theme:o.options.theme,className:"edui-shortcutmenu"}),e.render(),o.fireEvent("afterrendershortcutmenu",e)),e.show(a,!!UE.plugins.contextmenu))}),"contextmenu"==i&&(f.preventDefault(n),r.ie9below)){var l;try{l=o.selection.getNative().createRange()}catch(e){return}l.item&&new L.Range(o.document).selectNode(l.item(0)).select(!0,!0)}}),this.addListener("keydown",function(t){"keydown"==t&&e&&!e.isHidden&&e.hide()}))},UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},t=function(e,t){return f.filterNodeList(e.selection.getStartElementPath(),t)},i=this;i.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),i.addInputRule(function(e){p.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})});for(var n in e)(function(e,n){i.commands[e]={
execCommand:function(e){var s=i.selection.getRange(),o=t(this,n);s.collapsed?(o?(e=i.document.createTextNode(""),s.insertNode(e).removeInlineStyle(n),s.setStartBefore(e),f.remove(e)):(o=s.document.createElement(n[0]),"superscript"!=e&&"subscript"!=e||(e=i.document.createTextNode(""),s.insertNode(e).removeInlineStyle(["sub","sup"]).setStartBefore(e).collapse(!0)),s.insertNode(o).setStart(o,0)),s.collapse(!0)):("superscript"!=e&&"subscript"!=e||o&&o.tagName.toLowerCase()==e||s.removeInlineStyle(["sub","sup"]),o?s.removeInlineStyle(n):s.applyInlineStyle(n[0])),s.select()},queryCommandState:function(){return t(this,n)?1:0}}})(n,e[n])},UE.plugins.elementpath=function(){var e,t,i=this;i.setOpt("elementPathEnabled",!0),i.options.elementPathEnabled&&(i.commands.elementpath={execCommand:function(n,s){var o=t[s],a=i.selection.getRange();e=1*s,a.selectNode(o).select()},queryCommandValue:function(){var i=[].concat(this.selection.getStartElementPath()).reverse(),n=[];t=i;for(var s,o=0;s=i[o];o++)if(3!=s.nodeType){var a=s.tagName.toLowerCase();if("img"==a&&s.getAttribute("anchorname")&&(a="anchor"),n[o]=a,e==o){e=-1;break}}return n}})},UE.plugins.formatmatch=function(){function e(o,a){if(r.webkit)var l="IMG"==a.target.tagName?a.target:null;i.undoManger&&i.undoManger.save();var d=i.selection.getRange(),l=l||d.getClosedNode();if(t&&l&&"IMG"==l.tagName)l.style.cssText+=";float:"+(t.style.cssFloat||t.style.styleFloat||"none")+";display:"+(t.style.display||"inline"),t=null;else if(!t){if(d.collapsed){var c=i.document.createTextNode("match");d.insertNode(c).select()}i.__hasEnterExecCommand=!0,d=i.options.removeFormatAttributes,i.options.removeFormatAttributes="",i.execCommand("removeformat"),i.options.removeFormatAttributes=d,i.__hasEnterExecCommand=!1,d=i.selection.getRange(),n.length&&(l=d,c&&l.selectNode(c),l.applyInlineStyle(n[n.length-1].tagName,null,n)),c&&d.setStartBefore(c).collapse(!0),d.select(),c&&f.remove(c)}i.undoManger&&i.undoManger.save(),i.removeListener("mouseup",e),s=0}var t,i=this,n=[],s=0;i.addListener("reset",function(){n=[],s=0}),i.commands.formatmatch={execCommand:function(o){if(s)s=0,n=[],i.removeListener("mouseup",e);else{if(o=i.selection.getRange(),t=o.getClosedNode(),!t||"IMG"!=t.tagName){o.collapse(!0).shrinkBoundary(),n=f.findParents(o.startContainer,!0,function(e){return!f.isBlockElm(e)&&1==e.nodeType}),o=0;for(var a;a=n[o];o++)if("A"==a.tagName){n.splice(o,1);break}}i.addListener("mouseup",e),s=1}},queryCommandState:function(){return s},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function e(t,i,n){var s=0;t=t.firstChild;for(var o=0;t;){if(3==t.nodeType){if(o=t.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,s+=o,s>=i)return{node:t,index:o-(s-i)}}else if(!v.$empty[t.tagName]&&(o=t[r.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,s+=o,s>=i&&(o=e(t,o-(s-i),n))))return o;t=f.getNextDomNode(t)}}function t(t,s){var o,a=t.selection.getRange(),l=s.searchStr,d=t.document.createElement("span");if(d.innerHTML="$$ueditor_searchreplace_key$$",a.shrinkBoundary(!0),!a.collapsed){a.select();var c=t.selection.getText();if(RegExp("^"+s.searchStr+"$",s.casesensitive?"":"i").test(c)){if(void 0!=s.replaceStr)return l=s.replaceStr,l=i.document.createTextNode(l),a.deleteContents().insertNode(l),a.select(),!0;a.collapse(-1==s.dir)}}a.insertNode(d),a.enlargeToBlockElm(!0),o=a.startContainer,c=o[r.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$"),a.setStartBefore(d),f.remove(d);e:{var h,d=o;for(o=s.all||1==s.dir?"getNextDomNode":"getPreDomNode",f.isBody(d)&&(d=d.firstChild);d;){h=3==d.nodeType?d.nodeValue:d[r.ie?"innerText":"textContent"];t:{var u=s,p=c,m=u.searchStr;-1==u.dir&&(h=h.split("").reverse().join(""),m=m.split("").reverse().join(""),p=h.length-p);for(var m=RegExp(m,"g"+(u.casesensitive?"":"i")),g=void 0;g=m.exec(h);)if(g.index>=p){h=-1==u.dir?h.length-g.index-u.searchStr.length:g.index;break t}h=-1}if(-1!=h){c={node:d,index:h};break e}for(d=f[o](d);d&&n[d.nodeName.toLowerCase()];)d=f[o](d,!0);d&&(c=-1==s.dir?(3==d.nodeType?d.nodeValue:d[r.ie?"innerText":"textContent"]).length:0)}c=void 0}return c?(d=e(c.node,c.index,l),l=e(c.node,c.index+l.length,l),a.setStart(d.node,d.index).setEnd(l.node,l.index),void 0!==s.replaceStr&&(l=s.replaceStr,l=i.document.createTextNode(l),a.deleteContents().insertNode(l)),a.select(),!0):void a.setCursor()}var i=this,n={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(e,n){p.extend(n,{all:!1,casesensitive:!1,dir:1},!0);var s=0;if(n.all){var o=i.selection.getRange(),a=i.body.firstChild;for(a&&1==a.nodeType?(o.setStart(a,0),o.shrinkBoundary(!0)):3==a.nodeType&&o.setStartBefore(a),o.collapse(!0).select(!0),void 0!==n.replaceStr&&i.fireEvent("saveScene");t(this,n);)s++}else void 0!==n.replaceStr&&i.fireEvent("saveScene"),t(this,n)&&s++;return s&&i.fireEvent("saveScene"),s},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var e=this;e.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),e.commands.customstyle={execCommand:function(e,t){var i,n,s=t.tag,o=f.findParent(this.selection.getStart(),function(e){return e.getAttribute("label")},!0),a={};for(i in t)void 0!==t[i]&&(a[i]=t[i]);if(delete a.tag,o&&o.getAttribute("label")==t.label){if(i=this.selection.getRange(),n=i.createBookmark(),i.collapsed)if(v.$block[o.tagName]){var r=this.document.createElement("p");f.moveChild(o,r),o.parentNode.insertBefore(r,o),f.remove(o)}else f.remove(o,!0);else{o=f.getCommonAncestor(n.start,n.end),a=f.getElementsByTagName(o,s),RegExp(s,"i").test(o.tagName)&&a.push(o);for(var l,d=0;l=a[d++];)if(l.getAttribute("label")==t.label){var r=f.getPosition(l,n.start),c=f.getPosition(l,n.end);(r&f.POSITION_FOLLOWING||r&f.POSITION_CONTAINS)&&(c&f.POSITION_PRECEDING||c&f.POSITION_CONTAINS)&&v.$block[s]&&(r=this.document.createElement("p"),f.moveChild(l,r),l.parentNode.insertBefore(r,l)),f.remove(l,!0)}(o=f.findParent(o,function(e){return e.getAttribute("label")==t.label},!0))&&f.remove(o,!0)}i.moveToBookmark(n).select()}else v.$block[s]?(this.execCommand("paragraph",s,a,"customstyle"),i=this.selection.getRange(),i.collapsed||(i.collapse(),o=f.findParent(this.selection.getStart(),function(e){return e.getAttribute("label")==t.label},!0),s=this.document.createElement("p"),f.insertAfter(o,s),f.fillNode(this.document,s),i.setStart(s,0).setCursor())):(i=this.selection.getRange(),i.collapsed?(o=this.document.createElement(s),f.setAttributes(o,a),i.insertNode(o).setStart(o,0).setCursor()):(n=i.createBookmark(),i.applyInlineStyle(s,a).moveToBookmark(n).select()))},queryCommandValue:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}},e.addListener("keyup",function(t,i){var n=i.keyCode||i.which;if((32==n||13==n)&&(n=e.selection.getRange(),n.collapsed)){var s=f.findParent(e.selection.getStart(),function(e){return e.getAttribute("label")},!0);if(s&&v.$block[s.tagName]&&f.isEmptyNode(s)){var o=e.document.createElement("p");f.insertAfter(s,o),f.fillNode(e.document,o),f.remove(s),n.setStart(o,0).setCursor()}}})},UE.plugins.catchremoteimage=function(){var d=this,c=UE.ajax;!1!==d.options.catchRemoteImageEnable&&(d.setOpt({catchRemoteImageEnable:!1}),d.addListener("afterpaste",function(){d.fireEvent("catchRemoteImage")}),d.addListener("catchRemoteImage",function(){function b(t,i){var n=p.serializeParam(d.queryCommandValue("serverparam"))||"",n=p.formatUrl(e+(-1==e.indexOf("?")?"?":"&")+n),s={method:"POST",dataType:p.isCrossDomainUrl(n)?"jsonp":"",timeout:6e4,onsuccess:i.success,onerror:i.error};s[g]=t,c.request(n,s)}for(var a=d.getOpt("catcherLocalDomain"),e=d.getActionUrl(d.getOpt("catcherActionName")),h=d.getOpt("catcherUrlPrefix"),g=d.getOpt("catcherFieldName"),l=[],k=f.getElementsByTagName(d.document,"img"),m=function(e,t){if(-1!=e.indexOf(location.host)||/(^\.)|(^\/)/.test(e))return!0;if(t)for(var i,n=0;i=t[n++];)if(-1!==e.indexOf(i))return!0;return!1},n=0,q;q=k[n++];)q.getAttribute("word_img")||(q=q.getAttribute("_src")||q.src||"",/^(https?|ftp):/i.test(q)&&!m(q,a)&&l.push(q));l.length&&b(l,{success:function(a){try{var b=void 0!==a.state?a:eval("("+a.responseText+")")}catch(e){return}var e,g,n,l=b.list;for(a=0;b=k[a++];)for(n=b.getAttribute("_src")||b.src||"",e=0;g=l[e++];)if(n==g.source&&"SUCCESS"==g.state){e=h+g.url,f.setAttributes(b,{src:e,_src:e});break}d.fireEvent("catchremotesuccess")},error:function(){d.fireEvent("catchremoteerror")}})}))},UE.plugin.register("snapscreen",function(){function d(e){var t=document.createElement("a"),i=p.serializeParam(c.queryCommandValue("serverparam"))||"";return t.href=e,r.ie&&(t.href=t.href),e=t.search,i&&(e=e+(-1==e.indexOf("?")?"?":"&")+i,e=e.replace(/[&]+/gi,"&")),{port:t.port,hostname:t.hostname,path:t.pathname+e||+t.hash}}var c=this,b;return{commands:{snapscreen:{execCommand:function(a){function e(a){try{if(a=eval("("+a+")"),"SUCCESS"==a.state){var b=c.options;c.execCommand("insertimage",{src:b.snapscreenUrlPrefix+a.url,_src:b.snapscreenUrlPrefix+a.url,alt:a.title||"",floatStyle:b.snapscreenImgAlign})}else alert(a.state)}catch(e){alert(l.callBackErrorMsg)}}var f,g,l=c.getLang("snapScreen_plugin");if(!b){a=c.container,b=(c.container.ownerDocument||c.container.document).createElement("object");try{b.type="application/x-pluginbaidusnap"}catch(e){return}b.style.cssText="position:absolute;left:-9999px;width:0;height:0;",b.setAttribute("width","0"),b.setAttribute("height","0"),a.appendChild(b)}a=c.getActionUrl(c.getOpt("snapscreenActionName")),f=d(a),setTimeout(function(){try{g=b.saveSnapshot(f.hostname,f.path,f.port)}catch(e){return void c.ui._dialogs.snapscreenDialog.open()}e(g)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(e,t){for(var i,n=this.selection.getRange(),s=n.startContainer;s&&!f.isBody(s);)i=s,s=s.parentNode;i&&(s=this.document.createElement("p"),t?i.parentNode.insertBefore(s,i):i.parentNode.insertBefore(s,i.nextSibling),f.fillNode(this.document,s),n.setStart(s,0).setCursor(!1,!0))}},UE.plugin.register("webapp",function(){function e(e,i){return i?'<iframe class="edui-faked-webapp" title="'+e.title+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+'width="'+e.width+'" height="'+e.height+'"  scrolling="no" frameborder="0" src="'+e.url+'" logo_url = "'+e.logo+'"></iframe>':'<img title="'+e.title+'" width="'+e.width+'" height="'+e.height+'" src="'+t.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+e.logo+'" style="background:url('+e.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+e.url+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+"/>"}var t=this;return{outputRule:function(t){p.each(t.getNodesByTagName("img"),function(t){var i;"edui-faked-webapp"==t.getAttr("class")&&(i=e({title:t.getAttr("title"),width:t.getAttr("width"),height:t.getAttr("height"),align:t.getAttr("align"),cssfloat:t.getStyle("float"),url:t.getAttr("_url"),logo:t.getAttr("_logo_url")},!0),i=UE.uNode.createElement(i),t.parentNode.replaceChild(i,t))})},inputRule:function(t){p.each(t.getNodesByTagName("iframe"),function(t){if("edui-faked-webapp"==t.getAttr("class")){var i=UE.uNode.createElement(e({title:t.getAttr("title"),width:t.getAttr("width"),height:t.getAttr("height"),align:t.getAttr("align"),cssfloat:t.getStyle("float"),url:t.getAttr("src"),logo:t.getAttr("logo_url")}));t.parentNode.replaceChild(i,t)}})},commands:{webapp:{execCommand:function(t,i){var n=e(p.extend(i,{align:"none"}),!1);this.execCommand("inserthtml",n)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-webapp"==e.className?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}},this.addListener("click",function(e,t){var i=t.target||t.srcElement,n=this.selection.getRange();(i=f.findParent(i,function(e){if(e.className&&f.hasClass(e,"ue_t"))return e},!0))&&n.selectNode(i).shrinkBoundary().select()}),this.addListener("keydown",function(e,t){var i=this.selection.getRange();i.collapsed||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||(i=f.findParent(i.startContainer,function(e){if(e.className&&f.hasClass(e,"ue_t"))return e},!0))&&f.removeClasses(i,["ue_t"])})},UE.plugin.register("music",function(){function e(e,i,n,s,o,a){return a?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+i+'" height="'+n+'" '+(s&&!o?'align="'+s+'"':"")+(o?'style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(s&&!o?'align="'+s+'"':"")+(o?'style="float:'+o+'"':"")+' width="'+i+'" height="'+n+'" _url="'+e+'" class="edui-faked-music" src="'+t.options.langPath+t.options.lang+'/images/music.png" />'}var t=this;return{outputRule:function(t){p.each(t.getNodesByTagName("img"),function(t){var i;if("edui-faked-music"==t.getAttr("class")){i=t.getStyle("float");var n=t.getAttr("align");i=e(t.getAttr("_url"),t.getAttr("width"),t.getAttr("height"),n,i,!0),i=UE.uNode.createElement(i),t.parentNode.replaceChild(i,t)}})},inputRule:function(t){p.each(t.getNodesByTagName("embed"),function(t){if("edui-faked-music"==t.getAttr("class")){var i=t.getStyle("float"),n=t.getAttr("align");html=e(t.getAttr("src"),t.getAttr("width"),t.getAttr("height"),n,i,!1),i=UE.uNode.createElement(html),t.parentNode.replaceChild(i,t)}})},commands:{music:{execCommand:function(t,i){var n=e(i.url,i.width||400,i.height||95,"none",!1);this.execCommand("inserthtml",n)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-music"==e.className?1:0}}}}}),UE.plugin.register("autoupload",function(){function e(e,t){var i,n,s,o,a,r,l,d,c=/image\/\w+/i.test(e.type)?"image":"file",h="loading_"+(+new Date).toString(36);i=t.getOpt(c+"FieldName"),n=t.getOpt(c+"UrlPrefix"),s=t.getOpt(c+"MaxSize"),o=t.getOpt(c+"AllowFiles"),a=t.getActionUrl(t.getOpt(c+"ActionName")),l=function(e){var i=t.document.getElementById(h);i&&f.remove(i),t.fireEvent("showmessage",{id:h,content:e,type:"error",timeout:4e3})},"image"==c?(r='<img class="loadingclass" id="'+h+'" src="'+t.options.themePath+t.options.theme+'/images/spacer.gif" title="'+(t.getLang("autoupload.loading")||"")+'" >',d=function(e){var i=n+e.url,s=t.document.getElementById(h);s&&(s.setAttribute("src",i),s.setAttribute("_src",i),s.setAttribute("title",e.title||""),s.setAttribute("alt",e.original||""),s.removeAttribute("id"),f.removeClasses(s,"loadingclass"))}):(r='<p><img class="loadingclass" id="'+h+'" src="'+t.options.themePath+t.options.theme+'/images/spacer.gif" title="'+(t.getLang("autoupload.loading")||"")+'" ></p>',d=function(e){e=n+e.url;var i=t.document.getElementById(h),s=t.selection.getRange(),o=s.createBookmark();s.selectNode(i).select(),t.execCommand("insertfile",{url:e}),s.moveToBookmark(o).select()}),t.execCommand("inserthtml",r),t.getOpt(c+"ActionName")?e.size>s?l(t.getLang("autoupload.exceedSizeError")):(s=e.name?e.name.substr(e.name.lastIndexOf(".")):"")&&"image"!=c||o&&-1==(o.join("")+".").indexOf(s.toLowerCase()+".")?l(t.getLang("autoupload.exceedTypeError")):(o=new XMLHttpRequest,c=new FormData,s=p.serializeParam(t.queryCommandValue("serverparam"))||"",a=p.formatUrl(a+(-1==a.indexOf("?")?"?":"&")+s),c.append(i,e,e.name||"blob."+e.type.substr(6)),c.append("type","ajax"),o.open("post",a,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.addEventListener("load",function(e){try{var i=new Function("return "+p.trim(e.target.response))();"SUCCESS"==i.state&&i.url?d(i):l(i.state)}catch(e){l(t.getLang("autoupload.loadError"))}}),o.send(c)):l(t.getLang("autoupload.errorLoadConfig"))}return{outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)}),p.each(e.getNodesByTagName("p"),function(e){/\bloadpara\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},bindEvents:{ready:function(t){var i=this;window.FormData&&window.FileReader&&(f.on(i.body,"paste drop",function(t){var n,s=!1;if(n="paste"==t.type?t.clipboardData&&t.clipboardData.items&&1==t.clipboardData.items.length&&/^image\//.test(t.clipboardData.items[0].type)?t.clipboardData.items:null:t.dataTransfer&&t.dataTransfer.files?t.dataTransfer.files:null){for(var o,a=n.length;a--;)o=n[a],o.getAsFile&&(o=o.getAsFile()),o&&0<o.size&&(e(o,i),s=!0);s&&t.preventDefault()}}),f.on(i.body,"dragover",function(e){"Files"==e.dataTransfer.types[0]&&e.preventDefault()}),p.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}}),UE.plugin.register("autosave",function(){function e(e){var o;new Date-i<n||(e.hasContents()?(i=new Date,e._saveFlag=null,o=t.body.innerHTML,!1!==e.fireEvent("beforeautosave",{content:o})&&(t.setPreferences(s,o),e.fireEvent("afterautosave",{content:o}))):s&&t.removePreferences(s))}var t=this,i=new Date,n=20,s=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var e=null,e=t.key?t.key+"-drafts-data":(t.container.parentNode.id||"ue-common")+"-drafts-data";s=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+e},contentchange:function(){s&&(t._saveFlag&&window.clearTimeout(t._saveFlag),0<t.options.saveInterval?t._saveFlag=window.setTimeout(function(){e(t)},t.options.saveInterval):e(t))}},commands:{clearlocaldata:{execCommand:function(e,i){s&&t.getPreferences(s)&&t.removePreferences(s)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(e,i){return s?t.getPreferences(s)||"":""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(e,i){s&&(t.body.innerHTML=t.getPreferences(s)||"<p>"+f.fillHtml+"</p>",t.focus(!0))},queryCommandState:function(){return s?null===t.getPreferences(s)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register("charts",function(){function e(e){var t=null,i=0;if(2>e.rows.length||2>e.rows[0].cells.length)return!1;for(var n,t=e.rows[0].cells,i=t.length,s=0;n=t[s];s++)if("th"!==n.tagName.toLowerCase())return!1;for(s=1;t=e.rows[s];s++){if(t.cells.length!=i||"th"!==t.cells[0].tagName.toLowerCase())return!1;for(var o=1;n=t.cells[o];o++)if(n=p.trim(n.innerText||n.textContent||""),n=n.replace(RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(n))return!1}return!0}var t=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(i,n){var s=f.findParentByTagName(this.selection.getRange().startContainer,"table",!0),o=[],a={};if(!s)return!1;if(!e(s))return t.fireEvent("chartserror"),!1;a.title=n.title||"",a.subTitle=n.subTitle||"",a.xTitle=n.xTitle||"",a.yTitle=n.yTitle||"",a.suffix=n.suffix||"",a.tip=n.tip||"",a.dataFormat=n.tableDataFormat||"",a.chartType=n.chartType||0;for(var r in a)a.hasOwnProperty(r)&&o.push(r+":"+a[r]);s.setAttribute("data-chart",o.join(";")),f.addClass(s,"edui-charts-table")},queryCommandState:function(t,i){var n=f.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return n&&e(n)?0:-1}}},inputRule:function(e){p.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style")})},outputRule:function(e){p.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function e(e){this.tag="",this.level=-1,this.parentSection=this.previousSection=this.nextSection=this.dom=null,this.startAddress=[],this.endAddress=[],this.children=[]}function t(t){var i=new e;return p.extend(i,t)}function i(e,t){for(var i=t,n=0;n<e.length;n++){if(!i.childNodes)return null;i=i.childNodes[e[n]]}return i}var n=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){n.fireEvent("updateSections")}},bindEvents:{ready:function(){n.fireEvent("updateSections"),f.on(n.body,"drop paste",function(){n.fireEvent("updateSections")})},afterexeccommand:function(e,t){"paragraph"==t&&n.fireEvent("updateSections")},keyup:function(e,t){if(1!=this.selection.getRange().collapsed)this.fireEvent("updateSections");else{var i=t.keyCode||t.which;13!=i&&8!=i&&46!=i||this.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(e,i){function n(e,i){for(var o,l,d=null,c=e.childNodes,h=0,u=c.length;h<u;h++){l=c[h];e:{o=l;for(var f=0;f<s.length;f++)if(s[f](o)){o=f;break e}o=-1}if(0<=o){for(d=a.selection.getRange().selectNode(l).createAddress(!0).startAddress,d=t({tag:l.tagName,title:l.innerText||l.textContent||"",level:o,dom:l,startAddress:p.clone(d,[]),endAddress:p.clone(d,[]),children:[]}),r.nextSection=d,l=d.previousSection=r;o<=l.level;)l=l.parentSection;d.parentSection=l,l.children.push(d),d=r=d}else 1===l.nodeType&&n(l,i),d&&d.endAddress[d.endAddress.length-1]++}}for(var s=i||"h1 h2 h3 h4 h5 h6".split(" "),o=0;o<s.length;o++)"string"==typeof s[o]?s[o]=function(e){return function(t){return t.tagName==e.toUpperCase()}}(s[o]):"function"!=typeof s[o]&&(s[o]=function(e){return null});var a=this,r=o=t({level:-1,title:"root"});return n(a.body,o),o},notNeedUndo:!0},movesection:{execCommand:function(e,t,n,s){if(t&&n&&-1!=n.level){n=s?n.endAddress:n.startAddress,e=i(n,this.body);var o;if(!(o=!n)&&!(o=!e)){o=t.startAddress;for(var a=!1,r=!1,l=0;l<o.length&&!(l>=n.length);l++){if(n[l]>o[l]){a=!0;break}if(n[l]<o[l])break}for(l=0;l<t.endAddress.length&&!(l>=n.length);l++){if(n[l]<o[l]){r=!0;break}if(n[l]>o[l])break}o=a&&r}if(!o){if(n=i(t.startAddress,this.body),t=i(t.endAddress,this.body),s)for(s=t;s&&!(f.getPosition(n,s)&f.POSITION_FOLLOWING)&&(o=s.previousSibling,f.insertAfter(e,s),s!=n);)s=o;else for(s=n;s&&!(f.getPosition(s,t)&f.POSITION_FOLLOWING)&&(o=s.nextSibling,e.parentNode.insertBefore(s,e),s!=t);)s=o;this.fireEvent("updateSections")}}}},deletesection:{execCommand:function(e,t,i){function n(e){for(var t=s.body,i=0;i<e.length;i++){if(!t.childNodes)return null;t=t.childNodes[e[i]]}return t}var s=this;if(t){if(e=n(t.startAddress),t=n(t.endAddress),i)f.remove(e);else for(;e&&f.inDoc(t,s.document)&&!(f.getPosition(e,t)&f.POSITION_FOLLOWING);)i=e.nextSibling,f.remove(e),e=i;s.fireEvent("updateSections")}}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var i=this.selection.getRange(),n={startAddress:p.clone(t.startAddress,[]),endAddress:p.clone(t.endAddress,[])};return n.endAddress[n.endAddress.length-1]++,i.moveToAddress(n).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var i=this.selection.getRange(),n={startAddress:t.startAddress,endAddress:t.endAddress};return n.endAddress[n.endAddress.length-1]++,i.moveToAddress(n).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function e(){var e=t.offsetWidth||20,s=t.offsetHeight||20,o=document.createElement("iframe"),a="display:block;width:"+e+"px;height:"+s+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";f.on(o,"load",function(){var t,r,l,d=(+new Date).toString(36);r=o.contentDocument||o.contentWindow.document,l=r.body,t=r.createElement("div"),t.innerHTML='<form id="edui_form_'+d+'" target="edui_iframe_'+d+'" method="POST" enctype="multipart/form-data" action="'+i.getOpt("serverUrl")+'" style="'+a+'"><input id="edui_input_'+d+'" type="file" accept="image/*" name="'+i.options.imageFieldName+'" style="'+a+'"></form><iframe id="edui_iframe_'+d+'" name="edui_iframe_'+d+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',t.className="edui-"+i.options.theme,t.id=i.ui.id+"_iframeupload",l.style.cssText=a,l.style.width=e+"px",l.style.height=s+"px",l.appendChild(t),l.parentNode&&(l.parentNode.style.width=e+"px",l.parentNode.style.height=e+"px");var c=r.getElementById("edui_form_"+d),h=r.getElementById("edui_input_"+d),u=r.getElementById("edui_iframe_"+d);f.on(h,"change",function(){function e(){try{var s,o,a,r=(u.contentDocument||u.contentWindow.document).body;o=new Function("return "+(r.innerText||r.textContent||""))(),s=i.options.imageUrlPrefix+o.url,"SUCCESS"==o.state&&o.url?(a=i.document.getElementById(n),a.setAttribute("src",s),a.setAttribute("_src",s),a.setAttribute("title",o.title||""),a.setAttribute("alt",o.original||""),a.removeAttribute("id"),f.removeClasses(a,"loadingclass")):t&&t(o.state)}catch(e){t&&t(i.getLang("simpleupload.loadError"))}c.reset(),f.un(u,"load",e)}function t(e){if(n){var t=i.document.getElementById(n);t&&f.remove(t),i.fireEvent("showmessage",{id:n,content:e,type:"error",timeout:4e3})}}if(h.value){var n="loading_"+(+new Date).toString(36),s=p.serializeParam(i.queryCommandValue("serverparam"))||"",o=i.getActionUrl(i.getOpt("imageActionName")),a=i.getOpt("imageAllowFiles");if(i.focus(),i.execCommand("inserthtml",'<img class="loadingclass" id="'+n+'" src="'+i.options.themePath+i.options.theme+'/images/spacer.gif" title="'+(i.getLang("simpleupload.loading")||"")+'" >'),i.getOpt("imageActionName")){var r=h.value,r=r?r.substr(r.lastIndexOf(".")):"";!r||a&&-1==(a.join("")+".").indexOf(r.toLowerCase()+".")?t(i.getLang("simpleupload.exceedTypeError")):(f.on(u,"load",e),c.action=p.formatUrl(o+(-1==o.indexOf("?")?"?":"&")+s),c.submit())}else errorHandler(i.getLang("autoupload.errorLoadConfig"))}});var m;i.addListener("selectionchange",function(){clearTimeout(m),m=setTimeout(function(){-1==i.queryCommandState("simpleupload")?h.disabled="disabled":h.disabled=!1},400)}),n=!0}),o.style.cssText=a,t.appendChild(o)}var t,i=this,n=!1;return{bindEvents:{ready:function(){p.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(n,s){t=s,i.afterConfigReady(e)}},outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},commands:{simpleupload:{queryCommandState:function(){return n?0:-1}}}}}),UE.plugin.register("serverparam",function(){var e={};return{commands:{serverparam:{execCommand:function(t,i,n){void 0===i||null===i?e={}:p.isString(i)?void 0===n||null===n?delete e[i]:e[i]=n:p.isObject(i)?p.extend(e,i,!0):p.isFunction(i)&&p.extend(e,i(),!0)},queryCommandValue:function(){return e||{}}}}}}),UE.plugin.register("insertfile",function(){var e=this;return{commands:{insertfile:{execCommand:function(t,i){i=p.isArray(i)?i:[i];var n,s,o,a,r="";n=e.getOpt("UEDITOR_HOME_URL");var l=n+("/"==n.substr(n.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(n=0;n<i.length;n++){s=i[n],o=l,a=s.url,a=a.substr(a.lastIndexOf(".")+1).toLowerCase();var d={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};o+=d[a]?d[a]:d.txt,a=s.title||s.url.substr(s.url.lastIndexOf("/")+1),r+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+o+'" _src="'+o+'" /><a style="font-size:12px; color:#0066cc;" href="'+s.url+'" title="'+a+'">'+a+"</a></p>"}e.execCommand("insertHtml",r)}}}}}),s=s||{},s.editor=s.editor||{},UE.ui=s.editor.ui={},function(){function e(){var e=document.getElementById("edui_fixedlayer");a.setViewportOffset(e,{left:0,top:0})}var t=s.editor.browser,i=s.editor.dom.domUtils,n=window.$EDITORUI={},o=0,a=s.editor.ui.uiUtils={uid:function(e){return e?e.ID$EDITORUI||(e.ID$EDITORUI=++o):++o},hook:function(e,t){var i;return e&&e._callbacks?i=e:(i=function(){var t;e&&(t=e.apply(this,arguments));for(var n=i._callbacks,s=n.length;s--;){var o=n[s].apply(this,arguments);void 0===t&&(t=o)}return t},i._callbacks=[]),i._callbacks.push(t),i},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t=t.firstChild,t.parentNode.removeChild(t),t},getViewportElement:function(){return t.ie&&t.quirks?document.body:document.documentElement},getClientRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(e){t={left:0,top:0,height:0,width:0}}for(var n,s={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(n=e.ownerDocument)!==document&&(e=i.getWindow(n).frameElement);)t=e.getBoundingClientRect(),s.left+=t.left,s.top+=t.top;return s.bottom=s.top+s.height,s.right=s.left+s.width,s},getViewportRect:function(){var e=a.getViewportElement(),t=0|(window.innerWidth||e.clientWidth),e=0|(window.innerHeight||e.clientHeight);return{left:0,top:0,height:e,width:t,bottom:e,right:t}},setViewportOffset:function(e,t){var n=a.getFixedLayer();e.parentNode===n?(e.style.left=t.left+"px",e.style.top=t.top+"px"):i.setViewportOffset(e,t)},getEventOffset:function(e){var t=a.getClientRect(e.target||e.srcElement);return e=a.getViewportOffsetByEvent(e),{left:e.left-t.left,top:e.top-t.top}},getViewportOffsetByEvent:function(e){var t=e.target||e.srcElement,n=i.getWindow(t).frameElement;return e={left:e.clientX,top:e.clientY},n&&t.ownerDocument!==document&&(t=a.getClientRect(n),e.left+=t.left,e.top+=t.top),e},setGlobal:function(e,t){return n[e]=t,'$EDITORUI["'+e+'"]'},unsetGlobal:function(e){delete n[e]},copyAttributes:function(e,n){for(var s=n.attributes,o=s.length;o--;){var a=s[o];"style"==a.nodeName||"class"==a.nodeName||t.ie&&!a.specified||e.setAttribute(a.nodeName,a.nodeValue)}n.className&&i.addClass(e,n.className),n.style.cssText&&(e.style.cssText+=";"+n.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&e!==t&&(e.contains?e.contains(t):16&e.compareDocumentPosition(t))},startDrag:function(e,t,i){function n(e){t.ondragmove(e.clientX-s,e.clientY-o,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}i=i||document;var s=e.clientX,o=e.clientY;if(i.addEventListener){var a=function(e){i.removeEventListener("mousemove",n,!0),i.removeEventListener("mouseup",a,!0),window.removeEventListener("mouseup",a,!0),
t.ondragstop()};i.addEventListener("mousemove",n,!0),i.addEventListener("mouseup",a,!0),window.addEventListener("mouseup",a,!0),e.preventDefault()}else{var r=e.srcElement;r.setCapture();var l=function(){r.releaseCapture(),r.detachEvent("onmousemove",n),r.detachEvent("onmouseup",l),r.detachEvent("onlosecaptrue",l),t.ondragstop()};r.attachEvent("onmousemove",n),r.attachEvent("onmouseup",l),r.attachEvent("onlosecaptrue",l),e.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var n=document.getElementById("edui_fixedlayer");return null==n&&(n=document.createElement("div"),n.id="edui_fixedlayer",document.body.appendChild(n),t.ie&&8>=t.version?(n.style.position="absolute",i.on(window,"scroll",e),i.on(window,"resize",s.editor.utils.defer(e,0,!0)),setTimeout(e)):n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0",n.style.height="0"),n},makeUnselectable:function(e){if(t.opera||t.ie&&9>t.version){if(e.unselectable="on",e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++)1==e.childNodes[i].nodeType&&a.makeUnselectable(e.childNodes[i])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}}}(),function(){var e=s.editor.utils,t=s.editor.ui.uiUtils,i=s.editor.EventBase,n=s.editor.ui.UIBase=function(){};n.prototype={className:"",uiName:"",initOptions:function(e){for(var i in e)this[i]=e[i];this.id=this.id||"edui"+t.uid()},initUIBase:function(){this._globalKey=e.unhtml(t.setGlobal(this.id,this))},render:function(e){for(var i,n=this.renderHtml(),n=t.createElementByHtml(n),s=f.getElementsByTagName(n,"*"),o="edui-"+(this.theme||this.editor.options.theme),a=document.getElementById("edui_fixedlayer"),r=0;i=s[r++];)f.addClass(i,o);f.addClass(n,o),a&&(a.className="",f.addClass(a,o)),s=this.getDom(),null!=s?(s.parentNode.replaceChild(n,s),t.copyAttributes(n,s)):("string"==typeof e&&(e=document.getElementById(e)),e=e||t.getFixedLayer(),f.addClass(e,o),e.appendChild(n)),this.postRender()},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&s.editor.dom.domUtils.remove(e),t.unsetGlobal(this.id)}},e.inherits(n,i)}(),function(){var e=s.editor.utils,t=s.editor.ui.UIBase,i=s.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()};i.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},e.inherits(i,t)}(),function(){var e=s.editor.utils,t=s.editor.dom.domUtils,i=s.editor.ui.UIBase,n=s.editor.ui.uiUtils,o=s.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()};o.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;t.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom(),t=n.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},e.inherits(o,i)}(),function(){function e(e,t){for(var i=0;i<r.length;i++){var n=r[i];if(!n.isHidden()&&!1!==n.queryAutoHide(t)){if(e&&/scroll/gi.test(e.type)&&"edui-wordpastepop"==n.className)return;n.hide()}}r.length&&n.editor.fireEvent("afterhidepop")}var t=s.editor.utils,i=s.editor.ui.uiUtils,n=s.editor.dom.domUtils,o=s.editor.ui.UIBase,a=s.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},r=[];a.postHide=e;var l=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];a.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),r.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:o.prototype.postRender,postRender:function(){if(this.content instanceof o&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,t=this.getDom().offsetHeight,s=i.getClientRect(this.combox.getDom()).top,a=this.getDom("content"),r=this.getDom("body").getElementsByTagName("iframe"),l=this;for(r.length&&(r=r[0]);s+t>e;)t-=30;a.style.height=t+"px",r&&(r.style.height=t+"px"),window.XMLHttpRequest?n.on(a,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,a.scrollTop=e.wheelDelta?a.scrollTop-e.wheelDelta/120*60:a.scrollTop-e.detail/-3*60}):n.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,l.getDom("content").scrollTop-=e.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return i.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var i=parseInt(this.getDom("content").style.height,10);!window.isNaN(i)&&(t.height=i)}else e.style.width=t.width+"px";return e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,t){this.showAnchorRect(i.getClientRect(e),t)},showAnchorRect:function(e,t,o){this._doAutoRender();var a=i.getViewportRect();this.getDom().style.visibility="hidden",this._show(),o=this.fitSize();var r;t?(t=this.canSideLeft&&e.right+o.width>a.right&&e.left>o.width,a=this.canSideUp&&e.top+o.height>a.bottom&&e.bottom>o.height,r=t?e.left-o.width:e.right,e=a?e.bottom-o.height:e.top):(t=this.canSideLeft&&e.right+o.width>a.right&&e.left>o.width,a=this.canSideUp&&e.top+o.height>a.bottom&&e.bottom>o.height,r=t?e.right-o.width:e.left,e=a?e.top-o.height:e.bottom),o=this.getDom(),i.setViewportOffset(o,{left:r,top:e}),n.removeClasses(o,l),o.className+=" "+l[2*(a?1:0)+(t?1:0)],this.editor&&(o.style.zIndex=1*this.editor.container.style.zIndex+10,s.editor.ui.uiUtils.getFixedLayer().style.zIndex=o.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left;e=e.top,this.showAnchorRect({left:t,top:e,right:t,bottom:e,height:0,width:0},!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!i.contains(this.getDom(),e)}},t.inherits(a,o),n.on(document,"mousedown",function(t){e(t,t.target||t.srcElement)}),n.on(window,"scroll",function(t,i){e(t,i)})}(),function(){var e=s.editor.utils,t=s.editor.ui.UIBase,i=s.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};i.prototype={getHtmlTpl:function(){for(var e=this.editor,t='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+this.noColorText+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+e.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',i=0;i<n.length;i++)i&&0===i%10&&(t+="</tr>"+(60==i?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+e.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==i?' class="edui-colorpicker-tablefirstrow"':"")+">"),t+=70>i?'<td style="padding: 0 2px;"><a hidefocus title="'+n[i]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+n[i]+'" style="background-color:#'+n[i]+";border:solid #ccc;"+(10>i||60<=i?"border-width:1px;":10<=i&&20>i?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return t+"</tr></table></div>"},_onTableClick:function(e){(e=(e.target||e.srcElement).getAttribute("data-color"))&&this.fireEvent("pickcolor",e)},_onTableOver:function(e){(e=(e.target||e.srcElement).getAttribute("data-color"))&&(this.getDom("preview").style.backgroundColor=e)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},e.inherits(i,t);var n="ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646 f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806 c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0 ".split(" ")}(),function(){var e=s.editor.utils,t=s.editor.ui.uiUtils,i=s.editor.ui.UIBase,n=s.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()};n.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:i.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var i=this.getDom("overlay").style,n=this.lengthOfCellSide;i.width=e*n+"px",i.height=t*n+"px",this.getDom("label").innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,i){var n=e.relatedTarget||e.fromElement;t.contains(i,n)||i===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,i){var n=e.relatedTarget||e.toElement;t.contains(i,n)||i===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e,i){this.getDom("overlay");var n=t.getEventOffset(e),s=this.lengthOfCellSide,o=Math.ceil(n.left/s),n=Math.ceil(n.top/s);this._track(o,n)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},e.inherits(n,i)}(),function(){var e=s.editor.dom.domUtils,t=s.editor.ui.uiUtils,i='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(s.editor.browser.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');s.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return i})},Stateful_onMouseEnter:function(e,t){this.target=t,this.isDisabled()&&!this.alwalysHoverable||(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(e,t){this.isDisabled()&&!this.alwalysHoverable||(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(e,i){var n=e.relatedTarget;t.contains(i,n)||i===n||this.Stateful_onMouseEnter(e,i)},Stateful_onMouseOut:function(e,i){var n=e.relatedTarget;t.contains(i,n)||i===n||this.Stateful_onMouseLeave(e,i)},Stateful_onMouseDown:function(e,t){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(e,t){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(t){return e.hasClass(this.getStateDom(),"edui-state-"+t)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(t){this.hasState(t)&&e.removeClasses(this.getStateDom(),["edui-state-"+t])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var e=s.editor.utils,t=s.editor.ui.UIBase,i=s.editor.ui.Stateful,n=s.editor.ui.Button=function(e){if(e.name){var t=e.name,i=e.cssRules;e.className||(e.className="edui-for-"+t),e.cssRules=".edui-default  .edui-for-"+t+" .edui-icon {"+i+"}"}this.initOptions(e),this.initButton()};n.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&e.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(e){if(e=(e=e.target||e.srcElement)&&e.tagName&&e.tagName.toLowerCase(),"input"==e||"object"==e||"object"==e)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(e){this.getDom("label").innerHTML=e}},e.inherits(n,t),e.extend(n.prototype,i)}(),function(){var e=s.editor.utils,t=s.editor.ui.uiUtils,i=s.editor.ui.UIBase,n=s.editor.ui.Stateful,o=s.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()};o.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){if(this.initUIBase(),this.Stateful_init(),null!=this.popup){var e=this.popup;this.popup=null,this.setPopup(e)}},_UIBase_postRender:i.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(i){this.popup!==i&&(null!=this.popup&&this.popup.dispose(),i.addListener("show",e.bind(this._onPopupShow,this)),i.addListener("hide",e.bind(this._onPopupHide,this)),i.addListener("postrender",e.bind(function(){i.getDom("body").appendChild(t.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(t.getClientRect(this.getDom()).width+20)+'px"></div>')),i.getDom().className+=" "+this.className},this)),this.popup=i)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var e=t.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(e,t){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},e.inherits(o,i),e.extend(o.prototype,n,!0)}(),function(){var e=s.editor.utils,t=s.editor.ui.uiUtils,i=s.editor.ui.ColorPicker,n=s.editor.ui.Popup,o=s.editor.ui.SplitButton,a=s.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()};a.prototype={initColorButton:function(){var e=this;this.popup=new n({content:new i({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(t,i){e._onPickColor(i)},onpicknocolor:function(t,i){e._onPickNoColor(i)}}),editor:e.editor}),this.initSplitButton()},_SplitButton_postRender:o.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(t.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.color=this.getDom("colorlump").style.backgroundColor=e},_onPickColor:function(e){!1!==this.fireEvent("pickcolor",e)&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(e){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}},e.inherits(a,o)}(),function(){var e=s.editor.utils,t=s.editor.ui.Popup,i=s.editor.ui.TablePicker,n=s.editor.ui.SplitButton,o=s.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()};o.prototype={initTableButton:function(){var e=this;this.popup=new t({content:new i({editor:e.editor,onpicktable:function(t,i,n){e._onPickTable(i,n)}}),editor:e.editor}),this.initSplitButton()},_onPickTable:function(e,t){!1!==this.fireEvent("picktable",e,t)&&this.popup.hide()}},e.inherits(o,n)}(),function(){var e=s.editor.utils,t=s.editor.ui.UIBase,i=s.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()};i.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,i=e.getLang("autoTypeSet"),n="textAlignValue"+e.uid,s="imageBlockLineValue"+e.uid,o="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+i.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+i.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+i.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+i.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+i.alignment+'</td><td colspan="2" id="'+n+'"><input type="radio" name="'+n+'" value="left" '+(t.textAlign&&"left"==t.textAlign?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+n+'" value="center" '+(t.textAlign&&"center"==t.textAlign?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+n+'" value="right" '+(t.textAlign&&"right"==t.textAlign?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+i.imageFloat+'</td><td nowrap id="'+s+'"><input type="radio" name="'+s+'" value="none" '+(t.imageBlockLine&&"none"==t.imageBlockLine?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+s+'" value="left" '+(t.imageBlockLine&&"left"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+s+'" value="center" '+(t.imageBlockLine&&"center"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+s+'" value="right" '+(t.imageBlockLine&&"right"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+i.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+i.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+i.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+i.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(t.bdc2sb||t.tobdc?"checked":"")+">"+i.symbol+'</td><td id="'+o+'"><input type="radio" name="bdc" value="bdc2sb" '+(t.bdc2sb?"checked":"")+">"+i.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t.tobdc?"checked":"")+">"+i.tobdc+'</td><td nowrap align="right"><button >'+i.run+"</button></td></tr></table></div></div>"},_UIBase_render:t.prototype.render},e.inherits(i,t)}(),function(){function e(e){for(var i,n={},s=e.getDom(),o=e.editor.uid,a=null,a=null,r=f.getElementsByTagName(s,"input"),l=r.length-1;i=r[l--];)if(a=i.getAttribute("type"),"checkbox"==a)if(a=i.getAttribute("name"),n[a]&&delete n[a],i.checked)if(i=document.getElementById(a+"Value"+o))if(/input/gi.test(i.tagName))n[a]=i.value;else{i=i.getElementsByTagName("input");for(var d,c=i.length-1;d=i[c--];)if(d.checked){n[a]=d.value;break}}else n[a]=!0;else n[a]=!1;else n[i.getAttribute("value")]=i.checked;for(s=f.getElementsByTagName(s,"select"),l=0;o=s[l++];)r=o.getAttribute("name"),n[r]=n[r]?o.value:"";t.extend(e.editor.options.autotypeset,n),e.editor.setPreferences("autotypeset",n)}var t=s.editor.utils,i=s.editor.ui.Popup,n=s.editor.ui.AutoTypeSetPicker,o=s.editor.ui.SplitButton,a=s.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};a.prototype={initAutoTypeSetButton:function(){var t=this;this.popup=new i({content:new n({editor:t.editor}),editor:t.editor,hide:function(){!this._hidden&&this.getDom()&&(e(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var s=0;this.popup.addListener("postRenderAfter",function(){var i=this;if(!s){var n=this.getDom();n.getElementsByTagName("button")[0].onclick=function(){e(i),t.editor.execCommand("autotypeset"),i.hide()},f.on(n,"click",function(n){n=n.target||n.srcElement;var s=t.editor.uid;if(n&&"INPUT"==n.tagName){if("imageBlockLine"==n.name||"textAlign"==n.name||"symbolConver"==n.name)for(var o=n.checked,a=document.getElementById(n.name+"Value"+s).getElementsByTagName("input"),r={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},l=0;l<a.length;l++)o?a[l].value==r[n.name]&&(a[l].checked="checked"):a[l].checked=!1;(n.name=="imageBlockLineValue"+s||n.name=="textAlignValue"+s||"bdc"==n.name)&&(n=n.parentNode.previousSibling.getElementsByTagName("input"))&&(n[0].checked=!0),e(i)}}),s=1}}),this.initSplitButton()}},t.inherits(a,o)}(),function(){var e=s.editor.utils,t=s.editor.ui.Popup,i=s.editor.ui.Stateful,n=s.editor.ui.UIBase,o=s.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()};o.prototype={initSelected:function(){var e={top:0,middle:1,bottom:2},t={left:0,center:1,right:2};this.selected&&(this.selectedIndex=3*e[this.selected.valign]+t[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var e=["left","center","right"],t=null,i=-1,n=[],s=0;9>s;s++)t=this.selectedIndex===s?' class="edui-cellalign-selected" ':"",i=s%3,0===i&&n.push("<tr>"),n.push('<td index="'+s+'" '+t+' stateful><div class="edui-icon edui-'+e[i]+'"></div></td>'),2===i&&n.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+n.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(e){var i=e.target||e.srcElement;/icon/.test(i.className)&&(this.items[i.parentNode.getAttribute("index")].onclick(),t.postHide(e))},_UIBase_render:n.prototype.render},e.inherits(o,n),e.extend(o.prototype,i,!0)}(),function(){var e=s.editor.utils,t=s.editor.ui.Stateful,i=s.editor.ui.uiUtils,n=s.editor.ui.UIBase,o=s.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()};o.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=f.getNextDomNode(e),n=i.getViewportRect().height,s=i.getClientRect(t);t.style.top=s.top+s.height>n?-s.height-e.offsetHeight+"px":"",/hidden/gi.test(f.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",f.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",f.removeClasses(e,"edui-state-opened"))},_UIBase_render:n.prototype.render},e.inherits(o,n),e.extend(o.prototype,t,!0)}(),function(){var e=s.editor.utils,t=s.editor.ui.uiUtils,i=s.editor.ui.UIBase,n=s.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()};n.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e,t){void 0===t?this.items.push(e):this.items.splice(t,0,e)},getHtmlTpl:function(){for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){for(var e=this.getDom(),i=0;i<this.items.length;i++)this.items[i].postRender();t.makeUnselectable(e)},_onMouseDown:function(e){if(e=(e=e.target||e.srcElement)&&e.tagName&&e.tagName.toLowerCase(),"input"==e||"object"==e||"object"==e)return!1}},e.inherits(n,i)}(),function(){var e=s.editor.utils,t=s.editor.dom.domUtils,i=s.editor.ui.uiUtils,n=s.editor.ui.UIBase,o=s.editor.ui.Popup,a=s.editor.ui.Stateful,r=s.editor.ui.CellAlignPicker,l=s.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},d={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};l.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];"-"==t?this.items[e]=this.getSeparator():t instanceof c||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return d},createItem:function(e){return e.menu=this,new c(e)},_Popup_getContentHtmlTpl:o.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:o.prototype.postRender,postRender:function(){for(var e=this,n=0;n<this.items.length;n++){var s=this.items[n];s.ownerMenu=this,s.postRender()}t.on(this.getDom(),"mouseover",function(t){t=t||event,t=t.relatedTarget||t.fromElement;var n=e.getDom();i.contains(n,t)||n===t||e.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(i.contains(this.getDom(),e))return!1;for(var t=0;t<this.items.length;t++)if(!1===this.items[t].queryAutoHide(e))return!1}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&t.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},e.inherits(l,o);var c=s.editor.ui.MenuItem=function(e){if(this.initOptions(e),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof l))if(e.className&&-1!=e.className.indexOf("aligntd")){var i=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new o({content:new r(this.subMenu),parentMenu:i,editor:i.editor,destroy:function(){this.getDom()&&t.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){t.on(this.getDom(),"mouseover",function(){i.addState("opened")})})}else this.subMenu=new l(this.subMenu)};c.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var e=this;this.addListener("over",function(){e.ownerMenu.fireEvent("submenuover",e),e.subMenu&&e.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){e.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(e._closingTimer),e._closingTimer=null,e.addState("opened")}),this.ownerMenu.addListener("hide",function(){e.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(t,i){i!==e&&e.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(t){return(!t||!i.contains(e.getDom(),t))&&this._bakQueryAutoHide(t)}),this.getDom().style.tabIndex="-1",i.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){
e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(e)},_onClick:function(e,t){this.hasState("disabled")||!1!==this.fireEvent("click",e,t)&&(this.subMenu?this.showSubMenu():o.postHide(e))},showSubMenu:function(){var e=i.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},e.inherits(c,n),e.extend(c.prototype,a,!0)}(),function(){var e=s.editor.utils,t=s.editor.ui.uiUtils,i=s.editor.ui.Menu,n=s.editor.ui.SplitButton,o=s.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()};o.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var n=this.items[t];n.uiName="listitem",n.index=t,n.onclick=function(){e.selectByIndex(this.index)}}this.popup=new i({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:n.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=t.getClientRect(this.getDom());e.top+=1,e.bottom-=1,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);-1!=t?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.value=this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),this.value=e)},setLabel:function(e){this.label=this.getDom("button_body").innerHTML=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){e<this.items.length&&!1!==this.fireEvent("select",e)&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},e.inherits(o,n)}(),function(){var e,t,i,n=s.editor.utils,o=s.editor.dom.domUtils,a=s.editor.ui.uiUtils,r=s.editor.ui.Mask,l=s.editor.ui.UIBase,d=s.editor.ui.Button,c=s.editor.ui.Dialog=function(e){if(e.name){var t=e.name,i=e.cssRules;e.className||(e.className="edui-for-"+t),i&&(e.cssRules=".edui-default .edui-for-"+t+" .edui-dialog-content  {"+i+"}")}this.initOptions(n.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},e)),this.initDialog()};c.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var s=this,o=this.editor.options.theme;if(this.cssRules&&n.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=e||(e=new r({className:"edui-dialog-modalmask",theme:o,onclick:function(){i&&i.close(!1)}})),this.dragMask=t||(t=new r({className:"edui-dialog-dragmask",theme:o})),this.closeButton=new d({className:"edui-dialog-closebutton",title:s.closeDialog,theme:o,onclick:function(){s.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(o=0;o<this.buttons.length;o++)this.buttons[o]instanceof d||(this.buttons[o]=new d(n.extend(this.buttons[o],{editor:this.editor},!0)))},initResizeEvent:function(){var e=this;o.on(window,"resize",function(){e._hidden||void 0===e._hidden||(e.__resizeTimer&&window.clearTimeout(e.__resizeTimer),e.__resizeTimer=window.setTimeout(function(){e.__resizeTimer=null;var t=e.getDom(),i=e.getDom("content"),n=UE.ui.uiUtils.getClientRect(t),s=UE.ui.uiUtils.getClientRect(i),o=a.getViewportRect();i.style.width=o.width-n.width+s.width+"px",i.style.height=o.height-n.height+s.height+"px",t.style.width=o.width+"px",t.style.height=o.height+"px",e.fireEvent("resize")},100))})},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this.getDom(),i=a.getViewportRect(),n=a.getClientRect(t),s=e.left;s+n.width>i.right&&(s=i.right-n.width),e=e.top,e+n.height>i.bottom&&(e=i.bottom-n.height),t.style.left=Math.max(s,0)+"px",t.style.top=Math.max(e,0)+"px"},showAtCenter:function(){var e=a.getViewportRect();if(this.fullscreen){var t=this.getDom(),i=this.getDom("content");t.style.display="block";var n=UE.ui.uiUtils.getClientRect(t),s=UE.ui.uiUtils.getClientRect(i);t.style.left="-100000px",i.style.width=e.width-n.width+s.width+"px",i.style.height=e.height-n.height+s.height+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}else this.getDom().style.display="",i=this.fitSize(),n=0|this.getDom("titlebar").offsetHeight,t=e.width/2-i.width/2,e=e.height/2-(i.height-n)/2-n,i=this.getDom(),this.safeSetOffset({left:Math.max(0|t,0),top:Math.max(0|e,0)}),o.hasClass(i,"edui-state-centered")||(i.className+=" edui-state-centered");this._show()},getContentHtml:function(){var e="";return"string"==typeof this.content?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){for(var e=[],t=0;t<this.buttons.length;t++)e[t]=this.buttons[t].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+e.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;if(this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()}),this.buttons)for(var t=0;t<this.buttons.length;t++)this.buttons[t].postRender();o.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(a.getClientRect(e.getDom()))})}),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=a.getClientRect(this.getDom("content")).width;return e.style.width=t,a.getClientRect(e)},_onTitlebarMouseDown:function(e,t){if(this.draggable){var i;a.getViewportRect();var n=this;a.startDrag(e,{ondragstart:function(){i=a.getClientRect(n.getDom()),n.getDom("contmask").style.visibility="visible",n.dragMask.show(n.getDom().style.zIndex-1)},ondragmove:function(e,t){n.safeSetOffset({left:i.left+e,top:i.top+t})},ondragstop:function(){n.getDom("contmask").style.visibility="hidden",o.removeClasses(n.getDom(),["edui-state-centered"]),n.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),s.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none",e.style.zIndex="",e.style.width="",e.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(e){}i=this},_onCloseButtonClick:function(e,t){this.close(!1)},close:function(e){if(!1!==this.fireEvent("close",e)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide(),e=this.getDom("content");var t=this.getDom("iframe");e&&t&&((t=t.contentDocument||t.contentWindow.document)&&(t.body.innerHTML=""),o.remove(e))}}},n.inherits(c,l)}(),function(){var e=s.editor.utils,t=s.editor.ui.Menu,i=s.editor.ui.SplitButton,n=s.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()};n.prototype={initMenuButton:function(){var e=this;this.uiName="menubutton",this.popup=new t({items:e.items,className:e.className,editor:e.editor}),this.popup.addListener("show",function(){for(var t=0;t<this.items.length;t++)this.items[t].removeState("checked"),this.items[t].value==e._value&&(this.items[t].addState("checked"),this.value=e._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},e.inherits(n,i)}(),function(){var e=s.editor.utils,t=s.editor.ui.Popup,i=s.editor.ui.SplitButton,n=s.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()};n.prototype={initMultiMenu:function(){var e=this;this.popup=new t({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*e.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},e.inherits(n,i)}(),function(){function e(e){if(!l.findParent(e.target||e.srcElement,function(e){return l.hasClass(e,"edui-shortcutmenu")||l.hasClass(e,"edui-popup")},!0)){e=0;for(var t;t=d[e++];)t.hide()}}var t,i=s.editor.ui,n=i.UIBase,o=i.uiUtils,a=s.editor.utils,l=s.editor.dom.domUtils,d=[],c=!1,h=i.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};h.postHide=e,h.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),d.push(this)},initEvent:function(){var e=this,i=e.editor.document;l.on(i,"mousemove",function(i){if(!1===e.isHidden&&!e.getSubMenuMark()&&"contextmenu"!=e.eventType){var n=!0,s=e.getDom(),o=s.offsetWidth/2+e.SPACE,a=s.offsetHeight/2,r=Math.abs(i.screenX-e.left),l=Math.abs(i.screenY-e.top);clearTimeout(t),t=setTimeout(function(){0<l&&l<a?e.setOpacity(s,"1"):l>a&&l<a+70?(e.setOpacity(s,"0.5"),n=!1):l>a+70&&l<a+140&&e.hide(),n&&0<r&&r<o?e.setOpacity(s,"1"):r>o&&r<o+70?e.setOpacity(s,"0.5"):r>o+70&&r<o+140&&e.hide()})}}),r.chrome&&l.on(i,"mouseout",function(t){t=t.relatedTarget||t.toElement,null!=t&&"HTML"!=t.tagName||e.hide()}),e.editor.addListener("afterhidepop",function(){e.isHidden||(c=!0)})},initItems:function(){if(a.isArray(this.items))for(var e=0,t=this.items.length;e<t;e++){var n=this.items[e].toLowerCase();i[n]&&(this.items[e]=new i[n](this.editor),this.items[e].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){r.ie&&9>r.version?e.style.filter="alpha(opacity = "+100*parseFloat(t)+");":e.style.opacity=t},getSubMenuMark:function(){c=!1;for(var e,t=o.getFixedLayer(),t=l.getElementsByTagName(t,"div",function(e){return l.hasClass(e,"edui-shortcutsubmenu edui-popup")}),i=0;e=t[i++];)"none"!=e.style.display&&(c=!0);return c},show:function(e,t){function i(e){0>e.left&&(e.left=0),0>e.top&&(e.top=0),a.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function n(e){e.tagName||(e=e.getDom()),s.left=parseInt(e.style.left),s.top=parseInt(e.style.top),s.top-=a.offsetHeight+15,i(s)}var s={},a=this.getDom(),r=o.getFixedLayer();if(this.eventType=e.type,a.style.cssText="display:block;left:-9999px","contextmenu"==e.type&&t){var d=l.getElementsByTagName(r,"div","edui-contextmenu")[0];d?n(d):this.editor.addListener("aftershowcontextmenu",function(e,t){n(t)})}else s=o.getViewportOffsetByEvent(e),s.top-=a.offsetHeight+this.SPACE,s.left+=this.SPACE+20,i(s),this.setOpacity(a,.2);this.isHidden=!1,this.left=e.screenX+a.offsetWidth/2-this.SPACE,this.top=e.screenY-a.offsetHeight/2-this.SPACE,this.editor&&(a.style.zIndex=1*this.editor.container.style.zIndex+10,r.style.zIndex=a.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(a.isArray(this.items))for(var e,t=0;e=this.items[t++];)e.postRender()},getHtmlTpl:function(){var e;if(a.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},a.inherits(h,n),l.on(document,"mousedown",function(t){e(t)}),l.on(window,"scroll",function(t){e(t)})}(),function(){var e=s.editor.utils,t=s.editor.ui.UIBase,i=s.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()};i.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},e.inherits(i,t)}(),function(){var e=s.editor.utils,t=s.editor.dom.domUtils,i=s.editor.ui.UIBase,n=s.editor.ui.Message=function(e){this.initOptions(e),this.initMessage()};n.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(e){var t=this;e.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)),void 0!==e.content&&t.setContent(e.content),void 0!==e.type&&t.setType(e.type),t.show()},postRender:function(){var e=this,i=this.getDom("closer");i&&t.on(i,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e))}},e.inherits(n,i)}(),function(){var e=s.editor.utils,t=s.editor.ui,i=t.Dialog;t.buttons={},t.Dialog=function(e){var t=new i(e);return t.addListener("hide",function(){if(t.editor){var e=t.editor;try{if(r.gecko){var i=e.window.scrollY,n=e.window.scrollX;e.body.focus(),e.window.scrollTo(n,i)}else e.focus()}catch(e){}}}),t};for(var n,o={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},a="undo redo formatmatch bold italic underline fontborder touppercase tolowercase strikethrough subscript superscript source indent outdent blockquote pasteplain pagebreak selectall print horizontal removeformat time date unlink insertparagraphbeforetable insertrow insertcol mergeright mergedown deleterow deletecol splittorows splittocols splittocells mergecells deletetable drafts".split(" "),l=0;n=a[l++];)n=n.toLowerCase(),t[n]=function(e){return function(i){var n=new t.Button({className:"edui-for-"+e,title:i.options.labelMap[e]||i.getLang("labelMap."+e)||"",onclick:function(){i.execCommand(e)},theme:i.options.theme,showText:!1});return t.buttons[e]=n,i.addListener("selectionchange",function(t,s,o){t=i.queryCommandState(e),-1==t?(n.setDisabled(!0),n.setChecked(!1)):o||(n.setDisabled(!1),n.setChecked(t))}),n}}(n);t.cleardoc=function(e){var i=new t.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"))&&e.execCommand("cleardoc")}});return t.buttons.cleardoc=i,e.addListener("selectionchange",function(){i.setDisabled(-1==e.queryCommandState("cleardoc"))}),i};var d,a={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(d in a)(function(e,i){for(var n,s=0;n=i[s++];)(function(i){t[e.replace("float","")+i]=function(n){var s=new t.Button({className:"edui-for-"+e.replace("float","")+i,title:n.options.labelMap[e.replace("float","")+i]||n.getLang("labelMap."+e.replace("float","")+i)||"",theme:n.options.theme,onclick:function(){n.execCommand(e,i)}});return t.buttons[e]=s,n.addListener("selectionchange",function(t,o,a){s.setDisabled(-1==n.queryCommandState(e)),s.setChecked(n.queryCommandValue(e)==i&&!a)}),s}})(n)})(d,a[d]);for(l=0;n=["backcolor","forecolor"][l++];)t[n]=function(e){return function(i){var n=new t.ColorButton({className:"edui-for-"+e,color:"default",title:i.options.labelMap[e]||i.getLang("labelMap."+e)||"",editor:i,onpickcolor:function(t,n){i.execCommand(e,n)},onpicknocolor:function(){i.execCommand(e,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){i.execCommand(e,this.color)}});return t.buttons[e]=n,i.addListener("selectionchange",function(){n.setDisabled(-1==i.queryCommandState(e))}),n}}(n);a={noOk:["searchreplace","help","spechars","webapp","preview"],ok:"attachment anchor link insertimage map gmap insertframe wordimage insertvideo insertframe edittip edittable edittd scrawl template music background charts".split(" ")};for(d in a)(function(i,n){for(var s,a=0;s=n[a++];)r.opera&&"searchreplace"===s||function(n){t[n]=function(s,a,r){a=a||(s.options.iframeUrlMap||{})[n]||o[n],r=s.options.labelMap[n]||s.getLang("labelMap."+n)||"";var l;a&&(l=new t.Dialog(e.extend({iframeUrl:s.ui.mapUrl(a),editor:s,className:"edui-for-"+n,title:r,holdScroll:"insertimage"===n,fullscreen:/charts|preview/.test(n),closeDialog:s.getLang("closeDialog")},"ok"==i?{buttons:[{className:"edui-okbutton",label:s.getLang("ok"),editor:s,onclick:function(){l.close(!0)}},{className:"edui-cancelbutton",label:s.getLang("cancel"),editor:s,onclick:function(){l.close(!1)}}]}:{})),s.ui._dialogs[n+"Dialog"]=l);var d=new t.Button({className:"edui-for-"+n,title:r,onclick:function(){if(l)switch(n){case"wordimage":var e=s.execCommand("wordimage");e&&e.length&&(l.render(),l.open());break;case"scrawl":-1!=s.queryCommandState("scrawl")&&(l.render(),l.open());break;default:l.render(),l.open()}},theme:s.options.theme,disabled:"scrawl"==n&&-1==s.queryCommandState("scrawl")||"charts"==n});return t.buttons[n]=d,s.addListener("selectionchange",function(){if(!(n in{edittable:1})){var e=s.queryCommandState(n);d.getDom()&&(d.setDisabled(-1==e),d.setChecked(e))}}),d}}(s.toLowerCase())})(d,a[d]);for(t.snapscreen=function(e,i,n){n=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var s=new t.Button({className:"edui-for-snapscreen",title:n,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});if(t.buttons.snapscreen=s,i=i||(e.options.iframeUrlMap||{}).snapscreen||o.snapscreen){var a=new t.Dialog({iframeUrl:e.ui.mapUrl(i),editor:e,className:"edui-for-snapscreen",title:n,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){a.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){a.close(!1)}}]});a.render(),e.ui._dialogs.snapscreenDialog=a}return e.addListener("selectionchange",function(){s.setDisabled(-1==e.queryCommandState("snapscreen"))}),s},t.insertcode=function(i,n,s){n=i.options.insertcode||[],s=i.options.labelMap.insertcode||i.getLang("labelMap.insertcode")||"";var o=[];e.each(n,function(e,t){o.push({label:e,value:t,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var a=new t.Combox({editor:i,items:o,onselect:function(e,t){i.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:s,initValue:s,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t,i=0;t=this.items[i];i++)if(-1!=t.value.indexOf(e))return i;return-1}});return t.buttons.insertcode=a,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("insertcode")?a.setDisabled(!0):(a.setDisabled(!1),(e=i.queryCommandValue("insertcode"))?(e&&(e=e.replace(/['"]/g,"").split(",")[0]),a.setValue(e)):a.setValue(s)))}),a},t.fontfamily=function(i,n,s){if(n=i.options.fontfamily||[],s=i.options.labelMap.fontfamily||i.getLang("labelMap.fontfamily")||"",n.length){for(var o,a=0,r=[];o=n[a];a++){var l=i.getLang("fontfamily")[o.name]||"";!function(t,n){r.push({label:t,value:n,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+e.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}(o.label||l,o.val)}var d=new t.Combox({editor:i,items:r,onselect:function(e,t){i.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:s,initValue:s,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t,i=0;t=this.items[i];i++)if(-1!=t.value.indexOf(e))return i;return-1}});return t.buttons.fontfamily=d,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("FontFamily")?d.setDisabled(!0):(d.setDisabled(!1),(e=i.queryCommandValue("FontFamily"))&&(e=e.replace(/['"]/g,"").split(",")[0]),d.setValue(e)))}),d}},t.fontsize=function(e,i,n){if(n=e.options.labelMap.fontsize||e.getLang("labelMap.fontsize")||"",i=i||e.options.fontsize||[],i.length){for(var s=[],o=0;o<i.length;o++){var a=i[o]+"px";s.push({label:a,value:a,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var r=new t.Combox({editor:e,items:s,title:n,initValue:n,onselect:function(t,i){e.execCommand("FontSize",this.items[i].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return t.buttons.fontsize=r,e.addListener("selectionchange",function(t,i,n){n||(-1==e.queryCommandState("FontSize")?r.setDisabled(!0):(r.setDisabled(!1),r.setValue(e.queryCommandValue("FontSize"))))}),r}},t.paragraph=function(i,n,s){if(s=i.options.labelMap.paragraph||i.getLang("labelMap.paragraph")||"",n=i.options.paragraph||[],!e.isEmptyObject(n)){var o,a=[];for(o in n)a.push({value:o,label:n[o]||i.getLang("paragraph")[o],theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var r=new t.Combox({editor:i,items:a,title:s,initValue:s,className:"edui-for-paragraph",onselect:function(e,t){i.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});return t.buttons.paragraph=r,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("Paragraph")?r.setDisabled(!0):(r.setDisabled(!1),e=i.queryCommandValue("Paragraph"),-1!=r.indexByValue(e)?r.setValue(e):r.setValue(r.initValue)))}),r}},t.customstyle=function(e){var i=e.options.customstyle||[],n=e.options.labelMap.customstyle||e.getLang("labelMap.customstyle")||"";if(i.length){for(var s,o=e.getLang("customstyle"),a=0,r=[];s=i[a++];)(function(t){var i={};i.label=t.label?t.label:o[t.name],i.style=t.style,i.className=t.className,i.tag=t.tag,r.push({label:i.label,value:i,theme:e.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+i.tag+" "+(i.className?' class="'+i.className+'"':"")+(i.style?' style="'+i.style+'"':"")+">"+i.label+"</"+i.tag+"></div>"}})})(s);var l=new t.Combox({editor:e,items:r,title:n,initValue:n,className:"edui-for-customstyle",onselect:function(t,i){e.execCommand("customstyle",this.items[i].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t,i=0;t=this.items[i++];)if(t.label==e)return i-1;return-1}});return t.buttons.customstyle=l,e.addListener("selectionchange",function(t,i,n){n||(-1==e.queryCommandState("customstyle")?l.setDisabled(!0):(l.setDisabled(!1),t=e.queryCommandValue("customstyle"),-1!=l.indexByValue(t)?l.setValue(t):l.setValue(l.initValue)))}),l}},t.inserttable=function(e,i,n){n=e.options.labelMap.inserttable||e.getLang("labelMap.inserttable")||"";var s=new t.TableButton({editor:e,title:n,className:"edui-for-inserttable",onpicktable:function(t,i,n){e.execCommand("InsertTable",{numRows:n,numCols:i,border:1})},onbuttonclick:function(){this.showPopup()}});return t.buttons.inserttable=s,e.addListener("selectionchange",function(){s.setDisabled(-1==e.queryCommandState("inserttable"))}),s},t.lineheight=function(e){var i=e.options.lineheight||[];if(i.length){for(var n,s=0,o=[];n=i[s++];)o.push({label:n,value:n,theme:e.options.theme,onclick:function(){e.execCommand("lineheight",this.value)}});var a=new t.MenuButton({editor:e,className:"edui-for-lineheight",title:e.options.labelMap.lineheight||e.getLang("labelMap.lineheight")||"",items:o,onbuttonclick:function(){var t=e.queryCommandValue("LineHeight")||this.value;e.execCommand("LineHeight",t)}});return t.buttons.lineheight=a,e.addListener("selectionchange",function(){var t=e.queryCommandState("LineHeight");if(-1==t)a.setDisabled(!0);else{a.setDisabled(!1);var i=e.queryCommandValue("LineHeight");i&&a.setValue((i+"").replace(/cm/,"")),a.setChecked(t)}}),a}},d=["top","bottom"],a=0;l=d[a++];)(function(e){t["rowspacing"+e]=function(i){var n=i.options["rowspacing"+e]||[];if(!n.length)return null;for(var s,o=0,a=[];s=n[o++];)a.push({label:s,value:s,theme:i.options.theme,onclick:function(){i.execCommand("rowspacing",this.value,e)}});var r=new t.MenuButton({editor:i,className:"edui-for-rowspacing"+e,title:i.options.labelMap["rowspacing"+e]||i.getLang("labelMap.rowspacing"+e)||"",items:a,onbuttonclick:function(){var t=i.queryCommandValue("rowspacing",e)||this.value;i.execCommand("rowspacing",t,e)}});return t.buttons[e]=r,i.addListener("selectionchange",function(){var t=i.queryCommandState("rowspacing",e);if(-1==t)r.setDisabled(!0);else{r.setDisabled(!1);var n=i.queryCommandValue("rowspacing",e);n&&r.setValue((n+"").replace(/%/,"")),r.setChecked(t)}}),r}})(l);for(d=["insertorderedlist","insertunorderedlist"],a=0;l=d[a++];)(function(e){t[e]=function(i){var n,s=i.options[e],o=function(){i.execCommand(e,this.value)},a=[];for(n in s)a.push({label:s[n]||i.getLang()[e][n]||"",value:n,theme:i.options.theme,onclick:o});var r=new t.MenuButton({editor:i,className:"edui-for-"+e,title:i.getLang("labelMap."+e)||"",items:a,onbuttonclick:function(){var t=i.queryCommandValue(e)||this.value;i.execCommand(e,t)}});return t.buttons[e]=r,i.addListener("selectionchange",function(){var t=i.queryCommandState(e);if(-1==t)r.setDisabled(!0);else{r.setDisabled(!1);var n=i.queryCommandValue(e);r.setValue(n),r.setChecked(t)}}),r}})(l);t.fullscreen=function(e,i){i=e.options.labelMap.fullscreen||e.getLang("labelMap.fullscreen")||"";var n=new t.Button({className:"edui-for-fullscreen",title:i,theme:e.options.theme,onclick:function(){e.ui&&e.ui.setFullScreen(!e.ui.isFullScreen()),this.setChecked(e.ui.isFullScreen())}});return t.buttons.fullscreen=n,e.addListener("selectionchange",function(){var t=e.queryCommandState("fullscreen");n.setDisabled(-1==t),n.setChecked(e.ui.isFullScreen())}),n},t.emotion=function(e,i){var n=new t.MultiMenuPop({title:e.options.labelMap.emotion||e.getLang("labelMap.emotion")||"",editor:e,className:"edui-for-emotion",iframeUrl:e.ui.mapUrl(i||(e.options.iframeUrlMap||{}).emotion||o.emotion)});return t.buttons.emotion=n,e.addListener("selectionchange",function(){n.setDisabled(-1==e.queryCommandState("emotion"))}),n},t.autotypeset=function(e){var i=new t.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return t.buttons.autotypeset=i,e.addListener("selectionchange",function(){i.setDisabled(-1==e.queryCommandState("autotypeset"))}),i},t.simpleupload=function(e){var i=new t.Button({className:"edui-for-simpleupload",title:e.options.labelMap.simpleupload||e.getLang("labelMap.simpleupload")||"",onclick:function(){},theme:e.options.theme,showText:!1});return t.buttons.simpleupload=i,e.addListener("ready",function(){var t=i.getDom("body").children[0];e.fireEvent("simpleuploadbtnready",t)}),e.addListener("selectionchange",function(t,n,s){t=e.queryCommandState("simpleupload"),-1==t?(i.setDisabled(!0),i.setChecked(!1)):s||(i.setDisabled(!1),i.setChecked(t))}),i}}(),function(){function e(e){this.initOptions(e),this.initEditorUI()}var t=s.editor.utils,i=s.editor.ui.uiUtils,n=s.editor.ui.UIBase,o=s.editor.dom.domUtils,a=[];e.prototype={uiName:"editor",initEditorUI:function(){function e(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var i=e.options,n=i.maximumWords,s=i.wordCountMsg,o=i.wordOverFlowMsg,a=t.getDom("wordcount");i.wordCount&&(i=e.getContentLength(!0),i>n?(a.innerHTML=o,e.fireEvent("wordcountoverflow")):a.innerHTML=s.replace("{#leave}",n-i).replace("{#count}",i))}this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var t=this.editor,i=this;t.addListener("ready",function(){t.getDialog=function(e){return t.ui._dialogs[e+"Dialog"]},o.on(t.window,"scroll",function(e){s.editor.ui.Popup.postHide(e)}),t.ui._actualFrameWidth=t.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&t.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),t.options.elementPathEnabled&&(t.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+t.getLang("elementPathTip")+":</div>"),t.options.wordCount&&(o.on(t.document,"click",function(){e(t,i),o.un(t.document,"click",arguments.callee)}),t.ui.getDom("wordcount").innerHTML=t.getLang("wordCountTip")),t.ui._scale(),t.options.scaleEnabled?(t.autoHeightEnabled&&t.disableAutoHeight(),i.enableScale()):i.disableScale(),t.options.elementPathEnabled||t.options.wordCount||t.options.scaleEnabled||(t.ui.getDom("elementpath").style.display="none",t.ui.getDom("wordcount").style.display="none",t.ui.getDom("scale").style.display="none"),
t.selection.isFocus()&&t.fireEvent("selectionchange",!1,!0)}),t.addListener("mousedown",function(e,t){s.editor.ui.Popup.postHide(t,t.target||t.srcElement),s.editor.ui.ShortCutMenu.postHide(t)}),t.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(t),t.getDialog("edittip").open()});var n,a,r=!1;t.addListener("afterpaste",function(){t.queryCommandState("pasteplain")||(s.editor.ui.PastePicker&&(n=new s.editor.ui.Popup({content:new s.editor.ui.PastePicker({editor:t}),editor:t,className:"edui-wordpastepop"}),n.render()),r=!0)}),t.addListener("afterinserthtml",function(){clearTimeout(a),a=setTimeout(function(){if(n&&(r||t.ui._isTransfer)){if(n.isHidden()){var e=o.createElement(t.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});t.selection.getRange().insertNode(e);var i=X(e,"firstChild","previousSibling");i&&n.showAnchor(3==i.nodeType?i.parentNode:i),o.remove(e)}else n.show();delete t.ui._isTransfer,r=!1}},200)}),t.addListener("contextmenu",function(e,t){s.editor.ui.Popup.postHide(t)}),t.addListener("keydown",function(e,t){n&&n.dispose(t);var i=t.keyCode||t.which;t.altKey&&90==i&&UE.ui.buttons.fullscreen.onclick()}),t.addListener("wordcount",function(t){e(this,i)}),t.addListener("selectionchange",function(){t.options.elementPathEnabled&&i[(-1==t.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),t.options.scaleEnabled&&i[(-1==t.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var l=new s.editor.ui.Popup({editor:t,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),t.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(e){this.hide(),t.ui._dialogs[e]&&t.ui._dialogs[e].open()},_onImgSetFloat:function(e){this.hide(),t.execCommand("imagefloat",e)},_setIframeAlign:function(e){var t=l.anchorEl,i=t.cloneNode(!0);switch(e){case-2:i.setAttribute("align","");break;case-1:i.setAttribute("align","left");break;case 1:i.setAttribute("align","right")}t.parentNode.insertBefore(i,t),o.remove(t),l.anchorEl=i,l.showAnchor(l.anchorEl)},_updateIframe:function(){var e=t._iframe=l.anchorEl;o.hasClass(e,"ueditor_baidumap")?(t.selection.getRange().selectNode(e).select(),t.ui._dialogs.mapDialog.open()):t.ui._dialogs.insertframeDialog.open(),l.hide()},_onRemoveButtonClick:function(e){t.execCommand(e),this.hide()},queryAutoHide:function(e){return e&&e.ownerDocument==t.document&&("img"==e.tagName.toLowerCase()||o.findParentByTagName(e,"a",!0))?e!==l.anchorEl:s.editor.ui.Popup.prototype.queryAutoHide.call(this,e)}});l.render(),t.options.imagePopup&&(t.addListener("mouseover",function(e,i){i=i||window.event;var n=i.target||i.srcElement;if(t.ui._dialogs.insertframeDialog&&/iframe/gi.test(n.tagName)){var s=l.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+t.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>");s?(l.getDom("content").innerHTML=s,l.anchorEl=n,l.showAnchor(l.anchorEl)):l.hide()}}),t.addListener("selectionchange",function(e,i){if(i){var n="",s="",a=t.selection.getRange().getClosedNode(),s=t.ui._dialogs;if(a&&"IMG"==a.tagName){var r="insertimageDialog";if(-1==a.className.indexOf("edui-faked-video")&&-1==a.className.indexOf("edui-upload-video")||(r="insertvideoDialog"),-1!=a.className.indexOf("edui-faked-webapp")&&(r="webappDialog"),-1!=a.src.indexOf("http://api.map.baidu.com")&&(r="mapDialog"),-1!=a.className.indexOf("edui-faked-music")&&(r="musicDialog"),-1!=a.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(r="gmapDialog"),a.getAttribute("anchorname")&&(r="anchorDialog",n=l.formatHtml("<nobr>"+t.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+t.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+t.getLang("delete")+"</span></nobr>")),a.getAttribute("word_img")&&(t.word_img=[a.getAttribute("word_img")],r="wordimageDialog"),(o.hasClass(a,"loadingclass")||o.hasClass(a,"loaderrorclass"))&&(r=""),!s[r])return;s="<nobr>"+t.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+t.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+t.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+t.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+t.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+r+'\');" class="edui-clickable">'+t.getLang("modify")+"</span></nobr>",!n&&(n=l.formatHtml(s))}if(t.ui._dialogs.linkDialog){var d,c=t.queryCommandValue("link");c&&(d=c.getAttribute("_href")||c.getAttribute("href",2))&&(s=d,30<d.length&&(s=d.substring(0,20)+"..."),n&&(n+='<div style="height:5px;"></div>'),n+=l.formatHtml("<nobr>"+t.getLang("anthorMsg")+': <a target="_blank" href="'+d+'" title="'+d+'" >'+s+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+t.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+t.getLang("clear")+"</span></nobr>"),l.showAnchor(c))}n?(l.getDom("content").innerHTML=n,l.anchorEl=a||c,l.showAnchor(l.anchorEl)):l.hide()}}))},_initToolbars:function(){for(var e=this.editor,i=this.toolbars||[],n=[],o=0;o<i.length;o++){for(var a=i[o],r=new s.editor.ui.Toolbar({theme:e.options.theme}),l=0;l<a.length;l++){var d=a[l],c=null;if("string"==typeof d){if(d=d.toLowerCase(),"|"==d&&(d="Separator"),"||"==d&&(d="Breakline"),s.editor.ui[d]&&(c=new s.editor.ui[d](e)),"fullscreen"==d){n&&n[0]?n[0].items.splice(0,0,c):c&&r.items.splice(0,0,c);continue}}else c=d;c&&c.id&&r.add(c)}n[o]=r}t.each(UE._customizeUI,function(t,i){var n,s;return(!t.id||t.id==e.key)&&void((n=t.execFn.call(e,e,i))&&(s=t.index,void 0===s&&(s=r.items.length),r.add(n,s)))}),this.toolbars=n},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var e=[],t=0;t<this.toolbars.length;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var t=this.editor,i=t.container.parentNode.parentNode;if(this._fullscreen!=e){if(this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e),s.editor.browser.gecko)var n=t.selection.getRange().createBookmark();if(e){for(;"BODY"!=i.tagName;){var o=s.editor.dom.domUtils.getComputedStyle(i,"position");a.push(o),i.style.position="static",i=i.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=t.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(t.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,t.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=i.tagName;)i.style.position=a.shift(),i=i.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(t.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,t.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(r.gecko&&"true"===t.body.contentEditable){var l=document.createElement("input");document.body.appendChild(l),t.body.contentEditable=!1,setTimeout(function(){l.focus(),setTimeout(function(){t.body.contentEditable=!0,t.fireEvent("fullscreenchanged",e),t.selection.getRange().moveToBookmark(n).select(!0),s.editor.dom.domUtils.remove(l),e&&window.scroll(0,0)},0)},0)}"true"===t.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=i.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),i.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),r.gecko)try{window.onresize()}catch(e){}}},_updateElementPath:function(){var e,t=this.getDom("elementpath");if(this.elementPathEnabled&&(e=this.editor.queryCommandValue("elementpath"))){for(var i,n=[],s=0;i=e[s];s++)n[s]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+s+'&quot;);">'+i+"</span>");t.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else t.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function e(){m=o.getXY(l),g||(g=a.options.minFrameHeight+c.offsetHeight+h.offsetHeight),f.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+l.offsetWidth+"px;height:"+l.offsetHeight+"px;z-index:"+(a.options.zIndex+1),o.on(s,"mousemove",t),o.on(d,"mouseup",i),o.on(s,"mouseup",i)}function t(e){n(),e=e||window.event,y=e.pageX||s.documentElement.scrollLeft+e.clientX,b=e.pageY||s.documentElement.scrollTop+e.clientY,x=y-m.x,w=b-m.y,x>=v&&(p=!0,f.style.width=x+"px"),w>=g&&(p=!0,f.style.height=w+"px")}function i(){p&&(p=!1,a.ui._actualFrameWidth=f.offsetWidth-2,l.style.width=a.ui._actualFrameWidth+"px",a.setHeight(f.offsetHeight-h.offsetHeight-c.offsetHeight-2,!0)),f&&(f.style.display="none"),n(),o.un(s,"mousemove",t),o.un(d,"mouseup",i),o.un(s,"mouseup",i)}function n(){r.ie?s.selection.clear():window.getSelection().removeAllRanges()}var s=document,a=this.editor,l=a.container,d=a.document,c=this.getDom("toolbarbox"),h=this.getDom("bottombar"),u=this.getDom("scale"),f=this.getDom("scalelayer"),p=!1,m=null,g=0,v=a.options.minFrameWidth,y=0,b=0,x=0,w=0,C=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)C.disableScale();else if(C.editor.options.scaleEnabled){C.enableScale();var i=C.editor.document.createElement("span");C.editor.body.appendChild(i),C.editor.body.style.height=Math.max(o.getXY(i).y,C.editor.iframe.offsetHeight-20)+"px",o.remove(i)}}),this.enableScale=function(){1!=a.queryCommandState("source")&&(u.style.display="",this.scaleEnabled=!0,o.on(u,"mousedown",e))},this.disableScale=function(){u.style.display="none",this.scaleEnabled=!1,o.un(u,"mousedown",e)}},isFullScreen:function(){return this._fullscreen},postRender:function(){n.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].postRender();var t,i=this,o=s.editor.dom.domUtils,a=function(){clearTimeout(t),t=setTimeout(function(){i._updateFullScreen()})};o.on(window,"resize",a),i.addListener("destroy",function(){o.un(window,"resize",a),clearTimeout(t)})},showToolbarMsg:function(e,t){this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="",t||(this.getDom("upload_dialog").style.display="none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom="1"==e.style.zoom?"100%":"1"}},t.inherits(e,s.editor.ui.UIBase);var l={};UE.ui.Editor=function(i){var n=new UE.Editor(i);n.options.editor=n,t.loadFile(document,{href:n.options.themePath+n.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var s=n.render;return n.render=function(i){i.constructor===String&&(n.key=i,l[i]=n),t.domReady(function(){function t(){if(n.setOpt({labelMap:n.options.labelMap||n.getLang("labelMap")}),new e(n.options),i&&(i.constructor===String&&(i=document.getElementById(i)),i&&i.getAttribute("name")&&(n.options.textarea=i.getAttribute("name")),i&&/script|textarea/gi.test(i.tagName))){var t=document.createElement("div");i.parentNode.insertBefore(t,i);var a=i.value||i.innerHTML;n.options.initialContent=/^[\t\r\n ]*$/.test(a)?n.options.initialContent:a.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),i.className&&(t.className=i.className),i.style.cssText&&(t.style.cssText=i.style.cssText),/textarea/i.test(i.tagName)?(n.textarea=i,n.textarea.style.display="none"):i.parentNode.removeChild(i),i.id&&(t.id=i.id,o.removeAttributes(i,"id")),i=t,i.innerHTML=""}o.addClass(i,"edui-"+n.options.theme),n.ui.render(i),t=n.options,n.container=n.ui.getDom();for(var r,a=o.findParents(i,!0),l=[],d=0;r=a[d];d++)l[d]=r.style.display,r.style.display="block";for(t.initialFrameWidth?t.minFrameWidth=t.initialFrameWidth:(t.minFrameWidth=t.initialFrameWidth=i.offsetWidth,d=i.style.width,/%$/.test(d)&&(t.initialFrameWidth=d)),t.initialFrameHeight?t.minFrameHeight=t.initialFrameHeight:t.initialFrameHeight=t.minFrameHeight=i.offsetHeight,d=0;r=a[d];d++)r.style.display=l[d];i.style.height&&(i.style.height=""),n.container.style.width=t.initialFrameWidth+(/%$/.test(t.initialFrameWidth)?"":"px"),n.container.style.zIndex=t.zIndex,s.call(n,n.ui.getDom("iframeholder")),n.fireEvent("afteruiready")}n.langIsReady?t():n.addListener("langReady",t)})},n},UE.getEditor=function(e,t){var i=l[e];return i||(i=l[e]=new UE.ui.Editor(t),i.render(e)),i},UE.delEditor=function(e){var t;(t=l[e])&&(t.key&&t.destroy(),delete l[e])},UE.registerUI=function(e,i,n,s){t.each(e.split(/\s+/),function(e){UE._customizeUI[e]={id:s,execFn:i,index:n}})}}(),UE.registerUI("message",function(e){function t(){var e=a.ui.getDom("toolbarbox");e&&(i.style.top=e.offsetHeight+3+"px"),i.style.zIndex=Math.max(a.options.zIndex,a.iframe.style.zIndex)+1}var i,n=s.editor.ui.Message,o=[],a=e;a.addListener("ready",function(){i=document.getElementById(a.ui.id+"_message_holder"),t(),setTimeout(function(){t()},500)}),a.addListener("showmessage",function(e,s){s=p.isString(s)?{content:s}:s;var r=new n({timeout:s.timeout,type:s.type,content:s.content,keepshow:s.keepshow,editor:a}),l=s.id||"msg_"+(+new Date).toString(36);return r.render(i),o[l]=r,r.reset(s),t(),l}),a.addListener("updatemessage",function(e,t,n){n=p.isString(n)?{content:n}:n,e=o[t],e.render(i),e&&e.reset(n)}),a.addListener("hidemessage",function(e,t){var i=o[t];i&&i.hide()})}),UE.registerUI("autosave",function(e){var t=null,i=null;e.on("afterautosave",function(){clearTimeout(t),t=setTimeout(function(){i&&e.trigger("hidemessage",i),i=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})}();